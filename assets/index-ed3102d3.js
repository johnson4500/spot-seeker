function Bw(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var IP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ww={exports:{}},yc={},Hw={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=Symbol.for("react.element"),xP=Symbol.for("react.portal"),PP=Symbol.for("react.fragment"),kP=Symbol.for("react.strict_mode"),bP=Symbol.for("react.profiler"),RP=Symbol.for("react.provider"),LP=Symbol.for("react.context"),NP=Symbol.for("react.forward_ref"),OP=Symbol.for("react.suspense"),AP=Symbol.for("react.memo"),MP=Symbol.for("react.lazy"),Bg=Symbol.iterator;function DP(t){return t===null||typeof t!="object"?null:(t=Bg&&t[Bg]||t["@@iterator"],typeof t=="function"?t:null)}var $w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vw=Object.assign,Zw={};function Xs(t,e,n){this.props=t,this.context=e,this.refs=Zw,this.updater=n||$w}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gw(){}Gw.prototype=Xs.prototype;function kp(t,e,n){this.props=t,this.context=e,this.refs=Zw,this.updater=n||$w}var bp=kp.prototype=new Gw;bp.constructor=kp;Vw(bp,Xs.prototype);bp.isPureReactComponent=!0;var jg=Array.isArray,qw=Object.prototype.hasOwnProperty,Rp={current:null},Kw={key:!0,ref:!0,__self:!0,__source:!0};function Yw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)qw.call(e,i)&&!Kw.hasOwnProperty(i)&&(r[i]=e[i]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)r[i]===void 0&&(r[i]=c[i]);return{$$typeof:$a,type:t,key:o,ref:l,props:r,_owner:Rp.current}}function FP(t,e){return{$$typeof:$a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lp(t){return typeof t=="object"&&t!==null&&t.$$typeof===$a}function UP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wg=/\/+/g;function Zh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UP(""+t.key):e.toString(36)}function Ql(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case $a:case xP:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+Zh(l,0):i,jg(r)?(n="",t!=null&&(n=t.replace(Wg,"$&/")+"/"),Ql(r,e,n,"",function(f){return f})):r!=null&&(Lp(r)&&(r=FP(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(Wg,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",jg(t))for(var c=0;c<t.length;c++){o=t[c];var h=i+Zh(o,c);l+=Ql(o,e,n,h,r)}else if(h=DP(t),typeof h=="function")for(t=h.call(t),c=0;!(o=t.next()).done;)o=o.value,h=i+Zh(o,c++),l+=Ql(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function kl(t,e,n){if(t==null)return t;var i=[],r=0;return Ql(t,i,"","",function(o){return e.call(n,o,r++)}),i}function zP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},Jl={transition:null},BP={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Jl,ReactCurrentOwner:Rp};de.Children={map:kl,forEach:function(t,e,n){kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kl(t,function(){e++}),e},toArray:function(t){return kl(t,function(e){return e})||[]},only:function(t){if(!Lp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Xs;de.Fragment=PP;de.Profiler=bP;de.PureComponent=kp;de.StrictMode=kP;de.Suspense=OP;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BP;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Vw({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Rp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)qw.call(e,h)&&!Kw.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:$a,type:t.type,key:r,ref:o,props:i,_owner:l}};de.createContext=function(t){return t={$$typeof:LP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RP,_context:t},t.Consumer=t};de.createElement=Yw;de.createFactory=function(t){var e=Yw.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:NP,render:t}};de.isValidElement=Lp;de.lazy=function(t){return{$$typeof:MP,_payload:{_status:-1,_result:t},_init:zP}};de.memo=function(t,e){return{$$typeof:AP,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Jl.transition;Jl.transition={};try{t()}finally{Jl.transition=e}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(t,e){return bt.current.useCallback(t,e)};de.useContext=function(t){return bt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};de.useEffect=function(t,e){return bt.current.useEffect(t,e)};de.useId=function(){return bt.current.useId()};de.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return bt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};de.useRef=function(t){return bt.current.useRef(t)};de.useState=function(t){return bt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return bt.current.useTransition()};de.version="18.2.0";Hw.exports=de;var k=Hw.exports;const te=jw(k),jP=Bw({__proto__:null,default:te},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WP=k,HP=Symbol.for("react.element"),$P=Symbol.for("react.fragment"),VP=Object.prototype.hasOwnProperty,ZP=WP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GP={key:!0,ref:!0,__self:!0,__source:!0};function Qw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)VP.call(e,i)&&!GP.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:HP,type:t,key:o,ref:l,props:r,_owner:ZP.current}}yc.Fragment=$P;yc.jsx=Qw;yc.jsxs=Qw;Ww.exports=yc;var x=Ww.exports,Zd={},Jw={exports:{}},Zt={},Xw={exports:{}},e0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,q){var F=O.length;O.push(q);e:for(;0<F;){var J=F-1>>>1,fe=O[J];if(0<r(fe,q))O[J]=q,O[F]=fe,F=J;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var q=O[0],F=O.pop();if(F!==q){O[0]=F;e:for(var J=0,fe=O.length,Ve=fe>>>1;J<Ve;){var we=2*(J+1)-1,ue=O[we],ne=we+1,Xe=O[ne];if(0>r(ue,F))ne<fe&&0>r(Xe,ue)?(O[J]=Xe,O[ne]=F,J=ne):(O[J]=ue,O[we]=F,J=we);else if(ne<fe&&0>r(Xe,F))O[J]=Xe,O[ne]=F,J=ne;else break e}}return q}function r(O,q){var F=O.sortIndex-q.sortIndex;return F!==0?F:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,_=null,v=3,S=!1,w=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var q=n(f);q!==null;){if(q.callback===null)i(f);else if(q.startTime<=O)i(f),q.sortIndex=q.expirationTime,e(h,q);else break;q=n(f)}}function b(O){if(I=!1,C(O),!w)if(n(h)!==null)w=!0,Ne(D);else{var q=n(f);q!==null&&$e(b,q.startTime-O)}}function D(O,q){w=!1,I&&(I=!1,E(U),U=-1),S=!0;var F=v;try{for(C(q),_=n(h);_!==null&&(!(_.expirationTime>q)||O&&!V());){var J=_.callback;if(typeof J=="function"){_.callback=null,v=_.priorityLevel;var fe=J(_.expirationTime<=q);q=t.unstable_now(),typeof fe=="function"?_.callback=fe:_===n(h)&&i(h),C(q)}else i(h);_=n(h)}if(_!==null)var Ve=!0;else{var we=n(f);we!==null&&$e(b,we.startTime-q),Ve=!1}return Ve}finally{_=null,v=F,S=!1}}var W=!1,H=null,U=-1,B=5,$=-1;function V(){return!(t.unstable_now()-$<B)}function le(){if(H!==null){var O=t.unstable_now();$=O;var q=!0;try{q=H(!0,O)}finally{q?Le():(W=!1,H=null)}}else W=!1}var Le;if(typeof y=="function")Le=function(){y(le)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Je=Ce.port2;Ce.port1.onmessage=le,Le=function(){Je.postMessage(null)}}else Le=function(){R(le,0)};function Ne(O){H=O,W||(W=!0,Le())}function $e(O,q){U=R(function(){O(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){w||S||(w=!0,Ne(D))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(O){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var F=v;v=q;try{return O()}finally{v=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=v;v=O;try{return q()}finally{v=F}},t.unstable_scheduleCallback=function(O,q,F){var J=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,O){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=F+fe,O={id:m++,callback:q,priorityLevel:O,startTime:F,expirationTime:fe,sortIndex:-1},F>J?(O.sortIndex=F,e(f,O),n(h)===null&&O===n(f)&&(I?(E(U),U=-1):I=!0,$e(b,F-J))):(O.sortIndex=fe,e(h,O),w||S||(w=!0,Ne(D))),O},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(O){var q=v;return function(){var F=v;v=q;try{return O.apply(this,arguments)}finally{v=F}}}})(e0);Xw.exports=e0;var qP=Xw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0=k,Vt=qP;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n0=new Set,ha={};function jr(t,e){Ms(t,e),Ms(t+"Capture",e)}function Ms(t,e){for(ha[t]=e,t=0;t<e.length;t++)n0.add(e[t])}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gd=Object.prototype.hasOwnProperty,KP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hg={},$g={};function YP(t){return Gd.call($g,t)?!0:Gd.call(Hg,t)?!1:KP.test(t)?$g[t]=!0:(Hg[t]=!0,!1)}function QP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JP(t,e,n,i){if(e===null||typeof e>"u"||QP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Np=/[\-:]([a-z])/g;function Op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Np,Op);_t[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Np,Op);_t[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Np,Op);_t[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ap(t,e,n,i){var r=_t.hasOwnProperty(e)?_t[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JP(e,n,r,i)&&(n=null),i||r===null?YP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var fi=t0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),ls=Symbol.for("react.portal"),us=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),qd=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),r0=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),Kd=Symbol.for("react.suspense"),Yd=Symbol.for("react.suspense_list"),Fp=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),s0=Symbol.for("react.offscreen"),Vg=Symbol.iterator;function xo(t){return t===null||typeof t!="object"?null:(t=Vg&&t[Vg]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Gh;function jo(t){if(Gh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gh=e&&e[1]||""}return`
`+Gh+t}var qh=!1;function Kh(t,e){if(!t||qh)return"";qh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,c=o.length-1;1<=l&&0<=c&&r[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(r[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||r[l]!==o[c]){var h=`
`+r[l].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=l&&0<=c);break}}}finally{qh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jo(t):""}function XP(t){switch(t.tag){case 5:return jo(t.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return t=Kh(t.type,!1),t;case 11:return t=Kh(t.type.render,!1),t;case 1:return t=Kh(t.type,!0),t;default:return""}}function Qd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case us:return"Fragment";case ls:return"Portal";case qd:return"Profiler";case Mp:return"StrictMode";case Kd:return"Suspense";case Yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r0:return(t.displayName||"Context")+".Consumer";case i0:return(t._context.displayName||"Context")+".Provider";case Dp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fp:return e=t.displayName||null,e!==null?e:Qd(t.type)||"Memo";case Ei:e=t._payload,t=t._init;try{return Qd(t(e))}catch{}}return null}function e1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qd(e);case 8:return e===Mp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t1(t){var e=o0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rl(t){t._valueTracker||(t._valueTracker=t1(t))}function a0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=o0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jd(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Gi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l0(t,e){e=e.checked,e!=null&&Ap(t,"checked",e,!1)}function Xd(t,e){l0(t,e);var n=Gi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ef(t,e.type,n):e.hasOwnProperty("defaultValue")&&ef(t,e.type,Gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ef(t,e,n){(e!=="number"||gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function Cs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Gi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Wo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gi(n)}}function u0(t,e){var n=Gi(e.value),i=Gi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Kg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ll,h0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ll=Ll||document.createElement("div"),Ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n1=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){n1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function d0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function f0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=d0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var i1=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rf(t,e){if(e){if(i1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var of=null;function Up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var af=null,Is=null,xs=null;function Yg(t){if(t=Ga(t)){if(typeof af!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Cc(e),af(t.stateNode,t.type,e))}}function p0(t){Is?xs?xs.push(t):xs=[t]:Is=t}function m0(){if(Is){var t=Is,e=xs;if(xs=Is=null,Yg(t),e)for(t=0;t<e.length;t++)Yg(e[t])}}function _0(t,e){return t(e)}function g0(){}var Yh=!1;function v0(t,e,n){if(Yh)return t(e,n);Yh=!0;try{return _0(t,e,n)}finally{Yh=!1,(Is!==null||xs!==null)&&(g0(),m0())}}function fa(t,e){var n=t.stateNode;if(n===null)return null;var i=Cc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var lf=!1;if(ai)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){lf=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{lf=!1}function r1(t,e,n,i,r,o,l,c,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Yo=!1,vu=null,yu=!1,uf=null,s1={onError:function(t){Yo=!0,vu=t}};function o1(t,e,n,i,r,o,l,c,h){Yo=!1,vu=null,r1.apply(s1,arguments)}function a1(t,e,n,i,r,o,l,c,h){if(o1.apply(this,arguments),Yo){if(Yo){var f=vu;Yo=!1,vu=null}else throw Error(z(198));yu||(yu=!0,uf=f)}}function Wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function y0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qg(t){if(Wr(t)!==t)throw Error(z(188))}function l1(t){var e=t.alternate;if(!e){if(e=Wr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Qg(r),t;if(o===i)return Qg(r),e;o=o.sibling}throw Error(z(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,c=r.child;c;){if(c===n){l=!0,n=r,i=o;break}if(c===i){l=!0,i=r,n=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===n){l=!0,n=o,i=r;break}if(c===i){l=!0,i=o,n=r;break}c=c.sibling}if(!l)throw Error(z(189))}}if(n.alternate!==i)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function w0(t){return t=l1(t),t!==null?E0(t):null}function E0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=E0(t);if(e!==null)return e;t=t.sibling}return null}var S0=Vt.unstable_scheduleCallback,Jg=Vt.unstable_cancelCallback,u1=Vt.unstable_shouldYield,c1=Vt.unstable_requestPaint,Ge=Vt.unstable_now,h1=Vt.unstable_getCurrentPriorityLevel,zp=Vt.unstable_ImmediatePriority,T0=Vt.unstable_UserBlockingPriority,wu=Vt.unstable_NormalPriority,d1=Vt.unstable_LowPriority,C0=Vt.unstable_IdlePriority,wc=null,Fn=null;function f1(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(wc,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:_1,p1=Math.log,m1=Math.LN2;function _1(t){return t>>>=0,t===0?32:31-(p1(t)/m1|0)|0}var Nl=64,Ol=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~r;c!==0?i=Ho(c):(o&=l,o!==0&&(i=Ho(o)))}else l=n&~r,l!==0?i=Ho(l):o!==0&&(i=Ho(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-yn(e),r=1<<n,i|=t[n],e&=~r;return i}function g1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-yn(o),c=1<<l,h=r[l];h===-1?(!(c&n)||c&i)&&(r[l]=g1(c,e)):h<=e&&(t.expiredLanes|=c),o&=~c}}function cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function I0(){var t=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),t}function Qh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function y1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-yn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Bp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-yn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ee=0;function x0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P0,jp,k0,b0,R0,hf=!1,Al=[],Ai=null,Mi=null,Di=null,pa=new Map,ma=new Map,Ti=[],w1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xg(t,e){switch(t){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function ko(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Ga(e),e!==null&&jp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function E1(t,e,n,i,r){switch(e){case"focusin":return Ai=ko(Ai,t,e,n,i,r),!0;case"dragenter":return Mi=ko(Mi,t,e,n,i,r),!0;case"mouseover":return Di=ko(Di,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return pa.set(o,ko(pa.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ma.set(o,ko(ma.get(o)||null,t,e,n,i,r)),!0}return!1}function L0(t){var e=pr(t.target);if(e!==null){var n=Wr(e);if(n!==null){if(e=n.tag,e===13){if(e=y0(n),e!==null){t.blockedOn=e,R0(t.priority,function(){k0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=df(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);of=i,n.target.dispatchEvent(i),of=null}else return e=Ga(n),e!==null&&jp(e),t.blockedOn=n,!1;e.shift()}return!0}function ev(t,e,n){Xl(t)&&n.delete(e)}function S1(){hf=!1,Ai!==null&&Xl(Ai)&&(Ai=null),Mi!==null&&Xl(Mi)&&(Mi=null),Di!==null&&Xl(Di)&&(Di=null),pa.forEach(ev),ma.forEach(ev)}function bo(t,e){t.blockedOn===e&&(t.blockedOn=null,hf||(hf=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,S1)))}function _a(t){function e(r){return bo(r,t)}if(0<Al.length){bo(Al[0],t);for(var n=1;n<Al.length;n++){var i=Al[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ai!==null&&bo(Ai,t),Mi!==null&&bo(Mi,t),Di!==null&&bo(Di,t),pa.forEach(e),ma.forEach(e),n=0;n<Ti.length;n++)i=Ti[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)L0(n),n.blockedOn===null&&Ti.shift()}var Ps=fi.ReactCurrentBatchConfig,Su=!0;function T1(t,e,n,i){var r=Ee,o=Ps.transition;Ps.transition=null;try{Ee=1,Wp(t,e,n,i)}finally{Ee=r,Ps.transition=o}}function C1(t,e,n,i){var r=Ee,o=Ps.transition;Ps.transition=null;try{Ee=4,Wp(t,e,n,i)}finally{Ee=r,Ps.transition=o}}function Wp(t,e,n,i){if(Su){var r=df(t,e,n,i);if(r===null)ad(t,e,i,Tu,n),Xg(t,i);else if(E1(r,t,e,n,i))i.stopPropagation();else if(Xg(t,i),e&4&&-1<w1.indexOf(t)){for(;r!==null;){var o=Ga(r);if(o!==null&&P0(o),o=df(t,e,n,i),o===null&&ad(t,e,i,Tu,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else ad(t,e,i,null,n)}}var Tu=null;function df(t,e,n,i){if(Tu=null,t=Up(i),t=pr(t),t!==null)if(e=Wr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=y0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tu=t,null}function N0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h1()){case zp:return 1;case T0:return 4;case wu:case d1:return 16;case C0:return 536870912;default:return 16}default:return 16}}var Ri=null,Hp=null,eu=null;function O0(){if(eu)return eu;var t,e=Hp,n=e.length,i,r="value"in Ri?Ri.value:Ri.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return eu=r.slice(t,1<i?1-i:void 0)}function tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function tv(){return!1}function Gt(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ml:tv,this.isPropagationStopped=tv,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$p=Gt(eo),Za=Fe({},eo,{view:0,detail:0}),I1=Gt(Za),Jh,Xh,Ro,Ec=Fe({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(Jh=t.screenX-Ro.screenX,Xh=t.screenY-Ro.screenY):Xh=Jh=0,Ro=t),Jh)},movementY:function(t){return"movementY"in t?t.movementY:Xh}}),nv=Gt(Ec),x1=Fe({},Ec,{dataTransfer:0}),P1=Gt(x1),k1=Fe({},Za,{relatedTarget:0}),ed=Gt(k1),b1=Fe({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),R1=Gt(b1),L1=Fe({},eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),N1=Gt(L1),O1=Fe({},eo,{data:0}),iv=Gt(O1),A1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=D1[t])?!!e[t]:!1}function Vp(){return F1}var U1=Fe({},Za,{key:function(t){if(t.key){var e=A1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vp,charCode:function(t){return t.type==="keypress"?tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),z1=Gt(U1),B1=Fe({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rv=Gt(B1),j1=Fe({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vp}),W1=Gt(j1),H1=Fe({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),$1=Gt(H1),V1=Fe({},Ec,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z1=Gt(V1),G1=[9,13,27,32],Zp=ai&&"CompositionEvent"in window,Qo=null;ai&&"documentMode"in document&&(Qo=document.documentMode);var q1=ai&&"TextEvent"in window&&!Qo,A0=ai&&(!Zp||Qo&&8<Qo&&11>=Qo),sv=String.fromCharCode(32),ov=!1;function M0(t,e){switch(t){case"keyup":return G1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function K1(t,e){switch(t){case"compositionend":return D0(e);case"keypress":return e.which!==32?null:(ov=!0,sv);case"textInput":return t=e.data,t===sv&&ov?null:t;default:return null}}function Y1(t,e){if(cs)return t==="compositionend"||!Zp&&M0(t,e)?(t=O0(),eu=Hp=Ri=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A0&&e.locale!=="ko"?null:e.data;default:return null}}var Q1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q1[t.type]:e==="textarea"}function F0(t,e,n,i){p0(i),e=Cu(e,"onChange"),0<e.length&&(n=new $p("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Jo=null,ga=null;function J1(t){q0(t,0)}function Sc(t){var e=fs(t);if(a0(e))return t}function X1(t,e){if(t==="change")return e}var U0=!1;if(ai){var td;if(ai){var nd="oninput"in document;if(!nd){var lv=document.createElement("div");lv.setAttribute("oninput","return;"),nd=typeof lv.oninput=="function"}td=nd}else td=!1;U0=td&&(!document.documentMode||9<document.documentMode)}function uv(){Jo&&(Jo.detachEvent("onpropertychange",z0),ga=Jo=null)}function z0(t){if(t.propertyName==="value"&&Sc(ga)){var e=[];F0(e,ga,t,Up(t)),v0(J1,e)}}function ek(t,e,n){t==="focusin"?(uv(),Jo=e,ga=n,Jo.attachEvent("onpropertychange",z0)):t==="focusout"&&uv()}function tk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sc(ga)}function nk(t,e){if(t==="click")return Sc(e)}function ik(t,e){if(t==="input"||t==="change")return Sc(e)}function rk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:rk;function va(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Gd.call(e,r)||!Sn(t[r],e[r]))return!1}return!0}function cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hv(t,e){var n=cv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cv(n)}}function B0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?B0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j0(){for(var t=window,e=gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gu(t.document)}return e}function Gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sk(t){var e=j0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&B0(n.ownerDocument.documentElement,n)){if(i!==null&&Gp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=hv(n,o);var l=hv(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ok=ai&&"documentMode"in document&&11>=document.documentMode,hs=null,ff=null,Xo=null,pf=!1;function dv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pf||hs==null||hs!==gu(i)||(i=hs,"selectionStart"in i&&Gp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xo&&va(Xo,i)||(Xo=i,i=Cu(ff,"onSelect"),0<i.length&&(e=new $p("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=hs)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ds={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},id={},W0={};ai&&(W0=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Tc(t){if(id[t])return id[t];if(!ds[t])return t;var e=ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W0)return id[t]=e[n];return t}var H0=Tc("animationend"),$0=Tc("animationiteration"),V0=Tc("animationstart"),Z0=Tc("transitionend"),G0=new Map,fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(t,e){G0.set(t,e),jr(e,[t])}for(var rd=0;rd<fv.length;rd++){var sd=fv[rd],ak=sd.toLowerCase(),lk=sd[0].toUpperCase()+sd.slice(1);Ji(ak,"on"+lk)}Ji(H0,"onAnimationEnd");Ji($0,"onAnimationIteration");Ji(V0,"onAnimationStart");Ji("dblclick","onDoubleClick");Ji("focusin","onFocus");Ji("focusout","onBlur");Ji(Z0,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uk=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function pv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,a1(i,e,void 0,t),t.currentTarget=null}function q0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var c=i[l],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==o&&r.isPropagationStopped())break e;pv(r,c,f),o=h}else for(l=0;l<i.length;l++){if(c=i[l],h=c.instance,f=c.currentTarget,c=c.listener,h!==o&&r.isPropagationStopped())break e;pv(r,c,f),o=h}}}if(yu)throw t=uf,yu=!1,uf=null,t}function be(t,e){var n=e[yf];n===void 0&&(n=e[yf]=new Set);var i=t+"__bubble";n.has(i)||(K0(e,t,2,!1),n.add(i))}function od(t,e,n){var i=0;e&&(i|=4),K0(n,t,i,e)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function ya(t){if(!t[Fl]){t[Fl]=!0,n0.forEach(function(n){n!=="selectionchange"&&(uk.has(n)||od(n,!1,t),od(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fl]||(e[Fl]=!0,od("selectionchange",!1,e))}}function K0(t,e,n,i){switch(N0(e)){case 1:var r=T1;break;case 4:r=C1;break;default:r=Wp}n=r.bind(null,e,n,t),r=void 0,!lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ad(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;l=l.return}for(;c!==null;){if(l=pr(c),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}c=c.parentNode}}i=i.return}v0(function(){var f=o,m=Up(n),_=[];e:{var v=G0.get(t);if(v!==void 0){var S=$p,w=t;switch(t){case"keypress":if(tu(n)===0)break e;case"keydown":case"keyup":S=z1;break;case"focusin":w="focus",S=ed;break;case"focusout":w="blur",S=ed;break;case"beforeblur":case"afterblur":S=ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=W1;break;case H0:case $0:case V0:S=R1;break;case Z0:S=$1;break;case"scroll":S=I1;break;case"wheel":S=Z1;break;case"copy":case"cut":case"paste":S=N1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=rv}var I=(e&4)!==0,R=!I&&t==="scroll",E=I?v!==null?v+"Capture":null:v;I=[];for(var y=f,C;y!==null;){C=y;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,E!==null&&(b=fa(y,E),b!=null&&I.push(wa(y,b,C)))),R)break;y=y.return}0<I.length&&(v=new S(v,w,null,n,m),_.push({event:v,listeners:I}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==of&&(w=n.relatedTarget||n.fromElement)&&(pr(w)||w[li]))break e;if((S||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,S?(w=n.relatedTarget||n.toElement,S=f,w=w?pr(w):null,w!==null&&(R=Wr(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=f),S!==w)){if(I=nv,b="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(I=rv,b="onPointerLeave",E="onPointerEnter",y="pointer"),R=S==null?v:fs(S),C=w==null?v:fs(w),v=new I(b,y+"leave",S,n,m),v.target=R,v.relatedTarget=C,b=null,pr(m)===f&&(I=new I(E,y+"enter",w,n,m),I.target=C,I.relatedTarget=R,b=I),R=b,S&&w)t:{for(I=S,E=w,y=0,C=I;C;C=rs(C))y++;for(C=0,b=E;b;b=rs(b))C++;for(;0<y-C;)I=rs(I),y--;for(;0<C-y;)E=rs(E),C--;for(;y--;){if(I===E||E!==null&&I===E.alternate)break t;I=rs(I),E=rs(E)}I=null}else I=null;S!==null&&mv(_,v,S,I,!1),w!==null&&R!==null&&mv(_,R,w,I,!0)}}e:{if(v=f?fs(f):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var D=X1;else if(av(v))if(U0)D=ik;else{D=tk;var W=ek}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(D=nk);if(D&&(D=D(t,f))){F0(_,D,n,m);break e}W&&W(t,v,f),t==="focusout"&&(W=v._wrapperState)&&W.controlled&&v.type==="number"&&ef(v,"number",v.value)}switch(W=f?fs(f):window,t){case"focusin":(av(W)||W.contentEditable==="true")&&(hs=W,ff=f,Xo=null);break;case"focusout":Xo=ff=hs=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,dv(_,n,m);break;case"selectionchange":if(ok)break;case"keydown":case"keyup":dv(_,n,m)}var H;if(Zp)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else cs?M0(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(A0&&n.locale!=="ko"&&(cs||U!=="onCompositionStart"?U==="onCompositionEnd"&&cs&&(H=O0()):(Ri=m,Hp="value"in Ri?Ri.value:Ri.textContent,cs=!0)),W=Cu(f,U),0<W.length&&(U=new iv(U,t,null,n,m),_.push({event:U,listeners:W}),H?U.data=H:(H=D0(n),H!==null&&(U.data=H)))),(H=q1?K1(t,n):Y1(t,n))&&(f=Cu(f,"onBeforeInput"),0<f.length&&(m=new iv("onBeforeInput","beforeinput",null,n,m),_.push({event:m,listeners:f}),m.data=H))}q0(_,e)})}function wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=fa(t,n),o!=null&&i.unshift(wa(t,o,r)),o=fa(t,e),o!=null&&i.push(wa(t,o,r))),t=t.return}return i}function rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mv(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var c=n,h=c.alternate,f=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&f!==null&&(c=f,r?(h=fa(n,o),h!=null&&l.unshift(wa(n,h,c))):r||(h=fa(n,o),h!=null&&l.push(wa(n,h,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var ck=/\r\n?/g,hk=/\u0000|\uFFFD/g;function _v(t){return(typeof t=="string"?t:""+t).replace(ck,`
`).replace(hk,"")}function Ul(t,e,n){if(e=_v(e),_v(t)!==e&&n)throw Error(z(425))}function Iu(){}var mf=null,_f=null;function gf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vf=typeof setTimeout=="function"?setTimeout:void 0,dk=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,fk=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(t){return gv.resolve(null).then(t).catch(pk)}:vf;function pk(t){setTimeout(function(){throw t})}function ld(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),_a(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);_a(e)}function Fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var to=Math.random().toString(36).slice(2),On="__reactFiber$"+to,Ea="__reactProps$"+to,li="__reactContainer$"+to,yf="__reactEvents$"+to,mk="__reactListeners$"+to,_k="__reactHandles$"+to;function pr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[li]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vv(t);t!==null;){if(n=t[On])return n;t=vv(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[On]||t[li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Cc(t){return t[Ea]||null}var wf=[],ps=-1;function Xi(t){return{current:t}}function Re(t){0>ps||(t.current=wf[ps],wf[ps]=null,ps--)}function ke(t,e){ps++,wf[ps]=t.current,t.current=e}var qi={},Et=Xi(qi),Mt=Xi(!1),Pr=qi;function Ds(t,e){var n=t.type.contextTypes;if(!n)return qi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dt(t){return t=t.childContextTypes,t!=null}function xu(){Re(Mt),Re(Et)}function yv(t,e,n){if(Et.current!==qi)throw Error(z(168));ke(Et,e),ke(Mt,n)}function Y0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(z(108,e1(t)||"Unknown",r));return Fe({},n,i)}function Pu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qi,Pr=Et.current,ke(Et,t),ke(Mt,Mt.current),!0}function wv(t,e,n){var i=t.stateNode;if(!i)throw Error(z(169));n?(t=Y0(t,e,Pr),i.__reactInternalMemoizedMergedChildContext=t,Re(Mt),Re(Et),ke(Et,t)):Re(Mt),ke(Mt,n)}var Qn=null,Ic=!1,ud=!1;function Q0(t){Qn===null?Qn=[t]:Qn.push(t)}function gk(t){Ic=!0,Q0(t)}function er(){if(!ud&&Qn!==null){ud=!0;var t=0,e=Ee;try{var n=Qn;for(Ee=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Qn=null,Ic=!1}catch(r){throw Qn!==null&&(Qn=Qn.slice(t+1)),S0(zp,er),r}finally{Ee=e,ud=!1}}return null}var ms=[],_s=0,ku=null,bu=0,Jt=[],Xt=0,kr=null,Jn=1,Xn="";function cr(t,e){ms[_s++]=bu,ms[_s++]=ku,ku=t,bu=e}function J0(t,e,n){Jt[Xt++]=Jn,Jt[Xt++]=Xn,Jt[Xt++]=kr,kr=t;var i=Jn;t=Xn;var r=32-yn(i)-1;i&=~(1<<r),n+=1;var o=32-yn(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,Jn=1<<32-yn(e)+r|n<<r|i,Xn=o+t}else Jn=1<<o|n<<r|i,Xn=t}function qp(t){t.return!==null&&(cr(t,1),J0(t,1,0))}function Kp(t){for(;t===ku;)ku=ms[--_s],ms[_s]=null,bu=ms[--_s],ms[_s]=null;for(;t===kr;)kr=Jt[--Xt],Jt[Xt]=null,Xn=Jt[--Xt],Jt[Xt]=null,Jn=Jt[--Xt],Jt[Xt]=null}var Ht=null,jt=null,Oe=!1,_n=null;function X0(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ev(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,jt=Fi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kr!==null?{id:Jn,overflow:Xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,jt=null,!0):!1;default:return!1}}function Ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sf(t){if(Oe){var e=jt;if(e){var n=e;if(!Ev(t,e)){if(Ef(t))throw Error(z(418));e=Fi(n.nextSibling);var i=Ht;e&&Ev(t,e)?X0(i,n):(t.flags=t.flags&-4097|2,Oe=!1,Ht=t)}}else{if(Ef(t))throw Error(z(418));t.flags=t.flags&-4097|2,Oe=!1,Ht=t}}}function Sv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function zl(t){if(t!==Ht)return!1;if(!Oe)return Sv(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gf(t.type,t.memoizedProps)),e&&(e=jt)){if(Ef(t))throw eE(),Error(z(418));for(;e;)X0(t,e),e=Fi(e.nextSibling)}if(Sv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Ht?Fi(t.stateNode.nextSibling):null;return!0}function eE(){for(var t=jt;t;)t=Fi(t.nextSibling)}function Fs(){jt=Ht=null,Oe=!1}function Yp(t){_n===null?_n=[t]:_n.push(t)}var vk=fi.ReactCurrentBatchConfig;function fn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ru=Xi(null),Lu=null,gs=null,Qp=null;function Jp(){Qp=gs=Lu=null}function Xp(t){var e=Ru.current;Re(Ru),t._currentValue=e}function Tf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ks(t,e){Lu=t,Qp=gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(Qp!==t)if(t={context:t,memoizedValue:e,next:null},gs===null){if(Lu===null)throw Error(z(308));gs=t,Lu.dependencies={lanes:0,firstContext:t}}else gs=gs.next=t;return e}var mr=null;function em(t){mr===null?mr=[t]:mr.push(t)}function tE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,em(e)):(n.next=r.next,r.next=n),e.interleaved=n,ui(t,i)}function ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ui(t,n)}return r=i.interleaved,r===null?(e.next=e,em(i)):(e.next=r.next,r.next=e),i.interleaved=e,ui(t,n)}function nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Bp(t,n)}}function Tv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nu(t,e,n,i){var r=t.updateQueue;Si=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var h=c,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==l&&(c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=h))}if(o!==null){var _=r.baseState;l=0,m=f=h=null,c=o;do{var v=c.lane,S=c.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:S,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=t,I=c;switch(v=e,S=n,I.tag){case 1:if(w=I.payload,typeof w=="function"){_=w.call(S,_,v);break e}_=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,v=typeof w=="function"?w.call(S,_,v):w,v==null)break e;_=Fe({},_,v);break e;case 2:Si=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[c]:v.push(c))}else S={eventTime:S,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(f=m=S,h=_):m=m.next=S,l|=v;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;v=c,c=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(1);if(m===null&&(h=_),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Rr|=l,t.lanes=l,t.memoizedState=_}}function Cv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(z(191,r));r.call(i)}}}var iE=new t0.Component().refs;function Cf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xc={isMounted:function(t){return(t=t._reactInternals)?Wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Pt(),r=Bi(t),o=ii(i,r);o.payload=e,n!=null&&(o.callback=n),e=Ui(t,o,r),e!==null&&(wn(e,t,r,i),nu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Pt(),r=Bi(t),o=ii(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ui(t,o,r),e!==null&&(wn(e,t,r,i),nu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),i=Bi(t),r=ii(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ui(t,r,i),e!==null&&(wn(e,t,i,n),nu(e,t,i))}};function Iv(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!va(n,i)||!va(r,o):!0}function rE(t,e,n){var i=!1,r=qi,o=e.contextType;return typeof o=="object"&&o!==null?o=sn(o):(r=Dt(e)?Pr:Et.current,i=e.contextTypes,o=(i=i!=null)?Ds(t,r):qi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function xv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&xc.enqueueReplaceState(e,e.state,null)}function If(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=iE,tm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=sn(o):(o=Dt(e)?Pr:Et.current,r.context=Ds(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Cf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&xc.enqueueReplaceState(r,r.state,null),Nu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var i=n.stateNode}if(!i)throw Error(z(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=r.refs;c===iE&&(c=r.refs={}),l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Bl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pv(t){var e=t._init;return e(t._payload)}function sE(t){function e(E,y){if(t){var C=E.deletions;C===null?(E.deletions=[y],E.flags|=16):C.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function i(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function r(E,y){return E=ji(E,y),E.index=0,E.sibling=null,E}function o(E,y,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<y?(E.flags|=2,y):C):(E.flags|=2,y)):(E.flags|=1048576,y)}function l(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,y,C,b){return y===null||y.tag!==6?(y=_d(C,E.mode,b),y.return=E,y):(y=r(y,C),y.return=E,y)}function h(E,y,C,b){var D=C.type;return D===us?m(E,y,C.props.children,b,C.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ei&&Pv(D)===y.type)?(b=r(y,C.props),b.ref=Lo(E,y,C),b.return=E,b):(b=lu(C.type,C.key,C.props,null,E.mode,b),b.ref=Lo(E,y,C),b.return=E,b)}function f(E,y,C,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=gd(C,E.mode,b),y.return=E,y):(y=r(y,C.children||[]),y.return=E,y)}function m(E,y,C,b,D){return y===null||y.tag!==7?(y=Sr(C,E.mode,b,D),y.return=E,y):(y=r(y,C),y.return=E,y)}function _(E,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_d(""+y,E.mode,C),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bl:return C=lu(y.type,y.key,y.props,null,E.mode,C),C.ref=Lo(E,null,y),C.return=E,C;case ls:return y=gd(y,E.mode,C),y.return=E,y;case Ei:var b=y._init;return _(E,b(y._payload),C)}if(Wo(y)||xo(y))return y=Sr(y,E.mode,C,null),y.return=E,y;Bl(E,y)}return null}function v(E,y,C,b){var D=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return D!==null?null:c(E,y,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bl:return C.key===D?h(E,y,C,b):null;case ls:return C.key===D?f(E,y,C,b):null;case Ei:return D=C._init,v(E,y,D(C._payload),b)}if(Wo(C)||xo(C))return D!==null?null:m(E,y,C,b,null);Bl(E,C)}return null}function S(E,y,C,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(C)||null,c(y,E,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:return E=E.get(b.key===null?C:b.key)||null,h(y,E,b,D);case ls:return E=E.get(b.key===null?C:b.key)||null,f(y,E,b,D);case Ei:var W=b._init;return S(E,y,C,W(b._payload),D)}if(Wo(b)||xo(b))return E=E.get(C)||null,m(y,E,b,D,null);Bl(y,b)}return null}function w(E,y,C,b){for(var D=null,W=null,H=y,U=y=0,B=null;H!==null&&U<C.length;U++){H.index>U?(B=H,H=null):B=H.sibling;var $=v(E,H,C[U],b);if($===null){H===null&&(H=B);break}t&&H&&$.alternate===null&&e(E,H),y=o($,y,U),W===null?D=$:W.sibling=$,W=$,H=B}if(U===C.length)return n(E,H),Oe&&cr(E,U),D;if(H===null){for(;U<C.length;U++)H=_(E,C[U],b),H!==null&&(y=o(H,y,U),W===null?D=H:W.sibling=H,W=H);return Oe&&cr(E,U),D}for(H=i(E,H);U<C.length;U++)B=S(H,E,U,C[U],b),B!==null&&(t&&B.alternate!==null&&H.delete(B.key===null?U:B.key),y=o(B,y,U),W===null?D=B:W.sibling=B,W=B);return t&&H.forEach(function(V){return e(E,V)}),Oe&&cr(E,U),D}function I(E,y,C,b){var D=xo(C);if(typeof D!="function")throw Error(z(150));if(C=D.call(C),C==null)throw Error(z(151));for(var W=D=null,H=y,U=y=0,B=null,$=C.next();H!==null&&!$.done;U++,$=C.next()){H.index>U?(B=H,H=null):B=H.sibling;var V=v(E,H,$.value,b);if(V===null){H===null&&(H=B);break}t&&H&&V.alternate===null&&e(E,H),y=o(V,y,U),W===null?D=V:W.sibling=V,W=V,H=B}if($.done)return n(E,H),Oe&&cr(E,U),D;if(H===null){for(;!$.done;U++,$=C.next())$=_(E,$.value,b),$!==null&&(y=o($,y,U),W===null?D=$:W.sibling=$,W=$);return Oe&&cr(E,U),D}for(H=i(E,H);!$.done;U++,$=C.next())$=S(H,E,U,$.value,b),$!==null&&(t&&$.alternate!==null&&H.delete($.key===null?U:$.key),y=o($,y,U),W===null?D=$:W.sibling=$,W=$);return t&&H.forEach(function(le){return e(E,le)}),Oe&&cr(E,U),D}function R(E,y,C,b){if(typeof C=="object"&&C!==null&&C.type===us&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case bl:e:{for(var D=C.key,W=y;W!==null;){if(W.key===D){if(D=C.type,D===us){if(W.tag===7){n(E,W.sibling),y=r(W,C.props.children),y.return=E,E=y;break e}}else if(W.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ei&&Pv(D)===W.type){n(E,W.sibling),y=r(W,C.props),y.ref=Lo(E,W,C),y.return=E,E=y;break e}n(E,W);break}else e(E,W);W=W.sibling}C.type===us?(y=Sr(C.props.children,E.mode,b,C.key),y.return=E,E=y):(b=lu(C.type,C.key,C.props,null,E.mode,b),b.ref=Lo(E,y,C),b.return=E,E=b)}return l(E);case ls:e:{for(W=C.key;y!==null;){if(y.key===W)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(E,y.sibling),y=r(y,C.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=gd(C,E.mode,b),y.return=E,E=y}return l(E);case Ei:return W=C._init,R(E,y,W(C._payload),b)}if(Wo(C))return w(E,y,C,b);if(xo(C))return I(E,y,C,b);Bl(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(n(E,y.sibling),y=r(y,C),y.return=E,E=y):(n(E,y),y=_d(C,E.mode,b),y.return=E,E=y),l(E)):n(E,y)}return R}var Us=sE(!0),oE=sE(!1),qa={},Un=Xi(qa),Sa=Xi(qa),Ta=Xi(qa);function _r(t){if(t===qa)throw Error(z(174));return t}function nm(t,e){switch(ke(Ta,e),ke(Sa,t),ke(Un,qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nf(e,t)}Re(Un),ke(Un,e)}function zs(){Re(Un),Re(Sa),Re(Ta)}function aE(t){_r(Ta.current);var e=_r(Un.current),n=nf(e,t.type);e!==n&&(ke(Sa,t),ke(Un,n))}function im(t){Sa.current===t&&(Re(Un),Re(Sa))}var Me=Xi(0);function Ou(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cd=[];function rm(){for(var t=0;t<cd.length;t++)cd[t]._workInProgressVersionPrimary=null;cd.length=0}var iu=fi.ReactCurrentDispatcher,hd=fi.ReactCurrentBatchConfig,br=0,De=null,et=null,at=null,Au=!1,ea=!1,Ca=0,yk=0;function vt(){throw Error(z(321))}function sm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function om(t,e,n,i,r,o){if(br=o,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?Tk:Ck,t=n(i,r),ea){o=0;do{if(ea=!1,Ca=0,25<=o)throw Error(z(301));o+=1,at=et=null,e.updateQueue=null,iu.current=Ik,t=n(i,r)}while(ea)}if(iu.current=Mu,e=et!==null&&et.next!==null,br=0,at=et=De=null,Au=!1,e)throw Error(z(300));return t}function am(){var t=Ca!==0;return Ca=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?De.memoizedState=at=t:at=at.next=t,at}function on(){if(et===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=at===null?De.memoizedState:at.next;if(e!==null)at=e,et=t;else{if(t===null)throw Error(z(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},at===null?De.memoizedState=at=t:at=at.next=t}return at}function Ia(t,e){return typeof e=="function"?e(t):e}function dd(t){var e=on(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=et,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var c=l=null,h=null,f=o;do{var m=f.lane;if((br&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var _={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=_,l=i):h=h.next=_,De.lanes|=m,Rr|=m}f=f.next}while(f!==null&&f!==o);h===null?l=i:h.next=c,Sn(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,De.lanes|=o,Rr|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fd(t){var e=on(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);Sn(o,e.memoizedState)||(Ot=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function lE(){}function uE(t,e){var n=De,i=on(),r=e(),o=!Sn(i.memoizedState,r);if(o&&(i.memoizedState=r,Ot=!0),i=i.queue,lm(dE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,xa(9,hE.bind(null,n,i,r,e),void 0,null),ut===null)throw Error(z(349));br&30||cE(n,e,r)}return r}function cE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hE(t,e,n,i){e.value=n,e.getSnapshot=i,fE(e)&&pE(t)}function dE(t,e,n){return n(function(){fE(e)&&pE(t)})}function fE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function pE(t){var e=ui(t,1);e!==null&&wn(e,t,1,-1)}function kv(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=Sk.bind(null,De,t),[e.memoizedState,t]}function xa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function mE(){return on().memoizedState}function ru(t,e,n,i){var r=Nn();De.flags|=t,r.memoizedState=xa(1|e,n,void 0,i===void 0?null:i)}function Pc(t,e,n,i){var r=on();i=i===void 0?null:i;var o=void 0;if(et!==null){var l=et.memoizedState;if(o=l.destroy,i!==null&&sm(i,l.deps)){r.memoizedState=xa(e,n,o,i);return}}De.flags|=t,r.memoizedState=xa(1|e,n,o,i)}function bv(t,e){return ru(8390656,8,t,e)}function lm(t,e){return Pc(2048,8,t,e)}function _E(t,e){return Pc(4,2,t,e)}function gE(t,e){return Pc(4,4,t,e)}function vE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yE(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4,4,vE.bind(null,e,t),n)}function um(){}function wE(t,e){var n=on();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&sm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function EE(t,e){var n=on();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&sm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function SE(t,e,n){return br&21?(Sn(n,e)||(n=I0(),De.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function wk(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var i=hd.transition;hd.transition={};try{t(!1),e()}finally{Ee=n,hd.transition=i}}function TE(){return on().memoizedState}function Ek(t,e,n){var i=Bi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},CE(t))IE(e,n);else if(n=tE(t,e,n,i),n!==null){var r=Pt();wn(n,t,i,r),xE(n,e,i)}}function Sk(t,e,n){var i=Bi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(CE(t))IE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,n);if(r.hasEagerState=!0,r.eagerState=c,Sn(c,l)){var h=e.interleaved;h===null?(r.next=r,em(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=tE(t,e,r,i),n!==null&&(r=Pt(),wn(n,t,i,r),xE(n,e,i))}}function CE(t){var e=t.alternate;return t===De||e!==null&&e===De}function IE(t,e){ea=Au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Bp(t,n)}}var Mu={readContext:sn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},Tk={readContext:sn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:bv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ru(4194308,4,vE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ru(4194308,4,t,e)},useInsertionEffect:function(t,e){return ru(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Nn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ek.bind(null,De,t),[i.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:kv,useDebugValue:um,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=kv(!1),e=t[0];return t=wk.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=De,r=Nn();if(Oe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ut===null)throw Error(z(349));br&30||cE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,bv(dE.bind(null,i,o,t),[t]),i.flags|=2048,xa(9,hE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Nn(),e=ut.identifierPrefix;if(Oe){var n=Xn,i=Jn;n=(i&~(1<<32-yn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ca++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ck={readContext:sn,useCallback:wE,useContext:sn,useEffect:lm,useImperativeHandle:yE,useInsertionEffect:_E,useLayoutEffect:gE,useMemo:EE,useReducer:dd,useRef:mE,useState:function(){return dd(Ia)},useDebugValue:um,useDeferredValue:function(t){var e=on();return SE(e,et.memoizedState,t)},useTransition:function(){var t=dd(Ia)[0],e=on().memoizedState;return[t,e]},useMutableSource:lE,useSyncExternalStore:uE,useId:TE,unstable_isNewReconciler:!1},Ik={readContext:sn,useCallback:wE,useContext:sn,useEffect:lm,useImperativeHandle:yE,useInsertionEffect:_E,useLayoutEffect:gE,useMemo:EE,useReducer:fd,useRef:mE,useState:function(){return fd(Ia)},useDebugValue:um,useDeferredValue:function(t){var e=on();return et===null?e.memoizedState=t:SE(e,et.memoizedState,t)},useTransition:function(){var t=fd(Ia)[0],e=on().memoizedState;return[t,e]},useMutableSource:lE,useSyncExternalStore:uE,useId:TE,unstable_isNewReconciler:!1};function Bs(t,e){try{var n="",i=e;do n+=XP(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function pd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xk=typeof WeakMap=="function"?WeakMap:Map;function PE(t,e,n){n=ii(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Fu||(Fu=!0,Df=i),xf(t,e)},n}function kE(t,e,n){n=ii(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){xf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){xf(t,e),typeof i!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Rv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new xk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Bk.bind(null,t,e,n),e.then(t,t))}function Lv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Nv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ii(-1,1),e.tag=2,Ui(n,e,1))),n.lanes|=1),t)}var Pk=fi.ReactCurrentOwner,Ot=!1;function It(t,e,n,i){e.child=t===null?oE(e,null,n,i):Us(e,t.child,n,i)}function Ov(t,e,n,i,r){n=n.render;var o=e.ref;return ks(e,r),i=om(t,e,n,i,o,r),n=am(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ci(t,e,r)):(Oe&&n&&qp(e),e.flags|=1,It(t,e,i,r),e.child)}function Av(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!gm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,bE(t,e,o,i,r)):(t=lu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(l,i)&&t.ref===e.ref)return ci(t,e,r)}return e.flags|=1,t=ji(o,i),t.ref=e.ref,t.return=e,e.child=t}function bE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(va(o,i)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,ci(t,e,r)}return Pf(t,e,n,i,r)}function RE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(ys,Bt),Bt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(ys,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,ke(ys,Bt),Bt|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,ke(ys,Bt),Bt|=i;return It(t,e,r,n),e.child}function LE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pf(t,e,n,i,r){var o=Dt(n)?Pr:Et.current;return o=Ds(e,o),ks(e,r),n=om(t,e,n,i,o,r),i=am(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ci(t,e,r)):(Oe&&i&&qp(e),e.flags|=1,It(t,e,n,r),e.child)}function Mv(t,e,n,i,r){if(Dt(n)){var o=!0;Pu(e)}else o=!1;if(ks(e,r),e.stateNode===null)su(t,e),rE(e,n,i),If(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var h=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=sn(f):(f=Dt(n)?Pr:Et.current,f=Ds(e,f));var m=n.getDerivedStateFromProps,_=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";_||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||h!==f)&&xv(e,l,i,f),Si=!1;var v=e.memoizedState;l.state=v,Nu(e,i,l,r),h=e.memoizedState,c!==i||v!==h||Mt.current||Si?(typeof m=="function"&&(Cf(e,n,m,i),h=e.memoizedState),(c=Si||Iv(e,n,c,i,v,h,f))?(_||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=f,i=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,nE(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:fn(e.type,c),l.props=f,_=e.pendingProps,v=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=sn(h):(h=Dt(n)?Pr:Et.current,h=Ds(e,h));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==_||v!==h)&&xv(e,l,i,h),Si=!1,v=e.memoizedState,l.state=v,Nu(e,i,l,r);var w=e.memoizedState;c!==_||v!==w||Mt.current||Si?(typeof S=="function"&&(Cf(e,n,S,i),w=e.memoizedState),(f=Si||Iv(e,n,f,i,v,w,h)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,w,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,w,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),l.props=i,l.state=w,l.context=h,i=f):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return kf(t,e,n,i,o,r)}function kf(t,e,n,i,r,o){LE(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&wv(e,n,!1),ci(t,e,o);i=e.stateNode,Pk.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Us(e,t.child,null,o),e.child=Us(e,null,c,o)):It(t,e,c,o),e.memoizedState=i.state,r&&wv(e,n,!0),e.child}function NE(t){var e=t.stateNode;e.pendingContext?yv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yv(t,e.context,!1),nm(t,e.containerInfo)}function Dv(t,e,n,i,r){return Fs(),Yp(r),e.flags|=256,It(t,e,n,i),e.child}var bf={dehydrated:null,treeContext:null,retryLane:0};function Rf(t){return{baseLanes:t,cachePool:null,transitions:null}}function OE(t,e,n){var i=e.pendingProps,r=Me.current,o=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ke(Me,r&1),t===null)return Sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Rc(l,i,0,null),t=Sr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Rf(n),e.memoizedState=bf,t):cm(e,l));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return kk(t,e,l,i,c,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,c=r.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=ji(r,h),i.subtreeFlags=r.subtreeFlags&14680064),c!==null?o=ji(c,o):(o=Sr(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Rf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=bf,i}return o=t.child,t=o.sibling,i=ji(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function cm(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jl(t,e,n,i){return i!==null&&Yp(i),Us(e,t.child,null,n),t=cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kk(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=pd(Error(z(422))),jl(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Rc({mode:"visible",children:i.children},r,0,null),o=Sr(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Us(e,t.child,null,l),e.child.memoizedState=Rf(l),e.memoizedState=bf,o);if(!(e.mode&1))return jl(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var c=i.dgst;return i=c,o=Error(z(419)),i=pd(o,i,void 0),jl(t,e,l,i)}if(c=(l&t.childLanes)!==0,Ot||c){if(i=ut,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,ui(t,r),wn(i,t,r,-1))}return _m(),i=pd(Error(z(421))),jl(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=jk.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,jt=Fi(r.nextSibling),Ht=e,Oe=!0,_n=null,t!==null&&(Jt[Xt++]=Jn,Jt[Xt++]=Xn,Jt[Xt++]=kr,Jn=t.id,Xn=t.overflow,kr=e),e=cm(e,i.children),e.flags|=4096,e)}function Fv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Tf(t.return,e,n)}function md(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function AE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(It(t,e,i.children,n),i=Me.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fv(t,n,e);else if(t.tag===19)Fv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ke(Me,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ou(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),md(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ou(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}md(e,!0,n,null,o);break;case"together":md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bk(t,e,n){switch(e.tag){case 3:NE(e),Fs();break;case 5:aE(e);break;case 1:Dt(e.type)&&Pu(e);break;case 4:nm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ke(Ru,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ke(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?OE(t,e,n):(ke(Me,Me.current&1),t=ci(t,e,n),t!==null?t.sibling:null);ke(Me,Me.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return AE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ke(Me,Me.current),i)break;return null;case 22:case 23:return e.lanes=0,RE(t,e,n)}return ci(t,e,n)}var ME,Lf,DE,FE;ME=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lf=function(){};DE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,_r(Un.current);var o=null;switch(n){case"input":r=Jd(t,r),i=Jd(t,i),o=[];break;case"select":r=Fe({},r,{value:void 0}),i=Fe({},i,{value:void 0}),o=[];break;case"textarea":r=tf(t,r),i=tf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Iu)}rf(n,i);var l;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var c=r[f];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ha.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(c=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(l in c)!c.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&c[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ha.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&be("scroll",t),o||c===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};FE=function(t,e,n,i){n!==i&&(e.flags|=4)};function No(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Rk(t,e,n){var i=e.pendingProps;switch(Kp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Dt(e.type)&&xu(),yt(e),null;case 3:return i=e.stateNode,zs(),Re(Mt),Re(Et),rm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(zl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(zf(_n),_n=null))),Lf(t,e),yt(e),null;case 5:im(e);var r=_r(Ta.current);if(n=e.type,t!==null&&e.stateNode!=null)DE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(z(166));return yt(e),null}if(t=_r(Un.current),zl(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[On]=e,i[Ea]=o,t=(e.mode&1)!==0,n){case"dialog":be("cancel",i),be("close",i);break;case"iframe":case"object":case"embed":be("load",i);break;case"video":case"audio":for(r=0;r<$o.length;r++)be($o[r],i);break;case"source":be("error",i);break;case"img":case"image":case"link":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"input":Zg(i,o),be("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},be("invalid",i);break;case"textarea":qg(i,o),be("invalid",i)}rf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?i.textContent!==c&&(o.suppressHydrationWarning!==!0&&Ul(i.textContent,c,t),r=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Ul(i.textContent,c,t),r=["children",""+c]):ha.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&be("scroll",i)}switch(n){case"input":Rl(i),Gg(i,o,!0);break;case"textarea":Rl(i),Kg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Iu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[On]=e,t[Ea]=i,ME(t,e,!1,!1),e.stateNode=t;e:{switch(l=sf(n,i),n){case"dialog":be("cancel",t),be("close",t),r=i;break;case"iframe":case"object":case"embed":be("load",t),r=i;break;case"video":case"audio":for(r=0;r<$o.length;r++)be($o[r],t);r=i;break;case"source":be("error",t),r=i;break;case"img":case"image":case"link":be("error",t),be("load",t),r=i;break;case"details":be("toggle",t),r=i;break;case"input":Zg(t,i),r=Jd(t,i),be("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Fe({},i,{value:void 0}),be("invalid",t);break;case"textarea":qg(t,i),r=tf(t,i),be("invalid",t);break;default:r=i}rf(n,r),c=r;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?f0(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&h0(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&da(t,h):typeof h=="number"&&da(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ha.hasOwnProperty(o)?h!=null&&o==="onScroll"&&be("scroll",t):h!=null&&Ap(t,o,h,l))}switch(n){case"input":Rl(t),Gg(t,i,!1);break;case"textarea":Rl(t),Kg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Gi(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Cs(t,!!i.multiple,o,!1):i.defaultValue!=null&&Cs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Iu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)FE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(z(166));if(n=_r(Ta.current),_r(Un.current),zl(e)){if(i=e.stateNode,n=e.memoizedProps,i[On]=e,(o=i.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:Ul(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ul(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[On]=e,e.stateNode=i}return yt(e),null;case 13:if(Re(Me),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&jt!==null&&e.mode&1&&!(e.flags&128))eE(),Fs(),e.flags|=98560,o=!1;else if(o=zl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[On]=e}else Fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),o=!1}else _n!==null&&(zf(_n),_n=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?it===0&&(it=3):_m())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return zs(),Lf(t,e),t===null&&ya(e.stateNode.containerInfo),yt(e),null;case 10:return Xp(e.type._context),yt(e),null;case 17:return Dt(e.type)&&xu(),yt(e),null;case 19:if(Re(Me),o=e.memoizedState,o===null)return yt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)No(o,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ou(t),l!==null){for(e.flags|=128,No(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Me,Me.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ge()>js&&(e.flags|=128,i=!0,No(o,!1),e.lanes=4194304)}else{if(!i)if(t=Ou(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Oe)return yt(e),null}else 2*Ge()-o.renderingStartTime>js&&n!==1073741824&&(e.flags|=128,i=!0,No(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ge(),e.sibling=null,n=Me.current,ke(Me,i?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return mm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Bt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function Lk(t,e){switch(Kp(e),e.tag){case 1:return Dt(e.type)&&xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zs(),Re(Mt),Re(Et),rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return im(e),null;case 13:if(Re(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Me),null;case 4:return zs(),null;case 10:return Xp(e.type._context),null;case 22:case 23:return mm(),null;case 24:return null;default:return null}}var Wl=!1,wt=!1,Nk=typeof WeakSet=="function"?WeakSet:Set,G=null;function vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ze(t,e,i)}else n.current=null}function Nf(t,e,n){try{n()}catch(i){ze(t,e,i)}}var Uv=!1;function Ok(t,e){if(mf=Su,t=j0(),Gp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,c=-1,h=-1,f=0,m=0,_=t,v=null;t:for(;;){for(var S;_!==n||r!==0&&_.nodeType!==3||(c=l+r),_!==o||i!==0&&_.nodeType!==3||(h=l+i),_.nodeType===3&&(l+=_.nodeValue.length),(S=_.firstChild)!==null;)v=_,_=S;for(;;){if(_===t)break t;if(v===n&&++f===r&&(c=l),v===o&&++m===i&&(h=l),(S=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=S}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(_f={focusedElem:t,selectionRange:n},Su=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,R=w.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?I:fn(e.type,I),R);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){ze(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return w=Uv,Uv=!1,w}function ta(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Nf(e,n,o)}r=r.next}while(r!==i)}}function kc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Of(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UE(t){var e=t.alternate;e!==null&&(t.alternate=null,UE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Ea],delete e[yf],delete e[mk],delete e[_k])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zE(t){return t.tag===5||t.tag===3||t.tag===4}function zv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Af(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Iu));else if(i!==4&&(t=t.child,t!==null))for(Af(t,e,n),t=t.sibling;t!==null;)Af(t,e,n),t=t.sibling}function Mf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}var dt=null,pn=!1;function vi(t,e,n){for(n=n.child;n!==null;)BE(t,e,n),n=n.sibling}function BE(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(wc,n)}catch{}switch(n.tag){case 5:wt||vs(n,e);case 6:var i=dt,r=pn;dt=null,vi(t,e,n),dt=i,pn=r,dt!==null&&(pn?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(pn?(t=dt,n=n.stateNode,t.nodeType===8?ld(t.parentNode,n):t.nodeType===1&&ld(t,n),_a(t)):ld(dt,n.stateNode));break;case 4:i=dt,r=pn,dt=n.stateNode.containerInfo,pn=!0,vi(t,e,n),dt=i,pn=r;break;case 0:case 11:case 14:case 15:if(!wt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Nf(n,e,l),r=r.next}while(r!==i)}vi(t,e,n);break;case 1:if(!wt&&(vs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){ze(n,e,c)}vi(t,e,n);break;case 21:vi(t,e,n);break;case 22:n.mode&1?(wt=(i=wt)||n.memoizedState!==null,vi(t,e,n),wt=i):vi(t,e,n);break;default:vi(t,e,n)}}function Bv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Nk),e.forEach(function(i){var r=Wk.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:dt=c.stateNode,pn=!1;break e;case 3:dt=c.stateNode.containerInfo,pn=!0;break e;case 4:dt=c.stateNode.containerInfo,pn=!0;break e}c=c.return}if(dt===null)throw Error(z(160));BE(o,l,r),dt=null,pn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){ze(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jE(e,t),e=e.sibling}function jE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Ln(t),i&4){try{ta(3,t,t.return),kc(3,t)}catch(I){ze(t,t.return,I)}try{ta(5,t,t.return)}catch(I){ze(t,t.return,I)}}break;case 1:dn(e,t),Ln(t),i&512&&n!==null&&vs(n,n.return);break;case 5:if(dn(e,t),Ln(t),i&512&&n!==null&&vs(n,n.return),t.flags&32){var r=t.stateNode;try{da(r,"")}catch(I){ze(t,t.return,I)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&l0(r,o),sf(c,l);var f=sf(c,o);for(l=0;l<h.length;l+=2){var m=h[l],_=h[l+1];m==="style"?f0(r,_):m==="dangerouslySetInnerHTML"?h0(r,_):m==="children"?da(r,_):Ap(r,m,_,f)}switch(c){case"input":Xd(r,o);break;case"textarea":u0(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Cs(r,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?Cs(r,!!o.multiple,o.defaultValue,!0):Cs(r,!!o.multiple,o.multiple?[]:"",!1))}r[Ea]=o}catch(I){ze(t,t.return,I)}}break;case 6:if(dn(e,t),Ln(t),i&4){if(t.stateNode===null)throw Error(z(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(I){ze(t,t.return,I)}}break;case 3:if(dn(e,t),Ln(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(e.containerInfo)}catch(I){ze(t,t.return,I)}break;case 4:dn(e,t),Ln(t);break;case 13:dn(e,t),Ln(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(fm=Ge())),i&4&&Bv(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(f=wt)||m,dn(e,t),wt=f):dn(e,t),Ln(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(G=t,m=t.child;m!==null;){for(_=G=m;G!==null;){switch(v=G,S=v.child,v.tag){case 0:case 11:case 14:case 15:ta(4,v,v.return);break;case 1:vs(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){ze(i,n,I)}}break;case 5:vs(v,v.return);break;case 22:if(v.memoizedState!==null){Wv(_);continue}}S!==null?(S.return=v,G=S):Wv(_)}m=m.sibling}e:for(m=null,_=t;;){if(_.tag===5){if(m===null){m=_;try{r=_.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=_.stateNode,h=_.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=d0("display",l))}catch(I){ze(t,t.return,I)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=f?"":_.memoizedProps}catch(I){ze(t,t.return,I)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:dn(e,t),Ln(t),i&4&&Bv(t);break;case 21:break;default:dn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zE(n)){var i=n;break e}n=n.return}throw Error(z(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(da(r,""),i.flags&=-33);var o=zv(t);Mf(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,c=zv(t);Af(t,c,l);break;default:throw Error(z(161))}}catch(h){ze(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ak(t,e,n){G=t,WE(t)}function WE(t,e,n){for(var i=(t.mode&1)!==0;G!==null;){var r=G,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||Wl;if(!l){var c=r.alternate,h=c!==null&&c.memoizedState!==null||wt;c=Wl;var f=wt;if(Wl=l,(wt=h)&&!f)for(G=r;G!==null;)l=G,h=l.child,l.tag===22&&l.memoizedState!==null?Hv(r):h!==null?(h.return=l,G=h):Hv(r);for(;o!==null;)G=o,WE(o),o=o.sibling;G=r,Wl=c,wt=f}jv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,G=o):jv(t)}}function jv(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||kc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!wt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Cv(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cv(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&_a(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}wt||e.flags&512&&Of(e)}catch(v){ze(e,e.return,v)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Wv(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Hv(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kc(4,e)}catch(h){ze(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){ze(e,r,h)}}var o=e.return;try{Of(e)}catch(h){ze(e,o,h)}break;case 5:var l=e.return;try{Of(e)}catch(h){ze(e,l,h)}}}catch(h){ze(e,e.return,h)}if(e===t){G=null;break}var c=e.sibling;if(c!==null){c.return=e.return,G=c;break}G=e.return}}var Mk=Math.ceil,Du=fi.ReactCurrentDispatcher,hm=fi.ReactCurrentOwner,nn=fi.ReactCurrentBatchConfig,ge=0,ut=null,Ye=null,mt=0,Bt=0,ys=Xi(0),it=0,Pa=null,Rr=0,bc=0,dm=0,na=null,Nt=null,fm=0,js=1/0,Yn=null,Fu=!1,Df=null,zi=null,Hl=!1,Li=null,Uu=0,ia=0,Ff=null,ou=-1,au=0;function Pt(){return ge&6?Ge():ou!==-1?ou:ou=Ge()}function Bi(t){return t.mode&1?ge&2&&mt!==0?mt&-mt:vk.transition!==null?(au===0&&(au=I0()),au):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:N0(t.type)),t):1}function wn(t,e,n,i){if(50<ia)throw ia=0,Ff=null,Error(z(185));Va(t,n,i),(!(ge&2)||t!==ut)&&(t===ut&&(!(ge&2)&&(bc|=n),it===4&&Ci(t,mt)),Ft(t,i),n===1&&ge===0&&!(e.mode&1)&&(js=Ge()+500,Ic&&er()))}function Ft(t,e){var n=t.callbackNode;v1(t,e);var i=Eu(t,t===ut?mt:0);if(i===0)n!==null&&Jg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Jg(n),e===1)t.tag===0?gk($v.bind(null,t)):Q0($v.bind(null,t)),fk(function(){!(ge&6)&&er()}),n=null;else{switch(x0(i)){case 1:n=zp;break;case 4:n=T0;break;case 16:n=wu;break;case 536870912:n=C0;break;default:n=wu}n=YE(n,HE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function HE(t,e){if(ou=-1,au=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(bs()&&t.callbackNode!==n)return null;var i=Eu(t,t===ut?mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=zu(t,i);else{e=i;var r=ge;ge|=2;var o=VE();(ut!==t||mt!==e)&&(Yn=null,js=Ge()+500,Er(t,e));do try{Uk();break}catch(c){$E(t,c)}while(1);Jp(),Du.current=o,ge=r,Ye!==null?e=0:(ut=null,mt=0,e=it)}if(e!==0){if(e===2&&(r=cf(t),r!==0&&(i=r,e=Uf(t,r))),e===1)throw n=Pa,Er(t,0),Ci(t,i),Ft(t,Ge()),n;if(e===6)Ci(t,i);else{if(r=t.current.alternate,!(i&30)&&!Dk(r)&&(e=zu(t,i),e===2&&(o=cf(t),o!==0&&(i=o,e=Uf(t,o))),e===1))throw n=Pa,Er(t,0),Ci(t,i),Ft(t,Ge()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(z(345));case 2:hr(t,Nt,Yn);break;case 3:if(Ci(t,i),(i&130023424)===i&&(e=fm+500-Ge(),10<e)){if(Eu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Pt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=vf(hr.bind(null,t,Nt,Yn),e);break}hr(t,Nt,Yn);break;case 4:if(Ci(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-yn(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=Ge()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Mk(i/1960))-i,10<i){t.timeoutHandle=vf(hr.bind(null,t,Nt,Yn),i);break}hr(t,Nt,Yn);break;case 5:hr(t,Nt,Yn);break;default:throw Error(z(329))}}}return Ft(t,Ge()),t.callbackNode===n?HE.bind(null,t):null}function Uf(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(Er(t,e).flags|=256),t=zu(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&zf(e)),t}function zf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function Dk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Sn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(t,e){for(e&=~dm,e&=~bc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),i=1<<n;t[n]=-1,e&=~i}}function $v(t){if(ge&6)throw Error(z(327));bs();var e=Eu(t,0);if(!(e&1))return Ft(t,Ge()),null;var n=zu(t,e);if(t.tag!==0&&n===2){var i=cf(t);i!==0&&(e=i,n=Uf(t,i))}if(n===1)throw n=Pa,Er(t,0),Ci(t,e),Ft(t,Ge()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,Nt,Yn),Ft(t,Ge()),null}function pm(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(js=Ge()+500,Ic&&er())}}function Lr(t){Li!==null&&Li.tag===0&&!(ge&6)&&bs();var e=ge;ge|=1;var n=nn.transition,i=Ee;try{if(nn.transition=null,Ee=1,t)return t()}finally{Ee=i,nn.transition=n,ge=e,!(ge&6)&&er()}}function mm(){Bt=ys.current,Re(ys)}function Er(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dk(n)),Ye!==null)for(n=Ye.return;n!==null;){var i=n;switch(Kp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xu();break;case 3:zs(),Re(Mt),Re(Et),rm();break;case 5:im(i);break;case 4:zs();break;case 13:Re(Me);break;case 19:Re(Me);break;case 10:Xp(i.type._context);break;case 22:case 23:mm()}n=n.return}if(ut=t,Ye=t=ji(t.current,null),mt=Bt=e,it=0,Pa=null,dm=bc=Rr=0,Nt=na=null,mr!==null){for(e=0;e<mr.length;e++)if(n=mr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}mr=null}return t}function $E(t,e){do{var n=Ye;try{if(Jp(),iu.current=Mu,Au){for(var i=De.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Au=!1}if(br=0,at=et=De=null,ea=!1,Ca=0,hm.current=null,n===null||n.return===null){it=1,Pa=e,Ye=null;break}e:{var o=t,l=n.return,c=n,h=e;if(e=mt,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=c,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=Lv(l);if(S!==null){S.flags&=-257,Nv(S,l,c,o,e),S.mode&1&&Rv(o,f,e),e=S,h=f;var w=e.updateQueue;if(w===null){var I=new Set;I.add(h),e.updateQueue=I}else w.add(h);break e}else{if(!(e&1)){Rv(o,f,e),_m();break e}h=Error(z(426))}}else if(Oe&&c.mode&1){var R=Lv(l);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Nv(R,l,c,o,e),Yp(Bs(h,c));break e}}o=h=Bs(h,c),it!==4&&(it=2),na===null?na=[o]:na.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var E=PE(o,h,e);Tv(o,E);break e;case 1:c=h;var y=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(zi===null||!zi.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=kE(o,c,e);Tv(o,b);break e}}o=o.return}while(o!==null)}GE(n)}catch(D){e=D,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function VE(){var t=Du.current;return Du.current=Mu,t===null?Mu:t}function _m(){(it===0||it===3||it===2)&&(it=4),ut===null||!(Rr&268435455)&&!(bc&268435455)||Ci(ut,mt)}function zu(t,e){var n=ge;ge|=2;var i=VE();(ut!==t||mt!==e)&&(Yn=null,Er(t,e));do try{Fk();break}catch(r){$E(t,r)}while(1);if(Jp(),ge=n,Du.current=i,Ye!==null)throw Error(z(261));return ut=null,mt=0,it}function Fk(){for(;Ye!==null;)ZE(Ye)}function Uk(){for(;Ye!==null&&!u1();)ZE(Ye)}function ZE(t){var e=KE(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?GE(t):Ye=e,hm.current=null}function GE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Lk(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,Ye=null;return}}else if(n=Rk(n,e,Bt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);it===0&&(it=5)}function hr(t,e,n){var i=Ee,r=nn.transition;try{nn.transition=null,Ee=1,zk(t,e,n,i)}finally{nn.transition=r,Ee=i}return null}function zk(t,e,n,i){do bs();while(Li!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(y1(t,o),t===ut&&(Ye=ut=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hl||(Hl=!0,YE(wu,function(){return bs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=nn.transition,nn.transition=null;var l=Ee;Ee=1;var c=ge;ge|=4,hm.current=null,Ok(t,n),jE(n,t),sk(_f),Su=!!mf,_f=mf=null,t.current=n,Ak(n),c1(),ge=c,Ee=l,nn.transition=o}else t.current=n;if(Hl&&(Hl=!1,Li=t,Uu=r),o=t.pendingLanes,o===0&&(zi=null),f1(n.stateNode),Ft(t,Ge()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Fu)throw Fu=!1,t=Df,Df=null,t;return Uu&1&&t.tag!==0&&bs(),o=t.pendingLanes,o&1?t===Ff?ia++:(ia=0,Ff=t):ia=0,er(),null}function bs(){if(Li!==null){var t=x0(Uu),e=nn.transition,n=Ee;try{if(nn.transition=null,Ee=16>t?16:t,Li===null)var i=!1;else{if(t=Li,Li=null,Uu=0,ge&6)throw Error(z(331));var r=ge;for(ge|=4,G=t.current;G!==null;){var o=G,l=o.child;if(G.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(G=f;G!==null;){var m=G;switch(m.tag){case 0:case 11:case 15:ta(8,m,o)}var _=m.child;if(_!==null)_.return=m,G=_;else for(;G!==null;){m=G;var v=m.sibling,S=m.return;if(UE(m),m===f){G=null;break}if(v!==null){v.return=S,G=v;break}G=S}}}var w=o.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var R=I.sibling;I.sibling=null,I=R}while(I!==null)}}G=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,G=l;else e:for(;G!==null;){if(o=G,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ta(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,G=E;break e}G=o.return}}var y=t.current;for(G=y;G!==null;){l=G;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,G=C;else e:for(l=y;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:kc(9,c)}}catch(D){ze(c,c.return,D)}if(c===l){G=null;break e}var b=c.sibling;if(b!==null){b.return=c.return,G=b;break e}G=c.return}}if(ge=r,er(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(wc,t)}catch{}i=!0}return i}finally{Ee=n,nn.transition=e}}return!1}function Vv(t,e,n){e=Bs(n,e),e=PE(t,e,1),t=Ui(t,e,1),e=Pt(),t!==null&&(Va(t,1,e),Ft(t,e))}function ze(t,e,n){if(t.tag===3)Vv(t,t,n);else for(;e!==null;){if(e.tag===3){Vv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zi===null||!zi.has(i))){t=Bs(n,t),t=kE(e,t,1),e=Ui(e,t,1),t=Pt(),e!==null&&(Va(e,1,t),Ft(e,t));break}}e=e.return}}function Bk(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,ut===t&&(mt&n)===n&&(it===4||it===3&&(mt&130023424)===mt&&500>Ge()-fm?Er(t,0):dm|=n),Ft(t,e)}function qE(t,e){e===0&&(t.mode&1?(e=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):e=1);var n=Pt();t=ui(t,e),t!==null&&(Va(t,e,n),Ft(t,n))}function jk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qE(t,n)}function Wk(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(z(314))}i!==null&&i.delete(e),qE(t,n)}var KE;KE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,bk(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Oe&&e.flags&1048576&&J0(e,bu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;su(t,e),t=e.pendingProps;var r=Ds(e,Et.current);ks(e,n),r=om(null,e,i,t,r,n);var o=am();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(i)?(o=!0,Pu(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,tm(e),r.updater=xc,e.stateNode=r,r._reactInternals=e,If(e,i,t,n),e=kf(null,e,i,!0,o,n)):(e.tag=0,Oe&&o&&qp(e),It(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(su(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=$k(i),t=fn(i,t),r){case 0:e=Pf(null,e,i,t,n);break e;case 1:e=Mv(null,e,i,t,n);break e;case 11:e=Ov(null,e,i,t,n);break e;case 14:e=Av(null,e,i,fn(i.type,t),n);break e}throw Error(z(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),Pf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),Mv(t,e,i,r,n);case 3:e:{if(NE(e),t===null)throw Error(z(387));i=e.pendingProps,o=e.memoizedState,r=o.element,nE(t,e),Nu(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Bs(Error(z(423)),e),e=Dv(t,e,i,n,r);break e}else if(i!==r){r=Bs(Error(z(424)),e),e=Dv(t,e,i,n,r);break e}else for(jt=Fi(e.stateNode.containerInfo.firstChild),Ht=e,Oe=!0,_n=null,n=oE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fs(),i===r){e=ci(t,e,n);break e}It(t,e,i,n)}e=e.child}return e;case 5:return aE(e),t===null&&Sf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,gf(i,r)?l=null:o!==null&&gf(i,o)&&(e.flags|=32),LE(t,e),It(t,e,l,n),e.child;case 6:return t===null&&Sf(e),null;case 13:return OE(t,e,n);case 4:return nm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Us(e,null,i,n):It(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),Ov(t,e,i,r,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,ke(Ru,i._currentValue),i._currentValue=l,o!==null)if(Sn(o.value,l)){if(o.children===r.children&&!Mt.current){e=ci(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=ii(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Tf(o.return,n,e),c.lanes|=n;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(z(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Tf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}It(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ks(e,n),r=sn(r),i=i(r),e.flags|=1,It(t,e,i,n),e.child;case 14:return i=e.type,r=fn(i,e.pendingProps),r=fn(i.type,r),Av(t,e,i,r,n);case 15:return bE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),su(t,e),e.tag=1,Dt(i)?(t=!0,Pu(e)):t=!1,ks(e,n),rE(e,i,r),If(e,i,r,n),kf(null,e,i,!0,t,n);case 19:return AE(t,e,n);case 22:return RE(t,e,n)}throw Error(z(156,e.tag))};function YE(t,e){return S0(t,e)}function Hk(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,i){return new Hk(t,e,n,i)}function gm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $k(t){if(typeof t=="function")return gm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dp)return 11;if(t===Fp)return 14}return 2}function ji(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lu(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")gm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case us:return Sr(n.children,r,o,e);case Mp:l=8,r|=8;break;case qd:return t=en(12,n,e,r|2),t.elementType=qd,t.lanes=o,t;case Kd:return t=en(13,n,e,r),t.elementType=Kd,t.lanes=o,t;case Yd:return t=en(19,n,e,r),t.elementType=Yd,t.lanes=o,t;case s0:return Rc(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i0:l=10;break e;case r0:l=9;break e;case Dp:l=11;break e;case Fp:l=14;break e;case Ei:l=16,i=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=en(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Sr(t,e,n,i){return t=en(7,t,i,e),t.lanes=n,t}function Rc(t,e,n,i){return t=en(22,t,i,e),t.elementType=s0,t.lanes=n,t.stateNode={isHidden:!1},t}function _d(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function gd(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vk(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qh(0),this.expirationTimes=Qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function vm(t,e,n,i,r,o,l,c,h){return t=new Vk(t,e,n,c,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=en(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tm(o),t}function Zk(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function QE(t){if(!t)return qi;t=t._reactInternals;e:{if(Wr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Dt(n))return Y0(t,n,e)}return e}function JE(t,e,n,i,r,o,l,c,h){return t=vm(n,i,!0,t,r,o,l,c,h),t.context=QE(null),n=t.current,i=Pt(),r=Bi(n),o=ii(i,r),o.callback=e??null,Ui(n,o,r),t.current.lanes=r,Va(t,r,i),Ft(t,i),t}function Lc(t,e,n,i){var r=e.current,o=Pt(),l=Bi(r);return n=QE(n),e.context===null?e.context=n:e.pendingContext=n,e=ii(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ui(r,e,l),t!==null&&(wn(t,r,l,o),nu(t,r,l)),l}function Bu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ym(t,e){Zv(t,e),(t=t.alternate)&&Zv(t,e)}function Gk(){return null}var XE=typeof reportError=="function"?reportError:function(t){console.error(t)};function wm(t){this._internalRoot=t}Nc.prototype.render=wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Lc(t,e,null,null)};Nc.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){Lc(null,t,null,null)}),e[li]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=b0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ti.length&&e!==0&&e<Ti[n].priority;n++);Ti.splice(n,0,t),n===0&&L0(t)}};function Em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gv(){}function qk(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Bu(l);o.call(f)}}var l=JE(e,i,t,0,null,!1,!1,"",Gv);return t._reactRootContainer=l,t[li]=l.current,ya(t.nodeType===8?t.parentNode:t),Lr(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var c=i;i=function(){var f=Bu(h);c.call(f)}}var h=vm(t,0,!1,null,null,!1,!1,"",Gv);return t._reactRootContainer=h,t[li]=h.current,ya(t.nodeType===8?t.parentNode:t),Lr(function(){Lc(e,h,n,i)}),h}function Ac(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var c=r;r=function(){var h=Bu(l);c.call(h)}}Lc(e,l,t,r)}else l=qk(n,e,t,r,i);return Bu(l)}P0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&(Bp(e,n|1),Ft(e,Ge()),!(ge&6)&&(js=Ge()+500,er()))}break;case 13:Lr(function(){var i=ui(t,1);if(i!==null){var r=Pt();wn(i,t,1,r)}}),ym(t,1)}};jp=function(t){if(t.tag===13){var e=ui(t,134217728);if(e!==null){var n=Pt();wn(e,t,134217728,n)}ym(t,134217728)}};k0=function(t){if(t.tag===13){var e=Bi(t),n=ui(t,e);if(n!==null){var i=Pt();wn(n,t,e,i)}ym(t,e)}};b0=function(){return Ee};R0=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};af=function(t,e,n){switch(e){case"input":if(Xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Cc(i);if(!r)throw Error(z(90));a0(i),Xd(i,r)}}}break;case"textarea":u0(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};_0=pm;g0=Lr;var Kk={usingClientEntryPoint:!1,Events:[Ga,fs,Cc,p0,m0,pm]},Oo={findFiberByHostInstance:pr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Yk={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=w0(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Gk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{wc=$l.inject(Yk),Fn=$l}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kk;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Em(e))throw Error(z(200));return Zk(t,e,null,n)};Zt.createRoot=function(t,e){if(!Em(t))throw Error(z(299));var n=!1,i="",r=XE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=vm(t,1,!1,null,null,n,!1,i,r),t[li]=e.current,ya(t.nodeType===8?t.parentNode:t),new wm(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=w0(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return Lr(t)};Zt.hydrate=function(t,e,n){if(!Oc(e))throw Error(z(200));return Ac(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!Em(t))throw Error(z(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=XE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=JE(e,null,t,1,n??null,r,!1,o,l),t[li]=e.current,ya(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Nc(e)};Zt.render=function(t,e,n){if(!Oc(e))throw Error(z(200));return Ac(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Oc(t))throw Error(z(40));return t._reactRootContainer?(Lr(function(){Ac(null,null,t,!1,function(){t._reactRootContainer=null,t[li]=null})}),!0):!1};Zt.unstable_batchedUpdates=pm;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Oc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Ac(t,e,n,!1,i)};Zt.version="18.2.0-next-9e3b772b8-20220608";function eS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eS)}catch(t){console.error(t)}}eS(),Jw.exports=Zt;var Qk=Jw.exports,qv=Qk;Zd.createRoot=qv.createRoot,Zd.hydrateRoot=qv.hydrateRoot;const tS=k.createContext(),Jk=({children:t})=>{const[e,n]=k.useState(null);return x.jsx(tS.Provider,{value:{authUser:e,setAuthUser:n},children:t})},nS=()=>k.useContext(tS);/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ka.apply(this,arguments)}var Ni;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ni||(Ni={}));const Kv="popstate";function Xk(t){t===void 0&&(t={});function e(r,o){let{pathname:l="/",search:c="",hash:h=""}=Hr(r.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Bf("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let l=r.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");c=f===-1?h:h.slice(0,f)}return c+"#"+(typeof o=="string"?o:iS(o))}function i(r,o){Mc(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return tb(e,n,i,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eb(){return Math.random().toString(36).substr(2,8)}function Yv(t,e){return{usr:t.state,key:t.key,idx:e}}function Bf(t,e,n,i){return n===void 0&&(n=null),ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hr(e):e,{state:n,key:e&&e.key||i||eb()})}function iS(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Hr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function tb(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,c=Ni.Pop,h=null,f=m();f==null&&(f=0,l.replaceState(ka({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function _(){c=Ni.Pop;let R=m(),E=R==null?null:R-f;f=R,h&&h({action:c,location:I.location,delta:E})}function v(R,E){c=Ni.Push;let y=Bf(I.location,R,E);n&&n(y,R),f=m()+1;let C=Yv(y,f),b=I.createHref(y);try{l.pushState(C,"",b)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(b)}o&&h&&h({action:c,location:I.location,delta:1})}function S(R,E){c=Ni.Replace;let y=Bf(I.location,R,E);n&&n(y,R),f=m();let C=Yv(y,f),b=I.createHref(y);l.replaceState(C,"",b),o&&h&&h({action:c,location:I.location,delta:0})}function w(R){let E=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof R=="string"?R:iS(R);return rt(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let I={get action(){return c},get location(){return t(r,l)},listen(R){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Kv,_),h=R,()=>{r.removeEventListener(Kv,_),h=null}},createHref(R){return e(r,R)},createURL:w,encodeLocation(R){let E=w(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:S,go(R){return l.go(R)}};return I}var Qv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qv||(Qv={}));function nb(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Hr(e):e,r=oS(i.pathname||"/",n);if(r==null)return null;let o=rS(t);ib(o);let l=null;for(let c=0;l==null&&c<o.length;++c)l=db(o[c],mb(r));return l}function rS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(rt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=Tr([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(rt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),rS(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:cb(f,o.index),routesMeta:m})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,l);else for(let h of sS(o.path))r(o,l,h)}),e}function sS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=sS(i.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),r&&c.push(...l),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function ib(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hb(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const rb=/^:\w+$/,sb=3,ob=2,ab=1,lb=10,ub=-2,Jv=t=>t==="*";function cb(t,e){let n=t.split("/"),i=n.length;return n.some(Jv)&&(i+=ub),e&&(i+=ob),n.filter(r=>!Jv(r)).reduce((r,o)=>r+(rb.test(o)?sb:o===""?ab:lb),i)}function hb(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function db(t,e){let{routesMeta:n}=t,i={},r="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],h=l===n.length-1,f=r==="/"?e:e.slice(r.length)||"/",m=fb({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f);if(!m)return null;Object.assign(i,m.params);let _=c.route;o.push({params:i,pathname:Tr([r,m.pathname]),pathnameBase:Eb(Tr([r,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(r=Tr([r,m.pathnameBase]))}return o}function fb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=pb(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((f,m,_)=>{let{paramName:v,isOptional:S}=m;if(v==="*"){let I=c[_]||"";l=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const w=c[_];return S&&!w?f[v]=void 0:f[v]=_b(w||"",v),f},{}),pathname:o,pathnameBase:l,pattern:t}}function pb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(l,c,h)=>(i.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function mb(t){try{return decodeURI(t)}catch(e){return Mc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _b(t,e){try{return decodeURIComponent(t)}catch(n){return Mc(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function oS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function gb(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Hr(t):t;return{pathname:n?n.startsWith("/")?n:vb(n,e):e,search:Sb(i),hash:Tb(r)}}function vb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function vd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wb(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Hr(t):(r=ka({},t),rt(!r.pathname||!r.pathname.includes("?"),vd("?","pathname","search",r)),rt(!r.pathname||!r.pathname.includes("#"),vd("#","pathname","hash",r)),rt(!r.search||!r.search.includes("#"),vd("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,c;if(i||l==null)c=n;else{let _=e.length-1;if(l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),_-=1;r.pathname=v.join("/")}c=_>=0?e[_]:"/"}let h=gb(r,c),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Tr=t=>t.join("/").replace(/\/\/+/g,"/"),Eb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Cb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aS=["post","put","patch","delete"];new Set(aS);const Ib=["get",...aS];new Set(Ib);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ju.apply(this,arguments)}const Sm=k.createContext(null),xb=k.createContext(null),Dc=k.createContext(null),Fc=k.createContext(null),no=k.createContext({outlet:null,matches:[],isDataRoute:!1}),lS=k.createContext(null);function Uc(){return k.useContext(Fc)!=null}function uS(){return Uc()||rt(!1),k.useContext(Fc).location}function cS(t){k.useContext(Dc).static||k.useLayoutEffect(t)}function zc(){let{isDataRoute:t}=k.useContext(no);return t?zb():Pb()}function Pb(){Uc()||rt(!1);let t=k.useContext(Sm),{basename:e,navigator:n}=k.useContext(Dc),{matches:i}=k.useContext(no),{pathname:r}=uS(),o=JSON.stringify(yb(i).map(h=>h.pathnameBase)),l=k.useRef(!1);return cS(()=>{l.current=!0}),k.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let m=wb(h,JSON.parse(o),r,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Tr([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,o,r,t])}function kb(t,e){return bb(t,e)}function bb(t,e,n){Uc()||rt(!1);let{navigator:i}=k.useContext(Dc),{matches:r}=k.useContext(no),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=uS(),f;if(e){var m;let I=typeof e=="string"?Hr(e):e;c==="/"||(m=I.pathname)!=null&&m.startsWith(c)||rt(!1),f=I}else f=h;let _=f.pathname||"/",v=c==="/"?_:_.slice(c.length)||"/",S=nb(t,{pathname:v}),w=Ab(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:Tr([c,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?c:Tr([c,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),r,n);return e&&w?k.createElement(Fc.Provider,{value:{location:ju({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ni.Pop}},w):w}function Rb(){let t=Ub(),e=Cb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:r},n):null,o)}const Lb=k.createElement(Rb,null);class Nb extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?k.createElement(no.Provider,{value:this.props.routeContext},k.createElement(lS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ob(t){let{routeContext:e,match:n,children:i}=t,r=k.useContext(Sm);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(no.Provider,{value:e},i)}function Ab(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let c=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id]));c>=0||rt(!1),o=o.slice(0,Math.min(o.length,c+1))}return o.reduceRight((c,h,f)=>{let m=h.route.id?l==null?void 0:l[h.route.id]:null,_=null;n&&(_=h.route.errorElement||Lb);let v=e.concat(o.slice(0,f+1)),S=()=>{let w;return m?w=_:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=c,k.createElement(Ob,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(Nb,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}var hS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hS||{}),Wu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wu||{});function Mb(t){let e=k.useContext(Sm);return e||rt(!1),e}function Db(t){let e=k.useContext(xb);return e||rt(!1),e}function Fb(t){let e=k.useContext(no);return e||rt(!1),e}function dS(t){let e=Fb(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function Ub(){var t;let e=k.useContext(lS),n=Db(Wu.UseRouteError),i=dS(Wu.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function zb(){let{router:t}=Mb(hS.UseNavigateStable),e=dS(Wu.UseNavigateStable),n=k.useRef(!1);return cS(()=>{n.current=!0}),k.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,ju({fromRouteId:e},o)))},[t,e])}function os(t){rt(!1)}function Bb(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ni.Pop,navigator:o,static:l=!1}=t;Uc()&&rt(!1);let c=e.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:c,navigator:o,static:l}),[c,o,l]);typeof i=="string"&&(i=Hr(i));let{pathname:f="/",search:m="",hash:_="",state:v=null,key:S="default"}=i,w=k.useMemo(()=>{let I=oS(f,c);return I==null?null:{location:{pathname:I,search:m,hash:_,state:v,key:S},navigationType:r}},[c,f,m,_,v,S,r]);return w==null?null:k.createElement(Dc.Provider,{value:h},k.createElement(Fc.Provider,{children:n,value:w}))}function jb(t){let{children:e,location:n}=t;return kb(jf(e),n)}new Promise(()=>{});function jf(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(i,r)=>{if(!k.isValidElement(i))return;let o=[...e,r];if(i.type===k.Fragment){n.push.apply(n,jf(i.props.children,o));return}i.type!==os&&rt(!1),!i.props.index||!i.props.children||rt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=jf(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Wb="startTransition",Xv=jP[Wb];function Hb(t){let{basename:e,children:n,future:i,window:r}=t,o=k.useRef();o.current==null&&(o.current=Xk({window:r,v5Compat:!0}));let l=o.current,[c,h]=k.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=k.useCallback(_=>{f&&Xv?Xv(()=>h(_)):h(_)},[h,f]);return k.useLayoutEffect(()=>l.listen(m),[l,m]),k.createElement(Bb,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:l})}var ey;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ey||(ey={}));var ty;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ty||(ty={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=function(t,e){if(!t)throw io(e)},io=function(t){return new Error("Firebase Database ("+fS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$b=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Tm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,_=(o&3)<<4|c>>4;let v=(c&15)<<2|f>>6,S=f&63;h||(S=64,l||(v=64)),i.push(n[m],n[_],n[v],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$b(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const _=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||_==null)throw new Vb;const v=o<<2|c>>4;if(i.push(v),f!==64){const S=c<<4&240|f>>2;if(i.push(S),_!==64){const w=f<<6&192|_;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mS=function(t){const e=pS(t);return Tm.encodeByteArray(e,!0)},Hu=function(t){return mS(t).replace(/\./g,"")},$u=function(t){try{return Tm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){return _S(void 0,t)}function _S(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Gb(n)||(t[n]=_S(t[n],e[n]));return t}function Gb(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=()=>qb().__FIREBASE_DEFAULTS__,Yb=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$u(t[1]);return e&&JSON.parse(e)},Bc=()=>{try{return Kb()||Yb()||Qb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gS=t=>{var e,n;return(n=(e=Bc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vS=t=>{const e=gS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yS=()=>{var t;return(t=Bc())===null||t===void 0?void 0:t.config},wS=t=>{var e;return(e=Bc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[Hu(JSON.stringify(n)),Hu(JSON.stringify(l)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function Jb(){var t;const e=(t=Bc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xb(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CS(){return fS.NODE_ADMIN===!0}function IS(){try{return typeof indexedDB=="object"}catch{return!1}}function xS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function eR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="FirebaseError";class In extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tR,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$r.prototype.create)}}class $r{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?nR(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new In(r,c,i)}}function nR(t,e){return t.replace(iR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const iR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){return JSON.parse(t)}function nt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=ba($u(o[0])||""),n=ba($u(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},rR=function(t){const e=PS(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sR=function(t){const e=PS(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ws(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Wf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vu(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Ra(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(ny(o)&&ny(l)){if(!Ra(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ny(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Zo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const v=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(v<<1|v>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4],f,m;for(let _=0;_<80;_++){_<40?_<20?(f=c^o&(l^c),m=1518500249):(f=o^l^c,m=1859775393):_<60?(f=o&l|c&(o|l),m=2400959708):(f=o^l^c,m=3395469782);const v=(r<<5|r>>>27)+f+h+m+i[_]&4294967295;h=c,c=l,l=(o<<30|o>>>2)&4294967295,o=r,r=v}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<n;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function aR(t,e){const n=new lR(t,e);return n.subscribe.bind(n)}class lR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");uR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=yd),r.error===void 0&&(r.error=yd),r.complete===void 0&&(r.complete=yd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yd(){}function jc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,j(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Wc=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=1e3,dR=2,fR=4*60*60*1e3,pR=.5;function iy(t,e=hR,n=dR){const i=e*Math.pow(n,t),r=Math.round(pR*i*(Math.random()-.5)*2);return Math.min(fR,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class an{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ka;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:dr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dr){return this.instances.has(e)}getOptions(e=dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_R(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=dr){return this.component?this.component.multipleInstances?e:dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _R(t){return t===dr?void 0:t}function gR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const yR={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},wR=Se.INFO,ER={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},SR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ER[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hc{constructor(e){this.name=e,this._logLevel=wR,this._logHandler=SR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const TR=(t,e)=>e.some(n=>t instanceof n);let ry,sy;function CR(){return ry||(ry=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IR(){return sy||(sy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kS=new WeakMap,Hf=new WeakMap,bS=new WeakMap,wd=new WeakMap,Im=new WeakMap;function xR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Wi(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&kS.set(n,t)}).catch(()=>{}),Im.set(e,t),e}function PR(t){if(Hf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Hf.set(t,e)}let $f={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kR(t){$f=t($f)}function bR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ed(this),e,...n);return bS.set(i,e.sort?e.sort():[e]),Wi(i)}:IR().includes(t)?function(...e){return t.apply(Ed(this),e),Wi(kS.get(this))}:function(...e){return Wi(t.apply(Ed(this),e))}}function RR(t){return typeof t=="function"?bR(t):(t instanceof IDBTransaction&&PR(t),TR(t,CR())?new Proxy(t,$f):t)}function Wi(t){if(t instanceof IDBRequest)return xR(t);if(wd.has(t))return wd.get(t);const e=RR(t);return e!==t&&(wd.set(t,e),Im.set(e,t)),e}const Ed=t=>Im.get(t);function LR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=Wi(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Wi(l.result),h.oldVersion,h.newVersion,Wi(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const NR=["get","getKey","getAll","getAllKeys","count"],OR=["put","add","delete","clear"],Sd=new Map;function oy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sd.get(e))return Sd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=OR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||NR.includes(n)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&h.done]))[0]};return Sd.set(e,o),o}kR(t=>({...t,get:(e,n,i)=>oy(e,n)||t.get(e,n,i),has:(e,n)=>!!oy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function MR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vf="@firebase/app",ay="0.9.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Hc("@firebase/app"),DR="@firebase/app-compat",FR="@firebase/analytics-compat",UR="@firebase/analytics",zR="@firebase/app-check-compat",BR="@firebase/app-check",jR="@firebase/auth",WR="@firebase/auth-compat",HR="@firebase/database",$R="@firebase/database-compat",VR="@firebase/functions",ZR="@firebase/functions-compat",GR="@firebase/installations",qR="@firebase/installations-compat",KR="@firebase/messaging",YR="@firebase/messaging-compat",QR="@firebase/performance",JR="@firebase/performance-compat",XR="@firebase/remote-config",eL="@firebase/remote-config-compat",tL="@firebase/storage",nL="@firebase/storage-compat",iL="@firebase/firestore",rL="@firebase/firestore-compat",sL="firebase",oL="10.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="[DEFAULT]",aL={[Vf]:"fire-core",[DR]:"fire-core-compat",[UR]:"fire-analytics",[FR]:"fire-analytics-compat",[BR]:"fire-app-check",[zR]:"fire-app-check-compat",[jR]:"fire-auth",[WR]:"fire-auth-compat",[HR]:"fire-rtdb",[$R]:"fire-rtdb-compat",[VR]:"fire-fn",[ZR]:"fire-fn-compat",[GR]:"fire-iid",[qR]:"fire-iid-compat",[KR]:"fire-fcm",[YR]:"fire-fcm-compat",[QR]:"fire-perf",[JR]:"fire-perf-compat",[XR]:"fire-rc",[eL]:"fire-rc-compat",[tL]:"fire-gcs",[nL]:"fire-gcs-compat",[iL]:"fire-fst",[rL]:"fire-fst-compat","fire-js":"fire-js",[sL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,Gf=new Map;function lL(t,e){try{t.container.addComponent(e)}catch(n){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){const e=t.name;if(Gf.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Gf.set(e,t);for(const n of Zu.values())lL(n,t);return!0}function tr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Hi=new $r("app","Firebase",uL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=oL;function RS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Zf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Hi.create("bad-app-name",{appName:String(r)});if(n||(n=yS()),!n)throw Hi.create("no-options");const o=Zu.get(r);if(o){if(Ra(n,o.options)&&Ra(i,o.config))return o;throw Hi.create("duplicate-app",{appName:r})}const l=new vR(r);for(const h of Gf.values())l.addComponent(h);const c=new cL(n,i,l);return Zu.set(r,c),c}function $c(t=Zf){const e=Zu.get(t);if(!e&&t===Zf&&yS())return RS();if(!e)throw Hi.create("no-app",{appName:t});return e}function Ut(t,e,n){var i;let r=(i=aL[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(c.join(" "));return}Tn(new an(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL="firebase-heartbeat-database",dL=1,La="firebase-heartbeat-store";let Td=null;function LS(){return Td||(Td=LR(hL,dL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(La)}}}).catch(t=>{throw Hi.create("idb-open",{originalErrorMessage:t.message})})),Td}async function fL(t){try{return await(await LS()).transaction(La).objectStore(La).get(NS(t))}catch(e){if(e instanceof In)Nr.warn(e.message);else{const n=Hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nr.warn(n.message)}}}async function ly(t,e){try{const i=(await LS()).transaction(La,"readwrite");await i.objectStore(La).put(e,NS(t)),await i.done}catch(n){if(n instanceof In)Nr.warn(n.message);else{const i=Hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nr.warn(i.message)}}}function NS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=1024,mL=30*24*60*60*1e3;class _L{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vL(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=uy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=mL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uy(),{heartbeatsToSend:i,unsentEntries:r}=gL(this._heartbeatsCache.heartbeats),o=Hu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function uy(){return new Date().toISOString().substring(0,10)}function gL(t,e=pL){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),cy(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),cy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class vL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IS()?xS().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fL(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ly(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ly(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cy(t){return Hu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t){Tn(new an("platform-logger",e=>new AR(e),"PRIVATE")),Tn(new an("heartbeat",e=>new _L(e),"PRIVATE")),Ut(Vf,ay,t),Ut(Vf,ay,"esm2017"),Ut("fire-js","")}yL("");var wL="firebase",EL="10.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut(wL,EL,"app");const SL=(t,e)=>e.some(n=>t instanceof n);let hy,dy;function TL(){return hy||(hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CL(){return dy||(dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,qf=new WeakMap,AS=new WeakMap,Cd=new WeakMap,xm=new WeakMap;function IL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n($i(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&OS.set(n,t)}).catch(()=>{}),xm.set(e,t),e}function xL(t){if(qf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});qf.set(t,e)}let Kf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PL(t){Kf=t(Kf)}function kL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Id(this),e,...n);return AS.set(i,e.sort?e.sort():[e]),$i(i)}:CL().includes(t)?function(...e){return t.apply(Id(this),e),$i(OS.get(this))}:function(...e){return $i(t.apply(Id(this),e))}}function bL(t){return typeof t=="function"?kL(t):(t instanceof IDBTransaction&&xL(t),SL(t,TL())?new Proxy(t,Kf):t)}function $i(t){if(t instanceof IDBRequest)return IL(t);if(Cd.has(t))return Cd.get(t);const e=bL(t);return e!==t&&(Cd.set(t,e),xm.set(e,t)),e}const Id=t=>xm.get(t);function RL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=$i(l);return i&&l.addEventListener("upgradeneeded",h=>{i($i(l.result),h.oldVersion,h.newVersion,$i(l.transaction))}),n&&l.addEventListener("blocked",()=>n()),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",()=>r())}).catch(()=>{}),c}const LL=["get","getKey","getAll","getAllKeys","count"],NL=["put","add","delete","clear"],xd=new Map;function fy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xd.get(e))return xd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=NL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||LL.includes(n)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&h.done]))[0]};return xd.set(e,o),o}PL(t=>({...t,get:(e,n,i)=>fy(e,n)||t.get(e,n,i),has:(e,n)=>!!fy(e,n)||t.has(e,n)}));const MS="@firebase/installations",Pm="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=1e4,FS=`w:${Pm}`,US="FIS_v2",OL="https://firebaseinstallations.googleapis.com/v1",AL=60*60*1e3,ML="installations",DL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Or=new $r(ML,DL,FL);function zS(t){return t instanceof In&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS({projectId:t}){return`${OL}/projects/${t}/installations`}function jS(t){return{token:t.token,requestStatus:2,expiresIn:zL(t.expiresIn),creationTime:Date.now()}}async function WS(t,e){const i=(await e.json()).error;return Or.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function HS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function UL(t,{refreshToken:e}){const n=HS(t);return n.append("Authorization",BL(e)),n}async function $S(t){const e=await t();return e.status>=500&&e.status<600?t():e}function zL(t){return Number(t.replace("s","000"))}function BL(t){return`${US} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=BS(t),r=HS(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={fid:n,authVersion:US,appId:t.appId,sdkVersion:FS},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await $S(()=>fetch(i,c));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:jS(f.authToken)}}else throw await WS("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=/^[cdef][\w-]{21}$/,Yf="";function $L(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=VL(t);return HL.test(n)?n:Yf}catch{return Yf}}function VL(t){return WL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new Map;function GS(t,e){const n=Vc(t);qS(n,e),ZL(n,e)}function qS(t,e){const n=ZS.get(t);if(n)for(const i of n)i(e)}function ZL(t,e){const n=GL();n&&n.postMessage({key:t,fid:e}),qL()}let gr=null;function GL(){return!gr&&"BroadcastChannel"in self&&(gr=new BroadcastChannel("[Firebase] FID Change"),gr.onmessage=t=>{qS(t.data.key,t.data.fid)}),gr}function qL(){ZS.size===0&&gr&&(gr.close(),gr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="firebase-installations-database",YL=1,Ar="firebase-installations-store";let Pd=null;function km(){return Pd||(Pd=RL(KL,YL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ar)}}})),Pd}async function Gu(t,e){const n=Vc(t),r=(await km()).transaction(Ar,"readwrite"),o=r.objectStore(Ar),l=await o.get(n);return await o.put(e,n),await r.done,(!l||l.fid!==e.fid)&&GS(t,e.fid),e}async function KS(t){const e=Vc(t),i=(await km()).transaction(Ar,"readwrite");await i.objectStore(Ar).delete(e),await i.done}async function Zc(t,e){const n=Vc(t),r=(await km()).transaction(Ar,"readwrite"),o=r.objectStore(Ar),l=await o.get(n),c=e(l);return c===void 0?await o.delete(n):await o.put(c,n),await r.done,c&&(!l||l.fid!==c.fid)&&GS(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bm(t){let e;const n=await Zc(t.appConfig,i=>{const r=QL(i),o=JL(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Yf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function QL(t){const e=t||{fid:$L(),registrationStatus:0};return YS(e)}function JL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Or.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=XL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eN(t)}:{installationEntry:e}}async function XL(t,e){try{const n=await jL(t,e);return Gu(t.appConfig,n)}catch(n){throw zS(n)&&n.customData.serverCode===409?await KS(t.appConfig):await Gu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function eN(t){let e=await py(t.appConfig);for(;e.registrationStatus===1;)await VS(100),e=await py(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await bm(t);return i||n}return e}function py(t){return Zc(t,e=>{if(!e)throw Or.create("installation-not-found");return YS(e)})}function YS(t){return tN(t)?{fid:t.fid,registrationStatus:0}:t}function tN(t){return t.registrationStatus===1&&t.registrationTime+DS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN({appConfig:t,heartbeatServiceProvider:e},n){const i=iN(t,n),r=UL(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={installation:{sdkVersion:FS,appId:t.appId}},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await $S(()=>fetch(i,c));if(h.ok){const f=await h.json();return jS(f)}else throw await WS("Generate Auth Token",h)}function iN(t,{fid:e}){return`${BS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(t,e=!1){let n;const i=await Zc(t.appConfig,o=>{if(!QS(o))throw Or.create("not-registered");const l=o.authToken;if(!e&&oN(l))return o;if(l.requestStatus===1)return n=rN(t,e),o;{if(!navigator.onLine)throw Or.create("app-offline");const c=lN(o);return n=sN(t,c),c}});return n?await n:i.authToken}async function rN(t,e){let n=await my(t.appConfig);for(;n.authToken.requestStatus===1;)await VS(100),n=await my(t.appConfig);const i=n.authToken;return i.requestStatus===0?Rm(t,e):i}function my(t){return Zc(t,e=>{if(!QS(e))throw Or.create("not-registered");const n=e.authToken;return uN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function sN(t,e){try{const n=await nN(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Gu(t.appConfig,i),n}catch(n){if(zS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await KS(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Gu(t.appConfig,i)}throw n}}function QS(t){return t!==void 0&&t.registrationStatus===2}function oN(t){return t.requestStatus===2&&!aN(t)}function aN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+AL}function lN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uN(t){return t.requestStatus===1&&t.requestTime+DS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t){const e=t,{installationEntry:n,registrationPromise:i}=await bm(e);return i?i.catch(console.error):Rm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(t,e=!1){const n=t;return await dN(n),(await Rm(n,e)).token}async function dN(t){const{registrationPromise:e}=await bm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){if(!t||!t.options)throw kd("App Configuration");if(!t.name)throw kd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw kd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function kd(t){return Or.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="installations",pN="installations-internal",mN=t=>{const e=t.getProvider("app").getImmediate(),n=fN(e),i=tr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},_N=t=>{const e=t.getProvider("app").getImmediate(),n=tr(e,JS).getImmediate();return{getId:()=>cN(n),getToken:r=>hN(n,r)}};function gN(){Tn(new an(JS,mN,"PUBLIC")),Tn(new an(pN,_N,"PRIVATE"))}gN();Ut(MS,Pm);Ut(MS,Pm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="analytics",vN="firebase_id",yN="origin",wN=60*1e3,EN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt=new Hc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$t=new $r("analytics","Analytics",SN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){if(!t.startsWith(Lm)){const e=$t.create("invalid-gtag-resource",{gtagURL:t});return zt.warn(e.message),""}return t}function XS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function CN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function IN(t,e){const n=CN("firebase-js-sdk-policy",{createScriptURL:TN}),i=document.createElement("script"),r=`${Lm}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function xN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function PN(t,e,n,i,r,o){const l=i[r];try{if(l)await e[l];else{const h=(await XS(n)).find(f=>f.measurementId===r);h&&await e[h.appId]}}catch(c){zt.error(c)}t("config",r,o)}async function kN(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const c=await XS(n);for(const h of l){const f=c.find(_=>_.measurementId===h),m=f&&e[f.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){zt.error(o)}}function bN(t,e,n,i){async function r(o,...l){try{if(o==="event"){const[c,h]=l;await kN(t,e,n,c,h)}else if(o==="config"){const[c,h]=l;await PN(t,e,n,i,c,h)}else if(o==="consent"){const[c]=l;t("consent","update",c)}else if(o==="get"){const[c,h,f]=l;t("get",c,h,f)}else if(o==="set"){const[c]=l;t("set",c)}else t(o,...l)}catch(c){zt.error(c)}}return r}function RN(t,e,n,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=bN(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function LN(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Lm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=30,ON=1e3;class AN{constructor(e={},n=ON){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const eT=new AN;function MN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function DN(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:MN(i)},o=EN.replace("{app-id}",n),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let c="";try{const h=await l.json();!((e=h.error)===null||e===void 0)&&e.message&&(c=h.error.message)}catch{}throw $t.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function FN(t,e=eT,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw $t.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw $t.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new BN;return setTimeout(async()=>{c.abort()},n!==void 0?n:wN),tT({appId:i,apiKey:r,measurementId:o},l,c,e)}async function tT(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=eT){var o;const{appId:l,measurementId:c}=t;try{await UN(i,e)}catch(h){if(c)return zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:l,measurementId:c};throw h}try{const h=await DN(t);return r.deleteThrottleMetadata(l),h}catch(h){const f=h;if(!zN(f)){if(r.deleteThrottleMetadata(l),c)return zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:l,measurementId:c};throw h}const m=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?iy(n,r.intervalMillis,NN):iy(n,r.intervalMillis),_={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return r.setThrottleMetadata(l,_),zt.debug(`Calling attemptFetch again in ${m} millis`),tT(t,_,i,r)}}function UN(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i($t.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function zN(t){if(!(t instanceof In)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class BN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jN(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,l=Object.assign(Object.assign({},i),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(){if(IS())try{await xS()}catch(t){return zt.warn($t.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zt.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function HN(t,e,n,i,r,o,l){var c;const h=FN(t);h.then(S=>{n[S.measurementId]=S.appId,t.options.measurementId&&S.measurementId!==t.options.measurementId&&zt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>zt.error(S)),e.push(h);const f=WN().then(S=>{if(S)return i.getId()}),[m,_]=await Promise.all([h,f]);LN(o)||IN(o,m.measurementId),r("js",new Date);const v=(c=l==null?void 0:l.config)!==null&&c!==void 0?c:{};return v[yN]="firebase",v.update=!0,_!=null&&(v[vN]=_),r("config",m.measurementId,v),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.app=e}_delete(){return delete ra[this.app.options.appId],Promise.resolve()}}let ra={},_y=[];const gy={};let bd="dataLayer",VN="gtag",vy,nT,yy=!1;function ZN(){const t=[];if(SS()&&t.push("This is a browser extension environment."),eR()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=$t.create("invalid-analytics-context",{errorInfo:e});zt.warn(n.message)}}function GN(t,e,n){ZN();const i=t.options.appId;if(!i)throw $t.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $t.create("no-api-key");if(ra[i]!=null)throw $t.create("already-exists",{id:i});if(!yy){xN(bd);const{wrappedGtag:o,gtagCore:l}=RN(ra,_y,gy,bd,VN);nT=o,vy=l,yy=!0}return ra[i]=HN(t,_y,gy,e,vy,bd,n),new $N(t)}function qN(t=$c()){t=Ue(t);const e=tr(t,qu);return e.isInitialized()?e.getImmediate():KN(t)}function KN(t,e={}){const n=tr(t,qu);if(n.isInitialized()){const r=n.getImmediate();if(Ra(e,n.getOptions()))return r;throw $t.create("already-initialized")}return n.initialize({options:e})}function YN(t,e,n,i){t=Ue(t),jN(nT,ra[t.app.options.appId],e,n,i).catch(r=>zt.error(r))}const wy="@firebase/analytics",Ey="0.10.0";function QN(){Tn(new an(qu,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return GN(i,r,n)},"PUBLIC")),Tn(new an("analytics-internal",t,"PRIVATE")),Ut(wy,Ey),Ut(wy,Ey,"esm2017");function t(e){try{const n=e.getProvider(qu).getImmediate();return{logEvent:(i,r,o)=>YN(n,i,r,o)}}catch(n){throw $t.create("interop-component-reg-failed",{reason:n})}}}QN();const Sy="@firebase/database",Ty="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iT="";function JN(t){iT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ba(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new XN(e)}}catch{}return new eO},vr=rT("localStorage"),Qf=rT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Hc("@firebase/database"),tO=function(){let t=1;return function(){return t++}}(),sT=function(t){const e=cR(t),n=new oR;n.update(e);const i=n.digest();return Tm.encodeByteArray(i)},Ya=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Ya.apply(null,i):typeof i=="object"?e+=nt(i):e+=i,e+=" "}return e};let Cr=null,Cy=!0;const nO=function(t,e){j(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Rs.logLevel=Se.VERBOSE,Cr=Rs.log.bind(Rs),e&&Qf.set("logging_enabled",!0)):typeof t=="function"?Cr=t:(Cr=null,Qf.remove("logging_enabled"))},pt=function(...t){if(Cy===!0&&(Cy=!1,Cr===null&&Qf.get("logging_enabled")===!0&&nO(!0)),Cr){const e=Ya.apply(null,t);Cr(e)}},Qa=function(t){return function(...e){pt(t,...e)}},Jf=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ya(...t);Rs.error(e)},hi=function(...t){const e=`FIREBASE FATAL ERROR: ${Ya(...t)}`;throw Rs.error(e),new Error(e)},kt=function(...t){const e="FIREBASE WARNING: "+Ya(...t);Rs.warn(e)},iO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Nm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rO=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Hs="[MIN_NAME]",Mr="[MAX_NAME]",Zr=function(t,e){if(t===e)return 0;if(t===Hs||e===Mr)return-1;if(e===Hs||t===Mr)return 1;{const n=Iy(t),i=Iy(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},sO=function(t,e){return t===e?0:t<e?-1:1},Ao=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+nt(e))},Om=function(t){if(typeof t!="object"||t===null)return nt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=nt(e[i]),n+=":",n+=Om(t[e[i]]);return n+="}",n},oT=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function gt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const aT=function(t){j(!Nm(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,l,c,h;t===0?(o=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=c+i,l=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(o=0,l=Math.round(t/Math.pow(2,1-i-n))));const f=[];for(h=n;h;h-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(r?1:0),f.reverse();const m=f.join("");let _="";for(h=0;h<64;h+=8){let v=parseInt(m.substr(h,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},oO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},aO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function lO(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const uO=new RegExp("^-?(0*)\\d{1,10}$"),cO=-2147483648,hO=2147483647,Iy=function(t){if(uO.test(t)){const e=Number(t);if(e>=cO&&e<=hO)return e}return null},so=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw kt("Exception was thrown by user callback.",n),e},Math.floor(0))}},dO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},sa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){kt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(pt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kt(e)}}class Ls{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ls.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="5",lT="v",uT="s",cT="r",hT="f",dT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fT="ls",pT="p",Xf="ac",mT="websocket",_T="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,i,r,o=!1,l="",c=!1,h=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function mO(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vT(t,e,n){j(typeof e=="string","typeof type must == string"),j(typeof n=="object","typeof params must == object");let i;if(e===mT)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===_T)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);mO(t)&&(n.ns=t.namespace);const r=[];return gt(n,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.counters_={}}incrementCounter(e,n=1){Wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Zb(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd={},Ld={};function Mm(t){const e=t.toString();return Rd[e]||(Rd[e]=new _O),Rd[e]}function gO(t,e){const n=t.toString();return Ld[n]||(Ld[n]=e()),Ld[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&so(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="start",yO="close",wO="pLPCommand",EO="pRTLPCB",yT="id",wT="pw",ET="ser",SO="cb",TO="seg",CO="ts",IO="d",xO="dframe",ST=1870,TT=30,PO=ST-TT,kO=25e3,bO=3e4;class ws{constructor(e,n,i,r,o,l,c){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qa(e),this.stats_=Mm(n),this.urlFn=h=>(this.appCheckToken&&(h[Xf]=this.appCheckToken),vT(n,_T,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new vO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(bO)),rO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dm((...o)=>{const[l,c,h,f,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===xy)this.id=c,this.password=h;else if(l===yO)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const i={};i[xy]="t",i[ET]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[SO]=this.scriptTagHolder.uniqueCallbackIdentifier),i[lT]=Am,this.transportSessionId&&(i[uT]=this.transportSessionId),this.lastSessionId&&(i[fT]=this.lastSessionId),this.applicationId&&(i[pT]=this.applicationId),this.appCheckToken&&(i[Xf]=this.appCheckToken),typeof location<"u"&&location.hostname&&dT.test(location.hostname)&&(i[cT]=hT);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ws.forceAllow_=!0}static forceDisallow(){ws.forceDisallow_=!0}static isAvailable(){return ws.forceAllow_?!0:!ws.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!oO()&&!aO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=nt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=mS(n),r=oT(i,PO);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[xO]="t",i[yT]=e,i[wT]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=nt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Dm{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=tO(),window[wO+this.uniqueCallbackIdentifier]=e,window[EO+this.uniqueCallbackIdentifier]=n,this.myIFrame=Dm.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){pt("frame writing exception"),c.stack&&pt(c.stack),pt(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[yT]=this.myID,e[wT]=this.myPW,e[ET]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+TT+i.length<=ST;){const l=this.pendingSegs.shift();i=i+"&"+TO+r+"="+l.seg+"&"+CO+r+"="+l.ts+"&"+IO+r+"="+l.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(kO)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{pt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=16384,LO=45e3;let Ku=null;typeof MozWebSocket<"u"?Ku=MozWebSocket:typeof WebSocket<"u"&&(Ku=WebSocket);class gn{constructor(e,n,i,r,o,l,c){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qa(this.connId),this.stats_=Mm(n),this.connURL=gn.connectionURL_(n,l,c,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const l={};return l[lT]=Am,typeof location<"u"&&location.hostname&&dT.test(location.hostname)&&(l[cT]=hT),n&&(l[uT]=n),i&&(l[fT]=i),r&&(l[Xf]=r),o&&(l[pT]=o),vT(e,mT,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vr.set("previous_websocket_failure",!0);try{let i;CS(),this.mySock=new Ku(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){gn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Ku!==null&&!gn.forceDisallow_}static previouslyFailed(){return vr.isInMemoryStorage||vr.get("previous_websocket_failure")===!0}markConnectionHealthy(){vr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=ba(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(j(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=nt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=oT(n,RO);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(LO))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}gn.responsesRequiredToBeHealthy=2;gn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ws,gn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=gn&&gn.isAvailable();let i=n&&!gn.previouslyFailed();if(e.webSocketOnly&&(n||kt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gn];else{const r=this.transports_=[];for(const o of Na.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);Na.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Na.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=6e4,OO=5e3,AO=10*1024,MO=100*1024,Nd="t",Py="d",DO="s",ky="r",FO="e",by="o",Ry="a",Ly="n",Ny="p",UO="h";class zO{constructor(e,n,i,r,o,l,c,h,f,m){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qa("c:"+this.id+":"),this.transportManager_=new Na(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=sa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>MO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>AO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Nd in e){const n=e[Nd];n===Ry?this.upgradeIfSecondaryHealthy_():n===ky?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===by&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ao("t",e),i=Ao("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ny,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ry,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ly,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ao("t",e),i=Ao("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ao(Nd,e);if(Py in e){const i=e[Py];if(n===UO){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Ly){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===DO?this.onConnectionShutdown_(i):n===ky?this.onReset_(i):n===FO?Jf("Server Error: "+i):n===by?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Am!==i&&kt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),sa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(NO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(OO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ny,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.allowedEvents_=e,this.listeners_={},j(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){j(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends IT{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Cm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Yu}getInitialEvent(e){return j(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=32,Ay=768;class Te{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ye(){return new Te("")}function oe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ki(t){return t.pieces_.length-t.pieceNum_}function Pe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Te(t.pieces_,e)}function Fm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function BO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Oa(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Te(e,0)}function Be(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Te)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Te(n,0)}function ce(t){return t.pieceNum_>=t.pieces_.length}function xt(t,e){const n=oe(t),i=oe(e);if(n===null)return e;if(n===i)return xt(Pe(t),Pe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function jO(t,e){const n=Oa(t,0),i=Oa(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=Zr(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function Um(t,e){if(Ki(t)!==Ki(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function tn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Ki(t)>Ki(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class WO{constructor(e,n){this.errorPrefix_=n,this.parts_=Oa(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Wc(this.parts_[i]);PT(this)}}function HO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Wc(e),PT(t)}function $O(t){const e=t.parts_.pop();t.byteLength_-=Wc(e),t.parts_.length>0&&(t.byteLength_-=1)}function PT(t){if(t.byteLength_>Ay)throw new Error(t.errorPrefix_+"has a key path longer than "+Ay+" bytes ("+t.byteLength_+").");if(t.parts_.length>Oy)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Oy+") or object contains a cycle "+fr(t))}function fr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends IT{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new zm}getInitialEvent(e){return j(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=1e3,VO=60*5*1e3,My=30*1e3,ZO=1.3,GO=3e4,qO="server_kill",Dy=3;class ri extends CT{constructor(e,n,i,r,o,l,c,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=h,this.id=ri.nextPersistentConnectionId_++,this.log_=Qa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mo,this.maxReconnectDelay_=VO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!CS())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Yu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(nt(o)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Ka,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const h=c.d,f=c.s;ri.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(f,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Wn(e,"w")){const i=Ws(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();kt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||sR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=My)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=rR(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const l={p:n,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+nt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Jf("Unrecognized action received from server: "+nt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>GO&&(this.reconnectDelay_=Mo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ZO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ri.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,i())},f=function(_){j(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)};this.realtime_={close:h,sendRequest:f};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,v]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?pt("getToken() completed but was canceled"):(pt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=v&&v.token,c=new zO(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,S=>{kt(S+" ("+this.repoInfo_.toString()+")"),this.interrupt(qO)},o))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&kt(_),h())}}}interrupt(e){pt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){pt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Wf(this.interruptReasons_)&&(this.reconnectDelay_=Mo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>Om(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Te(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){pt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Dy&&(this.reconnectDelay_=My,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){pt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Dy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+iT.replace(/\./g,"-")]=1,Cm()?e["framework.cordova"]=1:TS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Yu.getInstance().currentlyOnline();return Wf(this.interruptReasons_)&&e}}ri.nextPersistentConnectionId_=0;ri.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ae(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new ae(Hs,e),r=new ae(Hs,n);return this.compare(i,r)!==0}minPost(){return ae.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl;class kT extends Gc{static get __EMPTY_NODE(){return Vl}static set __EMPTY_NODE(e){Vl=e}compare(e,n){return Zr(e.name,n.name)}isDefinedOn(e){throw io("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ae.MIN}maxPost(){return new ae(Mr,Vl)}makePost(e,n){return j(typeof e=="string","KeyIndex indexValue must always be a string."),new ae(e,Vl)}toString(){return".key"}}const Ns=new kT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class lt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??lt.RED,this.left=r??At.EMPTY_NODE,this.right=o??At.EMPTY_NODE}copy(e,n,i,r,o){return new lt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}lt.RED=!0;lt.BLACK=!1;class KO{copy(e,n,i,r,o){return this}insert(e,n,i){return new lt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class At{constructor(e,n=At.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new At(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,lt.BLACK,null,null))}remove(e){return new At(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Zl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Zl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Zl(this.root_,null,this.comparator_,!0,e)}}At.EMPTY_NODE=new KO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){return Zr(t.name,e.name)}function Bm(t,e){return Zr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep;function QO(t){ep=t}const bT=function(t){return typeof t=="number"?"number:"+aT(t):"string:"+t},RT=function(t){if(t.isLeafNode()){const e=t.val();j(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wn(e,".sv"),"Priority must be a string or number.")}else j(t===ep||t.isEmpty(),"priority of unexpected type.");j(t===ep||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy;class ot{constructor(e,n=ot.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),RT(this.priorityNode_)}static set __childrenNodeConstructor(e){Fy=e}static get __childrenNodeConstructor(){return Fy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ot(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ot.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ce(e)?this:oe(e)===".priority"?this.priorityNode_:ot.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ot.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=oe(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(j(i!==".priority"||Ki(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ot.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+bT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=aT(this.value_):e+=this.value_,this.lazyHash_=sT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ot.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ot.__childrenNodeConstructor?-1:(j(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=ot.VALUE_TYPE_ORDER.indexOf(n),o=ot.VALUE_TYPE_ORDER.indexOf(i);return j(r>=0,"Unknown leaf type: "+n),j(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ot.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LT,NT;function JO(t){LT=t}function XO(t){NT=t}class eA extends Gc{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Zr(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ae.MIN}maxPost(){return new ae(Mr,new ot("[PRIORITY-POST]",NT))}makePost(e,n){const i=LT(e);return new ae(n,new ot("[PRIORITY-POST]",i))}toString(){return".priority"}}const je=new eA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=Math.log(2);class nA{constructor(e){const n=o=>parseInt(Math.log(o)/tA,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Qu=function(t,e,n,i){t.sort(e);const r=function(h,f){const m=f-h;let _,v;if(m===0)return null;if(m===1)return _=t[h],v=n?n(_):_,new lt(v,_.node,lt.BLACK,null,null);{const S=parseInt(m/2,10)+h,w=r(h,S),I=r(S+1,f);return _=t[S],v=n?n(_):_,new lt(v,_.node,lt.BLACK,w,I)}},o=function(h){let f=null,m=null,_=t.length;const v=function(w,I){const R=_-w,E=_;_-=w;const y=r(R+1,E),C=t[R],b=n?n(C):C;S(new lt(b,C.node,I,null,y))},S=function(w){f?(f.left=w,f=w):(m=w,f=w)};for(let w=0;w<h.count;++w){const I=h.nextBitIsOne(),R=Math.pow(2,h.count-(w+1));I?v(R,lt.BLACK):(v(R,lt.BLACK),v(R,lt.RED))}return m},l=new nA(t.length),c=o(l);return new At(i||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od;const ss={};class ei{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return j(ss&&je,"ChildrenNode.ts has not been loaded"),Od=Od||new ei({".priority":ss},{".priority":je}),Od}get(e){const n=Ws(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof At?n:null}hasIndex(e){return Wn(this.indexSet_,e.toString())}addIndex(e,n){j(e!==Ns,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(ae.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let c;r?c=Qu(i,e.getCompare()):c=ss;const h=e.toString(),f=Object.assign({},this.indexSet_);f[h]=e;const m=Object.assign({},this.indexes_);return m[h]=c,new ei(m,f)}addToIndexes(e,n){const i=Vu(this.indexes_,(r,o)=>{const l=Ws(this.indexSet_,o);if(j(l,"Missing index implementation for "+o),r===ss)if(l.isDefinedOn(e.node)){const c=[],h=n.getIterator(ae.Wrap);let f=h.getNext();for(;f;)f.name!==e.name&&c.push(f),f=h.getNext();return c.push(e),Qu(c,l.getCompare())}else return ss;else{const c=n.get(e.name);let h=r;return c&&(h=h.remove(new ae(e.name,c))),h.insert(e,e.node)}});return new ei(i,this.indexSet_)}removeFromIndexes(e,n){const i=Vu(this.indexes_,r=>{if(r===ss)return r;{const o=n.get(e.name);return o?r.remove(new ae(e.name,o)):r}});return new ei(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do;class ee{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RT(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Do||(Do=new ee(new At(Bm),null,ei.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Do}updatePriority(e){return this.children_.isEmpty()?this:new ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Do:n}}getChild(e){const n=oe(e);return n===null?this:this.getImmediateChild(n).getChild(Pe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(j(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new ae(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?Do:this.priorityNode_;return new ee(r,l,o)}}updateChild(e,n){const i=oe(e);if(i===null)return n;{j(oe(e)!==".priority"||Ki(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Pe(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(je,(l,c)=>{n[l]=c.val(e),i++,o&&ee.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const c in n)l[c]=n[c];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+bT(this.getPriority().val())+":"),this.forEachChild(je,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":sT(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new ae(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ae(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ae(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,ae.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,ae.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ja?-1:0}withIndex(e){if(e===Ns||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ns||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(je),r=n.getIterator(je);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Ns?null:this.indexMap_.get(e.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class iA extends ee{constructor(){super(new At(Bm),ee.EMPTY_NODE,ei.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}}const Ja=new iA;Object.defineProperties(ae,{MIN:{value:new ae(Hs,ee.EMPTY_NODE)},MAX:{value:new ae(Mr,Ja)}});kT.__EMPTY_NODE=ee.EMPTY_NODE;ot.__childrenNodeConstructor=ee;QO(Ja);XO(Ja);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=!0;function tt(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),j(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ot(n,tt(e))}if(!(t instanceof Array)&&rA){const n=[];let i=!1;if(gt(t,(l,c)=>{if(l.substring(0,1)!=="."){const h=tt(c);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new ae(l,h)))}}),n.length===0)return ee.EMPTY_NODE;const o=Qu(n,YO,l=>l.name,Bm);if(i){const l=Qu(n,je.getCompare());return new ee(o,tt(e),new ei({".priority":l},{".priority":je}))}else return new ee(o,tt(e),ei.Default)}else{let n=ee.EMPTY_NODE;return gt(t,(i,r)=>{if(Wn(t,i)&&i.substring(0,1)!=="."){const o=tt(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(tt(e))}}JO(tt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA extends Gc{constructor(e){super(),this.indexPath_=e,j(!ce(e)&&oe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Zr(e.name,n.name):o}makePost(e,n){const i=tt(e),r=ee.EMPTY_NODE.updateChild(this.indexPath_,i);return new ae(n,r)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,Ja);return new ae(Mr,e)}toString(){return Oa(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA extends Gc{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Zr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ae.MIN}maxPost(){return ae.MAX}makePost(e,n){const i=tt(e);return new ae(n,i)}toString(){return".value"}}const aA=new oA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){return{type:"value",snapshotNode:t}}function $s(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Aa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ma(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function lA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.index_=e}updateChild(e,n,i,r,o,l){j(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(r).equals(i.getChild(r))&&c.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange(Aa(n,c)):j(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange($s(n,i)):l.trackChildChange(Ma(n,i,c))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(je,(r,o)=>{n.hasChild(r)||i.trackChildChange(Aa(r,o))}),n.isLeafNode()||n.forEachChild(je,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(Ma(r,o,l))}else i.trackChildChange($s(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.indexedFilter_=new jm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Da.getStartPost_(e),this.endPost_=Da.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,l){return this.matches(new ae(n,i))||(i=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ee.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ee.EMPTY_NODE);const o=this;return n.forEachChild(je,(l,c)=>{o.matches(new ae(l,c))||(r=r.updateImmediateChild(l,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Da(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,l){return this.rangedFilter_.matches(new ae(n,i))||(i=ee.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,l):this.fullLimitUpdateChild_(e,n,i,o,l)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ee.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))r=r.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ee.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let l=0;for(;o.hasNext();){const c=o.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:r=r.updateImmediateChild(c.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let l;if(this.reverse_){const _=this.index_.getCompare();l=(v,S)=>_(S,v)}else l=this.index_.getCompare();const c=e;j(c.numChildren()===this.limit_,"");const h=new ae(n,i),f=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),m=this.rangedFilter_.matches(h);if(c.hasChild(n)){const _=c.getImmediateChild(n);let v=r.getChildAfterChild(this.index_,f,this.reverse_);for(;v!=null&&(v.name===n||c.hasChild(v.name));)v=r.getChildAfterChild(this.index_,v,this.reverse_);const S=v==null?1:l(v,h);if(m&&!i.isEmpty()&&S>=0)return o!=null&&o.trackChildChange(Ma(n,i,_)),c.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Aa(n,_));const I=c.updateImmediateChild(n,ee.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(o!=null&&o.trackChildChange($s(v.name,v.node)),I.updateImmediateChild(v.name,v.node)):I}}else return i.isEmpty()?e:m&&l(f,h)>=0?(o!=null&&(o.trackChildChange(Aa(f.name,f.node)),o.trackChildChange($s(n,i))),c.updateImmediateChild(n,i).updateImmediateChild(f.name,ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hs}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===je}copy(){const e=new Wm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cA(t){return t.loadsAllData()?new jm(t.getIndex()):t.hasLimit()?new uA(t):new Da(t)}function Uy(t){const e={};if(t.isDefault())return e;let n;if(t.index_===je?n="$priority":t.index_===aA?n="$value":t.index_===Ns?n="$key":(j(t.index_ instanceof sA,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=nt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=nt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+nt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=nt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+nt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function zy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==je&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends CT{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Qa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(j(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Ju.getListenId_(e,i),c={};this.listens_[l]=c;const h=Uy(e._queryParams);this.restRequest_(o+".json",h,(f,m)=>{let _=m;if(f===404&&(_=null,f=null),f===null&&this.onDataUpdate_(o,_,!1,i),Ws(this.listens_,l)===c){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",r(v,null)}})}unlisten(e,n){const i=Ju.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Uy(e._queryParams),i=e._path.toString(),r=new Ka;return this.restRequest_(i+".json",n,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(i,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ro(n);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let h=null;if(c.status>=200&&c.status<300){try{h=ba(c.responseText)}catch{kt("Failed to parse JSON response for "+l+": "+c.responseText)}i(null,h)}else c.status!==401&&c.status!==404&&kt("Got unsuccessful REST response for "+l+" Status: "+c.status),i(c.status);i=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(){return{value:null,children:new Map}}function AT(t,e,n){if(ce(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=oe(e);t.children.has(i)||t.children.set(i,Xu());const r=t.children.get(i);e=Pe(e),AT(r,e,n)}}function tp(t,e,n){t.value!==null?n(e,t.value):dA(t,(i,r)=>{const o=new Te(e.toString()+"/"+i);tp(r,o,n)})}function dA(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gt(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=10*1e3,pA=30*1e3,mA=5*60*1e3;class _A{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new fA(e);const i=By+(pA-By)*Math.random();sa(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;gt(e,(r,o)=>{o>0&&Wn(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),sa(this.reportStats_.bind(this),Math.floor(Math.random()*2*mA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vn||(vn={}));function Hm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $m(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Vm(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=vn.ACK_USER_WRITE,this.source=Hm()}operationForChild(e){if(ce(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Te(e));return new ec(ye(),n,this.revert)}}else return j(oe(this.path)===e,"operationForChild called for unrelated child."),new ec(Pe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){this.source=e,this.path=n,this.type=vn.LISTEN_COMPLETE}operationForChild(e){return ce(this.path)?new Fa(this.source,ye()):new Fa(this.source,Pe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=vn.OVERWRITE}operationForChild(e){return ce(this.path)?new Dr(this.source,ye(),this.snap.getImmediateChild(e)):new Dr(this.source,Pe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=vn.MERGE}operationForChild(e){if(ce(this.path)){const n=this.children.subtree(new Te(e));return n.isEmpty()?null:n.value?new Dr(this.source,ye(),n.value):new Vs(this.source,ye(),n)}else return j(oe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vs(this.source,Pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ce(e))return this.isFullyInitialized()&&!this.filtered_;const n=oe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function vA(t,e,n,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(lA(l.childName,l.snapshotNode))}),Fo(t,r,"child_removed",e,i,n),Fo(t,r,"child_added",e,i,n),Fo(t,r,"child_moved",o,i,n),Fo(t,r,"child_changed",e,i,n),Fo(t,r,"value",e,i,n),r}function Fo(t,e,n,i,r,o){const l=i.filter(c=>c.type===n);l.sort((c,h)=>wA(t,c,h)),l.forEach(c=>{const h=yA(t,c,o);r.forEach(f=>{f.respondsTo(c.type)&&e.push(f.createEvent(h,t.query_))})})}function yA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function wA(t,e,n){if(e.childName==null||n.childName==null)throw io("Should only compare child_ events.");const i=new ae(e.childName,e.snapshotNode),r=new ae(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e){return{eventCache:t,serverCache:e}}function oa(t,e,n,i){return qc(new Yi(e,n,i),t.serverCache)}function MT(t,e,n,i){return qc(t.eventCache,new Yi(e,n,i))}function tc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Fr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad;const EA=()=>(Ad||(Ad=new At(sO)),Ad);class xe{constructor(e,n=EA()){this.value=e,this.children=n}static fromObject(e){let n=new xe(null);return gt(e,(i,r)=>{n=n.set(new Te(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ye(),value:this.value};if(ce(e))return null;{const i=oe(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(Pe(e),n);return o!=null?{path:Be(new Te(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ce(e))return this;{const n=oe(e),i=this.children.get(n);return i!==null?i.subtree(Pe(e)):new xe(null)}}set(e,n){if(ce(e))return new xe(n,this.children);{const i=oe(e),o=(this.children.get(i)||new xe(null)).set(Pe(e),n),l=this.children.insert(i,o);return new xe(this.value,l)}}remove(e){if(ce(e))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=oe(e),i=this.children.get(n);if(i){const r=i.remove(Pe(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new xe(null):new xe(this.value,o)}else return this}}get(e){if(ce(e))return this.value;{const n=oe(e),i=this.children.get(n);return i?i.get(Pe(e)):null}}setTree(e,n){if(ce(e))return n;{const i=oe(e),o=(this.children.get(i)||new xe(null)).setTree(Pe(e),n);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new xe(this.value,l)}}fold(e){return this.fold_(ye(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Be(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,ye(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(ce(e))return null;{const o=oe(e),l=this.children.get(o);return l?l.findOnPath_(Pe(e),Be(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ye(),n)}foreachOnPath_(e,n,i){if(ce(e))return this;{this.value&&i(n,this.value);const r=oe(e),o=this.children.get(r);return o?o.foreachOnPath_(Pe(e),Be(n,r),i):new xe(null)}}foreach(e){this.foreach_(ye(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Be(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.writeTree_=e}static empty(){return new En(new xe(null))}}function aa(t,e,n){if(ce(e))return new En(new xe(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=xt(r,e);return o=o.updateChild(l,n),new En(t.writeTree_.set(r,o))}else{const r=new xe(n),o=t.writeTree_.setTree(e,r);return new En(o)}}}function np(t,e,n){let i=t;return gt(n,(r,o)=>{i=aa(i,Be(e,r),o)}),i}function jy(t,e){if(ce(e))return En.empty();{const n=t.writeTree_.setTree(e,new xe(null));return new En(n)}}function ip(t,e){return Gr(t,e)!=null}function Gr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xt(n.path,e)):null}function Wy(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(je,(i,r)=>{e.push(new ae(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new ae(i,r.value))}),e}function Vi(t,e){if(ce(e))return t;{const n=Gr(t,e);return n!=null?new En(new xe(n)):new En(t.writeTree_.subtree(e))}}function rp(t){return t.writeTree_.isEmpty()}function Zs(t,e){return DT(ye(),t.writeTree_,e)}function DT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(j(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=DT(Be(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Be(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t,e){return BT(e,t)}function SA(t,e,n,i,r){j(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=aa(t.visibleWrites,e,n)),t.lastWriteId=i}function TA(t,e,n,i){j(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=np(t.visibleWrites,e,n),t.lastWriteId=i}function CA(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function IA(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);j(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const c=t.allWrites[l];c.visible&&(l>=n&&xA(c,i.path)?r=!1:tn(i.path,c.path)&&(o=!0)),l--}if(r){if(o)return PA(t),!0;if(i.snap)t.visibleWrites=jy(t.visibleWrites,i.path);else{const c=i.children;gt(c,h=>{t.visibleWrites=jy(t.visibleWrites,Be(i.path,h))})}return!0}else return!1}function xA(t,e){if(t.snap)return tn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&tn(Be(t.path,n),e))return!0;return!1}function PA(t){t.visibleWrites=FT(t.allWrites,kA,ye()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function kA(t){return t.visible}function FT(t,e,n){let i=En.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const l=o.path;let c;if(o.snap)tn(n,l)?(c=xt(n,l),i=aa(i,c,o.snap)):tn(l,n)&&(c=xt(l,n),i=aa(i,ye(),o.snap.getChild(c)));else if(o.children){if(tn(n,l))c=xt(n,l),i=np(i,c,o.children);else if(tn(l,n))if(c=xt(l,n),ce(c))i=np(i,ye(),o.children);else{const h=Ws(o.children,oe(c));if(h){const f=h.getChild(Pe(c));i=aa(i,ye(),f)}}}else throw io("WriteRecord should have .snap or .children")}}return i}function UT(t,e,n,i,r){if(!i&&!r){const o=Gr(t.visibleWrites,e);if(o!=null)return o;{const l=Vi(t.visibleWrites,e);if(rp(l))return n;if(n==null&&!ip(l,ye()))return null;{const c=n||ee.EMPTY_NODE;return Zs(l,c)}}}else{const o=Vi(t.visibleWrites,e);if(!r&&rp(o))return n;if(!r&&n==null&&!ip(o,ye()))return null;{const l=function(f){return(f.visible||r)&&(!i||!~i.indexOf(f.writeId))&&(tn(f.path,e)||tn(e,f.path))},c=FT(t.allWrites,l,e),h=n||ee.EMPTY_NODE;return Zs(c,h)}}}function bA(t,e,n){let i=ee.EMPTY_NODE;const r=Gr(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(je,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(n){const o=Vi(t.visibleWrites,e);return n.forEachChild(je,(l,c)=>{const h=Zs(Vi(o,new Te(l)),c);i=i.updateImmediateChild(l,h)}),Wy(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=Vi(t.visibleWrites,e);return Wy(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function RA(t,e,n,i,r){j(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Be(e,n);if(ip(t.visibleWrites,o))return null;{const l=Vi(t.visibleWrites,o);return rp(l)?r.getChild(n):Zs(l,r.getChild(n))}}function LA(t,e,n,i){const r=Be(e,n),o=Gr(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const l=Vi(t.visibleWrites,r);return Zs(l,i.getNode().getImmediateChild(n))}else return null}function NA(t,e){return Gr(t.visibleWrites,e)}function OA(t,e,n,i,r,o,l){let c;const h=Vi(t.visibleWrites,e),f=Gr(h,ye());if(f!=null)c=f;else if(n!=null)c=Zs(h,n);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const m=[],_=l.getCompare(),v=o?c.getReverseIteratorFrom(i,l):c.getIteratorFrom(i,l);let S=v.getNext();for(;S&&m.length<r;)_(S,i)!==0&&m.push(S),S=v.getNext();return m}else return[]}function AA(){return{visibleWrites:En.empty(),allWrites:[],lastWriteId:-1}}function nc(t,e,n,i){return UT(t.writeTree,t.treePath,e,n,i)}function Zm(t,e){return bA(t.writeTree,t.treePath,e)}function Hy(t,e,n,i){return RA(t.writeTree,t.treePath,e,n,i)}function ic(t,e){return NA(t.writeTree,Be(t.treePath,e))}function MA(t,e,n,i,r,o){return OA(t.writeTree,t.treePath,e,n,i,r,o)}function Gm(t,e,n){return LA(t.writeTree,t.treePath,e,n)}function zT(t,e){return BT(Be(t.treePath,e),t.writeTree)}function BT(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;j(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),j(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,Ma(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Aa(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,$s(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,Ma(i,e.snapshotNode,r.oldSnap));else throw io("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const jT=new FA;class qm{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Yi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gm(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fr(this.viewCache_),o=MA(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){return{filter:t}}function zA(t,e){j(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),j(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function BA(t,e,n,i,r){const o=new DA;let l,c;if(n.type===vn.OVERWRITE){const f=n;f.source.fromUser?l=sp(t,e,f.path,f.snap,i,r,o):(j(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered()&&!ce(f.path),l=rc(t,e,f.path,f.snap,i,r,c,o))}else if(n.type===vn.MERGE){const f=n;f.source.fromUser?l=WA(t,e,f.path,f.children,i,r,o):(j(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered(),l=op(t,e,f.path,f.children,i,r,c,o))}else if(n.type===vn.ACK_USER_WRITE){const f=n;f.revert?l=VA(t,e,f.path,i,r,o):l=HA(t,e,f.path,f.affectedTree,i,r,o)}else if(n.type===vn.LISTEN_COMPLETE)l=$A(t,e,n.path,i,o);else throw io("Unknown operation type: "+n.type);const h=o.getChanges();return jA(e,l,h),{viewCache:l,changes:h}}function jA(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=tc(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(OT(tc(e)))}}function WT(t,e,n,i,r,o){const l=e.eventCache;if(ic(i,n)!=null)return e;{let c,h;if(ce(n))if(j(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Fr(e),m=f instanceof ee?f:ee.EMPTY_NODE,_=Zm(i,m);c=t.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const f=nc(i,Fr(e));c=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=oe(n);if(f===".priority"){j(Ki(n)===1,"Can't have a priority with additional path components");const m=l.getNode();h=e.serverCache.getNode();const _=Hy(i,n,m,h);_!=null?c=t.filter.updatePriority(m,_):c=l.getNode()}else{const m=Pe(n);let _;if(l.isCompleteForChild(f)){h=e.serverCache.getNode();const v=Hy(i,n,l.getNode(),h);v!=null?_=l.getNode().getImmediateChild(f).updateChild(m,v):_=l.getNode().getImmediateChild(f)}else _=Gm(i,f,e.serverCache);_!=null?c=t.filter.updateChild(l.getNode(),f,_,m,r,o):c=l.getNode()}}return oa(e,c,l.isFullyInitialized()||ce(n),t.filter.filtersNodes())}}function rc(t,e,n,i,r,o,l,c){const h=e.serverCache;let f;const m=l?t.filter:t.filter.getIndexedFilter();if(ce(n))f=m.updateFullNode(h.getNode(),i,null);else if(m.filtersNodes()&&!h.isFiltered()){const S=h.getNode().updateChild(n,i);f=m.updateFullNode(h.getNode(),S,null)}else{const S=oe(n);if(!h.isCompleteForPath(n)&&Ki(n)>1)return e;const w=Pe(n),R=h.getNode().getImmediateChild(S).updateChild(w,i);S===".priority"?f=m.updatePriority(h.getNode(),R):f=m.updateChild(h.getNode(),S,R,w,jT,null)}const _=MT(e,f,h.isFullyInitialized()||ce(n),m.filtersNodes()),v=new qm(r,_,o);return WT(t,_,n,r,v,c)}function sp(t,e,n,i,r,o,l){const c=e.eventCache;let h,f;const m=new qm(r,e,o);if(ce(n))f=t.filter.updateFullNode(e.eventCache.getNode(),i,l),h=oa(e,f,!0,t.filter.filtersNodes());else{const _=oe(n);if(_===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),i),h=oa(e,f,c.isFullyInitialized(),c.isFiltered());else{const v=Pe(n),S=c.getNode().getImmediateChild(_);let w;if(ce(v))w=i;else{const I=m.getCompleteChild(_);I!=null?Fm(v)===".priority"&&I.getChild(xT(v)).isEmpty()?w=I:w=I.updateChild(v,i):w=ee.EMPTY_NODE}if(S.equals(w))h=e;else{const I=t.filter.updateChild(c.getNode(),_,w,v,m,l);h=oa(e,I,c.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function $y(t,e){return t.eventCache.isCompleteForChild(e)}function WA(t,e,n,i,r,o,l){let c=e;return i.foreach((h,f)=>{const m=Be(n,h);$y(e,oe(m))&&(c=sp(t,c,m,f,r,o,l))}),i.foreach((h,f)=>{const m=Be(n,h);$y(e,oe(m))||(c=sp(t,c,m,f,r,o,l))}),c}function Vy(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function op(t,e,n,i,r,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,f;ce(n)?f=i:f=new xe(null).setTree(n,i);const m=e.serverCache.getNode();return f.children.inorderTraversal((_,v)=>{if(m.hasChild(_)){const S=e.serverCache.getNode().getImmediateChild(_),w=Vy(t,S,v);h=rc(t,h,new Te(_),w,r,o,l,c)}}),f.children.inorderTraversal((_,v)=>{const S=!e.serverCache.isCompleteForChild(_)&&v.value===null;if(!m.hasChild(_)&&!S){const w=e.serverCache.getNode().getImmediateChild(_),I=Vy(t,w,v);h=rc(t,h,new Te(_),I,r,o,l,c)}}),h}function HA(t,e,n,i,r,o,l){if(ic(r,n)!=null)return e;const c=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(ce(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return rc(t,e,n,h.getNode().getChild(n),r,o,c,l);if(ce(n)){let f=new xe(null);return h.getNode().forEachChild(Ns,(m,_)=>{f=f.set(new Te(m),_)}),op(t,e,n,f,r,o,c,l)}else return e}else{let f=new xe(null);return i.foreach((m,_)=>{const v=Be(n,m);h.isCompleteForPath(v)&&(f=f.set(m,h.getNode().getChild(v)))}),op(t,e,n,f,r,o,c,l)}}function $A(t,e,n,i,r){const o=e.serverCache,l=MT(e,o.getNode(),o.isFullyInitialized()||ce(n),o.isFiltered());return WT(t,l,n,i,jT,r)}function VA(t,e,n,i,r,o){let l;if(ic(i,n)!=null)return e;{const c=new qm(i,e,r),h=e.eventCache.getNode();let f;if(ce(n)||oe(n)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=nc(i,Fr(e));else{const _=e.serverCache.getNode();j(_ instanceof ee,"serverChildren would be complete if leaf node"),m=Zm(i,_)}m=m,f=t.filter.updateFullNode(h,m,o)}else{const m=oe(n);let _=Gm(i,m,e.serverCache);_==null&&e.serverCache.isCompleteForChild(m)&&(_=h.getImmediateChild(m)),_!=null?f=t.filter.updateChild(h,m,_,Pe(n),c,o):e.eventCache.getNode().hasChild(m)?f=t.filter.updateChild(h,m,ee.EMPTY_NODE,Pe(n),c,o):f=h,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=nc(i,Fr(e)),l.isLeafNode()&&(f=t.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||ic(i,ye())!=null,oa(e,f,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new jm(i.getIndex()),o=cA(i);this.processor_=UA(o);const l=n.serverCache,c=n.eventCache,h=r.updateFullNode(ee.EMPTY_NODE,l.getNode(),null),f=o.updateFullNode(ee.EMPTY_NODE,c.getNode(),null),m=new Yi(h,l.isFullyInitialized(),r.filtersNodes()),_=new Yi(f,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=qc(_,m),this.eventGenerator_=new gA(this.query_)}get query(){return this.query_}}function GA(t){return t.viewCache_.serverCache.getNode()}function qA(t){return tc(t.viewCache_)}function KA(t,e){const n=Fr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ce(e)&&!n.getImmediateChild(oe(e)).isEmpty())?n.getChild(e):null}function Zy(t){return t.eventRegistrations_.length===0}function YA(t,e){t.eventRegistrations_.push(e)}function Gy(t,e,n){const i=[];if(n){j(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const l=t.eventRegistrations_[o];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function qy(t,e,n,i){e.type===vn.MERGE&&e.source.queryId!==null&&(j(Fr(t.viewCache_),"We should always have a full cache before handling merges"),j(tc(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=BA(t.processor_,r,e,n,i);return zA(t.processor_,o.viewCache),j(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,HT(t,o.changes,o.viewCache.eventCache.getNode(),null)}function QA(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(je,(o,l)=>{i.push($s(o,l))}),n.isFullyInitialized()&&i.push(OT(n.getNode())),HT(t,i,n.getNode(),e)}function HT(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return vA(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc;class $T{constructor(){this.views=new Map}}function JA(t){j(!sc,"__referenceConstructor has already been defined"),sc=t}function XA(){return j(sc,"Reference.ts has not been loaded"),sc}function eM(t){return t.views.size===0}function Km(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return j(o!=null,"SyncTree gave us an op for an invalid query."),qy(o,e,n,i)}else{let o=[];for(const l of t.views.values())o=o.concat(qy(l,e,n,i));return o}}function VT(t,e,n,i,r){const o=e._queryIdentifier,l=t.views.get(o);if(!l){let c=nc(n,r?i:null),h=!1;c?h=!0:i instanceof ee?(c=Zm(n,i),h=!1):(c=ee.EMPTY_NODE,h=!1);const f=qc(new Yi(c,h,!1),new Yi(i,r,!1));return new ZA(e,f)}return l}function tM(t,e,n,i,r,o){const l=VT(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),YA(l,n),QA(l,n)}function nM(t,e,n,i){const r=e._queryIdentifier,o=[];let l=[];const c=Qi(t);if(r==="default")for(const[h,f]of t.views.entries())l=l.concat(Gy(f,n,i)),Zy(f)&&(t.views.delete(h),f.query._queryParams.loadsAllData()||o.push(f.query));else{const h=t.views.get(r);h&&(l=l.concat(Gy(h,n,i)),Zy(h)&&(t.views.delete(r),h.query._queryParams.loadsAllData()||o.push(h.query)))}return c&&!Qi(t)&&o.push(new(XA())(e._repo,e._path)),{removed:o,events:l}}function ZT(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Zi(t,e){let n=null;for(const i of t.views.values())n=n||KA(i,e);return n}function GT(t,e){if(e._queryParams.loadsAllData())return Yc(t);{const i=e._queryIdentifier;return t.views.get(i)}}function qT(t,e){return GT(t,e)!=null}function Qi(t){return Yc(t)!=null}function Yc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc;function iM(t){j(!oc,"__referenceConstructor has already been defined"),oc=t}function rM(){return j(oc,"Reference.ts has not been loaded"),oc}let sM=1;class Ky{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=AA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function KT(t,e,n,i,r){return SA(t.pendingWriteTree_,e,n,i,r),r?oo(t,new Dr(Hm(),e,n)):[]}function oM(t,e,n,i){TA(t.pendingWriteTree_,e,n,i);const r=xe.fromObject(n);return oo(t,new Vs(Hm(),e,r))}function Oi(t,e,n=!1){const i=CA(t.pendingWriteTree_,e);if(IA(t.pendingWriteTree_,e)){let o=new xe(null);return i.snap!=null?o=o.set(ye(),!0):gt(i.children,l=>{o=o.set(new Te(l),!0)}),oo(t,new ec(i.path,o,n))}else return[]}function Xa(t,e,n){return oo(t,new Dr($m(),e,n))}function aM(t,e,n){const i=xe.fromObject(n);return oo(t,new Vs($m(),e,i))}function lM(t,e){return oo(t,new Fa($m(),e))}function uM(t,e,n){const i=Qm(t,n);if(i){const r=Jm(i),o=r.path,l=r.queryId,c=xt(o,e),h=new Fa(Vm(l),c);return Xm(t,o,h)}else return[]}function ac(t,e,n,i,r=!1){const o=e._path,l=t.syncPointTree_.get(o);let c=[];if(l&&(e._queryIdentifier==="default"||qT(l,e))){const h=nM(l,e,n,i);eM(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const f=h.removed;if(c=h.events,!r){const m=f.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(o,(v,S)=>Qi(S));if(m&&!_){const v=t.syncPointTree_.subtree(o);if(!v.isEmpty()){const S=dM(v);for(let w=0;w<S.length;++w){const I=S[w],R=I.query,E=XT(t,I);t.listenProvider_.startListening(la(R),Ua(t,R),E.hashFn,E.onComplete)}}}!_&&f.length>0&&!i&&(m?t.listenProvider_.stopListening(la(e),null):f.forEach(v=>{const S=t.queryToTagMap.get(Qc(v));t.listenProvider_.stopListening(la(v),S)}))}fM(t,f)}return c}function YT(t,e,n,i){const r=Qm(t,i);if(r!=null){const o=Jm(r),l=o.path,c=o.queryId,h=xt(l,e),f=new Dr(Vm(c),h,n);return Xm(t,l,f)}else return[]}function cM(t,e,n,i){const r=Qm(t,i);if(r){const o=Jm(r),l=o.path,c=o.queryId,h=xt(l,e),f=xe.fromObject(n),m=new Vs(Vm(c),h,f);return Xm(t,l,m)}else return[]}function ap(t,e,n,i=!1){const r=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(r,(v,S)=>{const w=xt(v,r);o=o||Zi(S,w),l=l||Qi(S)});let c=t.syncPointTree_.get(r);c?(l=l||Qi(c),o=o||Zi(c,ye())):(c=new $T,t.syncPointTree_=t.syncPointTree_.set(r,c));let h;o!=null?h=!0:(h=!1,o=ee.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((S,w)=>{const I=Zi(w,ye());I&&(o=o.updateImmediateChild(S,I))}));const f=qT(c,e);if(!f&&!e._queryParams.loadsAllData()){const v=Qc(e);j(!t.queryToTagMap.has(v),"View does not exist, but we have a tag");const S=pM();t.queryToTagMap.set(v,S),t.tagToQueryMap.set(S,v)}const m=Kc(t.pendingWriteTree_,r);let _=tM(c,e,n,m,o,h);if(!f&&!l&&!i){const v=GT(c,e);_=_.concat(mM(t,e,v))}return _}function Ym(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,c)=>{const h=xt(l,e),f=Zi(c,h);if(f)return f});return UT(r,e,o,n,!0)}function hM(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(f,m)=>{const _=xt(f,n);i=i||Zi(m,_)});let r=t.syncPointTree_.get(n);r?i=i||Zi(r,ye()):(r=new $T,t.syncPointTree_=t.syncPointTree_.set(n,r));const o=i!=null,l=o?new Yi(i,!0,!1):null,c=Kc(t.pendingWriteTree_,e._path),h=VT(r,e,c,o?l.getNode():ee.EMPTY_NODE,o);return qA(h)}function oo(t,e){return QT(e,t.syncPointTree_,null,Kc(t.pendingWriteTree_,ye()))}function QT(t,e,n,i){if(ce(t.path))return JT(t,e,n,i);{const r=e.get(ye());n==null&&r!=null&&(n=Zi(r,ye()));let o=[];const l=oe(t.path),c=t.operationForChild(l),h=e.children.get(l);if(h&&c){const f=n?n.getImmediateChild(l):null,m=zT(i,l);o=o.concat(QT(c,h,f,m))}return r&&(o=o.concat(Km(r,t,i,n))),o}}function JT(t,e,n,i){const r=e.get(ye());n==null&&r!=null&&(n=Zi(r,ye()));let o=[];return e.children.inorderTraversal((l,c)=>{const h=n?n.getImmediateChild(l):null,f=zT(i,l),m=t.operationForChild(l);m&&(o=o.concat(JT(m,c,h,f)))}),r&&(o=o.concat(Km(r,t,i,n))),o}function XT(t,e){const n=e.query,i=Ua(t,n);return{hashFn:()=>(GA(e)||ee.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?uM(t,n._path,i):lM(t,n._path);{const o=lO(r,n);return ac(t,n,null,o)}}}}function Ua(t,e){const n=Qc(e);return t.queryToTagMap.get(n)}function Qc(t){return t._path.toString()+"$"+t._queryIdentifier}function Qm(t,e){return t.tagToQueryMap.get(e)}function Jm(t){const e=t.indexOf("$");return j(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Te(t.substr(0,e))}}function Xm(t,e,n){const i=t.syncPointTree_.get(e);j(i,"Missing sync point for query tag that we're tracking");const r=Kc(t.pendingWriteTree_,e);return Km(i,n,r,null)}function dM(t){return t.fold((e,n,i)=>{if(n&&Qi(n))return[Yc(n)];{let r=[];return n&&(r=ZT(n)),gt(i,(o,l)=>{r=r.concat(l)}),r}})}function la(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(rM())(t._repo,t._path):t}function fM(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Qc(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function pM(){return sM++}function mM(t,e,n){const i=e._path,r=Ua(t,e),o=XT(t,n),l=t.listenProvider_.startListening(la(e),r,o.hashFn,o.onComplete),c=t.syncPointTree_.subtree(i);if(r)j(!Qi(c.value),"If we're adding a query, it shouldn't be shadowed");else{const h=c.fold((f,m,_)=>{if(!ce(f)&&m&&Qi(m))return[Yc(m).query];{let v=[];return m&&(v=v.concat(ZT(m).map(S=>S.query))),gt(_,(S,w)=>{v=v.concat(w)}),v}});for(let f=0;f<h.length;++f){const m=h[f];t.listenProvider_.stopListening(la(m),Ua(t,m))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new e_(n)}node(){return this.node_}}class t_{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Be(this.path_,e);return new t_(this.syncTree_,n)}node(){return Ym(this.syncTree_,this.path_)}}const _M=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Yy=function(t,e,n){if(!t||typeof t!="object")return t;if(j(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return gM(t[".sv"],e,n);if(typeof t[".sv"]=="object")return vM(t[".sv"],e);j(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},gM=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:j(!1,"Unexpected server value: "+t)}},vM=function(t,e,n){t.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&j(!1,"Unexpected increment value: "+i);const r=e.node();if(j(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},eC=function(t,e,n,i){return n_(e,new t_(n,t),i)},tC=function(t,e,n){return n_(t,new e_(e),n)};function n_(t,e,n){const i=t.getPriority().val(),r=Yy(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,c=Yy(l.getValue(),e,n);return c!==l.getValue()||r!==l.getPriority().val()?new ot(c,tt(r)):t}else{const l=t;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new ot(r))),l.forEachChild(je,(c,h)=>{const f=n_(h,e.getImmediateChild(c),n);f!==h&&(o=o.updateImmediateChild(c,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function r_(t,e){let n=e instanceof Te?e:new Te(e),i=t,r=oe(n);for(;r!==null;){const o=Ws(i.node.children,r)||{children:{},childCount:0};i=new i_(r,i,o),n=Pe(n),r=oe(n)}return i}function ao(t){return t.node.value}function nC(t,e){t.node.value=e,lp(t)}function iC(t){return t.node.childCount>0}function yM(t){return ao(t)===void 0&&!iC(t)}function Jc(t,e){gt(t.node.children,(n,i)=>{e(new i_(n,t,i))})}function rC(t,e,n,i){n&&!i&&e(t),Jc(t,r=>{rC(r,e,!0,i)}),n&&i&&e(t)}function wM(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function el(t){return new Te(t.parent===null?t.name:el(t.parent)+"/"+t.name)}function lp(t){t.parent!==null&&EM(t.parent,t.name,t)}function EM(t,e,n){const i=yM(n),r=Wn(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,lp(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,lp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=/[\[\].#$\/\u0000-\u001F\u007F]/,TM=/[\[\].#$\u0000-\u001F\u007F]/,Md=10*1024*1024,s_=function(t){return typeof t=="string"&&t.length!==0&&!SM.test(t)},sC=function(t){return typeof t=="string"&&t.length!==0&&!TM.test(t)},CM=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sC(t)},IM=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Nm(t)||t&&typeof t=="object"&&Wn(t,".sv")},xM=function(t,e,n,i){i&&e===void 0||Xc(jc(t,"value"),e,n)},Xc=function(t,e,n){const i=n instanceof Te?new WO(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+fr(i));if(typeof e=="function")throw new Error(t+"contains a function "+fr(i)+" with contents = "+e.toString());if(Nm(e))throw new Error(t+"contains "+e.toString()+" "+fr(i));if(typeof e=="string"&&e.length>Md/3&&Wc(e)>Md)throw new Error(t+"contains a string greater than "+Md+" utf8 bytes "+fr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(gt(e,(l,c)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!s_(l)))throw new Error(t+" contains an invalid key ("+l+") "+fr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);HO(i,l),Xc(t,c,i),$O(i)}),r&&o)throw new Error(t+' contains ".value" child '+fr(i)+" in addition to actual children.")}},PM=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=Oa(i);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!s_(o[l]))throw new Error(t+"contains an invalid key ("+o[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(jO);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&tn(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},kM=function(t,e,n,i){if(i&&e===void 0)return;const r=jc(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];gt(e,(l,c)=>{const h=new Te(l);if(Xc(r,c,Be(n,h)),Fm(h)===".priority"&&!IM(c))throw new Error(r+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(h)}),PM(r,o)},oC=function(t,e,n,i){if(!(i&&n===void 0)&&!sC(n))throw new Error(jc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bM=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oC(t,e,n,i)},aC=function(t,e){if(oe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},RM=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!s_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!CM(n))throw new Error(jc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eh(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!Um(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function lC(t,e,n){eh(t,n),uC(t,i=>Um(i,e))}function ln(t,e,n){eh(t,n),uC(t,i=>tn(i,e)||tn(e,i))}function uC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(NM(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function NM(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Cr&&pt("event: "+n.toString()),so(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="repo_interrupt",AM=25;class MM{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new LM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xu(),this.transactionQueueTree_=new i_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DM(t,e,n){if(t.stats_=Mm(t.repoInfo_),t.forceRestClient_||dO())t.server_=new Ju(t.repoInfo_,(i,r,o,l)=>{Qy(t,i,r,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Jy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new ri(t.repoInfo_,e,(i,r,o,l)=>{Qy(t,i,r,o,l)},i=>{Jy(t,i)},i=>{UM(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=gO(t.repoInfo_,()=>new _A(t.stats_,t.server_)),t.infoData_=new hA,t.infoSyncTree_=new Ky({startListening:(i,r,o,l)=>{let c=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(c=Xa(t.infoSyncTree_,i._path,h),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),o_(t,"connected",!1),t.serverSyncTree_=new Ky({startListening:(i,r,o,l)=>(t.server_.listen(i,o,r,(c,h)=>{const f=l(c,h);ln(t.eventQueue_,i._path,f)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function FM(t){const n=t.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function th(t){return _M({timestamp:FM(t)})}function Qy(t,e,n,i,r){t.dataUpdateCount++;const o=new Te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(i){const h=Vu(n,f=>tt(f));l=cM(t.serverSyncTree_,o,h,r)}else{const h=tt(n);l=YT(t.serverSyncTree_,o,h,r)}else if(i){const h=Vu(n,f=>tt(f));l=aM(t.serverSyncTree_,o,h)}else{const h=tt(n);l=Xa(t.serverSyncTree_,o,h)}let c=o;l.length>0&&(c=Gs(t,o)),ln(t.eventQueue_,c,l)}function Jy(t,e){o_(t,"connected",e),e===!1&&WM(t)}function UM(t,e){gt(e,(n,i)=>{o_(t,n,i)})}function o_(t,e,n){const i=new Te("/.info/"+e),r=tt(n);t.infoData_.updateSnapshot(i,r);const o=Xa(t.infoSyncTree_,i,r);ln(t.eventQueue_,i,o)}function a_(t){return t.nextWriteId_++}function zM(t,e,n){const i=hM(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(r=>{const o=tt(r).withIndex(e._queryParams.getIndex());ap(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=Xa(t.serverSyncTree_,e._path,o);else{const c=Ua(t.serverSyncTree_,e);l=YT(t.serverSyncTree_,e._path,o,c)}return ln(t.eventQueue_,e._path,l),ac(t.serverSyncTree_,e,n,null,!0),o},r=>(tl(t,"get for query "+nt(e)+" failed: "+r),Promise.reject(new Error(r))))}function BM(t,e,n,i,r){tl(t,"set",{path:e.toString(),value:n,priority:i});const o=th(t),l=tt(n,i),c=Ym(t.serverSyncTree_,e),h=tC(l,c,o),f=a_(t),m=KT(t.serverSyncTree_,e,h,f,!0);eh(t.eventQueue_,m),t.server_.put(e.toString(),l.val(!0),(v,S)=>{const w=v==="ok";w||kt("set at "+e+" failed: "+v);const I=Oi(t.serverSyncTree_,f,!w);ln(t.eventQueue_,e,I),up(t,r,v,S)});const _=u_(t,e);Gs(t,_),ln(t.eventQueue_,_,[])}function jM(t,e,n,i){tl(t,"update",{path:e.toString(),value:n});let r=!0;const o=th(t),l={};if(gt(n,(c,h)=>{r=!1,l[c]=eC(Be(e,c),tt(h),t.serverSyncTree_,o)}),r)pt("update() called with empty data.  Don't do anything."),up(t,i,"ok",void 0);else{const c=a_(t),h=oM(t.serverSyncTree_,e,l,c);eh(t.eventQueue_,h),t.server_.merge(e.toString(),n,(f,m)=>{const _=f==="ok";_||kt("update at "+e+" failed: "+f);const v=Oi(t.serverSyncTree_,c,!_),S=v.length>0?Gs(t,e):e;ln(t.eventQueue_,S,v),up(t,i,f,m)}),gt(n,f=>{const m=u_(t,Be(e,f));Gs(t,m)}),ln(t.eventQueue_,e,[])}}function WM(t){tl(t,"onDisconnectEvents");const e=th(t),n=Xu();tp(t.onDisconnect_,ye(),(r,o)=>{const l=eC(r,o,t.serverSyncTree_,e);AT(n,r,l)});let i=[];tp(n,ye(),(r,o)=>{i=i.concat(Xa(t.serverSyncTree_,r,o));const l=u_(t,r);Gs(t,l)}),t.onDisconnect_=Xu(),ln(t.eventQueue_,ye(),i)}function HM(t,e,n){let i;oe(e._path)===".info"?i=ap(t.infoSyncTree_,e,n):i=ap(t.serverSyncTree_,e,n),lC(t.eventQueue_,e._path,i)}function Xy(t,e,n){let i;oe(e._path)===".info"?i=ac(t.infoSyncTree_,e,n):i=ac(t.serverSyncTree_,e,n),lC(t.eventQueue_,e._path,i)}function $M(t){t.persistentConnection_&&t.persistentConnection_.interrupt(OM)}function tl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),pt(n,...e)}function up(t,e,n,i){e&&so(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function cC(t,e,n){return Ym(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function l_(t,e=t.transactionQueueTree_){if(e||nh(t,e),ao(e)){const n=dC(t,e);j(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&VM(t,el(e),n)}else iC(e)&&Jc(e,n=>{l_(t,n)})}function VM(t,e,n){const i=n.map(f=>f.currentWriteId),r=cC(t,e,i);let o=r;const l=r.hash();for(let f=0;f<n.length;f++){const m=n[f];j(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const _=xt(e,m.path);o=o.updateChild(_,m.currentOutputSnapshotRaw)}const c=o.val(!0),h=e;t.server_.put(h.toString(),c,f=>{tl(t,"transaction put response",{path:h.toString(),status:f});let m=[];if(f==="ok"){const _=[];for(let v=0;v<n.length;v++)n[v].status=2,m=m.concat(Oi(t.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&_.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();nh(t,r_(t.transactionQueueTree_,e)),l_(t,t.transactionQueueTree_),ln(t.eventQueue_,e,m);for(let v=0;v<_.length;v++)so(_[v])}else{if(f==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{kt("transaction at "+h.toString()+" failed: "+f);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=f}Gs(t,e)}},l)}function Gs(t,e){const n=hC(t,e),i=el(n),r=dC(t,n);return ZM(t,r,i),i}function ZM(t,e,n){if(e.length===0)return;const i=[];let r=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const h=e[c],f=xt(n,h.path);let m=!1,_;if(j(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)m=!0,_=h.abortReason,r=r.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=AM)m=!0,_="maxretry",r=r.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0));else{const v=cC(t,h.path,l);h.currentInputSnapshot=v;const S=e[c].update(v.val());if(S!==void 0){Xc("transaction failed: Data returned ",S,h.path);let w=tt(S);typeof S=="object"&&S!=null&&Wn(S,".priority")||(w=w.updatePriority(v.getPriority()));const R=h.currentWriteId,E=th(t),y=tC(w,v,E);h.currentOutputSnapshotRaw=w,h.currentOutputSnapshotResolved=y,h.currentWriteId=a_(t),l.splice(l.indexOf(R),1),r=r.concat(KT(t.serverSyncTree_,h.path,y,h.currentWriteId,h.applyLocally)),r=r.concat(Oi(t.serverSyncTree_,R,!0))}else m=!0,_="nodata",r=r.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0))}ln(t.eventQueue_,n,r),r=[],m&&(e[c].status=2,function(v){setTimeout(v,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(_==="nodata"?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(_),!1,null))))}nh(t,t.transactionQueueTree_);for(let c=0;c<i.length;c++)so(i[c]);l_(t,t.transactionQueueTree_)}function hC(t,e){let n,i=t.transactionQueueTree_;for(n=oe(e);n!==null&&ao(i)===void 0;)i=r_(i,n),e=Pe(e),n=oe(e);return i}function dC(t,e){const n=[];return fC(t,e,n),n.sort((i,r)=>i.order-r.order),n}function fC(t,e,n){const i=ao(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Jc(e,r=>{fC(t,r,n)})}function nh(t,e){const n=ao(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,nC(e,n.length>0?n:void 0)}Jc(e,i=>{nh(t,i)})}function u_(t,e){const n=el(hC(t,e)),i=r_(t.transactionQueueTree_,e);return wM(i,r=>{Dd(t,r)}),Dd(t,i),rC(i,r=>{Dd(t,r)}),n}function Dd(t,e){const n=ao(e);if(n){const i=[];let r=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(j(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(j(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(Oi(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?nC(e,void 0):n.length=o+1,ln(t.eventQueue_,el(e),r);for(let l=0;l<i.length;l++)so(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function qM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):kt(`Invalid query segment '${n}' in query '${t}'`)}return e}const ew=function(t,e){const n=KM(t),i=n.namespace;n.domain==="firebase.com"&&hi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&hi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||iO();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new gT(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Te(n.pathString)}},KM=function(t){let e="",n="",i="",r="",o="",l=!0,c="https",h=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(c=t.substring(0,f-1),t=t.substring(f+2));let m=t.indexOf("/");m===-1&&(m=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(m,_)),m<_&&(r=GM(t.substring(m,_)));const v=qM(t.substring(Math.min(t.length,_)));f=e.indexOf(":"),f>=0?(l=c==="https"||c==="wss",h=parseInt(e.substring(f+1),10)):f=e.length;const S=e.slice(0,f);if(S.toLowerCase()==="localhost")n="localhost";else if(S.split(".").length<=2)n=S;else{const w=e.indexOf(".");i=e.substring(0,w).toLowerCase(),n=e.substring(w+1),o=i}"ns"in v&&(o=v.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:l,scheme:c,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nt(this.snapshot.exportVal())}}class mC{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ce(this._path)?null:Fm(this._path)}get ref(){return new Hn(this._repo,this._path)}get _queryIdentifier(){const e=zy(this._queryParams),n=Om(e);return n==="{}"?"default":n}get _queryObject(){return zy(this._queryParams)}isEqual(e){if(e=Ue(e),!(e instanceof c_))return!1;const n=this._repo===e._repo,i=Um(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+BO(this._path)}}class Hn extends c_{constructor(e,n){super(e,n,new Wm,!1)}get parent(){const e=xT(this._path);return e===null?null:new Hn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qs{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Te(e),i=za(this.ref,e);return new qs(this._node.getChild(n),i,je)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new qs(r,za(this.ref,i),je)))}hasChild(e){const n=new Te(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Es(t,e){return t=Ue(t),t._checkNotDeleted("ref"),e!==void 0?za(t._root,e):t._root}function za(t,e){return t=Ue(t),oe(t._path)===null?bM("child","path",e,!1):oC("child","path",e,!1),new Hn(t._repo,Be(t._path,e))}function YM(t){return aC("remove",t._path),gC(t,null)}function gC(t,e){t=Ue(t),aC("set",t._path),xM("set",e,t._path,!1);const n=new Ka;return BM(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function cp(t,e){kM("update",e,t._path,!1);const n=new Ka;return jM(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function QM(t){t=Ue(t);const e=new _C(()=>{}),n=new ih(e);return zM(t._repo,t,n).then(i=>new qs(i,new Hn(t._repo,t._path),t._queryParams.getIndex()))}class ih{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new pC("value",this,new qs(e.snapshotNode,new Hn(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mC(this,e,n):null}matches(e){return e instanceof ih?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class h_{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mC(this,e,n):null}createEvent(e,n){j(e.childName!=null,"Child events should have a childName.");const i=za(new Hn(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new pC(e.type,this,new qs(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof h_?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function JM(t,e,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){const h=n,f=(m,_)=>{Xy(t._repo,t,c),h(m,_)};f.userCallback=n.userCallback,f.context=n.context,n=f}const l=new _C(n,o||void 0),c=e==="value"?new ih(l):new h_(e,l);return HM(t._repo,t,c),()=>Xy(t._repo,t,c)}function vC(t,e,n,i){return JM(t,"value",e,n,i)}JA(Hn);iM(Hn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM="FIREBASE_DATABASE_EMULATOR_HOST",hp={};let eD=!1;function tD(t,e,n,i){t.repoInfo_=new gT(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function nD(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||hi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=ew(o,r),c=l.repoInfo,h,f;typeof process<"u"&&process.env&&(f=process.env[XM]),f?(h=!0,o=`http://${f}?ns=${c.namespace}`,l=ew(o,r),c=l.repoInfo):h=!l.repoInfo.secure;const m=r&&h?new Ls(Ls.OWNER):new pO(t.name,t.options,e);RM("Invalid Firebase Database URL",l),ce(l.path)||hi("Database URL must point to the root of a Firebase Database (not including a child path).");const _=rD(c,t,m,new fO(t.name,n));return new sD(_,t)}function iD(t,e){const n=hp[e];(!n||n[t.key]!==t)&&hi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$M(t),delete n[t.key]}function rD(t,e,n,i){let r=hp[e.name];r||(r={},hp[e.name]=r);let o=r[t.toURLString()];return o&&hi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new MM(t,eD,n,i),r[t.toURLString()]=o,o}class sD{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hn(this._repo,ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iD(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hi("Cannot call "+e+" on a deleted database.")}}function oD(t=$c(),e){const n=tr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=vS("database");i&&aD(n,...i)}return n}function aD(t,e,n,i={}){t=Ue(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&hi("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&hi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ls(Ls.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:ES(i.mockUserToken,t.app.options.projectId);o=new Ls(l)}tD(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t){JN(Vr),Tn(new an("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return nD(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Ut(Sy,Ty,t),Ut(Sy,Ty,"esm2017")}ri.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ri.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};lD();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="firebasestorage.googleapis.com",wC="storageBucket",uD=2*60*1e3,cD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends In{constructor(e,n,i=0){super(Fd(e),`Firebase Storage: ${n} (${Fd(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,He.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Fd(t){return"storage/"+t}function d_(){const t="An unknown error occurred, please check the error payload for server response.";return new He(We.UNKNOWN,t)}function hD(t){return new He(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function dD(t){return new He(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new He(We.UNAUTHENTICATED,t)}function pD(){return new He(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mD(t){return new He(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _D(){return new He(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gD(){return new He(We.CANCELED,"User canceled the upload/download.")}function vD(t){return new He(We.INVALID_URL,"Invalid URL '"+t+"'.")}function yD(t){return new He(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function wD(){return new He(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wC+"' property when initializing the app?")}function ED(){return new He(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SD(){return new He(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function TD(t){return new He(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dp(t){return new He(We.INVALID_ARGUMENT,t)}function EC(){return new He(We.APP_DELETED,"The Firebase app was deleted.")}function CD(t){return new He(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ua(t,e){return new He(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uo(t){throw new He(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Wt.makeFromUrl(e,n)}catch{return new Wt(e,"")}if(i.path==="")return i;throw yD(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),h={bucket:1,path:3};function f(b){b.path_=decodeURIComponent(b.path)}const m="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",S=new RegExp(`^https?://${_}/${m}/b/${r}/o${v}`,"i"),w={bucket:1,path:3},I=n===yC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",E=new RegExp(`^https?://${I}/${r}/${R}`,"i"),C=[{regex:c,indices:h,postModify:o},{regex:S,indices:w,postModify:f},{regex:E,indices:{bucket:1,path:2},postModify:f}];for(let b=0;b<C.length;b++){const D=C[b],W=D.regex.exec(e);if(W){const H=W[D.indices.bucket];let U=W[D.indices.path];U||(U=""),i=new Wt(H,U),D.postModify(i);break}}if(i==null)throw vD(e);return i}}class ID{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function h(){return c===2}let f=!1;function m(...R){f||(f=!0,e.apply(null,R))}function _(R){r=setTimeout(()=>{r=null,t(S,h())},R)}function v(){o&&clearTimeout(o)}function S(R,...E){if(f){v();return}if(R){v(),m.call(null,R,...E);return}if(h()||l){v(),m.call(null,R,...E);return}i<64&&(i*=2);let C;c===1?(c=2,C=0):C=(i+Math.random())*1e3,_(C)}let w=!1;function I(R){w||(w=!0,v(),!f&&(r!==null?(R||(c=2),clearTimeout(r),_(0)):R||(c=1)))}return _(0),o=setTimeout(()=>{l=!0,I(!0)},n),I}function PD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){return t!==void 0}function bD(t){return typeof t=="object"&&!Array.isArray(t)}function f_(t){return typeof t=="string"||t instanceof String}function tw(t){return p_()&&t instanceof Blob}function p_(){return typeof Blob<"u"&&!Jb()}function nw(t,e,n,i){if(i<e)throw dp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw dp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function SC(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ir;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ir||(Ir={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,i,r,o,l,c,h,f,m,_,v=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=_,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,w)=>{this.resolve_=S,this.reject_=w,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Gl(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Ir.NO_ERROR,h=o.getStatus();if(!c||RD(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Ir.ABORT;i(!1,new Gl(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new Gl(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());kD(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=d_();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(r.canceled){const h=this.appDelete_?EC():gD();l(h)}else{const h=_D();l(h)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=xD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function ND(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function OD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function MD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DD(t,e,n,i,r,o,l=!0){const c=SC(t.urlParams),h=t.url+c,f=Object.assign({},t.headers);return AD(f,e),ND(f,n),OD(f,o),MD(f,i),new LD(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UD(...t){const e=FD();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(p_())return new Blob(t);throw new He(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){if(typeof atob>"u")throw TD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ud{constructor(e,n){this.data=e,this.contentType=n||null}}function jD(t,e){switch(t){case Mn.RAW:return new Ud(TC(e));case Mn.BASE64:case Mn.BASE64URL:return new Ud(CC(t,e));case Mn.DATA_URL:return new Ud(HD(e),$D(e))}throw d_()}function TC(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function WD(t){let e;try{e=decodeURIComponent(t)}catch{throw ua(Mn.DATA_URL,"Malformed data URL.")}return TC(e)}function CC(t,e){switch(t){case Mn.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw ua(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Mn.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw ua(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BD(e)}catch(r){throw r.message.includes("polyfill")?r:ua(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class IC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ua(Mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=VD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function HD(t){const e=new IC(t);return e.base64?CC(Mn.BASE64,e.rest):WD(e.rest)}function $D(t){return new IC(t).contentType}function VD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){let i=0,r="";tw(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(tw(this.data_)){const i=this.data_,r=zD(i,e,n);return r===null?null:new Ii(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ii(i,!0)}}static getBlob(...e){if(p_()){const n=e.map(i=>i instanceof Ii?i.data_:i);return new Ii(UD.apply(null,n))}else{const n=e.map(l=>f_(l)?jD(Mn.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new Ii(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){let e;try{e=JSON.parse(t)}catch{return null}return bD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GD(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function PC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t,e){return e}class Ct{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||qD}}let ql=null;function KD(t){return!f_(t)||t.length<2?t:PC(t)}function kC(){if(ql)return ql;const t=[];t.push(new Ct("bucket")),t.push(new Ct("generation")),t.push(new Ct("metageneration")),t.push(new Ct("name","fullPath",!0));function e(o,l){return KD(l)}const n=new Ct("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new Ct("size");return r.xform=i,t.push(r),t.push(new Ct("timeCreated")),t.push(new Ct("updated")),t.push(new Ct("md5Hash",null,!0)),t.push(new Ct("cacheControl",null,!0)),t.push(new Ct("contentDisposition",null,!0)),t.push(new Ct("contentEncoding",null,!0)),t.push(new Ct("contentLanguage",null,!0)),t.push(new Ct("contentType",null,!0)),t.push(new Ct("metadata","customMetadata",!0)),ql=t,ql}function YD(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Wt(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function QD(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return YD(i,t),i}function bC(t,e,n){const i=xC(e);return i===null?null:QD(t,i,n)}function JD(t,e,n,i){const r=xC(e);if(r===null||!f_(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,_=t.fullPath,v="/b/"+l(m)+"/o/"+l(_),S=m_(v,n,i),w=SC({alt:"media",token:f});return S+w})[0]}function XD(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class RC{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t){if(!t)throw d_()}function e2(t,e){function n(i,r){const o=bC(t,r,e);return LC(o!==null),o}return n}function t2(t,e){function n(i,r){const o=bC(t,r,e);return LC(o!==null),JD(o,r,t.host,t._protocol)}return n}function NC(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=pD():r=fD():n.getStatus()===402?r=dD(t.bucket):n.getStatus()===403?r=mD(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function n2(t){const e=NC(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=hD(t.path)),o.serverResponse=r.serverResponse,o}return n}function i2(t,e,n){const i=e.fullServerUrl(),r=m_(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new RC(r,o,t2(t,n),l);return c.errorHandler=n2(e),c}function r2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function s2(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=r2(null,e)),i}function o2(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let b=0;b<2;b++)C=C+Math.random().toString().slice(2);return C}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const f=s2(e,i,r),m=XD(f,n),_="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",S=Ii.getBlob(_,i,v);if(S===null)throw ED();const w={name:f.fullPath},I=m_(o,t.host,t._protocol),R="POST",E=t.maxUploadRetryTime,y=new RC(I,R,e2(t,n),E);return y.urlParams=w,y.headers=l,y.body=S.uploadData(),y.errorHandler=NC(e),y}class a2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ir.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ir.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ir.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Uo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class l2 extends a2{initXhr(){this.xhr_.responseType="text"}}function OC(){return new l2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this._service=e,n instanceof Wt?this._location=n:this._location=Wt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ur(e,n)}get root(){const e=new Wt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PC(this._location.path)}get storage(){return this._service}get parent(){const e=ZD(this._location.path);if(e===null)return null;const n=new Wt(this._location.bucket,e);return new Ur(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw CD(e)}}function u2(t,e,n){t._throwIfRoot("uploadBytes");const i=o2(t.storage,t._location,kC(),new Ii(e,!0),n);return t.storage.makeRequestWithTokens(i,OC).then(r=>({metadata:r,ref:t}))}function c2(t){t._throwIfRoot("getDownloadURL");const e=i2(t.storage,t._location,kC());return t.storage.makeRequestWithTokens(e,OC).then(n=>{if(n===null)throw SD();return n})}function h2(t,e){const n=GD(t._location.path,e),i=new Wt(t._location.bucket,n);return new Ur(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t){return/^[A-Za-z]+:\/\//.test(t)}function f2(t,e){return new Ur(t,e)}function AC(t,e){if(t instanceof __){const n=t;if(n._bucket==null)throw wD();const i=new Ur(n,n._bucket);return e!=null?AC(i,e):i}else return e!==void 0?h2(t,e):t}function p2(t,e){if(e&&d2(e)){if(t instanceof __)return f2(t,e);throw dp("To use ref(service, url), the first argument must be a Storage instance.")}else return AC(t,e)}function iw(t,e){const n=e==null?void 0:e[wC];return n==null?null:Wt.makeFromBucketSpec(n,t)}function m2(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:ES(r,t.app.options.projectId))}class __{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=yC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uD,this._maxUploadRetryTime=cD,this._requests=new Set,r!=null?this._bucket=Wt.makeFromBucketSpec(r,this._host):this._bucket=iw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wt.makeFromBucketSpec(this._url,e):this._bucket=iw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ur(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new ID(EC());{const l=DD(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const rw="@firebase/storage",sw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="storage";function _2(t,e,n){return t=Ue(t),u2(t,e,n)}function g2(t){return t=Ue(t),c2(t)}function fp(t,e){return t=Ue(t),p2(t,e)}function v2(t=$c(),e){t=Ue(t);const i=tr(t,MC).getImmediate({identifier:e}),r=vS("storage");return r&&y2(i,...r),i}function y2(t,e,n,i={}){m2(t,e,n,i)}function w2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new __(n,i,r,e,Vr)}function E2(){Tn(new an(MC,w2,"PUBLIC").setMultipleInstances(!0)),Ut(rw,sw,""),Ut(rw,sw,"esm2017")}E2();function g_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function DC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const S2=DC,FC=new $r("auth","Firebase",DC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Hc("@firebase/auth");function T2(t,...e){lc.logLevel<=Se.WARN&&lc.warn(`Auth (${Vr}): ${t}`,...e)}function uu(t,...e){lc.logLevel<=Se.ERROR&&lc.error(`Auth (${Vr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,...e){throw v_(t,...e)}function zn(t,...e){return v_(t,...e)}function C2(t,e,n){const i=Object.assign(Object.assign({},S2()),{[e]:n});return new $r("auth","Firebase",i).create(e,{appName:t.name})}function v_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return FC.create(t,...e)}function Q(t,e,...n){if(!t)throw v_(e,...n)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uu(e),new Error(e)}function di(t,e){t||ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function I2(){return ow()==="http:"||ow()==="https:"}function ow(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I2()||SS()||"connection"in navigator)?navigator.onLine:!0}function P2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=Cm()||TS()}get(){return x2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e){di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new nl(3e4,6e4);function pi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $n(t,e,n,i,r={}){return zC(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=ro(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),UC.fetch()(BC(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function zC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},k2),e);try{const r=new L2(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Kl(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kl(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Kl(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Kl(t,"user-disabled",l);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw C2(t,m,f);Cn(t,m)}}catch(r){if(r instanceof In)throw r;Cn(t,"network-request-failed",{message:String(r)})}}async function il(t,e,n,i,r={}){const o=await $n(t,e,n,i,r);return"mfaPendingCredential"in o&&Cn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function BC(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?y_(t.config,r):`${t.config.apiScheme}://${r}`}function R2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(zn(this.auth,"network-request-failed")),b2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=zn(t,e,i);return r.customData._tokenResponse=n,r}function aw(t){return t!==void 0&&t.enterprise!==void 0}class N2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return R2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function O2(t,e){return $n(t,"GET","/v2/recaptchaConfig",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e){return $n(t,"POST","/v1/accounts:delete",e)}async function M2(t,e){return $n(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D2(t,e=!1){const n=Ue(t),i=await n.getIdToken(e),r=w_(i);Q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:ca(zd(r.auth_time)),issuedAtTime:ca(zd(r.iat)),expirationTime:ca(zd(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function zd(t){return Number(t)*1e3}function w_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return uu("JWT malformed, contained fewer than 3 sections"),null;try{const r=$u(n);return r?JSON.parse(r):(uu("Failed to decode base64 JWT payload"),null)}catch(r){return uu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function F2(t){const e=w_(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof In&&U2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function U2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ca(this.lastLoginAt),this.creationTime=ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ks(t,M2(n,{idToken:i}));Q(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?W2(o.providerUserInfo):[],c=j2(t.providerData,l),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?f:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new jC(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,_)}async function B2(t){const e=Ue(t);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j2(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function W2(t){return t.map(e=>{var{providerId:n}=e,i=g_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(t,e){const n=await zC(t,{},async()=>{const i=ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=BC(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",UC.fetch()(l,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $2(t,e){return $n(t,"POST","/v2/accounts:revokeToken",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Q(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await H2(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new Ba;return i&&(Q(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Q(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Q(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=g_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jC(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ks(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return D2(this,e)}reload(){return B2(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await uc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ks(this,A2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,h,f,m;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,v=(r=n.email)!==null&&r!==void 0?r:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(l=n.photoURL)!==null&&l!==void 0?l:void 0,I=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,E=(f=n.createdAt)!==null&&f!==void 0?f:void 0,y=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:b,isAnonymous:D,providerData:W,stsTokenManager:H}=n;Q(C&&H,e,"internal-error");const U=Ba.fromJSON(this.name,H);Q(typeof C=="string",e,"internal-error"),yi(_,e.name),yi(v,e.name),Q(typeof b=="boolean",e,"internal-error"),Q(typeof D=="boolean",e,"internal-error"),yi(S,e.name),yi(w,e.name),yi(I,e.name),yi(R,e.name),yi(E,e.name),yi(y,e.name);const B=new xr({uid:C,auth:e,email:v,emailVerified:b,displayName:_,isAnonymous:D,photoURL:w,phoneNumber:S,tenantId:I,stsTokenManager:U,createdAt:E,lastLoginAt:y});return W&&Array.isArray(W)&&(B.providerData=W.map($=>Object.assign({},$))),R&&(B._redirectEventId=R),B}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ba;r.updateFromServerResponse(n);const o=new xr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await uc(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;function ni(t){di(t instanceof Function,"Expected a class definition");let e=lw.get(t);return e?(di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WC.type="NONE";const uw=WC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t,e,n){return`firebase:${t}:${e}:${n}`}class Os{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=cu(this.userKey,r.apiKey,o),this.fullPersistenceKey=cu("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Os(ni(uw),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ni(uw);const l=cu(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const m=await f._get(l);if(m){const _=xr._fromJSON(e,m);f!==o&&(c=_),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Os(o,e,i):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Os(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GC(e))return"Blackberry";if(qC(e))return"Webos";if(E_(e))return"Safari";if((e.includes("chrome/")||$C(e))&&!e.includes("edge/"))return"Chrome";if(ZC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HC(t=St()){return/firefox\//i.test(t)}function E_(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $C(t=St()){return/crios\//i.test(t)}function VC(t=St()){return/iemobile/i.test(t)}function ZC(t=St()){return/android/i.test(t)}function GC(t=St()){return/blackberry/i.test(t)}function qC(t=St()){return/webos/i.test(t)}function rh(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function V2(t=St()){var e;return rh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Z2(){return Xb()&&document.documentMode===10}function KC(t=St()){return rh(t)||ZC(t)||qC(t)||GC(t)||/windows phone/i.test(t)||VC(t)}function G2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t,e=[]){let n;switch(t){case"Browser":n=cw(St());break;case"Worker":n=`${cw(St())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(t,e={}){return $n(t,"GET","/v2/passwordPolicy",pi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=6;class Q2{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:Y2,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hw(this),this.idTokenSubscription=new hw(this),this.beforeStateQueue=new q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Os.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ue(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K2(this),n=new Q2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $r("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await $2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Os.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&T2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qr(t){return Ue(t)}class hw{constructor(e){this.auth=e,this.observer=null,this.addObserver=aR(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function QC(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=zn("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",X2().appendChild(i)})}function eF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const tF="https://www.google.com/recaptcha/enterprise.js?render=",nF="recaptcha-enterprise",iF="NO_RECAPTCHA";class rF{constructor(e){this.type=nF,this.auth=qr(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{O2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new N2(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function r(o,l,c){const h=window.grecaptcha;aw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(iF)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&aw(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}QC(tF+c).then(()=>{r(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function dw(t,e,n,i=!1){const r=new rF(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function mp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dw(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await dw(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t,e){const n=tr(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Ra(o,e??{}))return r;Cn(r,"already-initialized")}return n.initialize({options:e})}function oF(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function aF(t,e,n){const i=qr(t);Q(i._canInitEmulator,i,"emulator-config-failed"),Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),o=JC(e),{host:l,port:c}=lF(e),h=c===null?"":`:${c}`;i.config.emulator={url:`${o}//${l}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||uF()}function JC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lF(t){const e=JC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:fw(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:fw(l)}}}function fw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}async function cF(t,e){return $n(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e){return il(t,"POST","/v1/accounts:signInWithPassword",pi(t,e))}async function dF(t,e){return $n(t,"POST","/v1/accounts:sendOobCode",pi(t,e))}async function fF(t,e){return dF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(t,e){return il(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}async function mF(t,e){return il(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends S_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ja(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ja(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,n,"signInWithPassword",hF);case"emailLink":return pF(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,i,"signUpPassword",cF);case"emailLink":return mF(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function As(t,e){return il(t,"POST","/v1/accounts:signInWithIdp",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F="http://localhost";class zr extends S_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=g_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new zr(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return As(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,As(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,As(e,n)}buildRequest(){const e={requestUri:_F,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ro(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vF(t){const e=Vo(Zo(t)).link,n=e?Vo(Zo(e)).deep_link_id:null,i=Vo(Zo(t)).deep_link_id;return(i?Vo(Zo(i)).link:null)||i||n||e||t}class T_{constructor(e){var n,i,r,o,l,c;const h=Vo(Zo(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,m=(i=h.oobCode)!==null&&i!==void 0?i:null,_=gF((r=h.mode)!==null&&r!==void 0?r:null);Q(f&&m&&_,"argument-error"),this.apiKey=f,this.operation=_,this.code=m,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=vF(e);try{return new T_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.providerId=lo.PROVIDER_ID}static credential(e,n){return ja._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=T_.parseLink(n);return Q(i,"argument-error"),ja._fromEmailAndCode(e,i.code,i.tenantId)}}lo.PROVIDER_ID="password";lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends XC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends rl{constructor(){super("facebook.com")}static credential(e){return zr._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends rl{constructor(){super("github.com")}static credential(e){return zr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends rl{constructor(){super("twitter.com")}static credential(e,n){return zr._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return bi.credential(n,i)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(t,e){return il(t,"POST","/v1/accounts:signUp",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await xr._fromIdTokenResponse(e,i,r),l=pw(i);return new Br({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=pw(i);return new Br({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function pw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends In{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new cc(e,n,i,r)}}function eI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(t,o,e,i):o})}async function wF(t,e,n=!1){const i=await Ks(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Br._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const o=await Ks(t,eI(i,r,e,t),n);Q(o.idToken,i,"internal-error");const l=w_(o.idToken);Q(l,i,"internal-error");const{sub:c}=l;return Q(t.uid===c,i,"user-mismatch"),Br._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Cn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(t,e,n=!1){const i="signIn",r=await eI(t,i,e),o=await Br._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function SF(t,e){return tI(qr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t,e,n){var i;Q(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),Q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t){const e=qr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CF(t,e,n){const i=qr(t),l=await mp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yF).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&nI(t),h}),c=await Br._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function IF(t,e,n){return SF(Ue(t),lo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&nI(t),i})}async function xF(t,e){const n=Ue(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&TF(n.auth,r,e);const{email:o}=await fF(n.auth,r);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e){return $n(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Ue(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Ks(i,PF(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const c=i.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function bF(t,e,n,i){return Ue(t).onIdTokenChanged(e,n,i)}function RF(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function mw(t,e,n,i){return Ue(t).onAuthStateChanged(e,n,i)}function LF(t){return Ue(t).signOut()}const hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(){const t=St();return E_(t)||rh(t)}const OF=1e3,AF=10;class rI extends iI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=NF()&&G2(),this.fallbackToPolling=KC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(i);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);Z2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,AF):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},OF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rI.type="LOCAL";const MF=rI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends iI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sI.type="SESSION";const oI=sI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),h=await DF(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=C_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return window}function UF(t){Bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return typeof Bn().WorkerGlobalScope<"u"&&typeof Bn().importScripts=="function"}async function zF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jF(){return aI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebaseLocalStorageDb",WF=1,dc="firebaseLocalStorage",uI="fbase_key";class sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oh(t,e){return t.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function HF(){const t=indexedDB.deleteDatabase(lI);return new sl(t).toPromise()}function _p(){const t=indexedDB.open(lI,WF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(dc,{keyPath:uI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(dc)?e(i):(i.close(),await HF(),e(await _p()))})})}async function _w(t,e,n){const i=oh(t,!0).put({[uI]:e,value:n});return new sl(i).toPromise()}async function $F(t,e){const n=oh(t,!1).get(e),i=await new sl(n).toPromise();return i===void 0?null:i.value}function gw(t,e){const n=oh(t,!0).delete(e);return new sl(n).toPromise()}const VF=800,ZF=3;class cI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ZF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sh._getInstance(jF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zF(),!this.activeServiceWorker)return;this.sender=new FF(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _p();return await _w(e,hc,"1"),await gw(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_w(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>$F(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=oh(r,!1).getAll();return new sl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cI.type="LOCAL";const GF=cI;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t,e){return e?ni(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_ extends S_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return As(e,this._buildIdpRequest())}_linkToIdToken(e,n){return As(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return As(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KF(t){return tI(t.auth,new I_(t),t.bypassAuthState)}function YF(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),EF(n,new I_(t),t.bypassAuthState)}async function QF(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),wF(n,new I_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KF;case"linkViaPopup":case"linkViaRedirect":return QF;case"reauthViaPopup":case"reauthViaRedirect":return YF;default:Cn(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=new nl(2e3,1e4);class Ss extends hI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=C_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JF.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF="pendingRedirect",hu=new Map;class eU extends hI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=hu.get(this.auth._key());if(!e){try{const i=await tU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}hu.set(this.auth._key(),e)}return this.bypassAuthState||hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tU(t,e){const n=rU(e),i=iU(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function nU(t,e){hu.set(t._key(),e)}function iU(t){return ni(t._redirectPersistence)}function rU(t){return cu(XF,t.config.apiKey,t.name)}async function sU(t,e,n=!1){const i=qr(t),r=qF(i,e),l=await new eU(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=10*60*1e3;class aU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!dI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oU&&this.cachedEventUids.clear(),this.cachedEventUids.has(vw(e))}saveEventToCache(e){this.cachedEventUids.add(vw(e)),this.lastProcessedEventTime=Date.now()}}function vw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t,e={}){return $n(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hU=/^https?/;async function dU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uU(t);for(const n of e)try{if(fU(n))return}catch{}Cn(t,"unauthorized-domain")}function fU(t){const e=pp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!hU.test(n))return!1;if(cU.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=new nl(3e4,6e4);function yw(){const t=Bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mU(t){return new Promise((e,n)=>{var i,r,o;function l(){yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yw(),n(zn(t,"network-request-failed"))},timeout:pU.get()})}if(!((r=(i=Bn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Bn().gapi)===null||o===void 0)&&o.load)l();else{const c=eF("iframefcb");return Bn()[c]=()=>{gapi.load?l():n(zn(t,"network-request-failed"))},QC(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw du=null,e})}let du=null;function _U(t){return du=du||mU(t),du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=new nl(5e3,15e3),vU="__/auth/iframe",yU="emulator/auth/iframe",wU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SU(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?y_(e,yU):`https://${t.config.authDomain}/${vU}`,i={apiKey:e.apiKey,appName:t.name,v:Vr},r=EU.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${ro(i).slice(1)}`}async function TU(t){const e=await _U(t),n=Bn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:SU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wU,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=zn(t,"network-request-failed"),c=Bn().setTimeout(()=>{o(l)},gU.get());function h(){Bn().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IU=500,xU=600,PU="_blank",kU="http://localhost";class ww{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bU(t,e,n,i=IU,r=xU){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},CU),{width:i.toString(),height:r.toString(),top:o,left:l}),f=St().toLowerCase();n&&(c=$C(f)?PU:n),HC(f)&&(e=e||kU,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[S,w])=>`${v}${S}=${w},`,"");if(V2(f)&&c!=="_self")return RU(e||"",c),new ww(null);const _=window.open(e||"",c,m);Q(_,t,"popup-blocked");try{_.focus()}catch{}return new ww(_)}function RU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="__/auth/handler",NU="emulator/auth/handler",OU=encodeURIComponent("fac");async function Ew(t,e,n,i,r,o){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Vr,eventId:r};if(e instanceof XC){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Wf(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries(o||{}))l[m]=_}if(e instanceof rl){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await t._getAppCheckToken(),f=h?`#${OU}=${encodeURIComponent(h)}`:"";return`${AU(t)}?${ro(c).slice(1)}${f}`}function AU({config:t}){return t.emulator?y_(t,NU):`https://${t.authDomain}/${LU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class MU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oI,this._completeRedirectFn=sU,this._overrideRedirectResult=nU}async _openPopup(e,n,i,r){var o;di((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Ew(e,n,i,pp(),r);return bU(e,l,C_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Ew(e,n,i,pp(),r);return UF(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(di(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await TU(e),i=new aU(e);return n.register("authEvent",r=>(Q(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bd,{type:Bd},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Bd];l!==void 0&&n(!!l),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KC()||E_()||rh()}}const DU=MU;var Sw="@firebase/auth",Tw="1.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function zU(t){Tn(new an("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Q(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YC(t)},f=new J2(i,r,o,h);return oF(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Tn(new an("auth-internal",e=>{const n=qr(e.getProvider("auth").getImmediate());return(i=>new FU(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ut(Sw,Tw,UU(t)),Ut(Sw,Tw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=5*60,jU=wS("authIdTokenMaxAge")||BU;let Cw=null;const WU=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>jU)return;const r=n==null?void 0:n.token;Cw!==r&&(Cw=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function HU(t=$c()){const e=tr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sF(t,{popupRedirectResolver:DU,persistence:[GF,MF,oI]}),i=wS("authTokenSyncURL");if(i){const o=WU(i);RF(n,o,()=>o(n.currentUser)),bF(n,l=>o(l))}const r=gS("auth");return r&&aF(n,`http://${r}`),n}zU("Browser");const $U={apiKey:"AIzaSyCjm7x_X4VrlT4C93nhfjMmYQcQhqT0ybU",authDomain:"skatespots-56bd6.firebaseapp.com",databaseURL:"https://skatespots-56bd6-default-rtdb.firebaseio.com",projectId:"skatespots-56bd6",storageBucket:"skatespots-56bd6.appspot.com",messagingSenderId:"439071919444",appId:"1:439071919444:web:97b6b6d8a1d619ebddccc1",measurementId:"G-10PTTR6QYZ"},ah=RS($U);qN(ah);const Ts=oD(ah),gp=v2(ah),Ys=HU(ah);function lh(){zc();const{authUser:t,setAuthUser:e}=nS();k.useEffect(()=>{const i=mw(Ys,r=>{e(r||null)});return()=>{i()}},[mw]);const n=()=>{LF(Ys).then(()=>{console.log("Sign out successful."),e(null)}).catch(i=>console.log(i))};return x.jsxs("nav",{className:"nav",children:[x.jsxs("div",{children:[x.jsx("a",{href:"/spot-seeker/",className:"titleSite",children:"Spot Seeker"}),x.jsx("img",{className:"board",src:"https://firebasestorage.googleapis.com/v0/b/skatespots-56bd6.appspot.com/o/images%2Foutput-onlinepngtools%20(1).png?alt=media&token=1b72e8c7-5d2b-481d-8c07-6b81b1156217"})]}),x.jsxs("ul",{children:[x.jsx("li",{children:x.jsx("a",{href:"/spot-seeker/#submit",children:x.jsx("button",{className:"navButtons",id:"submitButton",children:"Submit"})})}),x.jsx("li",{children:t!==null?x.jsx("div",{children:x.jsx("button",{className:"navButtons",onClick:n,id:"submitButton",children:"Logout"})}):x.jsxs("ul",{children:[x.jsx("a",{href:"/spot-seeker/#login",children:x.jsx("button",{className:"navButtons",id:"loginButton",children:"Login"})}),x.jsx("a",{href:"/spot-seeker/#register",children:x.jsx("button",{className:"navButtons",id:"regButton",children:"Register"})})]})})]})]})}function VU(){const[t,e]=k.useState(),[n,i]=k.useState(),[r,o]=k.useState(),l=zc(),c={url:"https://johnson4500.github.io/spot-seeker/",handleCodeInApp:!0},h=f=>{f.preventDefault(),CF(Ys,n,r).then(m=>{console.log(m);const _=m.user;kF(_,{displayName:t}).then(()=>{console.log("Display name set successfully")}).catch(v=>{console.error("Error updating display name:",v.message)}),xF(Ys.currentUser,c).then(()=>{console.log("Email verification link sent!")}),l("/")}).catch(m=>{console.log(m)})};return x.jsxs(k.Fragment,{children:[x.jsx(lh,{}),x.jsx("div",{children:x.jsxs("div",{className:"container",children:[x.jsx("br",{}),x.jsx("br",{}),x.jsx("h2",{id:"topText",children:"Register"}),x.jsx("br",{}),x.jsxs("form",{onSubmit:h,children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"text",children:x.jsx("strong",{children:"Username"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"text",placeholder:"Enter Username",autoComplete:"off",name:"username",onChange:f=>e(f.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{children:"Email"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"email",placeholder:"Enter Email",autoComplete:"off",name:"email",onChange:f=>i(f.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{children:"Password"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"password",placeholder:"Enter Password",autoComplete:"off",name:"password",minlength:"6",onChange:f=>o(f.target.value)})]}),x.jsx("br",{}),x.jsx("button",{id:"logButt",type:"submit",className:"buttons",children:"Register"})]}),x.jsx("a",{href:"/spot-seeker/#login",children:x.jsx("button",{id:"regButt",className:"buttons",children:"Already Have an Account"})})]})})]})}function ZU(){const[t,e]=k.useState(),[n,i]=k.useState(),[r,o]=k.useState("inputFields"),l=zc(),c=h=>{h.preventDefault(),IF(Ys,t,n).then(f=>{f.user,l("/")}).catch(f=>{console.log(f),o("invalid")})};return x.jsxs(k.Fragment,{children:[x.jsx(lh,{}),x.jsx("br",{}),x.jsx("br",{}),x.jsx("br",{}),x.jsx("div",{className:"Login",children:x.jsxs("div",{className:"container",children:[x.jsx("h2",{id:"logintext",children:"Login"}),x.jsx("br",{}),x.jsxs("form",{onSubmit:c,children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{className:"labels",children:"Email"})}),x.jsx("br",{}),x.jsx("input",{className:r,type:"email",placeholder:"Enter Email",autoComplete:"off",name:"email",onChange:h=>e(h.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{className:"labels",children:"Password"})}),x.jsx("br",{}),x.jsx("input",{type:"password",placeholder:"Enter Password",autoComplete:"off",name:"password",className:r,onChange:h=>i(h.target.value)})]}),x.jsx("br",{}),r=="invalid"?x.jsx("div",{children:"Invalid email and/or password!"}):x.jsx("div",{}),x.jsx("button",{id:"logButt",className:"buttons",type:"submit",children:"Login"})]}),x.jsx("a",{href:"/spot-seeker/#register",children:x.jsx("button",{className:"buttons",id:"regButt",children:"Register"})})]})})]})}function GU({markersData:t,setFilteredData:e,searchInput:n,setSearchInput:i}){k.useEffect(()=>{n.length<1&&e(t)},[n]);const r=o=>{event.key==="Enter"&&e(l=>t.filter(c=>c.spotName.toLowerCase().includes(n.toLowerCase())||c.spotName.toLowerCase().includes(n.toLowerCase())))};return x.jsx("input",{className:"input-field",type:"text",id:"fname",name:"fname",placeholder:"Search then press enter...",value:n,onChange:o=>i(o.target.value),onKeyDown:r})}var vp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(IP,function(n){var i="1.9.4";function r(s){var a,u,d,p;for(u=1,d=arguments.length;u<d;u++){p=arguments[u];for(a in p)s[a]=p[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var u=Array.prototype.slice;if(s.bind)return s.bind.apply(s,u.call(arguments,1));var d=u.call(arguments,2);return function(){return s.apply(a,d.length?d.concat(u.call(arguments)):arguments)}}var c=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function f(s,a,u){var d,p,g,T;return T=function(){d=!1,p&&(g.apply(u,p),p=!1)},g=function(){d?p=arguments:(s.apply(u,arguments),setTimeout(T,a),d=!0)},g}function m(s,a,u){var d=a[1],p=a[0],g=d-p;return s===d&&u?s:((s-p)%g+g)%g+p}function _(){return!1}function v(s,a){if(a===!1)return s;var u=Math.pow(10,a===void 0?6:a);return Math.round(s*u)/u}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function w(s){return S(s).split(/\s+/)}function I(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var u in a)s.options[u]=a[u];return s.options}function R(s,a,u){var d=[];for(var p in s)d.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(s[p]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function y(s,a){return s.replace(E,function(u,d){var p=a[d];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(a)),p})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function b(s,a){for(var u=0;u<s.length;u++)if(s[u]===a)return u;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function W(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var H=0;function U(s){var a=+new Date,u=Math.max(0,16-(a-H));return H=a+u,window.setTimeout(s,u)}var B=window.requestAnimationFrame||W("RequestAnimationFrame")||U,$=window.cancelAnimationFrame||W("CancelAnimationFrame")||W("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,a,u){if(u&&B===U)s.call(a);else return B.call(window,l(s,a))}function le(s){s&&$.call(window,s)}var Le={__proto__:null,extend:r,create:o,bind:l,get lastId(){return c},stamp:h,throttle:f,wrapNum:m,falseFn:_,formatNum:v,trim:S,splitWords:w,setOptions:I,getParamString:R,template:y,isArray:C,indexOf:b,emptyImageUrl:D,requestFn:B,cancelFn:$,requestAnimFrame:V,cancelAnimFrame:le};function Ce(){}Ce.extend=function(s){var a=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=a.__super__=this.prototype,d=o(u);d.constructor=a,a.prototype=d;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(a[p]=this[p]);return s.statics&&r(a,s.statics),s.includes&&(Je(s.includes),r.apply(null,[d].concat(s.includes))),r(d,s),delete d.statics,delete d.includes,d.options&&(d.options=u.options?o(u.options):{},r(d.options,s.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,T=d._initHooks.length;g<T;g++)d._initHooks[g].call(this)}},a},Ce.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Ce.mergeOptions=function(s){return r(this.prototype.options,s),this},Ce.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),u=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Je(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(s,a,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],a);else{s=w(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],a,u)}return this},off:function(s,a,u){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var d in s)this._off(d,s[d],a);else{s=w(s);for(var p=arguments.length===1,g=0,T=s.length;g<T;g++)p?this._off(s[g]):this._off(s[g],a,u)}return this},_on:function(s,a,u,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,u)===!1){u===this&&(u=void 0);var p={fn:a,ctx:u};d&&(p.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(p)}},_off:function(s,a,u){var d,p,g;if(this._events&&(d=this._events[s],!!d)){if(arguments.length===1){if(this._firingCount)for(p=0,g=d.length;p<g;p++)d[p].fn=_;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var T=this._listens(s,a,u);if(T!==!1){var P=d[T];this._firingCount&&(P.fn=_,this._events[s]=d=d.slice()),d.splice(T,1)}}},fire:function(s,a,u){if(!this.listens(s,u))return this;var d=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var p=this._events[s];if(p){this._firingCount=this._firingCount+1||1;for(var g=0,T=p.length;g<T;g++){var P=p[g],N=P.fn;P.once&&this.off(s,N,P.ctx),N.call(P.ctx||this,d)}this._firingCount--}}return u&&this._propagateEvent(d),this},listens:function(s,a,u,d){typeof s!="string"&&console.warn('"string" type argument expected');var p=a;typeof a!="function"&&(d=!!a,p=void 0,u=void 0);var g=this._events&&this._events[s];if(g&&g.length&&this._listens(s,p,u)!==!1)return!0;if(d){for(var T in this._eventParents)if(this._eventParents[T].listens(s,a,u,d))return!0}return!1},_listens:function(s,a,u){if(!this._events)return!1;var d=this._events[s]||[];if(!a)return!!d.length;u===this&&(u=void 0);for(var p=0,g=d.length;p<g;p++)if(d[p].fn===a&&d[p].ctx===u)return p;return!1},once:function(s,a,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],a,!0);else{s=w(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],a,u,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var $e=Ce.extend(Ne);function O(s,a,u){this.x=u?Math.round(s):s,this.y=u?Math.round(a):a}var q=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(s){return this.clone()._add(F(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(F(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new O(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new O(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=q(this.x),this.y=q(this.y),this},distanceTo:function(s){s=F(s);var a=s.x-this.x,u=s.y-this.y;return Math.sqrt(a*a+u*u)},equals:function(s){return s=F(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=F(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function F(s,a,u){return s instanceof O?s:C(s)?new O(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new O(s.x,s.y):new O(s,a,u)}function J(s,a){if(s)for(var u=a?[s,a]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}J.prototype={extend:function(s){var a,u;if(!s)return this;if(s instanceof O||typeof s[0]=="number"||"x"in s)a=u=F(s);else if(s=fe(s),a=s.min,u=s.max,!a||!u)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=u.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(s){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,u;return typeof s[0]=="number"||s instanceof O?s=F(s):s=fe(s),s instanceof J?(a=s.min,u=s.max):a=u=s,a.x>=this.min.x&&u.x<=this.max.x&&a.y>=this.min.y&&u.y<=this.max.y},intersects:function(s){s=fe(s);var a=this.min,u=this.max,d=s.min,p=s.max,g=p.x>=a.x&&d.x<=u.x,T=p.y>=a.y&&d.y<=u.y;return g&&T},overlaps:function(s){s=fe(s);var a=this.min,u=this.max,d=s.min,p=s.max,g=p.x>a.x&&d.x<u.x,T=p.y>a.y&&d.y<u.y;return g&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,u=this.max,d=Math.abs(a.x-u.x)*s,p=Math.abs(a.y-u.y)*s;return fe(F(a.x-d,a.y-p),F(u.x+d,u.y+p))},equals:function(s){return s?(s=fe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function fe(s,a){return!s||s instanceof J?s:new J(s,a)}function Ve(s,a){if(s)for(var u=a?[s,a]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}Ve.prototype={extend:function(s){var a=this._southWest,u=this._northEast,d,p;if(s instanceof ue)d=s,p=s;else if(s instanceof Ve){if(d=s._southWest,p=s._northEast,!d||!p)return this}else return s?this.extend(ne(s)||we(s)):this;return!a&&!u?(this._southWest=new ue(d.lat,d.lng),this._northEast=new ue(p.lat,p.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(s){var a=this._southWest,u=this._northEast,d=Math.abs(a.lat-u.lat)*s,p=Math.abs(a.lng-u.lng)*s;return new Ve(new ue(a.lat-d,a.lng-p),new ue(u.lat+d,u.lng+p))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ue||"lat"in s?s=ne(s):s=we(s);var a=this._southWest,u=this._northEast,d,p;return s instanceof Ve?(d=s.getSouthWest(),p=s.getNorthEast()):d=p=s,d.lat>=a.lat&&p.lat<=u.lat&&d.lng>=a.lng&&p.lng<=u.lng},intersects:function(s){s=we(s);var a=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>=a.lat&&d.lat<=u.lat,T=p.lng>=a.lng&&d.lng<=u.lng;return g&&T},overlaps:function(s){s=we(s);var a=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>a.lat&&d.lat<u.lat,T=p.lng>a.lng&&d.lng<u.lng;return g&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=we(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function we(s,a){return s instanceof Ve?s:new Ve(s,a)}function ue(s,a,u){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,u!==void 0&&(this.alt=+u)}ue.prototype={equals:function(s,a){if(!s)return!1;s=ne(s);var u=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return u<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return xn.distance(this,ne(s))},wrap:function(){return xn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,u=a/Math.cos(Math.PI/180*this.lat);return we([this.lat-a,this.lng-u],[this.lat+a,this.lng+u])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function ne(s,a,u){return s instanceof ue?s:C(s)&&typeof s[0]!="object"?s.length===3?new ue(s[0],s[1],s[2]):s.length===2?new ue(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ue(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new ue(s,a,u)}var Xe={latLngToPoint:function(s,a){var u=this.projection.project(s),d=this.scale(a);return this.transformation._transform(u,d)},pointToLatLng:function(s,a){var u=this.scale(a),d=this.transformation.untransform(s,u);return this.projection.unproject(d)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,u=this.scale(s),d=this.transformation.transform(a.min,u),p=this.transformation.transform(a.max,u);return new J(d,p)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,u=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,d=s.alt;return new ue(u,a,d)},wrapLatLngBounds:function(s){var a=s.getCenter(),u=this.wrapLatLng(a),d=a.lat-u.lat,p=a.lng-u.lng;if(d===0&&p===0)return s;var g=s.getSouthWest(),T=s.getNorthEast(),P=new ue(g.lat-d,g.lng-p),N=new ue(T.lat-d,T.lng-p);return new Ve(P,N)}},xn=r({},Xe,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var u=Math.PI/180,d=s.lat*u,p=a.lat*u,g=Math.sin((a.lat-s.lat)*u/2),T=Math.sin((a.lng-s.lng)*u/2),P=g*g+Math.cos(d)*Math.cos(p)*T*T,N=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));return this.R*N}}),nr=6378137,co={R:nr,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,u=this.MAX_LATITUDE,d=Math.max(Math.min(u,s.lat),-u),p=Math.sin(d*a);return new O(this.R*s.lng*a,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(s){var a=180/Math.PI;return new ue((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=nr*Math.PI;return new J([-s,-s],[s,s])}()};function he(s,a,u,d){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=u,this._d=d}he.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new O((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function K(s,a,u,d){return new he(s,a,u,d)}var _e=r({},xn,{code:"EPSG:3857",projection:co,transformation:function(){var s=.5/(Math.PI*co.R);return K(s,.5,-s,.5)}()}),qt=r({},_e,{code:"EPSG:900913"});function mi(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ll(s,a){var u="",d,p,g,T,P,N;for(d=0,g=s.length;d<g;d++){for(P=s[d],p=0,T=P.length;p<T;p++)N=P[p],u+=(p?"L":"M")+N.x+" "+N.y;u+=a?Y.svg?"z":"x":""}return u||"M0 0"}var ho=document.documentElement.style,ir="ActiveXObject"in window,_h=ir&&!document.addEventListener,rr="msLaunchUri"in navigator&&!("documentMode"in document),un=Pn("webkit"),ul=Pn("android"),M_=Pn("android 2")||Pn("android 3"),ix=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rx=ul&&Pn("Google")&&ix<537&&!("AudioNode"in window),gh=!!window.opera,D_=!rr&&Pn("chrome"),F_=Pn("gecko")&&!un&&!gh&&!ir,sx=!D_&&Pn("safari"),U_=Pn("phantom"),z_="OTransition"in ho,ox=navigator.platform.indexOf("Win")===0,B_=ir&&"transition"in ho,vh="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!M_,j_="MozPerspective"in ho,ax=!window.L_DISABLE_3D&&(B_||vh||j_)&&!z_&&!U_,fo=typeof orientation<"u"||Pn("mobile"),lx=fo&&un,ux=fo&&vh,W_=!window.PointerEvent&&window.MSPointerEvent,H_=!!(window.PointerEvent||W_),$_="ontouchstart"in window||!!window.TouchEvent,cx=!window.L_NO_TOUCH&&($_||H_),hx=fo&&gh,dx=fo&&F_,fx=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,px=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",_,a),window.removeEventListener("testPassiveEventSupport",_,a)}catch{}return s}(),mx=function(){return!!document.createElement("canvas").getContext}(),yh=!!(document.createElementNS&&mi("svg").createSVGRect),_x=!!yh&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),gx=!yh&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),vx=navigator.platform.indexOf("Mac")===0,yx=navigator.platform.indexOf("Linux")===0;function Pn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Y={ie:ir,ielt9:_h,edge:rr,webkit:un,android:ul,android23:M_,androidStock:rx,opera:gh,chrome:D_,gecko:F_,safari:sx,phantom:U_,opera12:z_,win:ox,ie3d:B_,webkit3d:vh,gecko3d:j_,any3d:ax,mobile:fo,mobileWebkit:lx,mobileWebkit3d:ux,msPointer:W_,pointer:H_,touch:cx,touchNative:$_,mobileOpera:hx,mobileGecko:dx,retina:fx,passiveEvents:px,canvas:mx,svg:yh,vml:gx,inlineSvg:_x,mac:vx,linux:yx},V_=Y.msPointer?"MSPointerDown":"pointerdown",Z_=Y.msPointer?"MSPointerMove":"pointermove",G_=Y.msPointer?"MSPointerUp":"pointerup",q_=Y.msPointer?"MSPointerCancel":"pointercancel",wh={touchstart:V_,touchmove:Z_,touchend:G_,touchcancel:q_},K_={touchstart:Ix,touchmove:cl,touchend:cl,touchcancel:cl},Kr={},Y_=!1;function wx(s,a,u){return a==="touchstart"&&Cx(),K_[a]?(u=K_[a].bind(this,u),s.addEventListener(wh[a],u,!1),u):(console.warn("wrong event specified:",a),_)}function Ex(s,a,u){if(!wh[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(wh[a],u,!1)}function Sx(s){Kr[s.pointerId]=s}function Tx(s){Kr[s.pointerId]&&(Kr[s.pointerId]=s)}function Q_(s){delete Kr[s.pointerId]}function Cx(){Y_||(document.addEventListener(V_,Sx,!0),document.addEventListener(Z_,Tx,!0),document.addEventListener(G_,Q_,!0),document.addEventListener(q_,Q_,!0),Y_=!0)}function cl(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var u in Kr)a.touches.push(Kr[u]);a.changedTouches=[a],s(a)}}function Ix(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&ct(a),cl(s,a)}function xx(s){var a={},u,d;for(d in s)u=s[d],a[d]=u&&u.bind?u.bind(s):u;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Px=200;function kx(s,a){s.addEventListener("dblclick",a);var u=0,d;function p(g){if(g.detail!==1){d=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var T=ng(g);if(!(T.some(function(N){return N instanceof HTMLLabelElement&&N.attributes.for})&&!T.some(function(N){return N instanceof HTMLInputElement||N instanceof HTMLSelectElement}))){var P=Date.now();P-u<=Px?(d++,d===2&&a(xx(g))):d=1,u=P}}}return s.addEventListener("click",p),{dblclick:a,simDblclick:p}}function bx(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var Eh=fl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),po=fl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),J_=po==="webkitTransition"||po==="OTransition"?po+"End":"transitionend";function X_(s){return typeof s=="string"?document.getElementById(s):s}function mo(s,a){var u=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!u||u==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(s,null);u=d?d[a]:null}return u==="auto"?null:u}function ve(s,a,u){var d=document.createElement(s);return d.className=a||"",u&&u.appendChild(d),d}function Ae(s){var a=s.parentNode;a&&a.removeChild(s)}function hl(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Yr(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function Qr(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function Sh(s,a){if(s.classList!==void 0)return s.classList.contains(a);var u=dl(s);return u.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(u)}function re(s,a){if(s.classList!==void 0)for(var u=w(a),d=0,p=u.length;d<p;d++)s.classList.add(u[d]);else if(!Sh(s,a)){var g=dl(s);Th(s,(g?g+" ":"")+a)}}function Ze(s,a){s.classList!==void 0?s.classList.remove(a):Th(s,S((" "+dl(s)+" ").replace(" "+a+" "," ")))}function Th(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function dl(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Kt(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&Rx(s,a)}function Rx(s,a){var u=!1,d="DXImageTransform.Microsoft.Alpha";try{u=s.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),u?(u.Enabled=a!==100,u.Opacity=a):s.style.filter+=" progid:"+d+"(opacity="+a+")"}function fl(s){for(var a=document.documentElement.style,u=0;u<s.length;u++)if(s[u]in a)return s[u];return!1}function sr(s,a,u){var d=a||new O(0,0);s.style[Eh]=(Y.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(u?" scale("+u+")":"")}function qe(s,a){s._leaflet_pos=a,Y.any3d?sr(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function or(s){return s._leaflet_pos||new O(0,0)}var _o,go,Ch;if("onselectstart"in document)_o=function(){ie(window,"selectstart",ct)},go=function(){Ie(window,"selectstart",ct)};else{var vo=fl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);_o=function(){if(vo){var s=document.documentElement.style;Ch=s[vo],s[vo]="none"}},go=function(){vo&&(document.documentElement.style[vo]=Ch,Ch=void 0)}}function Ih(){ie(window,"dragstart",ct)}function xh(){Ie(window,"dragstart",ct)}var pl,Ph;function kh(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ml(),pl=s,Ph=s.style.outlineStyle,s.style.outlineStyle="none",ie(window,"keydown",ml))}function ml(){pl&&(pl.style.outlineStyle=Ph,pl=void 0,Ph=void 0,Ie(window,"keydown",ml))}function eg(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function bh(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var Lx={__proto__:null,TRANSFORM:Eh,TRANSITION:po,TRANSITION_END:J_,get:X_,getStyle:mo,create:ve,remove:Ae,empty:hl,toFront:Yr,toBack:Qr,hasClass:Sh,addClass:re,removeClass:Ze,setClass:Th,getClass:dl,setOpacity:Kt,testProp:fl,setTransform:sr,setPosition:qe,getPosition:or,get disableTextSelection(){return _o},get enableTextSelection(){return go},disableImageDrag:Ih,enableImageDrag:xh,preventOutline:kh,restoreOutline:ml,getSizedParentNode:eg,getScale:bh};function ie(s,a,u,d){if(a&&typeof a=="object")for(var p in a)Lh(s,p,a[p],u);else{a=w(a);for(var g=0,T=a.length;g<T;g++)Lh(s,a[g],u,d)}return this}var kn="_leaflet_events";function Ie(s,a,u,d){if(arguments.length===1)tg(s),delete s[kn];else if(a&&typeof a=="object")for(var p in a)Nh(s,p,a[p],u);else if(a=w(a),arguments.length===2)tg(s,function(P){return b(a,P)!==-1});else for(var g=0,T=a.length;g<T;g++)Nh(s,a[g],u,d);return this}function tg(s,a){for(var u in s[kn]){var d=u.split(/\d/)[0];(!a||a(d))&&Nh(s,d,null,null,u)}}var Rh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Lh(s,a,u,d){var p=a+h(u)+(d?"_"+h(d):"");if(s[kn]&&s[kn][p])return this;var g=function(P){return u.call(d||s,P||window.event)},T=g;!Y.touchNative&&Y.pointer&&a.indexOf("touch")===0?g=wx(s,a,g):Y.touch&&a==="dblclick"?g=kx(s,g):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(Rh[a]||a,g,Y.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(g=function(P){P=P||window.event,Ah(s,P)&&T(P)},s.addEventListener(Rh[a],g,!1)):s.addEventListener(a,T,!1):s.attachEvent("on"+a,g),s[kn]=s[kn]||{},s[kn][p]=g}function Nh(s,a,u,d,p){p=p||a+h(u)+(d?"_"+h(d):"");var g=s[kn]&&s[kn][p];if(!g)return this;!Y.touchNative&&Y.pointer&&a.indexOf("touch")===0?Ex(s,a,g):Y.touch&&a==="dblclick"?bx(s,g):"removeEventListener"in s?s.removeEventListener(Rh[a]||a,g,!1):s.detachEvent("on"+a,g),s[kn][p]=null}function ar(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Oh(s){return Lh(s,"wheel",ar),this}function yo(s){return ie(s,"mousedown touchstart dblclick contextmenu",ar),s._leaflet_disable_click=!0,this}function ct(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function lr(s){return ct(s),ar(s),this}function ng(s){if(s.composedPath)return s.composedPath();for(var a=[],u=s.target;u;)a.push(u),u=u.parentNode;return a}function ig(s,a){if(!a)return new O(s.clientX,s.clientY);var u=bh(a),d=u.boundingClientRect;return new O((s.clientX-d.left)/u.x-a.clientLeft,(s.clientY-d.top)/u.y-a.clientTop)}var Nx=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function rg(s){return Y.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Nx:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ah(s,a){var u=a.relatedTarget;if(!u)return!0;try{for(;u&&u!==s;)u=u.parentNode}catch{return!1}return u!==s}var Ox={__proto__:null,on:ie,off:Ie,stopPropagation:ar,disableScrollPropagation:Oh,disableClickPropagation:yo,preventDefault:ct,stop:lr,getPropagationPath:ng,getMousePosition:ig,getWheelDelta:rg,isExternalTarget:Ah,addListener:ie,removeListener:Ie},sg=$e.extend({run:function(s,a,u,d){this.stop(),this._el=s,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=or(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,u=this._duration*1e3;a<u?this._runFrame(this._easeOut(a/u),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var u=this._startPos.add(this._offset.multiplyBy(s));a&&u._round(),qe(this._el,u),this.fire("step")},_complete:function(){le(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),pe=$e.extend({options:{crs:_e,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=I(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ne(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=po&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ie(this._proxy,J_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,u){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(ne(s),a,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,u.zoom):this._tryAnimatedPan(s,u.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,u.pan&&u.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,u){var d=this.getZoomScale(a),p=this.getSize().divideBy(2),g=s instanceof O?s:this.latLngToContainerPoint(s),T=g.subtract(p).multiplyBy(1-1/d),P=this.containerPointToLatLng(p.add(T));return this.setView(P,a,{zoom:u})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():we(s);var u=F(a.paddingTopLeft||a.padding||[0,0]),d=F(a.paddingBottomRight||a.padding||[0,0]),p=this.getBoundsZoom(s,!1,u.add(d));if(p=typeof a.maxZoom=="number"?Math.min(a.maxZoom,p):p,p===1/0)return{center:s.getCenter(),zoom:p};var g=d.subtract(u).divideBy(2),T=this.project(s.getSouthWest(),p),P=this.project(s.getNorthEast(),p),N=this.unproject(T.add(P).divideBy(2).add(g),p);return{center:N,zoom:p}},fitBounds:function(s,a){if(s=we(s),!s.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(s,a);return this.setView(u.center,u.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=F(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new sg,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,u,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,u){if(u=u||{},u.animate===!1||!Y.any3d)return this.setView(s,a,u);this._stop();var d=this.project(this.getCenter()),p=this.project(s),g=this.getSize(),T=this._zoom;s=ne(s),a=a===void 0?T:a;var P=Math.max(g.x,g.y),N=P*this.getZoomScale(T,a),M=p.distanceTo(d)||1,Z=1.42,X=Z*Z;function se(Ke){var Pl=Ke?-1:1,EP=Ke?N:P,SP=N*N-P*P+Pl*X*X*M*M,TP=2*EP*X*M,Vh=SP/TP,zg=Math.sqrt(Vh*Vh+1)-Vh,CP=zg<1e-9?-18:Math.log(zg);return CP}function Tt(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function st(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}function Qt(Ke){return Tt(Ke)/st(Ke)}var Lt=se(0);function is(Ke){return P*(st(Lt)/st(Lt+Z*Ke))}function gP(Ke){return P*(st(Lt)*Qt(Lt+Z*Ke)-Tt(Lt))/X}function vP(Ke){return 1-Math.pow(1-Ke,1.5)}var yP=Date.now(),Fg=(se(1)-Lt)/Z,wP=u.duration?1e3*u.duration:1e3*Fg*.8;function Ug(){var Ke=(Date.now()-yP)/wP,Pl=vP(Ke)*Fg;Ke<=1?(this._flyToFrame=V(Ug,this),this._move(this.unproject(d.add(p.subtract(d).multiplyBy(gP(Pl)/M)),T),this.getScaleZoom(P/is(Pl),T),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Ug.call(this),this},flyToBounds:function(s,a){var u=this._getBoundsCenterZoom(s,a);return this.flyTo(u.center,u.zoom,a)},setMaxBounds:function(s){return s=we(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var u=this.getCenter(),d=this._limitCenter(u,this._zoom,we(s));return u.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var u=F(a.paddingTopLeft||a.padding||[0,0]),d=F(a.paddingBottomRight||a.padding||[0,0]),p=this.project(this.getCenter()),g=this.project(s),T=this.getPixelBounds(),P=fe([T.min.add(u),T.max.subtract(d)]),N=P.getSize();if(!P.contains(g)){this._enforcingBounds=!0;var M=g.subtract(P.getCenter()),Z=P.extend(g).getSize().subtract(N);p.x+=M.x<0?-Z.x:Z.x,p.y+=M.y<0?-Z.y:Z.y,this.panTo(this.unproject(p),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),d=a.divideBy(2).round(),p=u.divideBy(2).round(),g=d.subtract(p);return!g.x&&!g.y?this:(s.animate&&s.pan?this.panBy(g):(s.pan&&this._rawPanBy(g),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,u,s):navigator.geolocation.getCurrentPosition(a,u,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,u=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,u=s.coords.longitude,d=new ue(a,u),p=d.toBounds(s.coords.accuracy*2),g=this._locateOptions;if(g.setView){var T=this.getBoundsZoom(p);this.setView(d,g.maxZoom?Math.min(T,g.maxZoom):T)}var P={latlng:d,bounds:p,timestamp:s.timestamp};for(var N in s.coords)typeof s.coords[N]=="number"&&(P[N]=s.coords[N]);this.fire("locationfound",P)}},addHandler:function(s,a){if(!a)return this;var u=this[s]=new a(this);return this._handlers.push(u),this.options[s]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(le(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ae(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var u="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),d=ve("div",u,a||this._mapPane);return s&&(this._panes[s]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),u=this.unproject(s.getTopRight());return new Ve(a,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,u){s=we(s),u=F(u||[0,0]);var d=this.getZoom()||0,p=this.getMinZoom(),g=this.getMaxZoom(),T=s.getNorthWest(),P=s.getSouthEast(),N=this.getSize().subtract(u),M=fe(this.project(P,d),this.project(T,d)).getSize(),Z=Y.any3d?this.options.zoomSnap:1,X=N.x/M.x,se=N.y/M.y,Tt=a?Math.max(X,se):Math.min(X,se);return d=this.getScaleZoom(Tt,d),Z&&(d=Math.round(d/(Z/100))*(Z/100),d=a?Math.ceil(d/Z)*Z:Math.floor(d/Z)*Z),Math.max(p,Math.min(g,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var u=this._getTopLeftPoint(s,a);return new J(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var u=this.options.crs;return a=a===void 0?this._zoom:a,u.scale(s)/u.scale(a)},getScaleZoom:function(s,a){var u=this.options.crs;a=a===void 0?this._zoom:a;var d=u.zoom(s*u.scale(a));return isNaN(d)?1/0:d},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ne(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(F(s),a)},layerPointToLatLng:function(s){var a=F(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(ne(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ne(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(we(s))},distance:function(s,a){return this.options.crs.distance(ne(s),ne(a))},containerPointToLayerPoint:function(s){return F(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return F(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(F(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ne(s)))},mouseEventToContainerPoint:function(s){return ig(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=X_(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ie(a,"scroll",this._onScroll,this),this._containerId=h(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,re(s,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=mo(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qe(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(s.markerPane,"leaflet-zoom-hide"),re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,u){qe(this._mapPane,new O(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var p=this._zoom!==a;this._moveStart(p,u)._move(s,a)._moveEnd(p),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,u,d){a===void 0&&(a=this._zoom);var p=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),d?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return le(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){qe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var a=s?Ie:ie;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){le(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var u=[],d,p=a==="mouseout"||a==="mouseover",g=s.target||s.srcElement,T=!1;g;){if(d=this._targets[h(g)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){T=!0;break}if(d&&d.listens(a,!0)&&(p&&!Ah(g,s)||(u.push(d),p))||g===this._container)break;g=g.parentNode}return!u.length&&!T&&!p&&this.listens(a,!0)&&(u=[this]),u},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var u=s.type;u==="mousedown"&&kh(a),this._fireDOMEvent(s,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,u){if(s.type==="click"){var d=r({},s);d.type="preclick",this._fireDOMEvent(d,d.type,u)}var p=this._findEventTargets(s,a);if(u){for(var g=[],T=0;T<u.length;T++)u[T].listens(a,!0)&&g.push(u[T]);p=g.concat(p)}if(p.length){a==="contextmenu"&&ct(s);var P=p[0],N={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var M=P.getLatLng&&(!P._radius||P._radius<=10);N.containerPoint=M?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(s),N.layerPoint=this.containerPointToLayerPoint(N.containerPoint),N.latlng=M?P.getLatLng():this.layerPointToLatLng(N.layerPoint)}for(T=0;T<p.length;T++)if(p[T].fire(a,N,!0),N.originalEvent._stopped||p[T].options.bubblingMouseEvents===!1&&b(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return or(this._mapPane)||new O(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var u=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var u=this.getSize()._divideBy(2);return this.project(s,a)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,u){var d=this._getNewPixelOrigin(u,a);return this.project(s,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(s,a,u){var d=this._getNewPixelOrigin(u,a);return fe([this.project(s.getSouthWest(),a)._subtract(d),this.project(s.getNorthWest(),a)._subtract(d),this.project(s.getSouthEast(),a)._subtract(d),this.project(s.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,u){if(!u)return s;var d=this.project(s,a),p=this.getSize().divideBy(2),g=new J(d.subtract(p),d.add(p)),T=this._getBoundsOffset(g,u,a);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?s:this.unproject(d.add(T),a)},_limitOffset:function(s,a){if(!a)return s;var u=this.getPixelBounds(),d=new J(u.min.add(s),u.max.add(s));return s.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(s,a,u){var d=fe(this.project(a.getNorthEast(),u),this.project(a.getSouthWest(),u)),p=d.min.subtract(s.min),g=d.max.subtract(s.max),T=this._rebound(p.x,-g.x),P=this._rebound(p.y,-g.y);return new O(T,P)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),u=this.getMaxZoom(),d=Y.any3d?this.options.zoomSnap:1;return d&&(s=Math.round(s/d)*d),Math.max(a,Math.min(u,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var u=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,a),!0)},_createAnimProxy:function(){var s=this._proxy=ve("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var u=Eh,d=this._proxy.style[u];sr(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();sr(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),p=this._getCenterOffset(s)._divideBy(1-1/d);return u.animate!==!0&&!this.getSize().contains(p)?!1:(V(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,u,d){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ax(s,a){return new pe(s,a)}var cn=Ce.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),u=this.getPosition(),d=s._controlCorners[u];return re(a,"leaflet-control"),u.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),wo=function(s){return new cn(s)};pe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",u=this._controlContainer=ve("div",a+"control-container",this._container);function d(p,g){var T=a+p+" "+a+g;s[p+g]=ve("div",T,u)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ae(this._controlCorners[s]);Ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var og=cn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,u,d){return u<d?-1:d<u?1:0}},initialize:function(s,a,u){I(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in s)this._addLayer(s[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return cn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(h(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=ve("div",s),u=this.options.collapsed;a.setAttribute("aria-haspopup",!0),yo(a),Oh(a);var d=this._section=ve("section",s+"-list");u&&(this._map.on("click",this.collapse,this),ie(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=ve("a",s+"-toggle",a);p.href="#",p.title="Layers",p.setAttribute("role","button"),ie(p,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){ct(g),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=ve("div",s+"-base",d),this._separator=ve("div",s+"-separator",d),this._overlaysList=ve("div",s+"-overlays",d),a.appendChild(d)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&h(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,u){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(d,p){return this.options.sortFunction(d.layer,p.layer,d.name,p.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hl(this._baseLayersList),hl(this._overlaysList),this._layerControlInputs=[];var s,a,u,d,p=0;for(u=0;u<this._layers.length;u++)d=this._layers[u],this._addItem(d),a=a||d.overlay,s=s||!d.overlay,p+=d.overlay?0:1;return this.options.hideSingleBase&&(s=s&&p>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(h(s.target)),u=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;u&&this._map.fire(u,a)},_createRadioElement:function(s,a){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=u,d.firstChild},_addItem:function(s){var a=document.createElement("label"),u=this._map.hasLayer(s.layer),d;s.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=u):d=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(d),d.layerId=h(s.layer),ie(d,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+s.name;var g=document.createElement("span");a.appendChild(g),g.appendChild(d),g.appendChild(p);var T=s.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,u,d=[],p=[];this._handlingClick=!0;for(var g=s.length-1;g>=0;g--)a=s[g],u=this._getLayer(a.layerId).layer,a.checked?d.push(u):a.checked||p.push(u);for(g=0;g<p.length;g++)this._map.hasLayer(p[g])&&this._map.removeLayer(p[g]);for(g=0;g<d.length;g++)this._map.hasLayer(d[g])||this._map.addLayer(d[g]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,u,d=this._map.getZoom(),p=s.length-1;p>=0;p--)a=s[p],u=this._getLayer(a.layerId).layer,a.disabled=u.options.minZoom!==void 0&&d<u.options.minZoom||u.options.maxZoom!==void 0&&d>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ie(s,"click",ct),this.expand();var a=this;setTimeout(function(){Ie(s,"click",ct),a._preventClick=!1})}}),Mx=function(s,a,u){return new og(s,a,u)},Mh=cn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",u=ve("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",u,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,u,d,p){var g=ve("a",u,d);return g.innerHTML=s,g.href="#",g.title=a,g.setAttribute("role","button"),g.setAttribute("aria-label",a),yo(g),ie(g,"click",lr),ie(g,"click",p,this),ie(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";Ze(this._zoomInButton,a),Ze(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(re(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(re(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});pe.mergeOptions({zoomControl:!0}),pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Mh,this.addControl(this.zoomControl))});var Dx=function(s){return new Mh(s)},ag=cn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",u=ve("div",a),d=this.options;return this._addScales(d,a+"-line",u),s.on(d.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),u},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,u){s.metric&&(this._mScale=ve("div",a,u)),s.imperial&&(this._iScale=ve("div",a,u))},_update:function(){var s=this._map,a=s.getSize().y/2,u=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(u)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),u=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,u,a/s)},_updateImperial:function(s){var a=s*3.2808399,u,d,p;a>5280?(u=a/5280,d=this._getRoundNum(u),this._updateScale(this._iScale,d+" mi",d/u)):(p=this._getRoundNum(a),this._updateScale(this._iScale,p+" ft",p/a))},_updateScale:function(s,a,u){s.style.width=Math.round(this.options.maxWidth*u)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),u=s/a;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,a*u}}),Fx=function(s){return new ag(s)},Ux='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Dh=cn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?Ux+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=ve("div","leaflet-control-attribution"),yo(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var u=[];this.options.prefix&&u.push(this.options.prefix),s.length&&u.push(s.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});pe.mergeOptions({attributionControl:!0}),pe.addInitHook(function(){this.options.attributionControl&&new Dh().addTo(this)});var zx=function(s){return new Dh(s)};cn.Layers=og,cn.Zoom=Mh,cn.Scale=ag,cn.Attribution=Dh,wo.layers=Mx,wo.zoom=Dx,wo.scale=Fx,wo.attribution=zx;var bn=Ce.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bn.addTo=function(s,a){return s.addHandler(a,this),this};var Bx={Events:Ne},lg=Y.touch?"touchstart mousedown":"mousedown",_i=$e.extend({options:{clickTolerance:3},initialize:function(s,a,u,d){I(this,d),this._element=s,this._dragStartTarget=a||s,this._preventOutline=u},enable:function(){this._enabled||(ie(this._dragStartTarget,lg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_i._dragging===this&&this.finishDrag(!0),Ie(this._dragStartTarget,lg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Sh(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){_i._dragging===this&&this.finishDrag();return}if(!(_i._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(_i._dragging=this,this._preventOutline&&kh(this._element),Ih(),_o(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,u=eg(this._element);this._startPoint=new O(a.clientX,a.clientY),this._startPos=or(this._element),this._parentScale=bh(u);var d=s.type==="mousedown";ie(document,d?"mousemove":"touchmove",this._onMove,this),ie(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,u=new O(a.clientX,a.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ct(s),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),qe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ie(document,"mousemove touchmove",this._onMove,this),Ie(document,"mouseup touchend touchcancel",this._onUp,this),xh(),go();var a=this._moved&&this._moving;this._moving=!1,_i._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function ug(s,a,u){var d,p=[1,4,2,8],g,T,P,N,M,Z,X,se;for(g=0,Z=s.length;g<Z;g++)s[g]._code=ur(s[g],a);for(P=0;P<4;P++){for(X=p[P],d=[],g=0,Z=s.length,T=Z-1;g<Z;T=g++)N=s[g],M=s[T],N._code&X?M._code&X||(se=_l(M,N,X,a,u),se._code=ur(se,a),d.push(se)):(M._code&X&&(se=_l(M,N,X,a,u),se._code=ur(se,a),d.push(se)),d.push(N));s=d}return s}function cg(s,a){var u,d,p,g,T,P,N,M,Z;if(!s||s.length===0)throw new Error("latlngs not passed");Yt(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var X=ne([0,0]),se=we(s),Tt=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());Tt<1700&&(X=Fh(s));var st=s.length,Qt=[];for(u=0;u<st;u++){var Lt=ne(s[u]);Qt.push(a.project(ne([Lt.lat-X.lat,Lt.lng-X.lng])))}for(P=N=M=0,u=0,d=st-1;u<st;d=u++)p=Qt[u],g=Qt[d],T=p.y*g.x-g.y*p.x,N+=(p.x+g.x)*T,M+=(p.y+g.y)*T,P+=T*3;P===0?Z=Qt[0]:Z=[N/P,M/P];var is=a.unproject(F(Z));return ne([is.lat+X.lat,is.lng+X.lng])}function Fh(s){for(var a=0,u=0,d=0,p=0;p<s.length;p++){var g=ne(s[p]);a+=g.lat,u+=g.lng,d++}return ne([a/d,u/d])}var jx={__proto__:null,clipPolygon:ug,polygonCenter:cg,centroid:Fh};function hg(s,a){if(!a||!s.length)return s.slice();var u=a*a;return s=$x(s,u),s=Hx(s,u),s}function dg(s,a,u){return Math.sqrt(Eo(s,a,u,!0))}function Wx(s,a,u){return Eo(s,a,u)}function Hx(s,a){var u=s.length,d=typeof Uint8Array!=void 0+""?Uint8Array:Array,p=new d(u);p[0]=p[u-1]=1,Uh(s,p,a,0,u-1);var g,T=[];for(g=0;g<u;g++)p[g]&&T.push(s[g]);return T}function Uh(s,a,u,d,p){var g=0,T,P,N;for(P=d+1;P<=p-1;P++)N=Eo(s[P],s[d],s[p],!0),N>g&&(T=P,g=N);g>u&&(a[T]=1,Uh(s,a,u,d,T),Uh(s,a,u,T,p))}function $x(s,a){for(var u=[s[0]],d=1,p=0,g=s.length;d<g;d++)Vx(s[d],s[p])>a&&(u.push(s[d]),p=d);return p<g-1&&u.push(s[g-1]),u}var fg;function pg(s,a,u,d,p){var g=d?fg:ur(s,u),T=ur(a,u),P,N,M;for(fg=T;;){if(!(g|T))return[s,a];if(g&T)return!1;P=g||T,N=_l(s,a,P,u,p),M=ur(N,u),P===g?(s=N,g=M):(a=N,T=M)}}function _l(s,a,u,d,p){var g=a.x-s.x,T=a.y-s.y,P=d.min,N=d.max,M,Z;return u&8?(M=s.x+g*(N.y-s.y)/T,Z=N.y):u&4?(M=s.x+g*(P.y-s.y)/T,Z=P.y):u&2?(M=N.x,Z=s.y+T*(N.x-s.x)/g):u&1&&(M=P.x,Z=s.y+T*(P.x-s.x)/g),new O(M,Z,p)}function ur(s,a){var u=0;return s.x<a.min.x?u|=1:s.x>a.max.x&&(u|=2),s.y<a.min.y?u|=4:s.y>a.max.y&&(u|=8),u}function Vx(s,a){var u=a.x-s.x,d=a.y-s.y;return u*u+d*d}function Eo(s,a,u,d){var p=a.x,g=a.y,T=u.x-p,P=u.y-g,N=T*T+P*P,M;return N>0&&(M=((s.x-p)*T+(s.y-g)*P)/N,M>1?(p=u.x,g=u.y):M>0&&(p+=T*M,g+=P*M)),T=s.x-p,P=s.y-g,d?T*T+P*P:new O(p,g)}function Yt(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function mg(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Yt(s)}function _g(s,a){var u,d,p,g,T,P,N,M;if(!s||s.length===0)throw new Error("latlngs not passed");Yt(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Z=ne([0,0]),X=we(s),se=X.getNorthWest().distanceTo(X.getSouthWest())*X.getNorthEast().distanceTo(X.getNorthWest());se<1700&&(Z=Fh(s));var Tt=s.length,st=[];for(u=0;u<Tt;u++){var Qt=ne(s[u]);st.push(a.project(ne([Qt.lat-Z.lat,Qt.lng-Z.lng])))}for(u=0,d=0;u<Tt-1;u++)d+=st[u].distanceTo(st[u+1])/2;if(d===0)M=st[0];else for(u=0,g=0;u<Tt-1;u++)if(T=st[u],P=st[u+1],p=T.distanceTo(P),g+=p,g>d){N=(g-d)/p,M=[P.x-N*(P.x-T.x),P.y-N*(P.y-T.y)];break}var Lt=a.unproject(F(M));return ne([Lt.lat+Z.lat,Lt.lng+Z.lng])}var Zx={__proto__:null,simplify:hg,pointToSegmentDistance:dg,closestPointOnSegment:Wx,clipSegment:pg,_getEdgeIntersection:_l,_getBitCode:ur,_sqClosestPointOnSegment:Eo,isFlat:Yt,_flat:mg,polylineCenter:_g},zh={project:function(s){return new O(s.lng,s.lat)},unproject:function(s){return new ue(s.y,s.x)},bounds:new J([-180,-90],[180,90])},Bh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,u=this.R,d=s.lat*a,p=this.R_MINOR/u,g=Math.sqrt(1-p*p),T=g*Math.sin(d),P=Math.tan(Math.PI/4-d/2)/Math.pow((1-T)/(1+T),g/2);return d=-u*Math.log(Math.max(P,1e-10)),new O(s.lng*a*u,d)},unproject:function(s){for(var a=180/Math.PI,u=this.R,d=this.R_MINOR/u,p=Math.sqrt(1-d*d),g=Math.exp(-s.y/u),T=Math.PI/2-2*Math.atan(g),P=0,N=.1,M;P<15&&Math.abs(N)>1e-7;P++)M=p*Math.sin(T),M=Math.pow((1-M)/(1+M),p/2),N=Math.PI/2-2*Math.atan(g*M)-T,T+=N;return new ue(T*a,s.x*a/u)}},Gx={__proto__:null,LonLat:zh,Mercator:Bh,SphericalMercator:co},qx=r({},xn,{code:"EPSG:3395",projection:Bh,transformation:function(){var s=.5/(Math.PI*Bh.R);return K(s,.5,-s,.5)}()}),gg=r({},xn,{code:"EPSG:4326",projection:zh,transformation:K(1/180,1,-1/180,.5)}),Kx=r({},Xe,{projection:zh,transformation:K(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var u=a.lng-s.lng,d=a.lat-s.lat;return Math.sqrt(u*u+d*d)},infinite:!0});Xe.Earth=xn,Xe.EPSG3395=qx,Xe.EPSG3857=_e,Xe.EPSG900913=qt,Xe.EPSG4326=gg,Xe.Simple=Kx;var hn=$e.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var u=this.getEvents();a.on(u,this),this.once("remove",function(){a.off(u,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});pe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=h(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=h(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,a){for(var u in this._layers)s.call(a,this._layers[u]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var a=0,u=s.length;a<u;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=h(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,u=this._getZoomSpan();for(var d in this._zoomBoundLayers){var p=this._zoomBoundLayers[d].options;s=p.minZoom===void 0?s:Math.min(s,p.minZoom),a=p.maxZoom===void 0?a:Math.max(a,p.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Jr=hn.extend({initialize:function(s,a){I(this,a),this._layers={};var u,d;if(s)for(u=0,d=s.length;u<d;u++)this.addLayer(s[u])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),u,d;for(u in this._layers)d=this._layers[u],d[s]&&d[s].apply(d,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var u in this._layers)s.call(a,this._layers[u]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),Yx=function(s,a){return new Jr(s,a)},Zn=Jr.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Jr.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Jr.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ve;for(var a in this._layers){var u=this._layers[a];s.extend(u.getBounds?u.getBounds():u.getLatLng())}return s}}),Qx=function(s,a){return new Zn(s,a)},Xr=Ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var u=this._getIconUrl(s);if(!u){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(u,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(s,a){var u=this.options,d=u[a+"Size"];typeof d=="number"&&(d=[d,d]);var p=F(d),g=F(a==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(u.className||""),g&&(s.style.marginLeft=-g.x+"px",s.style.marginTop=-g.y+"px"),p&&(s.style.width=p.x+"px",s.style.height=p.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return Y.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Jx(s){return new Xr(s)}var So=Xr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof So.imagePath!="string"&&(So.imagePath=this._detectIconPath()),(this.options.imagePath||So.imagePath)+Xr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(u,d,p){var g=d.exec(u);return g&&g[p]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=ve("div","leaflet-default-icon-path",document.body),a=mo(s,"background-image")||mo(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),vg=bn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new _i(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,u=a._map,d=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,g=or(a._icon),T=u.getPixelBounds(),P=u.getPixelOrigin(),N=fe(T.min._subtract(P).add(p),T.max._subtract(P).subtract(p));if(!N.contains(g)){var M=F((Math.max(N.max.x,g.x)-N.max.x)/(T.max.x-N.max.x)-(Math.min(N.min.x,g.x)-N.min.x)/(T.min.x-N.min.x),(Math.max(N.max.y,g.y)-N.max.y)/(T.max.y-N.max.y)-(Math.min(N.min.y,g.y)-N.min.y)/(T.min.y-N.min.y)).multiplyBy(d);u.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),qe(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(le(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,u=a._shadow,d=or(a._icon),p=a._map.layerPointToLatLng(d);u&&qe(u,d),a._latlng=p,s.latlng=p,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){le(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),gl=hn.extend({options:{icon:new So,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){I(this,a),this._latlng=ne(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=ne(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=s.icon.createIcon(this._icon),d=!1;u!==this._icon&&(this._icon&&this._removeIcon(),d=!0,s.title&&(u.title=s.title),u.tagName==="IMG"&&(u.alt=s.alt||"")),re(u,a),s.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ie(u,"focus",this._panOnFocus,this);var p=s.icon.createShadow(this._shadow),g=!1;p!==this._shadow&&(this._removeShadow(),g=!0),p&&(re(p,a),p.alt=""),this._shadow=p,s.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&g&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(this._icon,"focus",this._panOnFocus,this),Ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ae(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&qe(this._icon,s),this._shadow&&qe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Kt(this._icon,s),this._shadow&&Kt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,u=a.iconSize?F(a.iconSize):F(0,0),d=a.iconAnchor?F(a.iconAnchor):F(0,0);s.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:u.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xx(s,a){return new gl(s,a)}var gi=hn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vl=gi.extend({options:{fill:!0,radius:10},initialize:function(s,a){I(this,a),this._latlng=ne(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=ne(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return gi.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,u=this._clickTolerance(),d=[s+u,a+u];this._pxBounds=new J(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function eP(s,a){return new vl(s,a)}var jh=vl.extend({initialize:function(s,a,u){if(typeof a=="number"&&(a=r({},u,{radius:a})),I(this,a),this._latlng=ne(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ve(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:gi.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,u=this._map,d=u.options.crs;if(d.distance===xn.distance){var p=Math.PI/180,g=this._mRadius/xn.R/p,T=u.project([a+g,s]),P=u.project([a-g,s]),N=T.add(P).divideBy(2),M=u.unproject(N).lat,Z=Math.acos((Math.cos(g*p)-Math.sin(a*p)*Math.sin(M*p))/(Math.cos(a*p)*Math.cos(M*p)))/p;(isNaN(Z)||Z===0)&&(Z=g/Math.cos(Math.PI/180*a)),this._point=N.subtract(u.getPixelOrigin()),this._radius=isNaN(Z)?0:N.x-u.project([M,s-Z]).x,this._radiusY=N.y-T.y}else{var X=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(X).x}this._updateBounds()}});function tP(s,a,u){return new jh(s,a,u)}var Gn=gi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){I(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,u=null,d=Eo,p,g,T=0,P=this._parts.length;T<P;T++)for(var N=this._parts[T],M=1,Z=N.length;M<Z;M++){p=N[M-1],g=N[M];var X=d(s,p,g,!0);X<a&&(a=X,u=d(s,p,g))}return u&&(u.distance=Math.sqrt(a)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _g(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=ne(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ve,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Yt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],u=Yt(s),d=0,p=s.length;d<p;d++)u?(a[d]=ne(s[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(s[d]);return a},_project:function(){var s=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new O(s,s);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,u){var d=s[0]instanceof ue,p=s.length,g,T;if(d){for(T=[],g=0;g<p;g++)T[g]=this._map.latLngToLayerPoint(s[g]),u.extend(T[g]);a.push(T)}else for(g=0;g<p;g++)this._projectLatlngs(s[g],a,u)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,u,d,p,g,T,P,N;for(u=0,p=0,g=this._rings.length;u<g;u++)for(N=this._rings[u],d=0,T=N.length;d<T-1;d++)P=pg(N[d],N[d+1],s,d,!0),P&&(a[p]=a[p]||[],a[p].push(P[0]),(P[1]!==N[d+1]||d===T-2)&&(a[p].push(P[1]),p++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,u=0,d=s.length;u<d;u++)s[u]=hg(s[u],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var u,d,p,g,T,P,N=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(u=0,g=this._parts.length;u<g;u++)for(P=this._parts[u],d=0,T=P.length,p=T-1;d<T;p=d++)if(!(!a&&d===0)&&dg(s,P[p],P[d])<=N)return!0;return!1}});function nP(s,a){return new Gn(s,a)}Gn._flat=mg;var es=Gn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cg(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Gn.prototype._convertLatLngs.call(this,s),u=a.length;return u>=2&&a[0]instanceof ue&&a[0].equals(a[u-1])&&a.pop(),a},_setLatLngs:function(s){Gn.prototype._setLatLngs.call(this,s),Yt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Yt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,u=new O(a,a);if(s=new J(s.min.subtract(u),s.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,p=this._rings.length,g;d<p;d++)g=ug(this._rings[d],s,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,u,d,p,g,T,P,N,M;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,N=this._parts.length;g<N;g++)for(u=this._parts[g],T=0,M=u.length,P=M-1;T<M;P=T++)d=u[T],p=u[P],d.y>s.y!=p.y>s.y&&s.x<(p.x-d.x)*(s.y-d.y)/(p.y-d.y)+d.x&&(a=!a);return a||Gn.prototype._containsPoint.call(this,s,!0)}});function iP(s,a){return new es(s,a)}var qn=Zn.extend({initialize:function(s,a){I(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=C(s)?s:s.features,u,d,p;if(a){for(u=0,d=a.length;u<d;u++)p=a[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var g=this.options;if(g.filter&&!g.filter(s))return this;var T=yl(s,g);return T?(T.feature=Sl(s),T.defaultOptions=T.options,this.resetStyle(T),g.onEachFeature&&g.onEachFeature(s,T),this.addLayer(T)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function yl(s,a){var u=s.type==="Feature"?s.geometry:s,d=u?u.coordinates:null,p=[],g=a&&a.pointToLayer,T=a&&a.coordsToLatLng||Wh,P,N,M,Z;if(!d&&!u)return null;switch(u.type){case"Point":return P=T(d),yg(g,s,P,a);case"MultiPoint":for(M=0,Z=d.length;M<Z;M++)P=T(d[M]),p.push(yg(g,s,P,a));return new Zn(p);case"LineString":case"MultiLineString":return N=wl(d,u.type==="LineString"?0:1,T),new Gn(N,a);case"Polygon":case"MultiPolygon":return N=wl(d,u.type==="Polygon"?1:2,T),new es(N,a);case"GeometryCollection":for(M=0,Z=u.geometries.length;M<Z;M++){var X=yl({geometry:u.geometries[M],type:"Feature",properties:s.properties},a);X&&p.push(X)}return new Zn(p);case"FeatureCollection":for(M=0,Z=u.features.length;M<Z;M++){var se=yl(u.features[M],a);se&&p.push(se)}return new Zn(p);default:throw new Error("Invalid GeoJSON object.")}}function yg(s,a,u,d){return s?s(a,u):new gl(u,d&&d.markersInheritOptions&&d)}function Wh(s){return new ue(s[1],s[0],s[2])}function wl(s,a,u){for(var d=[],p=0,g=s.length,T;p<g;p++)T=a?wl(s[p],a-1,u):(u||Wh)(s[p]),d.push(T);return d}function Hh(s,a){return s=ne(s),s.alt!==void 0?[v(s.lng,a),v(s.lat,a),v(s.alt,a)]:[v(s.lng,a),v(s.lat,a)]}function El(s,a,u,d){for(var p=[],g=0,T=s.length;g<T;g++)p.push(a?El(s[g],Yt(s[g])?0:a-1,u,d):Hh(s[g],d));return!a&&u&&p.length>0&&p.push(p[0].slice()),p}function ts(s,a){return s.feature?r({},s.feature,{geometry:a}):Sl(a)}function Sl(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var $h={toGeoJSON:function(s){return ts(this,{type:"Point",coordinates:Hh(this.getLatLng(),s)})}};gl.include($h),jh.include($h),vl.include($h),Gn.include({toGeoJSON:function(s){var a=!Yt(this._latlngs),u=El(this._latlngs,a?1:0,!1,s);return ts(this,{type:(a?"Multi":"")+"LineString",coordinates:u})}}),es.include({toGeoJSON:function(s){var a=!Yt(this._latlngs),u=a&&!Yt(this._latlngs[0]),d=El(this._latlngs,u?2:a?1:0,!0,s);return a||(d=[d]),ts(this,{type:(u?"Multi":"")+"Polygon",coordinates:d})}}),Jr.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(u){a.push(u.toGeoJSON(s).geometry.coordinates)}),ts(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var u=a==="GeometryCollection",d=[];return this.eachLayer(function(p){if(p.toGeoJSON){var g=p.toGeoJSON(s);if(u)d.push(g.geometry);else{var T=Sl(g);T.type==="FeatureCollection"?d.push.apply(d,T.features):d.push(T)}}}),u?ts(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function wg(s,a){return new qn(s,a)}var rP=wg,Tl=hn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,u){this._url=s,this._bounds=we(a),I(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Yr(this._image),this},bringToBack:function(){return this._map&&Qr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=we(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:ve("img");if(re(a,"leaflet-image-layer"),this._zoomAnimated&&re(a,"leaflet-zoom-animated"),this.options.className&&re(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;sr(this._image,u,a)},_reset:function(){var s=this._image,a=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=a.getSize();qe(s,a.min),s.style.width=u.x+"px",s.style.height=u.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),sP=function(s,a,u){return new Tl(s,a,u)},Eg=Tl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:ve("video");if(re(a,"leaflet-image-layer"),this._zoomAnimated&&re(a,"leaflet-zoom-animated"),this.options.className&&re(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onloadeddata=l(this.fire,this,"load"),s){for(var u=a.getElementsByTagName("source"),d=[],p=0;p<u.length;p++)d.push(u[p].src);this._url=u.length>0?d:[a.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var T=ve("source");T.src=this._url[g],a.appendChild(T)}}});function oP(s,a,u){return new Eg(s,a,u)}var Sg=Tl.extend({_initImage:function(){var s=this._image=this._url;re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=_,s.onmousemove=_}});function aP(s,a,u){return new Sg(s,a,u)}var Rn=hn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof ue||C(s))?(this._latlng=ne(s),I(this,a)):(I(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(Ae,void 0,this._container),200)):Ae(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ne(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yr(this._container),this},bringToBack:function(){return this._map&&Qr(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof Zn){a=null;var u=this._source._layers;for(var d in u)if(u[d]._map){a=u[d];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=F(this.options.offset),u=this._getAnchor();this._zoomAnimated?qe(this._container,s.add(u)):a=a.add(s).add(u);var d=this._containerBottom=-a.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});pe.include({_initOverlay:function(s,a,u,d){var p=a;return p instanceof s||(p=new s(d).setContent(a)),u&&p.setLatLng(u),p}}),hn.include({_initOverlay:function(s,a,u,d){var p=u;return p instanceof s?(I(p,d),p._source=this):(p=a&&!d?a:new s(d,this),p.setContent(u)),p}});var Cl=Rn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Rn.prototype.openOn.call(this,s)},onAdd:function(s){Rn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gi||this._source.on("preclick",ar))},onRemove:function(s){Rn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gi||this._source.off("preclick",ar))},getEvents:function(){var s=Rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=ve("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=ve("div",s+"-content-wrapper",a);if(this._contentNode=ve("div",s+"-content",u),yo(a),Oh(this._contentNode),ie(a,"contextmenu",ar),this._tipContainer=ve("div",s+"-tip-container",a),this._tip=ve("div",s+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=ve("a",s+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',ie(d,"click",function(p){ct(p),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var u=s.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),a.width=u+1+"px",a.whiteSpace="",a.height="";var d=s.offsetHeight,p=this.options.maxHeight,g="leaflet-popup-scrolled";p&&d>p?(a.height=p+"px",re(s,g)):Ze(s,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),u=this._getAnchor();qe(this._container,a.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(mo(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+a,d=this._containerWidth,p=new O(this._containerLeft,-u-this._containerBottom);p._add(or(this._container));var g=s.layerPointToContainerPoint(p),T=F(this.options.autoPanPadding),P=F(this.options.autoPanPaddingTopLeft||T),N=F(this.options.autoPanPaddingBottomRight||T),M=s.getSize(),Z=0,X=0;g.x+d+N.x>M.x&&(Z=g.x+d-M.x+N.x),g.x-Z-P.x<0&&(Z=g.x-P.x),g.y+u+N.y>M.y&&(X=g.y+u-M.y+N.y),g.y-X-P.y<0&&(X=g.y-P.y),(Z||X)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Z,X]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lP=function(s,a){return new Cl(s,a)};pe.mergeOptions({closePopupOnClick:!0}),pe.include({openPopup:function(s,a,u){return this._initOverlay(Cl,s,a,u).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),hn.include({bindPopup:function(s,a){return this._popup=this._initOverlay(Cl,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Zn||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){lr(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof gi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Il=Rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Rn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Rn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Rn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ve("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,u,d=this._map,p=this._container,g=d.latLngToContainerPoint(d.getCenter()),T=d.layerPointToContainerPoint(s),P=this.options.direction,N=p.offsetWidth,M=p.offsetHeight,Z=F(this.options.offset),X=this._getAnchor();P==="top"?(a=N/2,u=M):P==="bottom"?(a=N/2,u=0):P==="center"?(a=N/2,u=M/2):P==="right"?(a=0,u=M/2):P==="left"?(a=N,u=M/2):T.x<g.x?(P="right",a=0,u=M/2):(P="left",a=N+(Z.x+X.x)*2,u=M/2),s=s.subtract(F(a,u,!0)).add(Z).add(X),Ze(p,"leaflet-tooltip-right"),Ze(p,"leaflet-tooltip-left"),Ze(p,"leaflet-tooltip-top"),Ze(p,"leaflet-tooltip-bottom"),re(p,"leaflet-tooltip-"+P),qe(p,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Kt(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),uP=function(s,a){return new Il(s,a)};pe.include({openTooltip:function(s,a,u){return this._initOverlay(Il,s,a,u).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),hn.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Il,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[a](u),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Zn||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(ie(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ie(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,u,d;this._tooltip.options.sticky&&s.originalEvent&&(u=this._map.mouseEventToContainerPoint(s.originalEvent),d=this._map.containerPointToLayerPoint(u),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var Tg=Xr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),u=this.options;if(u.html instanceof Element?(hl(a),a.appendChild(u.html)):a.innerHTML=u.html!==!1?u.html:"",u.bgPos){var d=F(u.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function cP(s){return new Tg(s)}Xr.Default=So;var To=hn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ae(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Qr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof O?s:new O(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,u=-s(-1/0,1/0),d=0,p=a.length,g;d<p;d++)g=a[d].style.zIndex,a[d]!==this._container&&g&&(u=s(u,+g));isFinite(u)&&(this.options.zIndex=u+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){Kt(this._container,this.options.opacity);var s=+new Date,a=!1,u=!1;for(var d in this._tiles){var p=this._tiles[d];if(!(!p.current||!p.loaded)){var g=Math.min(1,(s-p.loaded)/200);Kt(p.el,g),g<1?a=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),a&&(le(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=ve("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===s?(this._levels[u].el.style.zIndex=a-Math.abs(s-u),this._onUpdateLevel(u)):(Ae(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var d=this._levels[s],p=this._map;return d||(d=this._levels[s]={},d.el=ve("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=p.project(p.unproject(p.getPixelOrigin()),s).round(),d.zoom=s,this._setZoomTransform(d,p.getCenter(),p.getZoom()),_(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var s,a,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ae(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,u,d){var p=Math.floor(s/2),g=Math.floor(a/2),T=u-1,P=new O(+p,+g);P.z=+T;var N=this._tileCoordsToKey(P),M=this._tiles[N];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),T>d?this._retainParent(p,g,T,d):!1)},_retainChildren:function(s,a,u,d){for(var p=2*s;p<2*s+2;p++)for(var g=2*a;g<2*a+2;g++){var T=new O(p,g);T.z=u+1;var P=this._tileCoordsToKey(T),N=this._tiles[P];if(N&&N.active){N.retain=!0;continue}else N&&N.loaded&&(N.retain=!0);u+1<d&&this._retainChildren(p,g,u+1,d)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,u,d){var p=Math.round(a);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var g=this.options.updateWhenZooming&&p!==this._tileZoom;(!d||g)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(s),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var u in this._levels)this._setZoomTransform(this._levels[u],s,a)},_setZoomTransform:function(s,a,u){var d=this._map.getZoomScale(u,s.zoom),p=s.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,u)).round();Y.any3d?sr(s.el,p,d):qe(s.el,p)},_resetGrid:function(){var s=this._map,a=s.options.crs,u=this._tileSize=this.getTileSize(),d=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],d).x/u.x),Math.ceil(s.project([0,a.wrapLng[1]],d).x/u.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],d).y/u.x),Math.ceil(s.project([a.wrapLat[1],0],d).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,u=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(u,this._tileZoom),p=a.project(s,this._tileZoom).floor(),g=a.getSize().divideBy(d*2);return new J(p.subtract(g),p.add(g))},_update:function(s){var a=this._map;if(a){var u=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(s),p=this._pxBoundsToTileRange(d),g=p.getCenter(),T=[],P=this.options.keepBuffer,N=new J(p.getBottomLeft().subtract([P,-P]),p.getTopRight().add([P,-P]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var Z=this._tiles[M].coords;(Z.z!==this._tileZoom||!N.contains(new O(Z.x,Z.y)))&&(this._tiles[M].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(s,u);return}for(var X=p.min.y;X<=p.max.y;X++)for(var se=p.min.x;se<=p.max.x;se++){var Tt=new O(se,X);if(Tt.z=this._tileZoom,!!this._isValidTile(Tt)){var st=this._tiles[this._tileCoordsToKey(Tt)];st?st.current=!0:T.push(Tt)}}if(T.sort(function(Lt,is){return Lt.distanceTo(g)-is.distanceTo(g)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qt=document.createDocumentFragment();for(se=0;se<T.length;se++)this._addTile(T[se],Qt);this._level.el.appendChild(Qt)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var u=this._globalTileRange;if(!a.wrapLng&&(s.x<u.min.x||s.x>u.max.x)||!a.wrapLat&&(s.y<u.min.y||s.y>u.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(s);return we(this.options.bounds).overlaps(d)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,u=this.getTileSize(),d=s.scaleBy(u),p=d.add(u),g=a.unproject(d,s.z),T=a.unproject(p,s.z);return[g,T]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),u=new Ve(a[0],a[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),u=new O(+a[0],+a[1]);return u.z=+a[2],u},_removeTile:function(s){var a=this._tiles[s];a&&(Ae(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){re(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=_,s.onmousemove=_,Y.ielt9&&this.options.opacity<1&&Kt(s,this.options.opacity)},_addTile:function(s,a){var u=this._getTilePos(s),d=this._tileCoordsToKey(s),p=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(p),this.createTile.length<2&&V(l(this._tileReady,this,s,null,p)),qe(p,u),this._tiles[d]={el:p,coords:s,current:!0},a.appendChild(p),this.fire("tileloadstart",{tile:p,coords:s})},_tileReady:function(s,a,u){a&&this.fire("tileerror",{error:a,tile:u,coords:s});var d=this._tileCoordsToKey(s);u=this._tiles[d],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Kt(u.el,0),le(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),a||(re(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new O(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new J(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function hP(s){return new To(s)}var ns=To.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=I(this,a),a.detectRetina&&Y.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var u=document.createElement("img");return ie(u,"load",l(this._tileOnLoad,this,a,u)),ie(u,"error",l(this._tileOnError,this,a,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(s),u},getTileUrl:function(s){var a={r:Y.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=u),a["-y"]=u}return y(this._url,r(a,this.options))},_tileOnLoad:function(s,a){Y.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,u){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),s(u,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,u=this.options.zoomReverse,d=this.options.zoomOffset;return u&&(s=a-s),s+d},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=_,a.onerror=_,!a.complete)){a.src=D;var u=this._tiles[s].coords;Ae(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:u})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",D),To.prototype._removeTile.call(this,s)},_tileReady:function(s,a,u){if(!(!this._map||u&&u.getAttribute("src")===D))return To.prototype._tileReady.call(this,s,a,u)}});function Cg(s,a){return new ns(s,a)}var Ig=ns.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var u=r({},this.defaultWmsParams);for(var d in a)d in this.options||(u[d]=a[d]);a=I(this,a);var p=a.detectRetina&&Y.retina?2:1,g=this.getTileSize();u.width=g.x*p,u.height=g.y*p,this.wmsParams=u},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,ns.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),u=this._crs,d=fe(u.project(a[0]),u.project(a[1])),p=d.min,g=d.max,T=(this._wmsVersion>=1.3&&this._crs===gg?[p.y,p.x,g.y,g.x]:[p.x,p.y,g.x,g.y]).join(","),P=ns.prototype.getTileUrl.call(this,s);return P+R(this.wmsParams,P,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function dP(s,a){return new Ig(s,a)}ns.WMS=Ig,Cg.wms=dP;var Kn=hn.extend({options:{padding:.1},initialize:function(s){I(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var u=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,a),g=d.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(s,a));Y.any3d?sr(this._container,g,u):qe(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),u=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new J(u,u.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xg=Kn.extend({options:{tolerance:0},getEvents:function(){var s=Kn.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ie(s,"mousemove",this._onMouseMove,this),ie(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ie(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){le(this._redrawRequest),delete this._ctx,Ae(this._container),Ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var s=this._bounds,a=this._container,u=s.getSize(),d=Y.retina?2:1;qe(a,s.min),a.width=d*u.x,a.height=d*u.y,a.style.width=u.x+"px",a.style.height=u.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Kn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,u=a.next,d=a.prev;u?u.prev=d:this._drawLast=d,d?d.next=u:this._drawFirst=u,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),u=[],d,p;for(p=0;p<a.length;p++){if(d=Number(a[p]),isNaN(d))return;u.push(d)}s.options._dashArray=u}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var u=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)s=d.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var u,d,p,g,T=s._parts,P=T.length,N=this._ctx;if(P){for(N.beginPath(),u=0;u<P;u++){for(d=0,p=T[u].length;d<p;d++)g=T[u][d],N[d?"lineTo":"moveTo"](g.x,g.y);a&&N.closePath()}this._fillStroke(N,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,u=this._ctx,d=Math.max(Math.round(s._radius),1),p=(Math.max(Math.round(s._radiusY),1)||d)/d;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(a.x,a.y/p,d,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,s)}},_fillStroke:function(s,a){var u=a.options;u.fill&&(s.globalAlpha=u.fillOpacity,s.fillStyle=u.fillColor||u.color,s.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=u.opacity,s.lineWidth=u.weight,s.strokeStyle=u.color,s.lineCap=u.lineCap,s.lineJoin=u.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(u))&&(d=u);this._fireEvent(d?[d]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(d=u);d!==this._hoveredLayer&&(this._handleMouseOut(s),d&&(re(this._container,"leaflet-interactive"),this._fireEvent([d],s,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,u){this._map._fireDOMEvent(a,u||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var u=a.next,d=a.prev;if(u)u.prev=d;else return;d?d.next=u:u&&(this._drawFirst=u),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var u=a.next,d=a.prev;if(d)d.next=u;else return;u?u.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function Pg(s){return Y.canvas?new xg(s):null}var Co=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),fP={_initContainer:function(){this._container=ve("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kn.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Co("shape");re(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Co("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Ae(a),s.removeInteractiveTarget(a),delete this._layers[h(s)]},_updateStyle:function(s){var a=s._stroke,u=s._fill,d=s.options,p=s._container;p.stroked=!!d.stroke,p.filled=!!d.fill,d.stroke?(a||(a=s._stroke=Co("stroke")),p.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=C(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(p.removeChild(a),s._stroke=null),d.fill?(u||(u=s._fill=Co("fill")),p.appendChild(u),u.color=d.fillColor||d.color,u.opacity=d.fillOpacity):u&&(p.removeChild(u),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),u=Math.round(s._radius),d=Math.round(s._radiusY||u);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+u+","+d+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){Yr(s._container)},_bringToBack:function(s){Qr(s._container)}},xl=Y.vml?Co:mi,Io=Kn.extend({_initContainer:function(){this._container=xl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ae(this._container),Ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var s=this._bounds,a=s.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,u.setAttribute("width",a.x),u.setAttribute("height",a.y)),qe(u,s.min),u.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=xl("path");s.options.className&&re(a,s.options.className),s.options.interactive&&re(a,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ae(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,u=s.options;a&&(u.stroke?(a.setAttribute("stroke",u.color),a.setAttribute("stroke-opacity",u.opacity),a.setAttribute("stroke-width",u.weight),a.setAttribute("stroke-linecap",u.lineCap),a.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?a.setAttribute("stroke-dasharray",u.dashArray):a.removeAttribute("stroke-dasharray"),u.dashOffset?a.setAttribute("stroke-dashoffset",u.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),u.fill?(a.setAttribute("fill",u.fillColor||u.color),a.setAttribute("fill-opacity",u.fillOpacity),a.setAttribute("fill-rule",u.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,ll(s._parts,a))},_updateCircle:function(s){var a=s._point,u=Math.max(Math.round(s._radius),1),d=Math.max(Math.round(s._radiusY),1)||u,p="a"+u+","+d+" 0 1,0 ",g=s._empty()?"M0 0":"M"+(a.x-u)+","+a.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(s,g)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){Yr(s._path)},_bringToBack:function(s){Qr(s._path)}});Y.vml&&Io.include(fP);function kg(s){return Y.svg||Y.vml?new Io(s):null}pe.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&Pg(s)||kg(s)}});var bg=es.extend({initialize:function(s,a){es.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=we(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function pP(s,a){return new bg(s,a)}Io.create=xl,Io.pointsToPath=ll,qn.geometryToLayer=yl,qn.coordsToLatLng=Wh,qn.coordsToLatLngs=wl,qn.latLngToCoords=Hh,qn.latLngsToCoords=El,qn.getFeature=ts,qn.asFeature=Sl,pe.mergeOptions({boxZoom:!0});var Rg=bn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),_o(),Ih(),this._startPoint=this._map.mouseEventToContainerPoint(s),ie(document,{contextmenu:lr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=ve("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new J(this._point,this._startPoint),u=a.getSize();qe(this._box,a.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Ae(this._box),Ze(this._container,"leaflet-crosshair")),go(),xh(),Ie(document,{contextmenu:lr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});pe.addInitHook("addHandler","boxZoom",Rg),pe.mergeOptions({doubleClickZoom:!0});var Lg=bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,u=a.getZoom(),d=a.options.zoomDelta,p=s.originalEvent.shiftKey?u-d:u+d;a.options.doubleClickZoom==="center"?a.setZoom(p):a.setZoomAround(s.containerPoint,p)}});pe.addInitHook("addHandler","doubleClickZoom",Lg),pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ng=bn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new _i(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=we(this._map.options.maxBounds);this._offsetLimit=fe(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),u=this._initialWorldOffset,d=this._draggable._newPos.x,p=(d-a+u)%s+a-u,g=(d+a+u)%s-a-u,T=Math.abs(p+u)<Math.abs(g+u)?p:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(s){var a=this._map,u=a.options,d=!u.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),d)a.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,T=u.easeLinearity,P=p.multiplyBy(T/g),N=P.distanceTo([0,0]),M=Math.min(u.inertiaMaxSpeed,N),Z=P.multiplyBy(M/N),X=M/(u.inertiaDeceleration*T),se=Z.multiplyBy(-X/2).round();!se.x&&!se.y?a.fire("moveend"):(se=a._limitOffset(se,a.options.maxBounds),V(function(){a.panBy(se,{duration:X,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});pe.addInitHook("addHandler","dragging",Ng),pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Og=bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ie(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,u=s.scrollTop||a.scrollTop,d=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},u=this.keyCodes,d,p;for(d=0,p=u.left.length;d<p;d++)a[u.left[d]]=[-1*s,0];for(d=0,p=u.right.length;d<p;d++)a[u.right[d]]=[s,0];for(d=0,p=u.down.length;d<p;d++)a[u.down[d]]=[0,s];for(d=0,p=u.up.length;d<p;d++)a[u.up[d]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},u=this.keyCodes,d,p;for(d=0,p=u.zoomIn.length;d<p;d++)a[u.zoomIn[d]]=s;for(d=0,p=u.zoomOut.length;d<p;d++)a[u.zoomOut[d]]=-s},_addHooks:function(){ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,u=this._map,d;if(a in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(d=this._panKeys[a],s.shiftKey&&(d=F(d).multiplyBy(3)),u.options.maxBounds&&(d=u._limitOffset(F(d),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(d)));u.panTo(p)}else u.panBy(d)}else if(a in this._zoomKeys)u.setZoom(u.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;lr(s)}}});pe.addInitHook("addHandler","keyboard",Og),pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ag=bn.extend({addHooks:function(){ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=rg(s),u=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var d=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),d),lr(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),u=this._map.options.zoomSnap||0;s._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,g=u?Math.ceil(p/u)*u:p,T=s._limitZoom(a+(this._delta>0?g:-g))-a;this._delta=0,this._startTime=null,T&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+T):s.setZoomAround(this._lastMousePos,a+T))}});pe.addInitHook("addHandler","scrollWheelZoom",Ag);var mP=600;pe.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var Mg=bn.extend({addHooks:function(){ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new O(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ie(document,"touchend",ct),ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),mP),ie(document,"touchend touchcancel contextmenu",this._cancel,this),ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ie(document,"touchend",ct),Ie(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new O(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var u=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});u._simulated=!0,a.target.dispatchEvent(u)}});pe.addInitHook("addHandler","tapHold",Mg),pe.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var Dg=bn.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var u=a.mouseEventToContainerPoint(s.touches[0]),d=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(u.add(d)._divideBy(2))),this._startDist=u.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ie(document,"touchmove",this._onTouchMove,this),ie(document,"touchend touchcancel",this._onTouchEnd,this),ct(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,u=a.mouseEventToContainerPoint(s.touches[0]),d=a.mouseEventToContainerPoint(s.touches[1]),p=u.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(p,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&p<1||this._zoom>a.getMaxZoom()&&p>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var g=u._add(d)._divideBy(2)._subtract(this._centerPoint);if(p===1&&g.x===0&&g.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),le(this._animRequest);var T=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(T,this,!0),ct(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,le(this._animRequest),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});pe.addInitHook("addHandler","touchZoom",Dg),pe.BoxZoom=Rg,pe.DoubleClickZoom=Lg,pe.Drag=Ng,pe.Keyboard=Og,pe.ScrollWheelZoom=Ag,pe.TapHold=Mg,pe.TouchZoom=Dg,n.Bounds=J,n.Browser=Y,n.CRS=Xe,n.Canvas=xg,n.Circle=jh,n.CircleMarker=vl,n.Class=Ce,n.Control=cn,n.DivIcon=Tg,n.DivOverlay=Rn,n.DomEvent=Ox,n.DomUtil=Lx,n.Draggable=_i,n.Evented=$e,n.FeatureGroup=Zn,n.GeoJSON=qn,n.GridLayer=To,n.Handler=bn,n.Icon=Xr,n.ImageOverlay=Tl,n.LatLng=ue,n.LatLngBounds=Ve,n.Layer=hn,n.LayerGroup=Jr,n.LineUtil=Zx,n.Map=pe,n.Marker=gl,n.Mixin=Bx,n.Path=gi,n.Point=O,n.PolyUtil=jx,n.Polygon=es,n.Polyline=Gn,n.Popup=Cl,n.PosAnimation=sg,n.Projection=Gx,n.Rectangle=bg,n.Renderer=Kn,n.SVG=Io,n.SVGOverlay=Sg,n.TileLayer=ns,n.Tooltip=Il,n.Transformation=he,n.Util=Le,n.VideoOverlay=Eg,n.bind=l,n.bounds=fe,n.canvas=Pg,n.circle=tP,n.circleMarker=eP,n.control=wo,n.divIcon=cP,n.extend=r,n.featureGroup=Qx,n.geoJSON=wg,n.geoJson=rP,n.gridLayer=hP,n.icon=Jx,n.imageOverlay=sP,n.latLng=ne,n.latLngBounds=we,n.layerGroup=Yx,n.map=Ax,n.marker=Xx,n.point=F,n.polygon=iP,n.polyline=nP,n.popup=lP,n.rectangle=pP,n.setOptions=I,n.stamp=h,n.svg=kg,n.svgOverlay=aP,n.tileLayer=Cg,n.tooltip=uP,n.transformation=K,n.version=i,n.videoOverlay=oP;var _P=window.L;n.noConflict=function(){return window.L=_P,this},window.L=n})})(vp,vp.exports);var ft=vp.exports;const qU=jw(ft),x_=Bw({__proto__:null,default:qU},[ft]);function KU({markersData:t,getSpotContent:e,filteredData:n,setFilteredData:i}){const[r,o]=k.useState("");return x.jsxs("div",{className:"spotContainer",children:[x.jsx("strong",{id:"text1",children:"View Skate Spots!"}),x.jsx(GU,{markersData:t,setFilteredData:i,searchInput:r,setSearchInput:o}),x.jsx("div",{className:"blocker",children:n.length>0?x.jsx(x.Fragment,{children:n.map((l,c)=>x.jsx("a",{href:"#",children:x.jsxs("div",{id:c,className:"element-container",onClick:e,children:[x.jsx("img",{src:l.uploadedImgURLs[0],className:"image"}),x.jsxs("div",{className:"overlay",children:[x.jsx("div",{className:"element-text",children:n[c].spotName}),x.jsx("div",{className:"element-textAddress",children:n[c].spotAddress})]})]})}))}):x.jsxs("div",{style:{textAlign:"center"},children:[x.jsx("strong",{style:{position:"relative",fontSize:"20px"},children:"No spots found!"}),x.jsx("br",{}),x.jsx("strong",{children:":(("})]})})]})}var fI=function(){if(typeof Map<"u")return Map;function t(e,n){var i=-1;return e.some(function(r,o){return r[0]===n?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var i=t(this.__entries__,n),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(n,i){var r=t(this.__entries__,n);~r?this.__entries__[r][1]=i:this.__entries__.push([n,i])},e.prototype.delete=function(n){var i=this.__entries__,r=t(i,n);~r&&i.splice(r,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var r=0,o=this.__entries__;r<o.length;r++){var l=o[r];n.call(i,l[1],l[0])}},e}()}(),yp=typeof window<"u"&&typeof document<"u"&&window.document===document,fc=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),YU=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(fc):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),QU=2;function JU(t,e){var n=!1,i=!1,r=0;function o(){n&&(n=!1,t()),i&&c()}function l(){YU(o)}function c(){var h=Date.now();if(n){if(h-r<QU)return;i=!0}else n=!0,i=!1,setTimeout(l,e);r=h}return c}var XU=20,ez=["top","right","bottom","left","width","height","size","weight"],tz=typeof MutationObserver<"u",nz=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=JU(this.refresh.bind(this),XU)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,i=n.indexOf(e);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!yp||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),tz?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!yp||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,i=n===void 0?"":n,r=ez.some(function(o){return!!~i.indexOf(o)});r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),pI=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},Qs=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||fc},mI=uh(0,0,0,0);function pc(t){return parseFloat(t)||0}function Iw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(i,r){var o=t["border-"+r+"-width"];return i+pc(o)},0)}function iz(t){for(var e=["top","right","bottom","left"],n={},i=0,r=e;i<r.length;i++){var o=r[i],l=t["padding-"+o];n[o]=pc(l)}return n}function rz(t){var e=t.getBBox();return uh(0,0,e.width,e.height)}function sz(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return mI;var i=Qs(t).getComputedStyle(t),r=iz(i),o=r.left+r.right,l=r.top+r.bottom,c=pc(i.width),h=pc(i.height);if(i.boxSizing==="border-box"&&(Math.round(c+o)!==e&&(c-=Iw(i,"left","right")+o),Math.round(h+l)!==n&&(h-=Iw(i,"top","bottom")+l)),!az(t)){var f=Math.round(c+o)-e,m=Math.round(h+l)-n;Math.abs(f)!==1&&(c-=f),Math.abs(m)!==1&&(h-=m)}return uh(r.left,r.top,c,h)}var oz=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Qs(t).SVGGraphicsElement}:function(t){return t instanceof Qs(t).SVGElement&&typeof t.getBBox=="function"}}();function az(t){return t===Qs(t).document.documentElement}function lz(t){return yp?oz(t)?rz(t):sz(t):mI}function uz(t){var e=t.x,n=t.y,i=t.width,r=t.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return pI(l,{x:e,y:n,width:i,height:r,top:n,right:e+i,bottom:r+n,left:e}),l}function uh(t,e,n,i){return{x:t,y:e,width:n,height:i}}var cz=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=uh(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=lz(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),hz=function(){function t(e,n){var i=uz(n);pI(this,{target:e,contentRect:i})}return t}(),dz=function(){function t(e,n,i){if(this.activeObservations_=[],this.observations_=new fI,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Qs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new cz(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Qs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new hz(i.target,i.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),_I=typeof WeakMap<"u"?new WeakMap:new fI,gI=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=nz.getInstance(),i=new dz(e,n,this);_I.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){gI.prototype[t]=function(){var e;return(e=_I.get(this))[t].apply(e,arguments)}});var vI=function(){return typeof fc.ResizeObserver<"u"?fc.ResizeObserver:gI}(),mn={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-mn.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?mn.Bounce.In(t*2)*.5:mn.Bounce.Out(t*2-1)*.5+.5}}},Go;typeof self>"u"&&typeof process<"u"&&process.hrtime?Go=function(){var t=process.hrtime();return t[0]*1e3+t[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?Go=self.performance.now.bind(self.performance):Date.now!==void 0?Go=Date.now:Go=function(){return new Date().getTime()};var as=Go,P_=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},t.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},t.prototype.update=function(e,n){e===void 0&&(e=as()),n===void 0&&(n=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var o=this._tweens[i[r]],l=!n;o&&o.update(e,l)===!1&&!n&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),qo={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=qo.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=qo.Utils.Bernstein,l=0;l<=i;l++)n+=r(1-e,i-l)*r(e,l)*t[l]*o(i,l);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=qo.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=qo.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=(n-t)*.5,l=(i-e)*.5,c=r*r,h=r*c;return(2*e-2*n+o+l)*h+(-3*e+3*n-2*o-l)*c+o*r+e}}},fz=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),yI=new P_,wI=function(){function t(e,n){n===void 0&&(n=yI),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=mn.Linear.None,this._interpolationFunction=qo.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=fz.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(e,n){return this._valuesEnd=Object.create(e),n!==void 0&&(this._duration=n),this},t.prototype.duration=function(e){return this._duration=e,this},t.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e!==void 0?typeof e=="string"?as()+parseFloat(e):e:as(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(e,n,i,r){for(var o in i){var l=e[o],c=Array.isArray(l),h=c?"array":typeof l,f=!c&&Array.isArray(i[o]);if(!(h==="undefined"||h==="function")){if(f){var m=i[o];if(m.length===0)continue;m=m.map(this._handleRelativeValue.bind(this,l)),i[o]=[l].concat(m)}if((h==="object"||c)&&l&&!f){n[o]=c?[]:{};for(var _ in l)n[o][_]=l[_];r[o]=c?[]:{},this._setupProperties(l,n[o],i[o],r[o])}else typeof n[o]>"u"&&(n[o]=l),c||(n[o]*=1),f?r[o]=i[o].slice().reverse():r[o]=n[o]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(e){return e===void 0&&(e=as()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},t.prototype.resume=function(e){return e===void 0&&(e=as()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},t.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return this._group=e,this},t.prototype.delay=function(e){return this._delayTime=e,this},t.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return this._yoyo=e,this},t.prototype.easing=function(e){return this._easingFunction=e,this},t.prototype.interpolation=function(e){return this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,n){if(e===void 0&&(e=as()),n===void 0&&(n=!0),this._isPaused)return!0;var i,r,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;n&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=this._duration===0||r>1?1:r;var l=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,l),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),r===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var c=0,h=this._chainedTweens.length;c<h;c++)this._chainedTweens[c].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,n,i,r){for(var o in i)if(n[o]!==void 0){var l=n[o]||0,c=i[o],h=Array.isArray(e[o]),f=Array.isArray(c),m=!h&&f;m?e[o]=this._interpolationFunction(c,r):typeof c=="object"&&c?this._updateProperties(e[o],l,c,r):(c=this._handleRelativeValue(l,c),typeof c=="number"&&(e[o]=l+(c-l)*r))}},t.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},t.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},t}(),jn=yI;jn.getAll.bind(jn);jn.removeAll.bind(jn);jn.add.bind(jn);jn.remove.bind(jn);jn.update.bind(jn);function Wa(){return Wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wa.apply(this,arguments)}var EI=function(e,n){return n&&n<te.Children.count(e)?n:0},pz=function(e,n){if(typeof window<"u"&&Array.isArray(n))return n.find(function(i){return i.breakpoint<=e})},xw={linear:mn.Linear.None,ease:mn.Quadratic.InOut,"ease-in":mn.Quadratic.In,"ease-out":mn.Quadratic.Out,cubic:mn.Cubic.InOut,"cubic-in":mn.Cubic.In,"cubic-out":mn.Cubic.Out},SI=function(e){return e?xw[e]:xw.linear},TI=function(e,n,i){var r=e.prevArrow,o=e.infinite,l=n<=0&&!o,c={"data-type":"prev","aria-label":"Previous Slide",disabled:l,onClick:i};if(r)return te.cloneElement(r,Wa({className:(r.props.className||"")+" nav "+(l?"disabled":"")},c));var h="nav default-nav "+(l?"disabled":"");return te.createElement("button",Object.assign({type:"button",className:h},c),te.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},te.createElement("path",{d:"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"})))},CI=function(e,n,i){var r=e.nextArrow,o=e.infinite,l=e.children,c=1;"slidesToScroll"in e&&(c=e.slidesToScroll||1);var h=n>=te.Children.count(l)-c&&!o,f={"data-type":"next","aria-label":"Next Slide",disabled:h,onClick:i};if(r)return te.cloneElement(r,Wa({className:(r.props.className||"")+" nav "+(h?"disabled":"")},f));var m="nav default-nav "+(h?"disabled":"");return te.createElement("button",Object.assign({type:"button",className:m},f),te.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},te.createElement("path",{d:"M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"})))},mz=function(e,n,i){return te.createElement("li",{key:n},te.createElement("button",Object.assign({type:"button",className:"each-slideshow-indicator "+(e?"active":"")},i)))},_z=function(e,n,i,r){return te.cloneElement(r,Wa({className:r.props.className+" "+(e?"active":""),key:n},i))},II=function(e,n,i,r){var o=e.children,l=e.indicators,c=1;r?c=r==null?void 0:r.settings.slidesToScroll:"slidesToScroll"in e&&(c=e.slidesToScroll||1);var h=Math.ceil(te.Children.count(o)/c);return te.createElement("ul",{className:"indicators"},Array.from({length:h},function(f,m){var _={"data-key":m,"aria-label":"Go to slide "+(m+1),onClick:i},v=Math.floor((n+c-1)/c)===m;return typeof l=="function"?_z(v,m,_,l(m)):mz(v,m,_)}))},ch={duration:5e3,transitionDuration:1e3,defaultIndex:0,infinite:!0,autoplay:!0,indicators:!1,arrows:!0,pauseOnHover:!0,easing:"linear",canSwipe:!0,cssClass:"",responsive:[]},k_=te.forwardRef(function(t,e){var n=k.useState(EI(t.children,t.defaultIndex)),i=n[0],r=n[1],o=k.useRef(null),l=k.useRef(null),c=k.useRef(new P_),h=k.useRef(),f=k.useRef(),m=k.useMemo(function(){return te.Children.count(t.children)},[t.children]),_=k.useCallback(function(){if(l.current&&o.current){var U=o.current.clientWidth,B=U*m;l.current.style.width=B+"px";for(var $=0;$<l.current.children.length;$++){var V=l.current.children[$];V&&(V.style.width=U+"px",V.style.left=$*-U+"px",V.style.display="block")}}},[o,l,m]),v=k.useCallback(function(){o.current&&(f.current=new vI(function(U){U&&_()}),f.current.observe(o.current))},[o,_]),S=k.useCallback(function(){var U=t.autoplay,B=t.children,$=t.duration,V=t.infinite;U&&te.Children.count(B)>1&&(V||i<te.Children.count(B)-1)&&(h.current=setTimeout(E,$))},[t,i]);k.useEffect(function(){return v(),function(){c.current.removeAll(),clearTimeout(h.current),w()}},[v,c]),k.useEffect(function(){clearTimeout(h.current),S()},[i,t.autoplay,S]),k.useEffect(function(){_()},[m,_]),k.useImperativeHandle(e,function(){return{goNext:function(){E()},goBack:function(){y()},goTo:function(B,$){$!=null&&$.skipTransition?r(B):W(B)}}});var w=function(){f.current&&o.current&&f.current.unobserve(o.current)},I=function(){t.pauseOnHover&&clearTimeout(h.current)},R=function(){var B=t.pauseOnHover,$=t.autoplay,V=t.duration;B&&$&&(h.current=setTimeout(function(){return E()},V))},E=function(){var B=t.children,$=t.infinite;!$&&i===te.Children.count(B)-1||D((i+1)%te.Children.count(B))},y=function(){var B=t.children,$=t.infinite;!$&&i===0||D(i===0?te.Children.count(B)-1:i-1)},C=function(B){var $=B.currentTarget;$.dataset.type==="prev"?y():E()},b=function U(){requestAnimationFrame(U),c.current.update()},D=function(B){var $=c.current.getAll();if(!$.length){var V;(V=l.current)!=null&&V.children[B]||(B=0),clearTimeout(h.current);var le={opacity:0,scale:1};b();var Le=new wI(le,c.current).to({opacity:1,scale:t.scale},t.transitionDuration).onUpdate(function(Ce){l.current&&(l.current.children[B].style.opacity=Ce.opacity,l.current.children[i].style.opacity=1-Ce.opacity,l.current.children[i].style.transform="scale("+Ce.scale+")")});Le.easing(SI(t.easing)),Le.onStart(function(){typeof t.onStartChange=="function"&&t.onStartChange(i,B)}),Le.onComplete(function(){l.current&&(r(B),l.current.children[i].style.transform="scale(1)"),typeof t.onChange=="function"&&t.onChange(i,B)}),Le.start()}},W=function(B){B!==i&&D(B)},H=function(B){var $=B.currentTarget;$.dataset.key&&parseInt($.dataset.key)!==i&&W(parseInt($.dataset.key))};return te.createElement("div",{dir:"ltr","aria-roledescription":"carousel"},te.createElement("div",{className:"react-slideshow-container "+(t.cssClass||""),onMouseEnter:I,onMouseOver:I,onMouseLeave:R},t.arrows&&TI(t,i,C),te.createElement("div",{className:"react-slideshow-fadezoom-wrapper "+t.cssClass,ref:o},te.createElement("div",{className:"react-slideshow-fadezoom-images-wrap",ref:l},(te.Children.map(t.children,function(U){return U})||[]).map(function(U,B){return te.createElement("div",{style:{opacity:B===i?"1":"0",zIndex:B===i?"1":"0"},"data-index":B,key:B,"aria-roledescription":"slide","aria-hidden":B===i?"false":"true"},U)}))),t.arrows&&CI(t,i,C)),t.indicators&&II(t,i,H))});k_.defaultProps=ch;var gz=te.forwardRef(function(t,e){return te.createElement(k_,Object.assign({},t,{scale:1,ref:e}))});gz.defaultProps=ch;var vz=te.forwardRef(function(t,e){return te.createElement(k_,Object.assign({},t,{ref:e}))});vz.defaultProps=ch;var xI=te.forwardRef(function(t,e){var n=k.useState(EI(t.children,t.defaultIndex)),i=n[0],r=n[1],o=k.useState(0),l=o[0],c=o[1],h=k.useRef(null),f=k.useRef(null),m=k.useRef(new P_),_=k.useMemo(function(){return pz(l,t.responsive)},[l,t.responsive]),v=k.useMemo(function(){return _?_.settings.slidesToScroll:t.slidesToScroll||1},[_,t.slidesToScroll]),S=k.useMemo(function(){return _?_.settings.slidesToShow:t.slidesToShow||1},[_,t.slidesToShow]),w=k.useMemo(function(){return te.Children.count(t.children)},[t.children]),I=k.useMemo(function(){return l/S},[l,S]),R=k.useRef(),E=k.useRef(),y,C=!1,b=0,D=t.vertical?"translateY":"translateX",W=t.vertical?"clientY":"clientX",H=t.vertical?"pageY":"pageX",U=k.useCallback(function(){if(f.current){var he=l*f.current.children.length,K=t.vertical?"height":"width";f.current.style[K]=he+"px",t.vertical&&h.current&&(h.current.style[K]=l+"px");for(var _e=0;_e<f.current.children.length;_e++){var qt=f.current.children[_e];qt&&(t.vertical||(qt.style[K]=I+"px"),qt.style.display="block")}}},[l,I]),B=k.useCallback(function(){h.current&&(E.current=new vI(function(he){he&&Ve()}),E.current.observe(h.current))},[h]),$=k.useCallback(function(){var he=t.autoplay,K=t.infinite,_e=t.duration;he&&(K||i<w-1)&&(R.current=setTimeout(Ce,_e))},[t,w,i]);k.useEffect(function(){U()},[l,U]),k.useEffect(function(){return B(),function(){m.current.removeAll(),clearTimeout(R.current),V()}},[h,B,m]),k.useEffect(function(){clearTimeout(R.current),$()},[i,l,t.autoplay,$]),k.useImperativeHandle(e,function(){return{goNext:function(){Ce()},goBack:function(){Je()},goTo:function(K,_e){_e!=null&&_e.skipTransition?r(K):$e(K)}}});var V=function(){E&&h.current&&E.current.unobserve(h.current)},le=function(){t.pauseOnHover&&clearTimeout(R.current)},Le=function(K){if(t.canSwipe&&C){var _e;if(window.TouchEvent&&K.nativeEvent instanceof TouchEvent?_e=K.nativeEvent.touches[0][H]:_e=K.nativeEvent[W],_e&&y){var qt=I*(i+nr()),mi=_e-y;if(!t.infinite&&i===w-v&&mi<0||!t.infinite&&i===0&&mi>0)return;b=mi,qt-=b,f.current.style.transform=D+"(-"+qt+"px)"}}},Ce=function(){if(!(!t.infinite&&i===w-v)){var K=O(i+v);Xe(K)}},Je=function(){if(!(!t.infinite&&i===0)){var K=i-v;K%v&&(K=Math.ceil(K/v)*v),Xe(K)}},Ne=function(K){var _e=K.currentTarget;if(_e.dataset.key){var qt=parseInt(_e.dataset.key);$e(qt*v)}},$e=function(K){Xe(O(K))},O=function(K){return K<w&&K+v>w&&(w-v)%v?w-v:K},q=function(){C?ue():t.pauseOnHover&&t.autoplay&&(R.current=setTimeout(Ce,t.duration))},F=function(K){var _e=K.currentTarget.dataset;_e.type==="next"?Ce():Je()},J=function(){return te.Children.toArray(t.children).slice(-S).map(function(K,_e){return te.createElement("div",{"data-index":_e-S,"aria-roledescription":"slide","aria-hidden":"true",key:_e-S},K)})},fe=function(){if(!(!t.infinite&&S===v))return te.Children.toArray(t.children).slice(0,S).map(function(K,_e){return te.createElement("div",{"data-index":w+_e,"aria-roledescription":"slide","aria-hidden":"true",key:w+_e},K)})},Ve=function(){var K=t.vertical?"clientHeight":"clientWidth";t.vertical?f.current&&c(f.current.children[0][K]):h.current&&c(h.current[K])},we=function(K){t.canSwipe&&(window.TouchEvent&&K.nativeEvent instanceof TouchEvent?y=K.nativeEvent.touches[0][H]:y=K.nativeEvent[W],clearTimeout(R.current),C=!0)},ue=function(){t.canSwipe&&(C=!1,Math.abs(b)/l>.2?b<0?Ce():Je():Math.abs(b)>0&&Xe(i,300))},ne=function he(){requestAnimationFrame(he),m.current.update()},Xe=function(K,_e){var qt=_e||t.transitionDuration,mi=i,ll=m.current.getAll();if(h.current){var ho=t.vertical?"clientHeight":"clientWidth",ir=h.current[ho]/S;if(!ll.length){clearTimeout(R.current);var _h={margin:-ir*(mi+nr())+b},rr=new wI(_h,m.current).to({margin:-ir*(K+nr())},qt).onUpdate(function(ul){f.current&&(f.current.style.transform=D+"("+ul.margin+"px)")});rr.easing(SI(t.easing)),ne();var un=K;un<0?un=w-v:un>=w&&(un=0),rr.onStart(function(){typeof t.onStartChange=="function"&&t.onStartChange(i,un)}),rr.onComplete(function(){b=0,typeof t.onChange=="function"&&t.onChange(i,un),r(un)}),rr.start()}}},xn=function(K){return K<i+S&&K>=i},nr=function(){return t.infinite?S:0},co={transform:D+"(-"+(i+nr())*I+"px)"};return te.createElement("div",{dir:"ltr","aria-roledescription":"carousel"},te.createElement("div",{className:"react-slideshow-container",onMouseEnter:le,onMouseOver:le,onMouseLeave:q,onMouseDown:we,onMouseUp:ue,onMouseMove:Le,onTouchStart:we,onTouchEnd:ue,onTouchCancel:ue,onTouchMove:Le},t.arrows&&TI(t,i,F),te.createElement("div",{className:"react-slideshow-wrapper slide "+(t.cssClass||""),ref:h},te.createElement("div",{className:"images-wrap "+(t.vertical?"vertical":"horizontal"),style:co,ref:f},t.infinite&&J(),(te.Children.map(t.children,function(he){return he})||[]).map(function(he,K){var _e=xn(K);return te.createElement("div",{"data-index":K,key:K,className:_e?"active":"","aria-roledescription":"slide","aria-hidden":_e?"false":"true"},he)}),fe())),t.arrows&&CI(t,i,F)),!!t.indicators&&II(t,i,Ne,_))});xI.defaultProps=ch;let Yl;const yz=new Uint8Array(16);function wz(){if(!Yl&&(Yl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yl(yz)}const ht=[];for(let t=0;t<256;++t)ht.push((t+256).toString(16).slice(1));function Ez(t,e=0){return ht[t[e+0]]+ht[t[e+1]]+ht[t[e+2]]+ht[t[e+3]]+"-"+ht[t[e+4]]+ht[t[e+5]]+"-"+ht[t[e+6]]+ht[t[e+7]]+"-"+ht[t[e+8]]+ht[t[e+9]]+"-"+ht[t[e+10]]+ht[t[e+11]]+ht[t[e+12]]+ht[t[e+13]]+ht[t[e+14]]+ht[t[e+15]]}const Sz=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pw={randomUUID:Sz};function Tz(t,e,n){if(Pw.randomUUID&&!e&&!t)return Pw.randomUUID();t=t||{};const i=t.random||(t.rng||wz)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return Ez(i)}function Cz({properties:t,spotID:e,filteredData:n,spotClick:i,showMap:r,position:o}){const{authUser:l,setAuthUser:c}=nS(),[h,f]=k.useState(""),[m,_]=k.useState({}),v=k.useMemo(()=>Es(Ts,"spots/"+n[e].spotName+"/comments"),[n,e]),S=R=>{const E=R.target;E.style.height="25px",E.style.height=`${E.scrollHeight}px`,f(R.target.value)},w=()=>{if(l!==null){const R=new Date,E=R.getFullYear(),y=R.getMonth()+1,C=R.getDate(),b=R.getHours(),D=R.getMinutes(),W=`${E}-${y<10?"0":""}${y}-${C<10?"0":""}${C} ${b<10?"0":""}${b}:${D<10?"0":""}${D}`;h.length>1&&cp(v,{[m.length+1]:{content:h,date:W,likes:{0:""},author:l.displayName}}).then(()=>{f(""),console.log("Comment added.")})}else window.alert("Please sign in to comment!")},I=R=>{l!==null&&l.emailVerified?QM(za(Es(Ts,"spots/"+n[e].spotName+"/comments/"+R.target.id+"/likes"),l.displayName)).then(E=>{E.exists()?(E.val(),YM(Es(Ts,"spots/"+n[e].spotName+"/comments/"+R.target.id+"/likes/"+l.displayName))):cp(Es(Ts,"spots/"+n[e].spotName+"/comments/"+R.target.id+"/likes"),{[l.displayName]:l.displayName})}):window.alert("Please log in and verify your account to like and comment!")};return k.useEffect(()=>{console.log(l);const R=vC(v,E=>{const y=[];E.forEach(b=>{y.push(b.val())});const C=y.slice().sort((b,D)=>{const W=b.content.slice(b.content.length-16,b.content.length),H=D.content.slice(D.content.length-16,D.content.length),U=new Date(W),B=new Date(H);return U-B});_(C)});return()=>R()},[v]),x.jsx(x.Fragment,{children:x.jsxs("div",{className:"spotInfoContainer",children:[x.jsx("div",{className:"imageContainer",children:x.jsx("div",{className:"spotImage",children:x.jsx(xI,{...t,children:n[e].uploadedImgURLs.map((R,E)=>x.jsx("div",{children:x.jsx("img",{draggable:"false",className:"spotImage",src:R})},E+"spotImage"))})})}),x.jsx("div",{style:{marginTop:"10px"},children:x.jsxs("strong",{id:"spotTitleText",children:["Spot Name: ",n[e].spotName]})}),x.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${o.latitude}%2C${o.longitude}`,target:"_blank",style:{textDecoration:"none"},id:"spotAddress",children:["Address: ",n[e].spotAddress]}),x.jsx("div",{className:"spotDescription",children:x.jsx("p",{id:"spotDescriptionText",children:n[e].spotDescription})}),x.jsx("button",{id:"backButton",onClick:()=>{i(),r()},children:" Back"}),x.jsx("div",{children:x.jsx("strong",{style:{fontSize:"25px"},children:"Comments"})}),x.jsxs("div",{className:"textAreaContainer",children:[x.jsx("textarea",{className:"textArea",placeholder:"Enter your comment here...",name:"comment",value:h,onChange:S}),x.jsx("div",{style:{height:"40px",width:"40px",marginBottom:"10px",float:"right",display:"flex",alignItems:"center",justifyContent:"center"},className:"sendIcon",role:"button",tabIndex:"0",onClick:w,children:x.jsx("img",{id:"sendImg",src:"https://cdn.iconscout.com/icon/free/png-256/free-send-forward-arrow-right-direction-import-30559.png",style:{height:"20px",width:"20px",left:"10px",color:"blue"}})})]}),x.jsx("div",{className:"commentsContainer",children:m.length>0?m.map((R,E)=>x.jsxs("div",{className:"comments",children:[x.jsx("div",{style:{height:"30px"},children:x.jsx("p",{style:{marginBottom:"0"},children:R.date})}),x.jsx("div",{style:{marginBottom:"5px"},children:x.jsx("strong",{children:R.content})}),x.jsxs("div",{style:{marginBottom:"15px"},children:[x.jsxs("p",{style:{float:"left"},children:["Posted by: ",R.author]}),x.jsx("p",{style:{float:"right",marginLeft:"5px"},children:Object.keys(R.likes).length-1}),x.jsx("img",{id:E+1,src:"https://cdn-icons-png.flaticon.com/512/81/81250.png",style:{width:"20px",height:"20px",float:"right"},role:"button",tabIndex:"0",onClick:I})]})]})):null})]})})}function Iz(t,e){const n=k.useRef(e);k.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const xz=1;function Pz(t){return Object.freeze({__version:xz,map:t})}function kz(t,e){return Object.freeze({...t,...e})}const PI=k.createContext(null),kI=PI.Provider;function bI(){const t=k.useContext(PI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function bz(t){function e(n,i){const{instance:r,context:o}=t(n).current;return k.useImperativeHandle(i,()=>r),n.children==null?null:te.createElement(kI,{value:o},n.children)}return k.forwardRef(e)}function Rz(t){function e(n,i){const{instance:r}=t(n).current;return k.useImperativeHandle(i,()=>r),null}return k.forwardRef(e)}function Lz(t,e){const n=k.useRef();k.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function RI(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function LI(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function NI(t,e){return e==null?function(i,r){const o=k.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=k.useRef();o.current||(o.current=t(i,r));const l=k.useRef(i),{instance:c}=o.current;return k.useEffect(function(){l.current!==i&&(e(c,i,l.current),l.current=i)},[c,i,r]),o}}function Nz(t,e){k.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function OI(t){return function(n){const i=bI(),r=t(RI(n,i),i);return Iz(i.map,n.attribution),Lz(r.current,n.eventHandlers),Nz(r.current,i),r}}function Oz(t,e){const n=NI(t,e),i=OI(n);return bz(i)}function Az(t,e){const n=NI(t,e),i=OI(n);return Rz(i)}function Mz(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Dz(){return bI().map}function wp(){return wp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wp.apply(this,arguments)}function Fz({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:c,whenReady:h,zoom:f,...m},_){const[v]=k.useState({className:r,id:o,style:c}),[S,w]=k.useState(null);k.useImperativeHandle(_,()=>(S==null?void 0:S.map)??null,[S]);const I=k.useCallback(E=>{if(E!==null&&S===null){const y=new ft.Map(E,m);n!=null&&f!=null?y.setView(n,f):t!=null&&y.fitBounds(t,e),h!=null&&y.whenReady(h),w(Pz(y))}},[]);k.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const R=S?te.createElement(kI,{value:S},i):l??null;return te.createElement("div",wp({},v,{ref:I}),R)}const Uz=k.forwardRef(Fz),zz=Oz(function({position:e,...n},i){const r=new ft.Marker(e,n);return LI(r,kz(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Bz=Az(function({url:e,...n},i){const r=new ft.TileLayer(e,RI(n,i));return LI(r,i)},function(e,n,i){Mz(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});function jz(){const t=[],[e,n]=k.useState({latitude:43.747474670410156,longitude:-79.49417877197266}),[i,r]=k.useState(0),[o,l]=k.useState(!1),[c,h]=k.useState();fp(gp,"images/");const f=Es(Ts,"spots/"),[m,_]=k.useState(0),[v,S]=k.useState(!1);k.useState("");const[w,I]=k.useState();let R=()=>{window.innerWidth<700?S(!0):S(!1)};k.useEffect(()=>{window.addEventListener("resize",R),R()},[]);function E(){document.getElementById("mapcontainuh").style.display="block"}k.useEffect(()=>{vC(f,V=>{V.forEach(le=>{t.push(le.val())}),h(t),I(t)});const B=V=>{n({latitude:V.coords.latitude,longitude:V.coords.longitude})},$=V=>{console.log(V)};navigator.geolocation.getCurrentPosition(B,$)},[]);function y(B){l(!0),r(B.currentTarget.id),n({latitude:w[B.currentTarget.id].lat,longitude:w[B.currentTarget.id].long})}function C(B){l(!0),r(B),n({latitude:w[B].lat,longitude:w[B].long})}function b(){l(!1),_(0)}const D=new ft.Icon({iconUrl:"https://cdn2.iconfinder.com/data/icons/activity-5/50/1F6F9-skateboard-512.png",iconSize:[64,64]});function W(){const B=Dz();return o?B.flyTo([e.latitude,e.longitude],18,{animate:!0,duration:2}):B.flyTo([e.latitude,e.longitude],10,{animate:!0,duration:2}),null}const H={width:"3vw",height:"3vw",background:"none",border:"0px"},U={canSwipe:!0,transitionDuration:100,prevArrow:x.jsx("button",{className:"button",style:{...H},children:"<"}),nextArrow:x.jsx("button",{className:"button",style:{...H},children:">"})};return x.jsxs(k.Fragment,{children:[x.jsx(lh,{}),x.jsxs("div",{className:"bigContainer",children:[c?x.jsxs(Uz,{id:"mapcontainuh",center:[e.latitude,e.longitude],zoom:12,scrollWheelZoom:!1,children:[x.jsx(Bz,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.jsx(W,{}),w?x.jsx("div",{children:w.map((B,$)=>x.jsx(x.Fragment,{children:x.jsx(zz,{id:$,position:[B.lat,B.long],icon:D,eventHandlers:{click:V=>{C(V.target.options.id)}}})}))}):x.jsx(x.Fragment,{})]}):null,o?x.jsx("div",{className:"spotWindow",children:c?x.jsx(Cz,{properties:U,spotID:i,markersData:c,spotClick:b,showMap:E,filteredData:w,position:e}):x.jsx(x.Fragment,{})}):x.jsx(x.Fragment,{children:c?x.jsx(KU,{markersData:c,getSpotContent:y,filteredData:w,setFilteredData:I}):null})]})]})}const Wz=()=>x.jsx("div",{});function AI(t,e){return function(){return t.apply(e,arguments)}}const{toString:Hz}=Object.prototype,{getPrototypeOf:b_}=Object,hh=(t=>e=>{const n=Hz.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=t=>(t=t.toLowerCase(),e=>hh(e)===t),dh=t=>e=>typeof e===t,{isArray:uo}=Array,Ha=dh("undefined");function $z(t){return t!==null&&!Ha(t)&&t.constructor!==null&&!Ha(t.constructor)&&rn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const MI=Vn("ArrayBuffer");function Vz(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&MI(t.buffer),e}const Zz=dh("string"),rn=dh("function"),DI=dh("number"),fh=t=>t!==null&&typeof t=="object",Gz=t=>t===!0||t===!1,fu=t=>{if(hh(t)!=="object")return!1;const e=b_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},qz=Vn("Date"),Kz=Vn("File"),Yz=Vn("Blob"),Qz=Vn("FileList"),Jz=t=>fh(t)&&rn(t.pipe),Xz=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||rn(t.append)&&((e=hh(t))==="formdata"||e==="object"&&rn(t.toString)&&t.toString()==="[object FormData]"))},eB=Vn("URLSearchParams"),tB=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ol(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),uo(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let c;for(i=0;i<l;i++)c=o[i],e.call(null,t[c],c,t)}}function FI(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const UI=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),zI=t=>!Ha(t)&&t!==UI;function Ep(){const{caseless:t}=zI(this)&&this||{},e={},n=(i,r)=>{const o=t&&FI(e,r)||r;fu(e[o])&&fu(i)?e[o]=Ep(e[o],i):fu(i)?e[o]=Ep({},i):uo(i)?e[o]=i.slice():e[o]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&ol(arguments[i],n);return e}const nB=(t,e,n,{allOwnKeys:i}={})=>(ol(e,(r,o)=>{n&&rn(r)?t[o]=AI(r,n):t[o]=r},{allOwnKeys:i}),t),iB=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),rB=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},sB=(t,e,n,i)=>{let r,o,l;const c={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)l=r[o],(!i||i(l,t,e))&&!c[l]&&(e[l]=t[l],c[l]=!0);t=n!==!1&&b_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},oB=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},aB=t=>{if(!t)return null;if(uo(t))return t;let e=t.length;if(!DI(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},lB=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&b_(Uint8Array)),uB=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},cB=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},hB=Vn("HTMLFormElement"),dB=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),kw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),fB=Vn("RegExp"),BI=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};ol(n,(r,o)=>{let l;(l=e(r,o,t))!==!1&&(i[o]=l||r)}),Object.defineProperties(t,i)},pB=t=>{BI(t,(e,n)=>{if(rn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(rn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mB=(t,e)=>{const n={},i=r=>{r.forEach(o=>{n[o]=!0})};return uo(t)?i(t):i(String(t).split(e)),n},_B=()=>{},gB=(t,e)=>(t=+t,Number.isFinite(t)?t:e),jd="abcdefghijklmnopqrstuvwxyz",bw="0123456789",jI={DIGIT:bw,ALPHA:jd,ALPHA_DIGIT:jd+jd.toUpperCase()+bw},vB=(t=16,e=jI.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function yB(t){return!!(t&&rn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const wB=t=>{const e=new Array(10),n=(i,r)=>{if(fh(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const o=uo(i)?[]:{};return ol(i,(l,c)=>{const h=n(l,r+1);!Ha(h)&&(o[c]=h)}),e[r]=void 0,o}}return i};return n(t,0)},EB=Vn("AsyncFunction"),SB=t=>t&&(fh(t)||rn(t))&&rn(t.then)&&rn(t.catch),A={isArray:uo,isArrayBuffer:MI,isBuffer:$z,isFormData:Xz,isArrayBufferView:Vz,isString:Zz,isNumber:DI,isBoolean:Gz,isObject:fh,isPlainObject:fu,isUndefined:Ha,isDate:qz,isFile:Kz,isBlob:Yz,isRegExp:fB,isFunction:rn,isStream:Jz,isURLSearchParams:eB,isTypedArray:lB,isFileList:Qz,forEach:ol,merge:Ep,extend:nB,trim:tB,stripBOM:iB,inherits:rB,toFlatObject:sB,kindOf:hh,kindOfTest:Vn,endsWith:oB,toArray:aB,forEachEntry:uB,matchAll:cB,isHTMLForm:hB,hasOwnProperty:kw,hasOwnProp:kw,reduceDescriptors:BI,freezeMethods:pB,toObjectSet:mB,toCamelCase:dB,noop:_B,toFiniteNumber:gB,findKey:FI,global:UI,isContextDefined:zI,ALPHABET:jI,generateString:vB,isSpecCompliantForm:yB,toJSONObject:wB,isAsyncFn:EB,isThenable:SB};function me(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}A.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const WI=me.prototype,HI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{HI[t]={value:t}});Object.defineProperties(me,HI);Object.defineProperty(WI,"isAxiosError",{value:!0});me.from=(t,e,n,i,r,o)=>{const l=Object.create(WI);return A.toFlatObject(t,l,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),me.call(l,t.message,e,n,i,r),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};const TB=null;function Sp(t){return A.isPlainObject(t)||A.isArray(t)}function $I(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function Rw(t,e,n){return t?t.concat(e).map(function(r,o){return r=$I(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function CB(t){return A.isArray(t)&&!t.some(Sp)}const IB=A.toFlatObject(A,{},null,function(e){return/^is[A-Z]/.test(e)});function ph(t,e,n){if(!A.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,R){return!A.isUndefined(R[I])});const i=n.metaTokens,r=n.visitor||m,o=n.dots,l=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(e);if(!A.isFunction(r))throw new TypeError("visitor must be a function");function f(w){if(w===null)return"";if(A.isDate(w))return w.toISOString();if(!h&&A.isBlob(w))throw new me("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(w)||A.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function m(w,I,R){let E=w;if(w&&!R&&typeof w=="object"){if(A.endsWith(I,"{}"))I=i?I:I.slice(0,-2),w=JSON.stringify(w);else if(A.isArray(w)&&CB(w)||(A.isFileList(w)||A.endsWith(I,"[]"))&&(E=A.toArray(w)))return I=$I(I),E.forEach(function(C,b){!(A.isUndefined(C)||C===null)&&e.append(l===!0?Rw([I],b,o):l===null?I:I+"[]",f(C))}),!1}return Sp(w)?!0:(e.append(Rw(R,I,o),f(w)),!1)}const _=[],v=Object.assign(IB,{defaultVisitor:m,convertValue:f,isVisitable:Sp});function S(w,I){if(!A.isUndefined(w)){if(_.indexOf(w)!==-1)throw Error("Circular reference detected in "+I.join("."));_.push(w),A.forEach(w,function(E,y){(!(A.isUndefined(E)||E===null)&&r.call(e,E,A.isString(y)?y.trim():y,I,v))===!0&&S(E,I?I.concat(y):[y])}),_.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return S(t),e}function Lw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function R_(t,e){this._pairs=[],t&&ph(t,this,e)}const VI=R_.prototype;VI.append=function(e,n){this._pairs.push([e,n])};VI.toString=function(e){const n=e?function(i){return e.call(this,i,Lw)}:Lw;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function xB(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZI(t,e,n){if(!e)return t;const i=n&&n.encode||xB,r=n&&n.serialize;let o;if(r?o=r(e,n):o=A.isURLSearchParams(e)?e.toString():new R_(e,n).toString(i),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class PB{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){A.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Nw=PB,GI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kB=typeof URLSearchParams<"u"?URLSearchParams:R_,bB=typeof FormData<"u"?FormData:null,RB=typeof Blob<"u"?Blob:null,LB={isBrowser:!0,classes:{URLSearchParams:kB,FormData:bB,Blob:RB},protocols:["http","https","file","blob","url","data"]},qI=typeof window<"u"&&typeof document<"u",NB=(t=>qI&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),OB=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),AB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qI,hasStandardBrowserEnv:NB,hasStandardBrowserWebWorkerEnv:OB},Symbol.toStringTag,{value:"Module"})),Dn={...AB,...LB};function MB(t,e){return ph(t,new Dn.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,o){return Dn.isNode&&A.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function DB(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FB(t){const e={},n=Object.keys(t);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],e[o]=t[o];return e}function KI(t){function e(n,i,r,o){let l=n[o++];const c=Number.isFinite(+l),h=o>=n.length;return l=!l&&A.isArray(r)?r.length:l,h?(A.hasOwnProp(r,l)?r[l]=[r[l],i]:r[l]=i,!c):((!r[l]||!A.isObject(r[l]))&&(r[l]=[]),e(n,i,r[l],o)&&A.isArray(r[l])&&(r[l]=FB(r[l])),!c)}if(A.isFormData(t)&&A.isFunction(t.entries)){const n={};return A.forEachEntry(t,(i,r)=>{e(DB(i),r,n,0)}),n}return null}function UB(t,e,n){if(A.isString(t))try{return(e||JSON.parse)(t),A.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const L_={transitional:GI,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,o=A.isObject(e);if(o&&A.isHTMLForm(e)&&(e=new FormData(e)),A.isFormData(e))return r&&r?JSON.stringify(KI(e)):e;if(A.isArrayBuffer(e)||A.isBuffer(e)||A.isStream(e)||A.isFile(e)||A.isBlob(e))return e;if(A.isArrayBufferView(e))return e.buffer;if(A.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return MB(e,this.formSerializer).toString();if((c=A.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return ph(c?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),UB(e)):e}],transformResponse:[function(e){const n=this.transitional||L_.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&A.isString(e)&&(i&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(c){if(l)throw c.name==="SyntaxError"?me.from(c,me.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dn.classes.FormData,Blob:Dn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{L_.headers[t]={}});const N_=L_,zB=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BB=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),i=l.substring(r+1).trim(),!(!n||e[n]&&zB[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Ow=Symbol("internals");function zo(t){return t&&String(t).trim().toLowerCase()}function pu(t){return t===!1||t==null?t:A.isArray(t)?t.map(pu):String(t)}function jB(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const WB=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Wd(t,e,n,i,r){if(A.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!A.isString(e)){if(A.isString(i))return e.indexOf(i)!==-1;if(A.isRegExp(i))return i.test(e)}}function HB(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function $B(t,e){const n=A.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,o,l){return this[i].call(this,e,r,o,l)},configurable:!0})})}class mh{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function o(c,h,f){const m=zo(h);if(!m)throw new Error("header name must be a non-empty string");const _=A.findKey(r,m);(!_||r[_]===void 0||f===!0||f===void 0&&r[_]!==!1)&&(r[_||h]=pu(c))}const l=(c,h)=>A.forEach(c,(f,m)=>o(f,m,h));return A.isPlainObject(e)||e instanceof this.constructor?l(e,n):A.isString(e)&&(e=e.trim())&&!WB(e)?l(BB(e),n):e!=null&&o(n,e,i),this}get(e,n){if(e=zo(e),e){const i=A.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return jB(r);if(A.isFunction(n))return n.call(this,r,i);if(A.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=zo(e),e){const i=A.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Wd(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function o(l){if(l=zo(l),l){const c=A.findKey(i,l);c&&(!n||Wd(i,i[c],c,n))&&(delete i[c],r=!0)}}return A.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const o=n[i];(!e||Wd(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,i={};return A.forEach(this,(r,o)=>{const l=A.findKey(i,o);if(l){n[l]=pu(r),delete n[o];return}const c=e?HB(o):String(o).trim();c!==o&&delete n[o],n[c]=pu(r),i[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return A.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&A.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[Ow]=this[Ow]={accessors:{}}).accessors,r=this.prototype;function o(l){const c=zo(l);i[c]||($B(r,l),i[c]=!0)}return A.isArray(e)?e.forEach(o):o(e),this}}mh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(mh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});A.freezeMethods(mh);const si=mh;function Hd(t,e){const n=this||N_,i=e||n,r=si.from(i.headers);let o=i.data;return A.forEach(t,function(c){o=c.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function YI(t){return!!(t&&t.__CANCEL__)}function al(t,e,n){me.call(this,t??"canceled",me.ERR_CANCELED,e,n),this.name="CanceledError"}A.inherits(al,me,{__CANCEL__:!0});function VB(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new me("Request failed with status code "+n.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const ZB=Dn.hasStandardBrowserEnv?function(){return{write:function(n,i,r,o,l,c){const h=[];h.push(n+"="+encodeURIComponent(i)),A.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),A.isString(o)&&h.push("path="+o),A.isString(l)&&h.push("domain="+l),c===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function GB(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qB(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function QI(t,e){return t&&!GB(e)?qB(t,e):e}const KB=Dn.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(o){let l=o;return e&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(l){const c=A.isString(l)?r(l):l;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}();function YB(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function QB(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,o=0,l;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),m=i[o];l||(l=f),n[r]=h,i[r]=f;let _=o,v=0;for(;_!==r;)v+=n[_++],_=_%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),f-l<e)return;const S=m&&f-m;return S?Math.round(v*1e3/S):void 0}}function Aw(t,e){let n=0;const i=QB(50,250);return r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,c=o-n,h=i(c),f=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:h||void 0,estimated:h&&l&&f?(l-o)/h:void 0,event:r};m[e?"download":"upload"]=!0,t(m)}}const JB=typeof XMLHttpRequest<"u",XB=JB&&function(t){return new Promise(function(n,i){let r=t.data;const o=si.from(t.headers).normalize(),l=t.responseType;let c;function h(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let f;if(A.isFormData(r)){if(Dn.hasStandardBrowserEnv||Dn.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((f=o.getContentType())!==!1){const[w,...I]=f?f.split(";").map(R=>R.trim()).filter(Boolean):[];o.setContentType([w||"multipart/form-data",...I].join("; "))}}let m=new XMLHttpRequest;if(t.auth){const w=t.auth.username||"",I=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(w+":"+I))}const _=QI(t.baseURL,t.url);m.open(t.method.toUpperCase(),ZI(_,t.params,t.paramsSerializer),!0),m.timeout=t.timeout;function v(){if(!m)return;const w=si.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),R={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:t,request:m};VB(function(y){n(y),h()},function(y){i(y),h()},R),m=null}if("onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(v)},m.onabort=function(){m&&(i(new me("Request aborted",me.ECONNABORTED,t,m)),m=null)},m.onerror=function(){i(new me("Network Error",me.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let I=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const R=t.transitional||GI;t.timeoutErrorMessage&&(I=t.timeoutErrorMessage),i(new me(I,R.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,t,m)),m=null},Dn.hasStandardBrowserEnv){const w=KB(_)&&t.xsrfCookieName&&ZB.read(t.xsrfCookieName);w&&o.set(t.xsrfHeaderName,w)}r===void 0&&o.setContentType(null),"setRequestHeader"in m&&A.forEach(o.toJSON(),function(I,R){m.setRequestHeader(R,I)}),A.isUndefined(t.withCredentials)||(m.withCredentials=!!t.withCredentials),l&&l!=="json"&&(m.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&m.addEventListener("progress",Aw(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",Aw(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=w=>{m&&(i(!w||w.type?new al(null,t,m):w),m.abort(),m=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const S=YB(_);if(S&&Dn.protocols.indexOf(S)===-1){i(new me("Unsupported protocol "+S+":",me.ERR_BAD_REQUEST,t));return}m.send(r||null)})},Tp={http:TB,xhr:XB};A.forEach(Tp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Mw=t=>`- ${t}`,ej=t=>A.isFunction(t)||t===null||t===!1,JI={getAdapter:t=>{t=A.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let o=0;o<e;o++){n=t[o];let l;if(i=n,!ej(n)&&(i=Tp[(l=String(n)).toLowerCase()],i===void 0))throw new me(`Unknown adapter '${l}'`);if(i)break;r[l||"#"+o]=i}if(!i){const o=Object.entries(r).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(Mw).join(`
`):" "+Mw(o[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:Tp};function $d(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new al(null,t)}function Dw(t){return $d(t),t.headers=si.from(t.headers),t.data=Hd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),JI.getAdapter(t.adapter||N_.adapter)(t).then(function(i){return $d(t),i.data=Hd.call(t,t.transformResponse,i),i.headers=si.from(i.headers),i},function(i){return YI(i)||($d(t),i&&i.response&&(i.response.data=Hd.call(t,t.transformResponse,i.response),i.response.headers=si.from(i.response.headers))),Promise.reject(i)})}const Fw=t=>t instanceof si?t.toJSON():t;function Js(t,e){e=e||{};const n={};function i(f,m,_){return A.isPlainObject(f)&&A.isPlainObject(m)?A.merge.call({caseless:_},f,m):A.isPlainObject(m)?A.merge({},m):A.isArray(m)?m.slice():m}function r(f,m,_){if(A.isUndefined(m)){if(!A.isUndefined(f))return i(void 0,f,_)}else return i(f,m,_)}function o(f,m){if(!A.isUndefined(m))return i(void 0,m)}function l(f,m){if(A.isUndefined(m)){if(!A.isUndefined(f))return i(void 0,f)}else return i(void 0,m)}function c(f,m,_){if(_ in e)return i(f,m);if(_ in t)return i(void 0,f)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(f,m)=>r(Fw(f),Fw(m),!0)};return A.forEach(Object.keys(Object.assign({},t,e)),function(m){const _=h[m]||r,v=_(t[m],e[m],m);A.isUndefined(v)&&_!==c||(n[m]=v)}),n}const XI="1.6.1",O_={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{O_[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Uw={};O_.transitional=function(e,n,i){function r(o,l){return"[Axios v"+XI+"] Transitional option '"+o+"'"+l+(i?". "+i:"")}return(o,l,c)=>{if(e===!1)throw new me(r(l," has been removed"+(n?" in "+n:"")),me.ERR_DEPRECATED);return n&&!Uw[l]&&(Uw[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,l,c):!0}};function tj(t,e,n){if(typeof t!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const o=i[r],l=e[o];if(l){const c=t[o],h=c===void 0||l(c,o,t);if(h!==!0)throw new me("option "+o+" must be "+h,me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new me("Unknown option "+o,me.ERR_BAD_OPTION)}}const Cp={assertOptions:tj,validators:O_},wi=Cp.validators;class mc{constructor(e){this.defaults=e,this.interceptors={request:new Nw,response:new Nw}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Js(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:o}=n;i!==void 0&&Cp.assertOptions(i,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1),r!=null&&(A.isFunction(r)?n.paramsSerializer={serialize:r}:Cp.assertOptions(r,{encode:wi.function,serialize:wi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=o&&A.merge(o.common,o[n.method]);o&&A.forEach(["delete","get","head","post","put","patch","common"],w=>{delete o[w]}),n.headers=si.concat(l,o);const c=[];let h=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(h=h&&I.synchronous,c.unshift(I.fulfilled,I.rejected))});const f=[];this.interceptors.response.forEach(function(I){f.push(I.fulfilled,I.rejected)});let m,_=0,v;if(!h){const w=[Dw.bind(this),void 0];for(w.unshift.apply(w,c),w.push.apply(w,f),v=w.length,m=Promise.resolve(n);_<v;)m=m.then(w[_++],w[_++]);return m}v=c.length;let S=n;for(_=0;_<v;){const w=c[_++],I=c[_++];try{S=w(S)}catch(R){I.call(this,R);break}}try{m=Dw.call(this,S)}catch(w){return Promise.reject(w)}for(_=0,v=f.length;_<v;)m=m.then(f[_++],f[_++]);return m}getUri(e){e=Js(this.defaults,e);const n=QI(e.baseURL,e.url);return ZI(n,e.params,e.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(e){mc.prototype[e]=function(n,i){return this.request(Js(i||{},{method:e,url:n,data:(i||{}).data}))}});A.forEach(["post","put","patch"],function(e){function n(i){return function(o,l,c){return this.request(Js(c||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}mc.prototype[e]=n(),mc.prototype[e+"Form"]=n(!0)});const mu=mc;class A_{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(r=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](r);i._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(c=>{i.subscribe(c),o=c}).then(r);return l.cancel=function(){i.unsubscribe(o)},l},e(function(o,l,c){i.reason||(i.reason=new al(o,l,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new A_(function(r){e=r}),cancel:e}}}const nj=A_;function ij(t){return function(n){return t.apply(null,n)}}function rj(t){return A.isObject(t)&&t.isAxiosError===!0}const Ip={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ip).forEach(([t,e])=>{Ip[e]=t});const sj=Ip;function ex(t){const e=new mu(t),n=AI(mu.prototype.request,e);return A.extend(n,mu.prototype,e,{allOwnKeys:!0}),A.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return ex(Js(t,r))},n}const Qe=ex(N_);Qe.Axios=mu;Qe.CanceledError=al;Qe.CancelToken=nj;Qe.isCancel=YI;Qe.VERSION=XI;Qe.toFormData=ph;Qe.AxiosError=me;Qe.Cancel=Qe.CanceledError;Qe.all=function(e){return Promise.all(e)};Qe.spread=ij;Qe.isAxiosError=rj;Qe.mergeConfig=Js;Qe.AxiosHeaders=si;Qe.formToJSON=t=>KI(A.isHTMLForm(t)?new FormData(t):t);Qe.getAdapter=JI.getAdapter;Qe.HttpStatusCode=sj;Qe.default=Qe;const oj=Qe;function yr(){return yr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yr.apply(this,arguments)}function aj(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_c(t,e)}function _c(t,e){return _c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_c(t,e)}function lj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xp(t,e,n){return xp=lj()?Reflect.construct.bind():function(i,r,o){var l=[null];l.push.apply(l,r);var c=new(Function.bind.apply(i,l));return o&&_c(c,o.prototype),c},xp.apply(null,arguments)}function oi(t,e,n,i){e===void 0&&(e=""),i===void 0&&(i={});var r=document.createElement(t);return e&&(r.className=e),Object.keys(i).forEach(function(o){if(typeof i[o]=="function"){var l=o.indexOf("on")===0?o.substr(2).toLowerCase():o;r.addEventListener(l,i[o])}else o==="html"?r.innerHTML=i[o]:o==="text"?r.innerText=i[o]:r.setAttribute(o,i[o])}),n&&n.appendChild(r),r}function Bo(t){t.preventDefault(),t.stopPropagation()}var _u=function(){return[].slice.call(arguments).filter(Boolean).join(" ").trim()};function wr(t,e){t&&t.classList&&(Array.isArray(e)?e:[e]).forEach(function(n){t.classList.contains(n)||t.classList.add(n)})}function An(t,e){t&&t.classList&&(Array.isArray(e)?e:[e]).forEach(function(n){t.classList.contains(n)&&t.classList.remove(n)})}var gc,vc=13,Pp=40,tx=38,uj=[vc,27,Pp,tx,37,39],cj=function(){function t(n){var i=this,r=n.handleSubmit,o=n.searchLabel,l=n.classNames,c=l===void 0?{}:l;this.container=void 0,this.form=void 0,this.input=void 0,this.handleSubmit=void 0,this.hasError=!1,this.container=oi("div",_u("geosearch",c.container)),this.form=oi("form",["",c.form].join(" "),this.container,{autocomplete:"none",onClick:Bo,onDblClick:Bo,touchStart:Bo,touchEnd:Bo}),this.input=oi("input",["glass",c.input].join(" "),this.form,{type:"text",placeholder:o||"search",onInput:this.onInput,onKeyUp:function(h){return i.onKeyUp(h)},onKeyPress:function(h){return i.onKeyPress(h)},onFocus:this.onFocus,onBlur:this.onBlur,onClick:function(){i.input.focus(),i.input.dispatchEvent(new Event("focus"))}}),this.handleSubmit=r}var e=t.prototype;return e.onFocus=function(){wr(this.form,"active")},e.onBlur=function(){An(this.form,"active")},e.onSubmit=function(n){try{var i=this;return Bo(n),An(r=i.container,"error"),wr(r,"pending"),Promise.resolve(i.handleSubmit({query:i.input.value})).then(function(){An(i.container,"pending")})}catch(o){return Promise.reject(o)}var r},e.onInput=function(){this.hasError&&(An(this.container,"error"),this.hasError=!1)},e.onKeyUp=function(n){n.keyCode===27&&(An(this.container,["pending","active"]),this.input.value="",document.body.focus(),document.body.blur())},e.onKeyPress=function(n){n.keyCode===vc&&this.onSubmit(n)},e.setQuery=function(n){this.input.value=n},t}(),hj=function(){function t(n){var i=this,r=n.handleClick,o=n.classNames,l=o===void 0?{}:o,c=n.notFoundMessage;this.handleClick=void 0,this.selected=-1,this.results=[],this.container=void 0,this.resultItem=void 0,this.notFoundMessage=void 0,this.onClick=function(h){if(typeof i.handleClick=="function"){var f=h.target;if(f&&i.container.contains(f)&&f.hasAttribute("data-key")){var m=Number(f.getAttribute("data-key"));i.handleClick({result:i.results[m]})}}},this.handleClick=r,this.notFoundMessage=c?oi("div",_u(l.notfound),void 0,{html:c}):void 0,this.container=oi("div",_u("results",l.resultlist)),this.container.addEventListener("click",this.onClick,!0),this.resultItem=oi("div",_u(l.item))}var e=t.prototype;return e.render=function(n,i){var r=this;n===void 0&&(n=[]),this.clear(),n.forEach(function(o,l){var c=r.resultItem.cloneNode(!0);c.setAttribute("data-key",""+l),c.innerHTML=i({result:o}),r.container.appendChild(c)}),n.length>0?(wr(this.container.parentElement,"open"),wr(this.container,"active")):this.notFoundMessage&&(this.container.appendChild(this.notFoundMessage),wr(this.container.parentElement,"open")),this.results=n},e.select=function(n){return Array.from(this.container.children).forEach(function(i,r){return r===n?wr(i,"active"):An(i,"active")}),this.selected=n,this.results[n]},e.count=function(){return this.results?this.results.length:0},e.clear=function(){for(this.selected=-1;this.container.lastChild;)this.container.removeChild(this.container.lastChild);An(this.container.parentElement,"open"),An(this.container,"active")},t}(),Vd={position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(t){return""+t.result.label},resultFormat:function(t){return""+t.result.label},marker:{icon:x_&&ft.Icon?new ft.Icon.Default:void 0,draggable:!1},maxMarkers:1,maxSuggestions:5,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",clearSearchLabel:"Clear search",notFoundMessage:"",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:"",resultlist:"",item:"",notfound:"leaflet-bar-notfound"},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1,updateMap:!0},nx="Leaflet must be loaded before instantiating the GeoSearch control",dj={options:yr({},Vd),classNames:yr({},Vd.classNames),initialize:function(t){var e,n,i,r,o=this;if(!x_)throw new Error(nx);if(!t.provider)throw new Error("Provider is missing from options");this.options=yr({},Vd,t),this.classNames=yr({},this.classNames,t.classNames),this.markers=new ft.FeatureGroup,this.classNames.container+=" leaflet-geosearch-"+this.options.style,this.searchElement=new cj({searchLabel:this.options.searchLabel,classNames:{container:this.classNames.container,form:this.classNames.form,input:this.classNames.input},handleSubmit:function(l){return o.onSubmit(l)}}),this.button=oi("a",this.classNames.button,this.searchElement.container,{title:this.options.searchLabel,href:"#",onClick:function(l){return o.onClick(l)}}),ft.DomEvent.disableClickPropagation(this.button),this.resetButton=oi("button",this.classNames.resetButton,this.searchElement.form,{text:"","aria-label":this.options.clearSearchLabel,onClick:function(){o.searchElement.input.value===""?o.close():o.clearResults(null,!0)}}),ft.DomEvent.disableClickPropagation(this.resetButton),this.options.autoComplete&&(this.resultList=new hj({handleClick:function(l){var c=l.result;o.searchElement.input.value=c.label,o.onSubmit({query:c.label,data:c})},classNames:{resultlist:this.classNames.resultlist,item:this.classNames.item,notfound:this.classNames.notfound},notFoundMessage:this.options.notFoundMessage}),this.searchElement.form.appendChild(this.resultList.container),this.searchElement.input.addEventListener("keyup",(e=function(l){return o.autoSearch(l)},(n=this.options.autoCompleteDelay)===void 0&&(n=250),i===void 0&&(i=!1),function(){var l=[].slice.call(arguments);r&&clearTimeout(r),r=setTimeout(function(){r=null,i||e.apply(void 0,l)},n),i&&!r&&e.apply(void 0,l)}),!0),this.searchElement.input.addEventListener("keydown",function(l){return o.selectResult(l)},!0),this.searchElement.input.addEventListener("keydown",function(l){return o.clearResults(l,!0)},!0)),this.searchElement.form.addEventListener("click",function(l){l.preventDefault()},!1)},onAdd:function(t){var e=this.options,n=e.showMarker,i=e.style;if(this.map=t,n&&this.markers.addTo(t),i==="bar"){var r=t.getContainer().querySelector(".leaflet-control-container");this.container=oi("div","leaflet-control-geosearch leaflet-geosearch-bar"),this.container.appendChild(this.searchElement.form),r.appendChild(this.container)}return ft.DomEvent.disableClickPropagation(this.searchElement.form),this.searchElement.container},onRemove:function(){var t;return(t=this.container)==null||t.remove(),this},open:function(){var t=this.searchElement,e=t.input;wr(t.container,"active"),e.focus()},close:function(){An(this.searchElement.container,"active"),this.clearResults()},onClick:function(t){t.preventDefault(),t.stopPropagation(),this.searchElement.container.classList.contains("active")?this.close():this.open()},selectResult:function(t){if([vc,Pp,tx].indexOf(t.keyCode)!==-1)if(t.preventDefault(),t.keyCode!==vc){var e=this.resultList.count()-1;if(!(e<0)){var n=this.resultList.selected,i=t.keyCode===Pp?n+1:n-1,r=this.resultList.select(i<0?e:i>e?0:i);this.searchElement.input.value=r.label}}else{var o=this.resultList.select(this.resultList.selected);this.onSubmit({query:this.searchElement.input.value,data:o})}},clearResults:function(t,e){if(e===void 0&&(e=!1),!t||t.keyCode===27){var n=this.options,i=n.autoComplete;!e&&n.keepResult||(this.searchElement.input.value="",this.markers.clearLayers()),i&&this.resultList.clear()}},autoSearch:function(t){try{var e=this;if(uj.indexOf(t.keyCode)>-1)return Promise.resolve();var n=t.target.value,i=e.options.provider,r=function(){if(n.length)return Promise.resolve(i.search({query:n})).then(function(o){o=o.slice(0,e.options.maxSuggestions),e.resultList.render(o,e.options.resultFormat)});e.resultList.clear()}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},onSubmit:function(t){try{var e=this;return e.resultList.clear(),Promise.resolve(e.options.provider.search(t)).then(function(n){n&&n.length>0&&e.showResult(n[0],t)})}catch(n){return Promise.reject(n)}},showResult:function(t,e){var n=this.options,i=n.autoClose,r=n.updateMap,o=this.markers.getLayers();o.length>=this.options.maxMarkers&&this.markers.removeLayer(o[0]);var l=this.addMarker(t,e);r&&this.centerMap(t),this.map.fireEvent("geosearch/showlocation",{location:t,marker:l}),i&&this.closeResults()},closeResults:function(){var t=this.searchElement.container;t.classList.contains("active")&&An(t,"active"),this.clearResults()},addMarker:function(t,e){var n=this,i=this.options,r=i.marker,o=i.showPopup,l=i.popupFormat,c=new ft.Marker([t.y,t.x],r),h=t.label;return typeof l=="function"&&(h=l({query:e,result:t})),c.bindPopup(h),this.markers.addLayer(c),o&&c.openPopup(),r.draggable&&c.on("dragend",function(f){n.map.fireEvent("geosearch/marker/dragend",{location:c.getLatLng(),event:f})}),c},centerMap:function(t){var e=this.options,n=e.retainZoomLevel,i=e.animateZoom,r=t.bounds?new ft.LatLngBounds(t.bounds):new ft.LatLng(t.y,t.x).toBounds(10),o=r.isValid()?r:this.markers.getBounds();!n&&r.isValid()&&!t.bounds||n||!r.isValid()?this.map.setView(o.getCenter(),this.getZoom(),{animate:i}):this.map.fitBounds(o,{animate:i})},getZoom:function(){var t=this.options,e=t.zoomLevel;return t.retainZoomLevel?this.map.getZoom():e}};function fj(){if(!x_)throw new Error(nx);var t=ft.Control.extend(dj);return xp(t,[].slice.call(arguments))}(function(t){t[t.SEARCH=0]="SEARCH",t[t.REVERSE=1]="REVERSE"})(gc||(gc={}));var zw,pj=function(){function t(n){n===void 0&&(n={}),this.options=void 0,this.options=n}var e=t.prototype;return e.getParamString=function(n){n===void 0&&(n={});var i=yr({},this.options.params,n);return Object.keys(i).map(function(r){return encodeURIComponent(r)+"="+encodeURIComponent(i[r])}).join("&")},e.getUrl=function(n,i){return n+"?"+this.getParamString(i)},e.search=function(n){try{var i=this,r=i.endpoint({query:n.query,type:gc.SEARCH});return Promise.resolve(fetch(r)).then(function(o){return Promise.resolve(o.json()).then(function(l){return i.parse({data:l})})})}catch(o){return Promise.reject(o)}},t}();(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(zw||(zw={}));var mj=function(t){function e(i){var r;i===void 0&&(i={}),(r=t.call(this,i)||this).searchUrl=void 0,r.reverseUrl=void 0;var o="https://nominatim.openstreetmap.org";return r.searchUrl=i.searchUrl||o+"/search",r.reverseUrl=i.reverseUrl||o+"/reverse",r}aj(e,t);var n=e.prototype;return n.endpoint=function(i){var r=i.query,o=i.type,l=typeof r=="string"?{q:r}:r;return l.format="json",this.getUrl(o===gc.REVERSE?this.reverseUrl:this.searchUrl,l)},n.parse=function(i){return(Array.isArray(i.data)?i.data:[i.data]).map(function(r){return{x:Number(r.lon),y:Number(r.lat),label:r.display_name,bounds:[[parseFloat(r.boundingbox[0]),parseFloat(r.boundingbox[2])],[parseFloat(r.boundingbox[1]),parseFloat(r.boundingbox[3])]],raw:r}})},e}(pj);function _j(){const[t,e]=k.useState(1),n=zc(),[i,r]=k.useState(),[o,l]=k.useState(),[c,h]=k.useState(),[f,m]=k.useState(),[_,v]=k.useState([]),[S,w]=k.useState(),[I,R]=k.useState(!1),[E,y]=k.useState(!1);k.useState();const[C,b]=k.useState(null),D=Es(Ts,"spots/"+i);k.useEffect(()=>{Ys.onAuthStateChanged(V=>{V&&V.emailVerified?(R(!0),y(!0),$()):V&&!V.emailVerified?(R(!0),y(!1)):(R(!1),y(!1))})},[]);const W=()=>{e(t+1),document.getElementById("map2").style.height="0px"},H=()=>{e(t-1),document.getElementById("map2").style.height="50vh"},U=V=>{V.preventDefault();var le=["test"];function Le(){const Ce=[];for(let Je=0;Je<C.length;Je++){const Ne=fp(gp,`images/${C[Je].name+Tz()}`),$e=_2(Ne,C[Je]).then(O=>g2(fp(gp,O.metadata.fullPath))).then(O=>{le[Je]=O});Ce.push($e)}Promise.all(Ce).then(()=>{cp(D,{uploadedImgURLs:le})}).catch(Je=>{console.error("Error uploading images:",Je)})}gC(D,{spotName:i,spotDescription:S,spotDescription:S,lat:o,long:c,spotAddress:f,uploadedImgURLs:[""]}).then(()=>{console.log("Spot added."),n("/")}),Le()};function B(V){let le=[];for(let Le=0;Le<V.length;Le++)le[Le]=URL.createObjectURL(V[Le]);v(le)}function $(){const V=L.map("map2").setView([43.747474670410156,-79.49417877197266],10);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:" OpenStreetMap"}).addTo(V);const le=new ft.Icon({iconUrl:"https://cdn2.iconfinder.com/data/icons/activity-5/50/1F6F9-skateboard-512.png",iconSize:[64,64]}),Le=new fj({provider:new mj,style:"bar",showMarker:!1,marker:{icon:le,draggable:!1}});V.addControl(Le);var Ce={clickable:!0,icon:le},Je=L.marker(new L.LatLng(0,0),Ce);Je.addTo(V),V.on("click",function($e){var O=$e.latlng,q=O.lat,F=O.lng,J=new L.LatLng(q,F);Je.setLatLng(J),l(q),h(F),Ne(q,F)});function Ne($e,O){oj.get("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+$e+"&lon="+O).then(q=>{console.log(q.data);let F=q.data.address;m((F.house_number?F.house_number+" ":"")+F.road+", "+F.city+", "+F.state+" "+F.postcode+", "+F.country)}).catch(q=>{console.log(q)})}V.on("geosearch/showlocation",function($e){var O=$e.location.y,q=$e.location.x;l(O),h(q);var F=new L.LatLng(O,q);Je.setLatLng(F),Ne(O,q)})}return x.jsxs(k.Fragment,{children:[x.jsx(lh,{}),I==!0?x.jsx("div",{children:E==!0?x.jsx("div",{}):x.jsx("p",{className:"verText",children:"Please verify your email!"})}):x.jsx("p",{className:"verText",children:"Please login to submit!"}),x.jsxs("div",{className:"map-container",children:[E==!0&&t==1?x.jsxs("div",{children:[x.jsx("h2",{id:"topText",children:"Add Your Own Skatespot!"}),x.jsx("p",{id:"text2",children:"Enter an address using the search bar, then drop a pin at the approximate location."})]}):x.jsx("div",{}),x.jsx("div",{id:"map2"}),E==!0&&t==1?x.jsxs("div",{children:[x.jsx("br",{}),x.jsxs("div",{children:[o!=null?x.jsx("div",{children:x.jsxs("p",{className:"fade-in selectText",children:["Your coordinates are ",o,", ",c]})}):x.jsx("div",{}),f!=null?x.jsxs("p",{className:"fade-in selectText",children:["The address of this location is ",f]}):x.jsx("div",{}),f!=null&&o!=null?x.jsx("div",{className:"fade-in",children:x.jsx("button",{id:"logButt",onClick:W,className:"buttons",children:"Next!"})}):x.jsx("div",{})]})]}):x.jsx("div",{})]}),t==2?x.jsx("div",{className:"bigahcontainer",children:x.jsx("div",{children:x.jsxs("div",{className:"container",children:[x.jsx("br",{}),x.jsxs("form",{onSubmit:U,children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"name",children:x.jsx("strong",{children:"Name"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"text",placeholder:"Enter Spot Name",autoComplete:"off",id:"name",accept:".png, .jpg, .jpeg, .webp, .mp4",onChange:V=>r(V.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"files",children:x.jsx("strong",{children:"Upload Images"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"file",placeholder:"Upload Images",autoComplete:"off",id:"image",multiple:!0,onChange:V=>{b(V.target.files),B(V.target.files)}}),_.length>0?x.jsx("div",{className:"filePreviewContainer",children:_.map((V,le)=>x.jsx("img",{id:"fileImage",src:_[le]},le))}):x.jsx("div",{})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"spotDescription",children:x.jsx("strong",{children:"Description"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"text",placeholder:"Enter a Description",autoComplete:"off",id:"spotDescription",onChange:V=>w(V.target.value)})]}),x.jsx("br",{}),x.jsx("button",{id:"logButt",type:"submit",className:"buttons",children:"Submit!"}),x.jsx("br",{}),x.jsx("button",{id:"backButt",onClick:H,className:"buttons",children:"Back"})]})]})})}):x.jsx("div",{})]})}function gj(){return x.jsx(Jk,{children:x.jsx(Hb,{children:x.jsxs(jb,{children:[x.jsx(os,{exact:!0,path:"/",element:x.jsx(jz,{})}),x.jsx(os,{exact:!0,path:"/register",element:x.jsx(VU,{})}),x.jsx(os,{exact:!0,path:"/login",element:x.jsx(ZU,{})}),x.jsx(os,{exact:!0,path:"/test",element:x.jsx(Wz,{})}),x.jsx(os,{exact:!0,path:"/submit",element:x.jsx(_j,{})})]})})})}Zd.createRoot(document.getElementById("root")).render(x.jsx(gj,{}));

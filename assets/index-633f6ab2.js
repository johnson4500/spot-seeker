function zw(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var gP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bw={exports:{}},fc={},jw={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),vP=Symbol.for("react.portal"),yP=Symbol.for("react.fragment"),wP=Symbol.for("react.strict_mode"),EP=Symbol.for("react.profiler"),SP=Symbol.for("react.provider"),TP=Symbol.for("react.context"),CP=Symbol.for("react.forward_ref"),IP=Symbol.for("react.suspense"),xP=Symbol.for("react.memo"),PP=Symbol.for("react.lazy"),zg=Symbol.iterator;function kP(t){return t===null||typeof t!="object"?null:(t=zg&&t[zg]||t["@@iterator"],typeof t=="function"?t:null)}var Ww={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hw=Object.assign,$w={};function Ks(t,e,n){this.props=t,this.context=e,this.refs=$w,this.updater=n||Ww}Ks.prototype.isReactComponent={};Ks.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ks.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vw(){}Vw.prototype=Ks.prototype;function Sp(t,e,n){this.props=t,this.context=e,this.refs=$w,this.updater=n||Ww}var Tp=Sp.prototype=new Vw;Tp.constructor=Sp;Hw(Tp,Ks.prototype);Tp.isPureReactComponent=!0;var Ug=Array.isArray,Zw=Object.prototype.hasOwnProperty,Cp={current:null},qw={key:!0,ref:!0,__self:!0,__source:!0};function Gw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Zw.call(e,i)&&!qw.hasOwnProperty(i)&&(r[i]=e[i]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)r[i]===void 0&&(r[i]=c[i]);return{$$typeof:Ba,type:t,key:o,ref:l,props:r,_owner:Cp.current}}function bP(t,e){return{$$typeof:Ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ba}function RP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bg=/\/+/g;function Bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?RP(""+t.key):e.toString(36)}function Vl(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ba:case vP:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+Bh(l,0):i,Ug(r)?(n="",t!=null&&(n=t.replace(Bg,"$&/")+"/"),Vl(r,e,n,"",function(f){return f})):r!=null&&(Ip(r)&&(r=bP(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(Bg,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",Ug(t))for(var c=0;c<t.length;c++){o=t[c];var h=i+Bh(o,c);l+=Vl(o,e,n,h,r)}else if(h=kP(t),typeof h=="function")for(t=h.call(t),c=0;!(o=t.next()).done;)o=o.value,h=i+Bh(o,c++),l+=Vl(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Sl(t,e,n){if(t==null)return t;var i=[],r=0;return Vl(t,i,"","",function(o){return e.call(n,o,r++)}),i}function LP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Zl={transition:null},NP={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:Cp};de.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!Ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Ks;de.Fragment=yP;de.Profiler=EP;de.PureComponent=Sp;de.StrictMode=wP;de.Suspense=IP;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NP;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Hw({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Cp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)Zw.call(e,h)&&!qw.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:Ba,type:t.type,key:r,ref:o,props:i,_owner:l}};de.createContext=function(t){return t={$$typeof:TP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SP,_context:t},t.Consumer=t};de.createElement=Gw;de.createFactory=function(t){var e=Gw.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:CP,render:t}};de.isValidElement=Ip;de.lazy=function(t){return{$$typeof:PP,_payload:{_status:-1,_result:t},_init:LP}};de.memo=function(t,e){return{$$typeof:xP,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(t,e){return kt.current.useCallback(t,e)};de.useContext=function(t){return kt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};de.useEffect=function(t,e){return kt.current.useEffect(t,e)};de.useId=function(){return kt.current.useId()};de.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return kt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};de.useRef=function(t){return kt.current.useRef(t)};de.useState=function(t){return kt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return kt.current.useTransition()};de.version="18.2.0";jw.exports=de;var k=jw.exports;const ee=Uw(k),OP=zw({__proto__:null,default:ee},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AP=k,MP=Symbol.for("react.element"),DP=Symbol.for("react.fragment"),FP=Object.prototype.hasOwnProperty,zP=AP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UP={key:!0,ref:!0,__self:!0,__source:!0};function Kw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)FP.call(e,i)&&!UP.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:MP,type:t,key:o,ref:l,props:r,_owner:zP.current}}fc.Fragment=DP;fc.jsx=Kw;fc.jsxs=Kw;Bw.exports=fc;var x=Bw.exports,Bd={},Yw={exports:{}},Zt={},Qw={exports:{}},Jw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,G){var D=O.length;O.push(G);e:for(;0<D;){var J=D-1>>>1,fe=O[J];if(0<r(fe,G))O[J]=G,O[D]=fe,D=J;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var G=O[0],D=O.pop();if(D!==G){O[0]=D;e:for(var J=0,fe=O.length,$e=fe>>>1;J<$e;){var ye=2*(J+1)-1,ue=O[ye],ne=ye+1,Xe=O[ne];if(0>r(ue,D))ne<fe&&0>r(Xe,ue)?(O[J]=Xe,O[ne]=D,J=ne):(O[J]=ue,O[ye]=D,J=ye);else if(ne<fe&&0>r(Xe,D))O[J]=Xe,O[ne]=D,J=ne;else break e}}return G}function r(O,G){var D=O.sortIndex-G.sortIndex;return D!==0?D:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,_=null,v=3,E=!1,w=!1,I=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var G=n(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=O)i(f),G.sortIndex=G.expirationTime,e(h,G);else break;G=n(f)}}function R(O){if(I=!1,C(O),!w)if(n(h)!==null)w=!0,Ne(F);else{var G=n(f);G!==null&&He(R,G.startTime-O)}}function F(O,G){w=!1,I&&(I=!1,S(z),z=-1),E=!0;var D=v;try{for(C(G),_=n(h);_!==null&&(!(_.expirationTime>G)||O&&!W());){var J=_.callback;if(typeof J=="function"){_.callback=null,v=_.priorityLevel;var fe=J(_.expirationTime<=G);G=t.unstable_now(),typeof fe=="function"?_.callback=fe:_===n(h)&&i(h),C(G)}else i(h);_=n(h)}if(_!==null)var $e=!0;else{var ye=n(f);ye!==null&&He(R,ye.startTime-G),$e=!1}return $e}finally{_=null,v=D,E=!1}}var j=!1,H=null,z=-1,$=5,V=-1;function W(){return!(t.unstable_now()-V<$)}function se(){if(H!==null){var O=t.unstable_now();V=O;var G=!0;try{G=H(!0,O)}finally{G?Ie():(j=!1,H=null)}}else j=!1}var Ie;if(typeof y=="function")Ie=function(){y(se)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Je=Ce.port2;Ce.port1.onmessage=se,Ie=function(){Je.postMessage(null)}}else Ie=function(){N(se,0)};function Ne(O){H=O,j||(j=!0,Ie())}function He(O,G){z=N(function(){O(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){w||E||(w=!0,Ne(F))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(O){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var D=v;v=G;try{return O()}finally{v=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var D=v;v=O;try{return G()}finally{v=D}},t.unstable_scheduleCallback=function(O,G,D){var J=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?J+D:J):D=J,O){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=D+fe,O={id:m++,callback:G,priorityLevel:O,startTime:D,expirationTime:fe,sortIndex:-1},D>J?(O.sortIndex=D,e(f,O),n(h)===null&&O===n(f)&&(I?(S(z),z=-1):I=!0,He(R,D-J))):(O.sortIndex=fe,e(h,O),w||E||(w=!0,Ne(F))),O},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(O){var G=v;return function(){var D=v;v=G;try{return O.apply(this,arguments)}finally{v=D}}}})(Jw);Qw.exports=Jw;var BP=Qw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw=k,Vt=BP;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e0=new Set,aa={};function Br(t,e){Os(t,e),Os(t+"Capture",e)}function Os(t,e){for(aa[t]=e,t=0;t<e.length;t++)e0.add(e[t])}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jd=Object.prototype.hasOwnProperty,jP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jg={},Wg={};function WP(t){return jd.call(Wg,t)?!0:jd.call(jg,t)?!1:jP.test(t)?Wg[t]=!0:(jg[t]=!0,!1)}function HP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $P(t,e,n,i){if(e===null||typeof e>"u"||HP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var xp=/[\-:]([a-z])/g;function Pp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xp,Pp);_t[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xp,Pp);_t[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xp,Pp);_t[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function kp(t,e,n,i){var r=_t.hasOwnProperty(e)?_t[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($P(e,n,r,i)&&(n=null),i||r===null?WP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var hi=Xw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tl=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),bp=Symbol.for("react.strict_mode"),Wd=Symbol.for("react.profiler"),t0=Symbol.for("react.provider"),n0=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),Hd=Symbol.for("react.suspense"),$d=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),i0=Symbol.for("react.offscreen"),Hg=Symbol.iterator;function So(t){return t===null||typeof t!="object"?null:(t=Hg&&t[Hg]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,jh;function Fo(t){if(jh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jh=e&&e[1]||""}return`
`+jh+t}var Wh=!1;function Hh(t,e){if(!t||Wh)return"";Wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,c=o.length-1;1<=l&&0<=c&&r[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(r[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||r[l]!==o[c]){var h=`
`+r[l].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=l&&0<=c);break}}}finally{Wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fo(t):""}function VP(t){switch(t.tag){case 5:return Fo(t.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return t=Hh(t.type,!1),t;case 11:return t=Hh(t.type.render,!1),t;case 1:return t=Hh(t.type,!0),t;default:return""}}function Vd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ls:return"Fragment";case as:return"Portal";case Wd:return"Profiler";case bp:return"StrictMode";case Hd:return"Suspense";case $d:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n0:return(t.displayName||"Context")+".Consumer";case t0:return(t._context.displayName||"Context")+".Provider";case Rp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lp:return e=t.displayName||null,e!==null?e:Vd(t.type)||"Memo";case Ei:e=t._payload,t=t._init;try{return Vd(t(e))}catch{}}return null}function ZP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vd(e);case 8:return e===bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qP(t){var e=r0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=qP(t))}function s0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=r0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function hu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zd(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $g(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Zi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o0(t,e){e=e.checked,e!=null&&kp(t,"checked",e,!1)}function qd(t,e){o0(t,e);var n=Zi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gd(t,e.type,Zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gd(t,e,n){(e!=="number"||hu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zo=Array.isArray;function Es(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Zi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Kd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(zo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zi(n)}}function a0(t,e){var n=Zi(e.value),i=Zi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function qg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function l0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?l0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Il,u0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function la(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GP=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){GP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function c0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function h0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=c0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var KP=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qd(t,e){if(e){if(KP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Jd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xd=null;function Np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ef=null,Ss=null,Ts=null;function Gg(t){if(t=Ha(t)){if(typeof ef!="function")throw Error(U(280));var e=t.stateNode;e&&(e=vc(e),ef(t.stateNode,t.type,e))}}function d0(t){Ss?Ts?Ts.push(t):Ts=[t]:Ss=t}function f0(){if(Ss){var t=Ss,e=Ts;if(Ts=Ss=null,Gg(t),e)for(t=0;t<e.length;t++)Gg(e[t])}}function p0(t,e){return t(e)}function m0(){}var $h=!1;function _0(t,e,n){if($h)return t(e,n);$h=!0;try{return p0(t,e,n)}finally{$h=!1,(Ss!==null||Ts!==null)&&(m0(),f0())}}function ua(t,e){var n=t.stateNode;if(n===null)return null;var i=vc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var tf=!1;if(si)try{var To={};Object.defineProperty(To,"passive",{get:function(){tf=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{tf=!1}function YP(t,e,n,i,r,o,l,c,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Zo=!1,du=null,fu=!1,nf=null,QP={onError:function(t){Zo=!0,du=t}};function JP(t,e,n,i,r,o,l,c,h){Zo=!1,du=null,YP.apply(QP,arguments)}function XP(t,e,n,i,r,o,l,c,h){if(JP.apply(this,arguments),Zo){if(Zo){var f=du;Zo=!1,du=null}else throw Error(U(198));fu||(fu=!0,nf=f)}}function jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function g0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kg(t){if(jr(t)!==t)throw Error(U(188))}function e1(t){var e=t.alternate;if(!e){if(e=jr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Kg(r),t;if(o===i)return Kg(r),e;o=o.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,c=r.child;c;){if(c===n){l=!0,n=r,i=o;break}if(c===i){l=!0,i=r,n=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===n){l=!0,n=o,i=r;break}if(c===i){l=!0,i=o,n=r;break}c=c.sibling}if(!l)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function v0(t){return t=e1(t),t!==null?y0(t):null}function y0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y0(t);if(e!==null)return e;t=t.sibling}return null}var w0=Vt.unstable_scheduleCallback,Yg=Vt.unstable_cancelCallback,t1=Vt.unstable_shouldYield,n1=Vt.unstable_requestPaint,Ze=Vt.unstable_now,i1=Vt.unstable_getCurrentPriorityLevel,Op=Vt.unstable_ImmediatePriority,E0=Vt.unstable_UserBlockingPriority,pu=Vt.unstable_NormalPriority,r1=Vt.unstable_LowPriority,S0=Vt.unstable_IdlePriority,pc=null,Fn=null;function s1(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(pc,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:l1,o1=Math.log,a1=Math.LN2;function l1(t){return t>>>=0,t===0?32:31-(o1(t)/a1|0)|0}var xl=64,Pl=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~r;c!==0?i=Uo(c):(o&=l,o!==0&&(i=Uo(o)))}else l=n&~r,l!==0?i=Uo(l):o!==0&&(i=Uo(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-vn(e),r=1<<n,i|=t[n],e&=~r;return i}function u1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-vn(o),c=1<<l,h=r[l];h===-1?(!(c&n)||c&i)&&(r[l]=u1(c,e)):h<=e&&(t.expiredLanes|=c),o&=~c}}function rf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T0(){var t=xl;return xl<<=1,!(xl&4194240)&&(xl=64),t}function Vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ja(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function h1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-vn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Ap(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-vn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ee=0;function C0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I0,Mp,x0,P0,k0,sf=!1,kl=[],Ai=null,Mi=null,Di=null,ca=new Map,ha=new Map,Ti=[],d1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qg(t,e){switch(t){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(e.pointerId)}}function Co(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Ha(e),e!==null&&Mp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function f1(t,e,n,i,r){switch(e){case"focusin":return Ai=Co(Ai,t,e,n,i,r),!0;case"dragenter":return Mi=Co(Mi,t,e,n,i,r),!0;case"mouseover":return Di=Co(Di,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ca.set(o,Co(ca.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ha.set(o,Co(ha.get(o)||null,t,e,n,i,r)),!0}return!1}function b0(t){var e=dr(t.target);if(e!==null){var n=jr(e);if(n!==null){if(e=n.tag,e===13){if(e=g0(n),e!==null){t.blockedOn=e,k0(t.priority,function(){x0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ql(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=of(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Xd=i,n.target.dispatchEvent(i),Xd=null}else return e=Ha(n),e!==null&&Mp(e),t.blockedOn=n,!1;e.shift()}return!0}function Jg(t,e,n){ql(t)&&n.delete(e)}function p1(){sf=!1,Ai!==null&&ql(Ai)&&(Ai=null),Mi!==null&&ql(Mi)&&(Mi=null),Di!==null&&ql(Di)&&(Di=null),ca.forEach(Jg),ha.forEach(Jg)}function Io(t,e){t.blockedOn===e&&(t.blockedOn=null,sf||(sf=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,p1)))}function da(t){function e(r){return Io(r,t)}if(0<kl.length){Io(kl[0],t);for(var n=1;n<kl.length;n++){var i=kl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ai!==null&&Io(Ai,t),Mi!==null&&Io(Mi,t),Di!==null&&Io(Di,t),ca.forEach(e),ha.forEach(e),n=0;n<Ti.length;n++)i=Ti[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)b0(n),n.blockedOn===null&&Ti.shift()}var Cs=hi.ReactCurrentBatchConfig,_u=!0;function m1(t,e,n,i){var r=Ee,o=Cs.transition;Cs.transition=null;try{Ee=1,Dp(t,e,n,i)}finally{Ee=r,Cs.transition=o}}function _1(t,e,n,i){var r=Ee,o=Cs.transition;Cs.transition=null;try{Ee=4,Dp(t,e,n,i)}finally{Ee=r,Cs.transition=o}}function Dp(t,e,n,i){if(_u){var r=of(t,e,n,i);if(r===null)td(t,e,i,gu,n),Qg(t,i);else if(f1(r,t,e,n,i))i.stopPropagation();else if(Qg(t,i),e&4&&-1<d1.indexOf(t)){for(;r!==null;){var o=Ha(r);if(o!==null&&I0(o),o=of(t,e,n,i),o===null&&td(t,e,i,gu,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else td(t,e,i,null,n)}}var gu=null;function of(t,e,n,i){if(gu=null,t=Np(i),t=dr(t),t!==null)if(e=jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=g0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gu=t,null}function R0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i1()){case Op:return 1;case E0:return 4;case pu:case r1:return 16;case S0:return 536870912;default:return 16}default:return 16}}var Ri=null,Fp=null,Gl=null;function L0(){if(Gl)return Gl;var t,e=Fp,n=e.length,i,r="value"in Ri?Ri.value:Ri.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return Gl=r.slice(t,1<i?1-i:void 0)}function Kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bl(){return!0}function Xg(){return!1}function qt(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bl:Xg,this.isPropagationStopped=Xg,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zp=qt(Ys),Wa=Fe({},Ys,{view:0,detail:0}),g1=qt(Wa),Zh,qh,xo,mc=Fe({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xo&&(xo&&t.type==="mousemove"?(Zh=t.screenX-xo.screenX,qh=t.screenY-xo.screenY):qh=Zh=0,xo=t),Zh)},movementY:function(t){return"movementY"in t?t.movementY:qh}}),ev=qt(mc),v1=Fe({},mc,{dataTransfer:0}),y1=qt(v1),w1=Fe({},Wa,{relatedTarget:0}),Gh=qt(w1),E1=Fe({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),S1=qt(E1),T1=Fe({},Ys,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C1=qt(T1),I1=Fe({},Ys,{data:0}),tv=qt(I1),x1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k1[t])?!!e[t]:!1}function Up(){return b1}var R1=Fe({},Wa,{key:function(t){if(t.key){var e=x1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?P1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Up,charCode:function(t){return t.type==="keypress"?Kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L1=qt(R1),N1=Fe({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nv=qt(N1),O1=Fe({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Up}),A1=qt(O1),M1=Fe({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),D1=qt(M1),F1=Fe({},mc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z1=qt(F1),U1=[9,13,27,32],Bp=si&&"CompositionEvent"in window,qo=null;si&&"documentMode"in document&&(qo=document.documentMode);var B1=si&&"TextEvent"in window&&!qo,N0=si&&(!Bp||qo&&8<qo&&11>=qo),iv=String.fromCharCode(32),rv=!1;function O0(t,e){switch(t){case"keyup":return U1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function j1(t,e){switch(t){case"compositionend":return A0(e);case"keypress":return e.which!==32?null:(rv=!0,iv);case"textInput":return t=e.data,t===iv&&rv?null:t;default:return null}}function W1(t,e){if(us)return t==="compositionend"||!Bp&&O0(t,e)?(t=L0(),Gl=Fp=Ri=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return N0&&e.locale!=="ko"?null:e.data;default:return null}}var H1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H1[t.type]:e==="textarea"}function M0(t,e,n,i){d0(i),e=vu(e,"onChange"),0<e.length&&(n=new zp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Go=null,fa=null;function $1(t){Z0(t,0)}function _c(t){var e=ds(t);if(s0(e))return t}function V1(t,e){if(t==="change")return e}var D0=!1;if(si){var Kh;if(si){var Yh="oninput"in document;if(!Yh){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),Yh=typeof ov.oninput=="function"}Kh=Yh}else Kh=!1;D0=Kh&&(!document.documentMode||9<document.documentMode)}function av(){Go&&(Go.detachEvent("onpropertychange",F0),fa=Go=null)}function F0(t){if(t.propertyName==="value"&&_c(fa)){var e=[];M0(e,fa,t,Np(t)),_0($1,e)}}function Z1(t,e,n){t==="focusin"?(av(),Go=e,fa=n,Go.attachEvent("onpropertychange",F0)):t==="focusout"&&av()}function q1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _c(fa)}function G1(t,e){if(t==="click")return _c(e)}function K1(t,e){if(t==="input"||t==="change")return _c(e)}function Y1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:Y1;function pa(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!jd.call(e,r)||!En(t[r],e[r]))return!1}return!0}function lv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uv(t,e){var n=lv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lv(n)}}function z0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U0(){for(var t=window,e=hu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hu(t.document)}return e}function jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q1(t){var e=U0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z0(n.ownerDocument.documentElement,n)){if(i!==null&&jp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=uv(n,o);var l=uv(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var J1=si&&"documentMode"in document&&11>=document.documentMode,cs=null,af=null,Ko=null,lf=!1;function cv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lf||cs==null||cs!==hu(i)||(i=cs,"selectionStart"in i&&jp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ko&&pa(Ko,i)||(Ko=i,i=vu(af,"onSelect"),0<i.length&&(e=new zp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=cs)))}function Rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hs={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},Qh={},B0={};si&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function gc(t){if(Qh[t])return Qh[t];if(!hs[t])return t;var e=hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B0)return Qh[t]=e[n];return t}var j0=gc("animationend"),W0=gc("animationiteration"),H0=gc("animationstart"),$0=gc("transitionend"),V0=new Map,hv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(t,e){V0.set(t,e),Br(e,[t])}for(var Jh=0;Jh<hv.length;Jh++){var Xh=hv[Jh],X1=Xh.toLowerCase(),ek=Xh[0].toUpperCase()+Xh.slice(1);Yi(X1,"on"+ek)}Yi(j0,"onAnimationEnd");Yi(W0,"onAnimationIteration");Yi(H0,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi($0,"onTransitionEnd");Os("onMouseEnter",["mouseout","mouseover"]);Os("onMouseLeave",["mouseout","mouseover"]);Os("onPointerEnter",["pointerout","pointerover"]);Os("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function dv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,XP(i,e,void 0,t),t.currentTarget=null}function Z0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var c=i[l],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==o&&r.isPropagationStopped())break e;dv(r,c,f),o=h}else for(l=0;l<i.length;l++){if(c=i[l],h=c.instance,f=c.currentTarget,c=c.listener,h!==o&&r.isPropagationStopped())break e;dv(r,c,f),o=h}}}if(fu)throw t=nf,fu=!1,nf=null,t}function Re(t,e){var n=e[ff];n===void 0&&(n=e[ff]=new Set);var i=t+"__bubble";n.has(i)||(q0(e,t,2,!1),n.add(i))}function ed(t,e,n){var i=0;e&&(i|=4),q0(n,t,i,e)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function ma(t){if(!t[Ll]){t[Ll]=!0,e0.forEach(function(n){n!=="selectionchange"&&(tk.has(n)||ed(n,!1,t),ed(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ll]||(e[Ll]=!0,ed("selectionchange",!1,e))}}function q0(t,e,n,i){switch(R0(e)){case 1:var r=m1;break;case 4:r=_1;break;default:r=Dp}n=r.bind(null,e,n,t),r=void 0,!tf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function td(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;l=l.return}for(;c!==null;){if(l=dr(c),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}c=c.parentNode}}i=i.return}_0(function(){var f=o,m=Np(n),_=[];e:{var v=V0.get(t);if(v!==void 0){var E=zp,w=t;switch(t){case"keypress":if(Kl(n)===0)break e;case"keydown":case"keyup":E=L1;break;case"focusin":w="focus",E=Gh;break;case"focusout":w="blur",E=Gh;break;case"beforeblur":case"afterblur":E=Gh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=y1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=A1;break;case j0:case W0:case H0:E=S1;break;case $0:E=D1;break;case"scroll":E=g1;break;case"wheel":E=z1;break;case"copy":case"cut":case"paste":E=C1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=nv}var I=(e&4)!==0,N=!I&&t==="scroll",S=I?v!==null?v+"Capture":null:v;I=[];for(var y=f,C;y!==null;){C=y;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,S!==null&&(R=ua(y,S),R!=null&&I.push(_a(y,R,C)))),N)break;y=y.return}0<I.length&&(v=new E(v,w,null,n,m),_.push({event:v,listeners:I}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",v&&n!==Xd&&(w=n.relatedTarget||n.fromElement)&&(dr(w)||w[oi]))break e;if((E||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,E?(w=n.relatedTarget||n.toElement,E=f,w=w?dr(w):null,w!==null&&(N=jr(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(E=null,w=f),E!==w)){if(I=ev,R="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(I=nv,R="onPointerLeave",S="onPointerEnter",y="pointer"),N=E==null?v:ds(E),C=w==null?v:ds(w),v=new I(R,y+"leave",E,n,m),v.target=N,v.relatedTarget=C,R=null,dr(m)===f&&(I=new I(S,y+"enter",w,n,m),I.target=C,I.relatedTarget=N,R=I),N=R,E&&w)t:{for(I=E,S=w,y=0,C=I;C;C=is(C))y++;for(C=0,R=S;R;R=is(R))C++;for(;0<y-C;)I=is(I),y--;for(;0<C-y;)S=is(S),C--;for(;y--;){if(I===S||S!==null&&I===S.alternate)break t;I=is(I),S=is(S)}I=null}else I=null;E!==null&&fv(_,v,E,I,!1),w!==null&&N!==null&&fv(_,N,w,I,!0)}}e:{if(v=f?ds(f):window,E=v.nodeName&&v.nodeName.toLowerCase(),E==="select"||E==="input"&&v.type==="file")var F=V1;else if(sv(v))if(D0)F=K1;else{F=q1;var j=Z1}else(E=v.nodeName)&&E.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(F=G1);if(F&&(F=F(t,f))){M0(_,F,n,m);break e}j&&j(t,v,f),t==="focusout"&&(j=v._wrapperState)&&j.controlled&&v.type==="number"&&Gd(v,"number",v.value)}switch(j=f?ds(f):window,t){case"focusin":(sv(j)||j.contentEditable==="true")&&(cs=j,af=f,Ko=null);break;case"focusout":Ko=af=cs=null;break;case"mousedown":lf=!0;break;case"contextmenu":case"mouseup":case"dragend":lf=!1,cv(_,n,m);break;case"selectionchange":if(J1)break;case"keydown":case"keyup":cv(_,n,m)}var H;if(Bp)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else us?O0(t,n)&&(z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(N0&&n.locale!=="ko"&&(us||z!=="onCompositionStart"?z==="onCompositionEnd"&&us&&(H=L0()):(Ri=m,Fp="value"in Ri?Ri.value:Ri.textContent,us=!0)),j=vu(f,z),0<j.length&&(z=new tv(z,t,null,n,m),_.push({event:z,listeners:j}),H?z.data=H:(H=A0(n),H!==null&&(z.data=H)))),(H=B1?j1(t,n):W1(t,n))&&(f=vu(f,"onBeforeInput"),0<f.length&&(m=new tv("onBeforeInput","beforeinput",null,n,m),_.push({event:m,listeners:f}),m.data=H))}Z0(_,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ua(t,n),o!=null&&i.unshift(_a(t,o,r)),o=ua(t,e),o!=null&&i.push(_a(t,o,r))),t=t.return}return i}function is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fv(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var c=n,h=c.alternate,f=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&f!==null&&(c=f,r?(h=ua(n,o),h!=null&&l.unshift(_a(n,h,c))):r||(h=ua(n,o),h!=null&&l.push(_a(n,h,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var nk=/\r\n?/g,ik=/\u0000|\uFFFD/g;function pv(t){return(typeof t=="string"?t:""+t).replace(nk,`
`).replace(ik,"")}function Nl(t,e,n){if(e=pv(e),pv(t)!==e&&n)throw Error(U(425))}function yu(){}var uf=null,cf=null;function hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var df=typeof setTimeout=="function"?setTimeout:void 0,rk=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,sk=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(t){return mv.resolve(null).then(t).catch(ok)}:df;function ok(t){setTimeout(function(){throw t})}function nd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),da(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);da(e)}function Fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _v(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qs=Math.random().toString(36).slice(2),On="__reactFiber$"+Qs,ga="__reactProps$"+Qs,oi="__reactContainer$"+Qs,ff="__reactEvents$"+Qs,ak="__reactListeners$"+Qs,lk="__reactHandles$"+Qs;function dr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[oi]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_v(t);t!==null;){if(n=t[On])return n;t=_v(t)}return e}t=n,n=t.parentNode}return null}function Ha(t){return t=t[On]||t[oi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function vc(t){return t[ga]||null}var pf=[],fs=-1;function Qi(t){return{current:t}}function Le(t){0>fs||(t.current=pf[fs],pf[fs]=null,fs--)}function be(t,e){fs++,pf[fs]=t.current,t.current=e}var qi={},Et=Qi(qi),Mt=Qi(!1),Ir=qi;function As(t,e){var n=t.type.contextTypes;if(!n)return qi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dt(t){return t=t.childContextTypes,t!=null}function wu(){Le(Mt),Le(Et)}function gv(t,e,n){if(Et.current!==qi)throw Error(U(168));be(Et,e),be(Mt,n)}function G0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,ZP(t)||"Unknown",r));return Fe({},n,i)}function Eu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qi,Ir=Et.current,be(Et,t),be(Mt,Mt.current),!0}function vv(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=G0(t,e,Ir),i.__reactInternalMemoizedMergedChildContext=t,Le(Mt),Le(Et),be(Et,t)):Le(Mt),be(Mt,n)}var Kn=null,yc=!1,id=!1;function K0(t){Kn===null?Kn=[t]:Kn.push(t)}function uk(t){yc=!0,K0(t)}function Ji(){if(!id&&Kn!==null){id=!0;var t=0,e=Ee;try{var n=Kn;for(Ee=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Kn=null,yc=!1}catch(r){throw Kn!==null&&(Kn=Kn.slice(t+1)),w0(Op,Ji),r}finally{Ee=e,id=!1}}return null}var ps=[],ms=0,Su=null,Tu=0,Jt=[],Xt=0,xr=null,Yn=1,Qn="";function lr(t,e){ps[ms++]=Tu,ps[ms++]=Su,Su=t,Tu=e}function Y0(t,e,n){Jt[Xt++]=Yn,Jt[Xt++]=Qn,Jt[Xt++]=xr,xr=t;var i=Yn;t=Qn;var r=32-vn(i)-1;i&=~(1<<r),n+=1;var o=32-vn(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,Yn=1<<32-vn(e)+r|n<<r|i,Qn=o+t}else Yn=1<<o|n<<r|i,Qn=t}function Wp(t){t.return!==null&&(lr(t,1),Y0(t,1,0))}function Hp(t){for(;t===Su;)Su=ps[--ms],ps[ms]=null,Tu=ps[--ms],ps[ms]=null;for(;t===xr;)xr=Jt[--Xt],Jt[Xt]=null,Qn=Jt[--Xt],Jt[Xt]=null,Yn=Jt[--Xt],Jt[Xt]=null}var Ht=null,jt=null,Oe=!1,mn=null;function Q0(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,jt=Fi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xr!==null?{id:Yn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,jt=null,!0):!1;default:return!1}}function mf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _f(t){if(Oe){var e=jt;if(e){var n=e;if(!yv(t,e)){if(mf(t))throw Error(U(418));e=Fi(n.nextSibling);var i=Ht;e&&yv(t,e)?Q0(i,n):(t.flags=t.flags&-4097|2,Oe=!1,Ht=t)}}else{if(mf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Oe=!1,Ht=t}}}function wv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function Ol(t){if(t!==Ht)return!1;if(!Oe)return wv(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hf(t.type,t.memoizedProps)),e&&(e=jt)){if(mf(t))throw J0(),Error(U(418));for(;e;)Q0(t,e),e=Fi(e.nextSibling)}if(wv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Ht?Fi(t.stateNode.nextSibling):null;return!0}function J0(){for(var t=jt;t;)t=Fi(t.nextSibling)}function Ms(){jt=Ht=null,Oe=!1}function $p(t){mn===null?mn=[t]:mn.push(t)}var ck=hi.ReactCurrentBatchConfig;function dn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Cu=Qi(null),Iu=null,_s=null,Vp=null;function Zp(){Vp=_s=Iu=null}function qp(t){var e=Cu.current;Le(Cu),t._currentValue=e}function gf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){Iu=t,Vp=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(Vp!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(Iu===null)throw Error(U(308));_s=t,Iu.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var fr=null;function Gp(t){fr===null?fr=[t]:fr.push(t)}function X0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Gp(e)):(n.next=r.next,r.next=n),e.interleaved=n,ai(t,i)}function ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function Kp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ti(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ai(t,n)}return r=i.interleaved,r===null?(e.next=e,Gp(i)):(e.next=r.next,r.next=e),i.interleaved=e,ai(t,n)}function Yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ap(t,n)}}function Ev(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xu(t,e,n,i){var r=t.updateQueue;Si=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var h=c,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==l&&(c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=h))}if(o!==null){var _=r.baseState;l=0,m=f=h=null,c=o;do{var v=c.lane,E=c.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=t,I=c;switch(v=e,E=n,I.tag){case 1:if(w=I.payload,typeof w=="function"){_=w.call(E,_,v);break e}_=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,v=typeof w=="function"?w.call(E,_,v):w,v==null)break e;_=Fe({},_,v);break e;case 2:Si=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[c]:v.push(c))}else E={eventTime:E,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(f=m=E,h=_):m=m.next=E,l|=v;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;v=c,c=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(1);if(m===null&&(h=_),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);kr|=l,t.lanes=l,t.memoizedState=_}}function Sv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var tE=new Xw.Component().refs;function vf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wc={isMounted:function(t){return(t=t._reactInternals)?jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=xt(),r=Bi(t),o=ti(i,r);o.payload=e,n!=null&&(o.callback=n),e=zi(t,o,r),e!==null&&(yn(e,t,r,i),Yl(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=xt(),r=Bi(t),o=ti(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=zi(t,o,r),e!==null&&(yn(e,t,r,i),Yl(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),i=Bi(t),r=ti(n,i);r.tag=2,e!=null&&(r.callback=e),e=zi(t,r,i),e!==null&&(yn(e,t,i,n),Yl(e,t,i))}};function Tv(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!pa(n,i)||!pa(r,o):!0}function nE(t,e,n){var i=!1,r=qi,o=e.contextType;return typeof o=="object"&&o!==null?o=sn(o):(r=Dt(e)?Ir:Et.current,i=e.contextTypes,o=(i=i!=null)?As(t,r):qi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Cv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&wc.enqueueReplaceState(e,e.state,null)}function yf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=tE,Kp(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=sn(o):(o=Dt(e)?Ir:Et.current,r.context=As(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(vf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&wc.enqueueReplaceState(r,r.state,null),xu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Po(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=r.refs;c===tE&&(c=r.refs={}),l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Al(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Iv(t){var e=t._init;return e(t._payload)}function iE(t){function e(S,y){if(t){var C=S.deletions;C===null?(S.deletions=[y],S.flags|=16):C.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function i(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function r(S,y){return S=ji(S,y),S.index=0,S.sibling=null,S}function o(S,y,C){return S.index=C,t?(C=S.alternate,C!==null?(C=C.index,C<y?(S.flags|=2,y):C):(S.flags|=2,y)):(S.flags|=1048576,y)}function l(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,y,C,R){return y===null||y.tag!==6?(y=cd(C,S.mode,R),y.return=S,y):(y=r(y,C),y.return=S,y)}function h(S,y,C,R){var F=C.type;return F===ls?m(S,y,C.props.children,R,C.key):y!==null&&(y.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ei&&Iv(F)===y.type)?(R=r(y,C.props),R.ref=Po(S,y,C),R.return=S,R):(R=nu(C.type,C.key,C.props,null,S.mode,R),R.ref=Po(S,y,C),R.return=S,R)}function f(S,y,C,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=hd(C,S.mode,R),y.return=S,y):(y=r(y,C.children||[]),y.return=S,y)}function m(S,y,C,R,F){return y===null||y.tag!==7?(y=wr(C,S.mode,R,F),y.return=S,y):(y=r(y,C),y.return=S,y)}function _(S,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=cd(""+y,S.mode,C),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tl:return C=nu(y.type,y.key,y.props,null,S.mode,C),C.ref=Po(S,null,y),C.return=S,C;case as:return y=hd(y,S.mode,C),y.return=S,y;case Ei:var R=y._init;return _(S,R(y._payload),C)}if(zo(y)||So(y))return y=wr(y,S.mode,C,null),y.return=S,y;Al(S,y)}return null}function v(S,y,C,R){var F=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:c(S,y,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Tl:return C.key===F?h(S,y,C,R):null;case as:return C.key===F?f(S,y,C,R):null;case Ei:return F=C._init,v(S,y,F(C._payload),R)}if(zo(C)||So(C))return F!==null?null:m(S,y,C,R,null);Al(S,C)}return null}function E(S,y,C,R,F){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(C)||null,c(y,S,""+R,F);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Tl:return S=S.get(R.key===null?C:R.key)||null,h(y,S,R,F);case as:return S=S.get(R.key===null?C:R.key)||null,f(y,S,R,F);case Ei:var j=R._init;return E(S,y,C,j(R._payload),F)}if(zo(R)||So(R))return S=S.get(C)||null,m(y,S,R,F,null);Al(y,R)}return null}function w(S,y,C,R){for(var F=null,j=null,H=y,z=y=0,$=null;H!==null&&z<C.length;z++){H.index>z?($=H,H=null):$=H.sibling;var V=v(S,H,C[z],R);if(V===null){H===null&&(H=$);break}t&&H&&V.alternate===null&&e(S,H),y=o(V,y,z),j===null?F=V:j.sibling=V,j=V,H=$}if(z===C.length)return n(S,H),Oe&&lr(S,z),F;if(H===null){for(;z<C.length;z++)H=_(S,C[z],R),H!==null&&(y=o(H,y,z),j===null?F=H:j.sibling=H,j=H);return Oe&&lr(S,z),F}for(H=i(S,H);z<C.length;z++)$=E(H,S,z,C[z],R),$!==null&&(t&&$.alternate!==null&&H.delete($.key===null?z:$.key),y=o($,y,z),j===null?F=$:j.sibling=$,j=$);return t&&H.forEach(function(W){return e(S,W)}),Oe&&lr(S,z),F}function I(S,y,C,R){var F=So(C);if(typeof F!="function")throw Error(U(150));if(C=F.call(C),C==null)throw Error(U(151));for(var j=F=null,H=y,z=y=0,$=null,V=C.next();H!==null&&!V.done;z++,V=C.next()){H.index>z?($=H,H=null):$=H.sibling;var W=v(S,H,V.value,R);if(W===null){H===null&&(H=$);break}t&&H&&W.alternate===null&&e(S,H),y=o(W,y,z),j===null?F=W:j.sibling=W,j=W,H=$}if(V.done)return n(S,H),Oe&&lr(S,z),F;if(H===null){for(;!V.done;z++,V=C.next())V=_(S,V.value,R),V!==null&&(y=o(V,y,z),j===null?F=V:j.sibling=V,j=V);return Oe&&lr(S,z),F}for(H=i(S,H);!V.done;z++,V=C.next())V=E(H,S,z,V.value,R),V!==null&&(t&&V.alternate!==null&&H.delete(V.key===null?z:V.key),y=o(V,y,z),j===null?F=V:j.sibling=V,j=V);return t&&H.forEach(function(se){return e(S,se)}),Oe&&lr(S,z),F}function N(S,y,C,R){if(typeof C=="object"&&C!==null&&C.type===ls&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Tl:e:{for(var F=C.key,j=y;j!==null;){if(j.key===F){if(F=C.type,F===ls){if(j.tag===7){n(S,j.sibling),y=r(j,C.props.children),y.return=S,S=y;break e}}else if(j.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ei&&Iv(F)===j.type){n(S,j.sibling),y=r(j,C.props),y.ref=Po(S,j,C),y.return=S,S=y;break e}n(S,j);break}else e(S,j);j=j.sibling}C.type===ls?(y=wr(C.props.children,S.mode,R,C.key),y.return=S,S=y):(R=nu(C.type,C.key,C.props,null,S.mode,R),R.ref=Po(S,y,C),R.return=S,S=R)}return l(S);case as:e:{for(j=C.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(S,y.sibling),y=r(y,C.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=hd(C,S.mode,R),y.return=S,S=y}return l(S);case Ei:return j=C._init,N(S,y,j(C._payload),R)}if(zo(C))return w(S,y,C,R);if(So(C))return I(S,y,C,R);Al(S,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(n(S,y.sibling),y=r(y,C),y.return=S,S=y):(n(S,y),y=cd(C,S.mode,R),y.return=S,S=y),l(S)):n(S,y)}return N}var Ds=iE(!0),rE=iE(!1),$a={},zn=Qi($a),va=Qi($a),ya=Qi($a);function pr(t){if(t===$a)throw Error(U(174));return t}function Yp(t,e){switch(be(ya,e),be(va,t),be(zn,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yd(e,t)}Le(zn),be(zn,e)}function Fs(){Le(zn),Le(va),Le(ya)}function sE(t){pr(ya.current);var e=pr(zn.current),n=Yd(e,t.type);e!==n&&(be(va,t),be(zn,n))}function Qp(t){va.current===t&&(Le(zn),Le(va))}var Me=Qi(0);function Pu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function Jp(){for(var t=0;t<rd.length;t++)rd[t]._workInProgressVersionPrimary=null;rd.length=0}var Ql=hi.ReactCurrentDispatcher,sd=hi.ReactCurrentBatchConfig,Pr=0,De=null,et=null,st=null,ku=!1,Yo=!1,wa=0,hk=0;function vt(){throw Error(U(321))}function Xp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function em(t,e,n,i,r,o){if(Pr=o,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ql.current=t===null||t.memoizedState===null?mk:_k,t=n(i,r),Yo){o=0;do{if(Yo=!1,wa=0,25<=o)throw Error(U(301));o+=1,st=et=null,e.updateQueue=null,Ql.current=gk,t=n(i,r)}while(Yo)}if(Ql.current=bu,e=et!==null&&et.next!==null,Pr=0,st=et=De=null,ku=!1,e)throw Error(U(300));return t}function tm(){var t=wa!==0;return wa=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?De.memoizedState=st=t:st=st.next=t,st}function on(){if(et===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=st===null?De.memoizedState:st.next;if(e!==null)st=e,et=t;else{if(t===null)throw Error(U(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},st===null?De.memoizedState=st=t:st=st.next=t}return st}function Ea(t,e){return typeof e=="function"?e(t):e}function od(t){var e=on(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=et,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var c=l=null,h=null,f=o;do{var m=f.lane;if((Pr&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var _={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=_,l=i):h=h.next=_,De.lanes|=m,kr|=m}f=f.next}while(f!==null&&f!==o);h===null?l=i:h.next=c,En(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,De.lanes|=o,kr|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ad(t){var e=on(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);En(o,e.memoizedState)||(Nt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function oE(){}function aE(t,e){var n=De,i=on(),r=e(),o=!En(i.memoizedState,r);if(o&&(i.memoizedState=r,Nt=!0),i=i.queue,nm(cE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Sa(9,uE.bind(null,n,i,r,e),void 0,null),ut===null)throw Error(U(349));Pr&30||lE(n,e,r)}return r}function lE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uE(t,e,n,i){e.value=n,e.getSnapshot=i,hE(e)&&dE(t)}function cE(t,e,n){return n(function(){hE(e)&&dE(t)})}function hE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function dE(t){var e=ai(t,1);e!==null&&yn(e,t,1,-1)}function xv(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},e.queue=t,t=t.dispatch=pk.bind(null,De,t),[e.memoizedState,t]}function Sa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function fE(){return on().memoizedState}function Jl(t,e,n,i){var r=Nn();De.flags|=t,r.memoizedState=Sa(1|e,n,void 0,i===void 0?null:i)}function Ec(t,e,n,i){var r=on();i=i===void 0?null:i;var o=void 0;if(et!==null){var l=et.memoizedState;if(o=l.destroy,i!==null&&Xp(i,l.deps)){r.memoizedState=Sa(e,n,o,i);return}}De.flags|=t,r.memoizedState=Sa(1|e,n,o,i)}function Pv(t,e){return Jl(8390656,8,t,e)}function nm(t,e){return Ec(2048,8,t,e)}function pE(t,e){return Ec(4,2,t,e)}function mE(t,e){return Ec(4,4,t,e)}function _E(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gE(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4,4,_E.bind(null,e,t),n)}function im(){}function vE(t,e){var n=on();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Xp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function yE(t,e){var n=on();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Xp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function wE(t,e,n){return Pr&21?(En(n,e)||(n=T0(),De.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function dk(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var i=sd.transition;sd.transition={};try{t(!1),e()}finally{Ee=n,sd.transition=i}}function EE(){return on().memoizedState}function fk(t,e,n){var i=Bi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},SE(t))TE(e,n);else if(n=X0(t,e,n,i),n!==null){var r=xt();yn(n,t,i,r),CE(n,e,i)}}function pk(t,e,n){var i=Bi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(SE(t))TE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,n);if(r.hasEagerState=!0,r.eagerState=c,En(c,l)){var h=e.interleaved;h===null?(r.next=r,Gp(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=X0(t,e,r,i),n!==null&&(r=xt(),yn(n,t,i,r),CE(n,e,i))}}function SE(t){var e=t.alternate;return t===De||e!==null&&e===De}function TE(t,e){Yo=ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ap(t,n)}}var bu={readContext:sn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},mk={readContext:sn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:Pv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jl(4194308,4,_E.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Nn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=fk.bind(null,De,t),[i.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:xv,useDebugValue:im,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=xv(!1),e=t[0];return t=dk.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=De,r=Nn();if(Oe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ut===null)throw Error(U(349));Pr&30||lE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Pv(cE.bind(null,i,o,t),[t]),i.flags|=2048,Sa(9,uE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Nn(),e=ut.identifierPrefix;if(Oe){var n=Qn,i=Yn;n=(i&~(1<<32-vn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_k={readContext:sn,useCallback:vE,useContext:sn,useEffect:nm,useImperativeHandle:gE,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:yE,useReducer:od,useRef:fE,useState:function(){return od(Ea)},useDebugValue:im,useDeferredValue:function(t){var e=on();return wE(e,et.memoizedState,t)},useTransition:function(){var t=od(Ea)[0],e=on().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:EE,unstable_isNewReconciler:!1},gk={readContext:sn,useCallback:vE,useContext:sn,useEffect:nm,useImperativeHandle:gE,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:yE,useReducer:ad,useRef:fE,useState:function(){return ad(Ea)},useDebugValue:im,useDeferredValue:function(t){var e=on();return et===null?e.memoizedState=t:wE(e,et.memoizedState,t)},useTransition:function(){var t=ad(Ea)[0],e=on().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:EE,unstable_isNewReconciler:!1};function zs(t,e){try{var n="",i=e;do n+=VP(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function ld(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vk=typeof WeakMap=="function"?WeakMap:Map;function IE(t,e,n){n=ti(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Lu||(Lu=!0,Rf=i),wf(t,e)},n}function xE(t,e,n){n=ti(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){wf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){wf(t,e),typeof i!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function kv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new vk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Nk.bind(null,t,e,n),e.then(t,t))}function bv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ti(-1,1),e.tag=2,zi(n,e,1))),n.lanes|=1),t)}var yk=hi.ReactCurrentOwner,Nt=!1;function It(t,e,n,i){e.child=t===null?rE(e,null,n,i):Ds(e,t.child,n,i)}function Lv(t,e,n,i,r){n=n.render;var o=e.ref;return Is(e,r),i=em(t,e,n,i,o,r),n=tm(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,li(t,e,r)):(Oe&&n&&Wp(e),e.flags|=1,It(t,e,i,r),e.child)}function Nv(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!hm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,PE(t,e,o,i,r)):(t=nu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:pa,n(l,i)&&t.ref===e.ref)return li(t,e,r)}return e.flags|=1,t=ji(o,i),t.ref=e.ref,t.return=e,e.child=t}function PE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(pa(o,i)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,li(t,e,r)}return Ef(t,e,n,i,r)}function kE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(vs,Bt),Bt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(vs,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,be(vs,Bt),Bt|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,be(vs,Bt),Bt|=i;return It(t,e,r,n),e.child}function bE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ef(t,e,n,i,r){var o=Dt(n)?Ir:Et.current;return o=As(e,o),Is(e,r),n=em(t,e,n,i,o,r),i=tm(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,li(t,e,r)):(Oe&&i&&Wp(e),e.flags|=1,It(t,e,n,r),e.child)}function Ov(t,e,n,i,r){if(Dt(n)){var o=!0;Eu(e)}else o=!1;if(Is(e,r),e.stateNode===null)Xl(t,e),nE(e,n,i),yf(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var h=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=sn(f):(f=Dt(n)?Ir:Et.current,f=As(e,f));var m=n.getDerivedStateFromProps,_=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";_||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||h!==f)&&Cv(e,l,i,f),Si=!1;var v=e.memoizedState;l.state=v,xu(e,i,l,r),h=e.memoizedState,c!==i||v!==h||Mt.current||Si?(typeof m=="function"&&(vf(e,n,m,i),h=e.memoizedState),(c=Si||Tv(e,n,c,i,v,h,f))?(_||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=f,i=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,eE(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:dn(e.type,c),l.props=f,_=e.pendingProps,v=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=sn(h):(h=Dt(n)?Ir:Et.current,h=As(e,h));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==_||v!==h)&&Cv(e,l,i,h),Si=!1,v=e.memoizedState,l.state=v,xu(e,i,l,r);var w=e.memoizedState;c!==_||v!==w||Mt.current||Si?(typeof E=="function"&&(vf(e,n,E,i),w=e.memoizedState),(f=Si||Tv(e,n,f,i,v,w,h)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,w,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,w,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),l.props=i,l.state=w,l.context=h,i=f):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Sf(t,e,n,i,o,r)}function Sf(t,e,n,i,r,o){bE(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&vv(e,n,!1),li(t,e,o);i=e.stateNode,yk.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Ds(e,t.child,null,o),e.child=Ds(e,null,c,o)):It(t,e,c,o),e.memoizedState=i.state,r&&vv(e,n,!0),e.child}function RE(t){var e=t.stateNode;e.pendingContext?gv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gv(t,e.context,!1),Yp(t,e.containerInfo)}function Av(t,e,n,i,r){return Ms(),$p(r),e.flags|=256,It(t,e,n,i),e.child}var Tf={dehydrated:null,treeContext:null,retryLane:0};function Cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function LE(t,e,n){var i=e.pendingProps,r=Me.current,o=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),be(Me,r&1),t===null)return _f(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Cc(l,i,0,null),t=wr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Cf(n),e.memoizedState=Tf,t):rm(e,l));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return wk(t,e,l,i,c,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,c=r.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=ji(r,h),i.subtreeFlags=r.subtreeFlags&14680064),c!==null?o=ji(c,o):(o=wr(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Cf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Tf,i}return o=t.child,t=o.sibling,i=ji(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function rm(t,e){return e=Cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ml(t,e,n,i){return i!==null&&$p(i),Ds(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wk(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=ld(Error(U(422))),Ml(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Cc({mode:"visible",children:i.children},r,0,null),o=wr(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ds(e,t.child,null,l),e.child.memoizedState=Cf(l),e.memoizedState=Tf,o);if(!(e.mode&1))return Ml(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var c=i.dgst;return i=c,o=Error(U(419)),i=ld(o,i,void 0),Ml(t,e,l,i)}if(c=(l&t.childLanes)!==0,Nt||c){if(i=ut,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,ai(t,r),yn(i,t,r,-1))}return cm(),i=ld(Error(U(421))),Ml(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Ok.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,jt=Fi(r.nextSibling),Ht=e,Oe=!0,mn=null,t!==null&&(Jt[Xt++]=Yn,Jt[Xt++]=Qn,Jt[Xt++]=xr,Yn=t.id,Qn=t.overflow,xr=e),e=rm(e,i.children),e.flags|=4096,e)}function Mv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),gf(t.return,e,n)}function ud(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function NE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(It(t,e,i.children,n),i=Me.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mv(t,n,e);else if(t.tag===19)Mv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(be(Me,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Pu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ud(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Pu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ud(e,!0,n,null,o);break;case"together":ud(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function li(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ek(t,e,n){switch(e.tag){case 3:RE(e),Ms();break;case 5:sE(e);break;case 1:Dt(e.type)&&Eu(e);break;case 4:Yp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;be(Cu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(be(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?LE(t,e,n):(be(Me,Me.current&1),t=li(t,e,n),t!==null?t.sibling:null);be(Me,Me.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return NE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),be(Me,Me.current),i)break;return null;case 22:case 23:return e.lanes=0,kE(t,e,n)}return li(t,e,n)}var OE,If,AE,ME;OE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};If=function(){};AE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,pr(zn.current);var o=null;switch(n){case"input":r=Zd(t,r),i=Zd(t,i),o=[];break;case"select":r=Fe({},r,{value:void 0}),i=Fe({},i,{value:void 0}),o=[];break;case"textarea":r=Kd(t,r),i=Kd(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=yu)}Qd(n,i);var l;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var c=r[f];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(aa.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(c=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(l in c)!c.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&c[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(aa.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Re("scroll",t),o||c===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};ME=function(t,e,n,i){n!==i&&(e.flags|=4)};function ko(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Sk(t,e,n){var i=e.pendingProps;switch(Hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Dt(e.type)&&wu(),yt(e),null;case 3:return i=e.stateNode,Fs(),Le(Mt),Le(Et),Jp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(Of(mn),mn=null))),If(t,e),yt(e),null;case 5:Qp(e);var r=pr(ya.current);if(n=e.type,t!==null&&e.stateNode!=null)AE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return yt(e),null}if(t=pr(zn.current),Ol(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[On]=e,i[ga]=o,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(r=0;r<Bo.length;r++)Re(Bo[r],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":$g(i,o),Re("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Re("invalid",i);break;case"textarea":Zg(i,o),Re("invalid",i)}Qd(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?i.textContent!==c&&(o.suppressHydrationWarning!==!0&&Nl(i.textContent,c,t),r=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Nl(i.textContent,c,t),r=["children",""+c]):aa.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Re("scroll",i)}switch(n){case"input":Cl(i),Vg(i,o,!0);break;case"textarea":Cl(i),qg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=yu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=l0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[On]=e,t[ga]=i,OE(t,e,!1,!1),e.stateNode=t;e:{switch(l=Jd(n,i),n){case"dialog":Re("cancel",t),Re("close",t),r=i;break;case"iframe":case"object":case"embed":Re("load",t),r=i;break;case"video":case"audio":for(r=0;r<Bo.length;r++)Re(Bo[r],t);r=i;break;case"source":Re("error",t),r=i;break;case"img":case"image":case"link":Re("error",t),Re("load",t),r=i;break;case"details":Re("toggle",t),r=i;break;case"input":$g(t,i),r=Zd(t,i),Re("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Fe({},i,{value:void 0}),Re("invalid",t);break;case"textarea":Zg(t,i),r=Kd(t,i),Re("invalid",t);break;default:r=i}Qd(n,r),c=r;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?h0(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&u0(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&la(t,h):typeof h=="number"&&la(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(aa.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Re("scroll",t):h!=null&&kp(t,o,h,l))}switch(n){case"input":Cl(t),Vg(t,i,!1);break;case"textarea":Cl(t),qg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Zi(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Es(t,!!i.multiple,o,!1):i.defaultValue!=null&&Es(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=yu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)ME(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=pr(ya.current),pr(zn.current),Ol(e)){if(i=e.stateNode,n=e.memoizedProps,i[On]=e,(o=i.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:Nl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nl(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[On]=e,e.stateNode=i}return yt(e),null;case 13:if(Le(Me),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&jt!==null&&e.mode&1&&!(e.flags&128))J0(),Ms(),e.flags|=98560,o=!1;else if(o=Ol(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(U(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[On]=e}else Ms(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),o=!1}else mn!==null&&(Of(mn),mn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?tt===0&&(tt=3):cm())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return Fs(),If(t,e),t===null&&ma(e.stateNode.containerInfo),yt(e),null;case 10:return qp(e.type._context),yt(e),null;case 17:return Dt(e.type)&&wu(),yt(e),null;case 19:if(Le(Me),o=e.memoizedState,o===null)return yt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)ko(o,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Pu(t),l!==null){for(e.flags|=128,ko(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Me,Me.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ze()>Us&&(e.flags|=128,i=!0,ko(o,!1),e.lanes=4194304)}else{if(!i)if(t=Pu(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Oe)return yt(e),null}else 2*Ze()-o.renderingStartTime>Us&&n!==1073741824&&(e.flags|=128,i=!0,ko(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ze(),e.sibling=null,n=Me.current,be(Me,i?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return um(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Bt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Tk(t,e){switch(Hp(e),e.tag){case 1:return Dt(e.type)&&wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fs(),Le(Mt),Le(Et),Jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qp(e),null;case 13:if(Le(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ms()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Me),null;case 4:return Fs(),null;case 10:return qp(e.type._context),null;case 22:case 23:return um(),null;case 24:return null;default:return null}}var Dl=!1,wt=!1,Ck=typeof WeakSet=="function"?WeakSet:Set,q=null;function gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ze(t,e,i)}else n.current=null}function xf(t,e,n){try{n()}catch(i){ze(t,e,i)}}var Dv=!1;function Ik(t,e){if(uf=_u,t=U0(),jp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,c=-1,h=-1,f=0,m=0,_=t,v=null;t:for(;;){for(var E;_!==n||r!==0&&_.nodeType!==3||(c=l+r),_!==o||i!==0&&_.nodeType!==3||(h=l+i),_.nodeType===3&&(l+=_.nodeValue.length),(E=_.firstChild)!==null;)v=_,_=E;for(;;){if(_===t)break t;if(v===n&&++f===r&&(c=l),v===o&&++m===i&&(h=l),(E=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=E}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(cf={focusedElem:t,selectionRange:n},_u=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,N=w.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?I:dn(e.type,I),N);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){ze(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return w=Dv,Dv=!1,w}function Qo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&xf(e,n,o)}r=r.next}while(r!==i)}}function Sc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DE(t){var e=t.alternate;e!==null&&(t.alternate=null,DE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[ga],delete e[ff],delete e[ak],delete e[lk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FE(t){return t.tag===5||t.tag===3||t.tag===4}function Fv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yu));else if(i!==4&&(t=t.child,t!==null))for(kf(t,e,n),t=t.sibling;t!==null;)kf(t,e,n),t=t.sibling}function bf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}var dt=null,fn=!1;function vi(t,e,n){for(n=n.child;n!==null;)zE(t,e,n),n=n.sibling}function zE(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(pc,n)}catch{}switch(n.tag){case 5:wt||gs(n,e);case 6:var i=dt,r=fn;dt=null,vi(t,e,n),dt=i,fn=r,dt!==null&&(fn?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(fn?(t=dt,n=n.stateNode,t.nodeType===8?nd(t.parentNode,n):t.nodeType===1&&nd(t,n),da(t)):nd(dt,n.stateNode));break;case 4:i=dt,r=fn,dt=n.stateNode.containerInfo,fn=!0,vi(t,e,n),dt=i,fn=r;break;case 0:case 11:case 14:case 15:if(!wt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&xf(n,e,l),r=r.next}while(r!==i)}vi(t,e,n);break;case 1:if(!wt&&(gs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){ze(n,e,c)}vi(t,e,n);break;case 21:vi(t,e,n);break;case 22:n.mode&1?(wt=(i=wt)||n.memoizedState!==null,vi(t,e,n),wt=i):vi(t,e,n);break;default:vi(t,e,n)}}function zv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ck),e.forEach(function(i){var r=Ak.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:dt=c.stateNode,fn=!1;break e;case 3:dt=c.stateNode.containerInfo,fn=!0;break e;case 4:dt=c.stateNode.containerInfo,fn=!0;break e}c=c.return}if(dt===null)throw Error(U(160));zE(o,l,r),dt=null,fn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){ze(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UE(e,t),e=e.sibling}function UE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),Ln(t),i&4){try{Qo(3,t,t.return),Sc(3,t)}catch(I){ze(t,t.return,I)}try{Qo(5,t,t.return)}catch(I){ze(t,t.return,I)}}break;case 1:hn(e,t),Ln(t),i&512&&n!==null&&gs(n,n.return);break;case 5:if(hn(e,t),Ln(t),i&512&&n!==null&&gs(n,n.return),t.flags&32){var r=t.stateNode;try{la(r,"")}catch(I){ze(t,t.return,I)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&o0(r,o),Jd(c,l);var f=Jd(c,o);for(l=0;l<h.length;l+=2){var m=h[l],_=h[l+1];m==="style"?h0(r,_):m==="dangerouslySetInnerHTML"?u0(r,_):m==="children"?la(r,_):kp(r,m,_,f)}switch(c){case"input":qd(r,o);break;case"textarea":a0(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Es(r,!!o.multiple,E,!1):v!==!!o.multiple&&(o.defaultValue!=null?Es(r,!!o.multiple,o.defaultValue,!0):Es(r,!!o.multiple,o.multiple?[]:"",!1))}r[ga]=o}catch(I){ze(t,t.return,I)}}break;case 6:if(hn(e,t),Ln(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(I){ze(t,t.return,I)}}break;case 3:if(hn(e,t),Ln(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(I){ze(t,t.return,I)}break;case 4:hn(e,t),Ln(t);break;case 13:hn(e,t),Ln(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(am=Ze())),i&4&&zv(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(f=wt)||m,hn(e,t),wt=f):hn(e,t),Ln(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(q=t,m=t.child;m!==null;){for(_=q=m;q!==null;){switch(v=q,E=v.child,v.tag){case 0:case 11:case 14:case 15:Qo(4,v,v.return);break;case 1:gs(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){ze(i,n,I)}}break;case 5:gs(v,v.return);break;case 22:if(v.memoizedState!==null){Bv(_);continue}}E!==null?(E.return=v,q=E):Bv(_)}m=m.sibling}e:for(m=null,_=t;;){if(_.tag===5){if(m===null){m=_;try{r=_.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=_.stateNode,h=_.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=c0("display",l))}catch(I){ze(t,t.return,I)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=f?"":_.memoizedProps}catch(I){ze(t,t.return,I)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:hn(e,t),Ln(t),i&4&&zv(t);break;case 21:break;default:hn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(FE(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(la(r,""),i.flags&=-33);var o=Fv(t);bf(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,c=Fv(t);kf(t,c,l);break;default:throw Error(U(161))}}catch(h){ze(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xk(t,e,n){q=t,BE(t)}function BE(t,e,n){for(var i=(t.mode&1)!==0;q!==null;){var r=q,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||Dl;if(!l){var c=r.alternate,h=c!==null&&c.memoizedState!==null||wt;c=Dl;var f=wt;if(Dl=l,(wt=h)&&!f)for(q=r;q!==null;)l=q,h=l.child,l.tag===22&&l.memoizedState!==null?jv(r):h!==null?(h.return=l,q=h):jv(r);for(;o!==null;)q=o,BE(o),o=o.sibling;q=r,Dl=c,wt=f}Uv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,q=o):Uv(t)}}function Uv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||Sc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!wt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Sv(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sv(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&da(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}wt||e.flags&512&&Pf(e)}catch(v){ze(e,e.return,v)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Bv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function jv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sc(4,e)}catch(h){ze(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){ze(e,r,h)}}var o=e.return;try{Pf(e)}catch(h){ze(e,o,h)}break;case 5:var l=e.return;try{Pf(e)}catch(h){ze(e,l,h)}}}catch(h){ze(e,e.return,h)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var Pk=Math.ceil,Ru=hi.ReactCurrentDispatcher,sm=hi.ReactCurrentOwner,nn=hi.ReactCurrentBatchConfig,ge=0,ut=null,Ye=null,mt=0,Bt=0,vs=Qi(0),tt=0,Ta=null,kr=0,Tc=0,om=0,Jo=null,Lt=null,am=0,Us=1/0,Gn=null,Lu=!1,Rf=null,Ui=null,Fl=!1,Li=null,Nu=0,Xo=0,Lf=null,eu=-1,tu=0;function xt(){return ge&6?Ze():eu!==-1?eu:eu=Ze()}function Bi(t){return t.mode&1?ge&2&&mt!==0?mt&-mt:ck.transition!==null?(tu===0&&(tu=T0()),tu):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:R0(t.type)),t):1}function yn(t,e,n,i){if(50<Xo)throw Xo=0,Lf=null,Error(U(185));ja(t,n,i),(!(ge&2)||t!==ut)&&(t===ut&&(!(ge&2)&&(Tc|=n),tt===4&&Ci(t,mt)),Ft(t,i),n===1&&ge===0&&!(e.mode&1)&&(Us=Ze()+500,yc&&Ji()))}function Ft(t,e){var n=t.callbackNode;c1(t,e);var i=mu(t,t===ut?mt:0);if(i===0)n!==null&&Yg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Yg(n),e===1)t.tag===0?uk(Wv.bind(null,t)):K0(Wv.bind(null,t)),sk(function(){!(ge&6)&&Ji()}),n=null;else{switch(C0(i)){case 1:n=Op;break;case 4:n=E0;break;case 16:n=pu;break;case 536870912:n=S0;break;default:n=pu}n=GE(n,jE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jE(t,e){if(eu=-1,tu=0,ge&6)throw Error(U(327));var n=t.callbackNode;if(xs()&&t.callbackNode!==n)return null;var i=mu(t,t===ut?mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ou(t,i);else{e=i;var r=ge;ge|=2;var o=HE();(ut!==t||mt!==e)&&(Gn=null,Us=Ze()+500,yr(t,e));do try{Rk();break}catch(c){WE(t,c)}while(1);Zp(),Ru.current=o,ge=r,Ye!==null?e=0:(ut=null,mt=0,e=tt)}if(e!==0){if(e===2&&(r=rf(t),r!==0&&(i=r,e=Nf(t,r))),e===1)throw n=Ta,yr(t,0),Ci(t,i),Ft(t,Ze()),n;if(e===6)Ci(t,i);else{if(r=t.current.alternate,!(i&30)&&!kk(r)&&(e=Ou(t,i),e===2&&(o=rf(t),o!==0&&(i=o,e=Nf(t,o))),e===1))throw n=Ta,yr(t,0),Ci(t,i),Ft(t,Ze()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:ur(t,Lt,Gn);break;case 3:if(Ci(t,i),(i&130023424)===i&&(e=am+500-Ze(),10<e)){if(mu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){xt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=df(ur.bind(null,t,Lt,Gn),e);break}ur(t,Lt,Gn);break;case 4:if(Ci(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-vn(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=Ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Pk(i/1960))-i,10<i){t.timeoutHandle=df(ur.bind(null,t,Lt,Gn),i);break}ur(t,Lt,Gn);break;case 5:ur(t,Lt,Gn);break;default:throw Error(U(329))}}}return Ft(t,Ze()),t.callbackNode===n?jE.bind(null,t):null}function Nf(t,e){var n=Jo;return t.current.memoizedState.isDehydrated&&(yr(t,e).flags|=256),t=Ou(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&Of(e)),t}function Of(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function kk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!En(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(t,e){for(e&=~om,e&=~Tc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),i=1<<n;t[n]=-1,e&=~i}}function Wv(t){if(ge&6)throw Error(U(327));xs();var e=mu(t,0);if(!(e&1))return Ft(t,Ze()),null;var n=Ou(t,e);if(t.tag!==0&&n===2){var i=rf(t);i!==0&&(e=i,n=Nf(t,i))}if(n===1)throw n=Ta,yr(t,0),Ci(t,e),Ft(t,Ze()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ur(t,Lt,Gn),Ft(t,Ze()),null}function lm(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Us=Ze()+500,yc&&Ji())}}function br(t){Li!==null&&Li.tag===0&&!(ge&6)&&xs();var e=ge;ge|=1;var n=nn.transition,i=Ee;try{if(nn.transition=null,Ee=1,t)return t()}finally{Ee=i,nn.transition=n,ge=e,!(ge&6)&&Ji()}}function um(){Bt=vs.current,Le(vs)}function yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rk(n)),Ye!==null)for(n=Ye.return;n!==null;){var i=n;switch(Hp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wu();break;case 3:Fs(),Le(Mt),Le(Et),Jp();break;case 5:Qp(i);break;case 4:Fs();break;case 13:Le(Me);break;case 19:Le(Me);break;case 10:qp(i.type._context);break;case 22:case 23:um()}n=n.return}if(ut=t,Ye=t=ji(t.current,null),mt=Bt=e,tt=0,Ta=null,om=Tc=kr=0,Lt=Jo=null,fr!==null){for(e=0;e<fr.length;e++)if(n=fr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}fr=null}return t}function WE(t,e){do{var n=Ye;try{if(Zp(),Ql.current=bu,ku){for(var i=De.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ku=!1}if(Pr=0,st=et=De=null,Yo=!1,wa=0,sm.current=null,n===null||n.return===null){tt=1,Ta=e,Ye=null;break}e:{var o=t,l=n.return,c=n,h=e;if(e=mt,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=c,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=bv(l);if(E!==null){E.flags&=-257,Rv(E,l,c,o,e),E.mode&1&&kv(o,f,e),e=E,h=f;var w=e.updateQueue;if(w===null){var I=new Set;I.add(h),e.updateQueue=I}else w.add(h);break e}else{if(!(e&1)){kv(o,f,e),cm();break e}h=Error(U(426))}}else if(Oe&&c.mode&1){var N=bv(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Rv(N,l,c,o,e),$p(zs(h,c));break e}}o=h=zs(h,c),tt!==4&&(tt=2),Jo===null?Jo=[o]:Jo.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=IE(o,h,e);Ev(o,S);break e;case 1:c=h;var y=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ui===null||!Ui.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=xE(o,c,e);Ev(o,R);break e}}o=o.return}while(o!==null)}VE(n)}catch(F){e=F,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function HE(){var t=Ru.current;return Ru.current=bu,t===null?bu:t}function cm(){(tt===0||tt===3||tt===2)&&(tt=4),ut===null||!(kr&268435455)&&!(Tc&268435455)||Ci(ut,mt)}function Ou(t,e){var n=ge;ge|=2;var i=HE();(ut!==t||mt!==e)&&(Gn=null,yr(t,e));do try{bk();break}catch(r){WE(t,r)}while(1);if(Zp(),ge=n,Ru.current=i,Ye!==null)throw Error(U(261));return ut=null,mt=0,tt}function bk(){for(;Ye!==null;)$E(Ye)}function Rk(){for(;Ye!==null&&!t1();)$E(Ye)}function $E(t){var e=qE(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?VE(t):Ye=e,sm.current=null}function VE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Tk(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ye=null;return}}else if(n=Sk(n,e,Bt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);tt===0&&(tt=5)}function ur(t,e,n){var i=Ee,r=nn.transition;try{nn.transition=null,Ee=1,Lk(t,e,n,i)}finally{nn.transition=r,Ee=i}return null}function Lk(t,e,n,i){do xs();while(Li!==null);if(ge&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(h1(t,o),t===ut&&(Ye=ut=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,GE(pu,function(){return xs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=nn.transition,nn.transition=null;var l=Ee;Ee=1;var c=ge;ge|=4,sm.current=null,Ik(t,n),UE(n,t),Q1(cf),_u=!!uf,cf=uf=null,t.current=n,xk(n),n1(),ge=c,Ee=l,nn.transition=o}else t.current=n;if(Fl&&(Fl=!1,Li=t,Nu=r),o=t.pendingLanes,o===0&&(Ui=null),s1(n.stateNode),Ft(t,Ze()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Lu)throw Lu=!1,t=Rf,Rf=null,t;return Nu&1&&t.tag!==0&&xs(),o=t.pendingLanes,o&1?t===Lf?Xo++:(Xo=0,Lf=t):Xo=0,Ji(),null}function xs(){if(Li!==null){var t=C0(Nu),e=nn.transition,n=Ee;try{if(nn.transition=null,Ee=16>t?16:t,Li===null)var i=!1;else{if(t=Li,Li=null,Nu=0,ge&6)throw Error(U(331));var r=ge;for(ge|=4,q=t.current;q!==null;){var o=q,l=o.child;if(q.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(q=f;q!==null;){var m=q;switch(m.tag){case 0:case 11:case 15:Qo(8,m,o)}var _=m.child;if(_!==null)_.return=m,q=_;else for(;q!==null;){m=q;var v=m.sibling,E=m.return;if(DE(m),m===f){q=null;break}if(v!==null){v.return=E,q=v;break}q=E}}}var w=o.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var N=I.sibling;I.sibling=null,I=N}while(I!==null)}}q=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,q=l;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qo(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,q=S;break e}q=o.return}}var y=t.current;for(q=y;q!==null;){l=q;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,q=C;else e:for(l=y;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Sc(9,c)}}catch(F){ze(c,c.return,F)}if(c===l){q=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,q=R;break e}q=c.return}}if(ge=r,Ji(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(pc,t)}catch{}i=!0}return i}finally{Ee=n,nn.transition=e}}return!1}function Hv(t,e,n){e=zs(n,e),e=IE(t,e,1),t=zi(t,e,1),e=xt(),t!==null&&(ja(t,1,e),Ft(t,e))}function ze(t,e,n){if(t.tag===3)Hv(t,t,n);else for(;e!==null;){if(e.tag===3){Hv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ui===null||!Ui.has(i))){t=zs(n,t),t=xE(e,t,1),e=zi(e,t,1),t=xt(),e!==null&&(ja(e,1,t),Ft(e,t));break}}e=e.return}}function Nk(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,ut===t&&(mt&n)===n&&(tt===4||tt===3&&(mt&130023424)===mt&&500>Ze()-am?yr(t,0):om|=n),Ft(t,e)}function ZE(t,e){e===0&&(t.mode&1?(e=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):e=1);var n=xt();t=ai(t,e),t!==null&&(ja(t,e,n),Ft(t,n))}function Ok(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ZE(t,n)}function Ak(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),ZE(t,n)}var qE;qE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,Ek(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Oe&&e.flags&1048576&&Y0(e,Tu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Xl(t,e),t=e.pendingProps;var r=As(e,Et.current);Is(e,n),r=em(null,e,i,t,r,n);var o=tm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(i)?(o=!0,Eu(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Kp(e),r.updater=wc,e.stateNode=r,r._reactInternals=e,yf(e,i,t,n),e=Sf(null,e,i,!0,o,n)):(e.tag=0,Oe&&o&&Wp(e),It(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Xl(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Dk(i),t=dn(i,t),r){case 0:e=Ef(null,e,i,t,n);break e;case 1:e=Ov(null,e,i,t,n);break e;case 11:e=Lv(null,e,i,t,n);break e;case 14:e=Nv(null,e,i,dn(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:dn(i,r),Ef(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:dn(i,r),Ov(t,e,i,r,n);case 3:e:{if(RE(e),t===null)throw Error(U(387));i=e.pendingProps,o=e.memoizedState,r=o.element,eE(t,e),xu(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=zs(Error(U(423)),e),e=Av(t,e,i,n,r);break e}else if(i!==r){r=zs(Error(U(424)),e),e=Av(t,e,i,n,r);break e}else for(jt=Fi(e.stateNode.containerInfo.firstChild),Ht=e,Oe=!0,mn=null,n=rE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ms(),i===r){e=li(t,e,n);break e}It(t,e,i,n)}e=e.child}return e;case 5:return sE(e),t===null&&_f(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,hf(i,r)?l=null:o!==null&&hf(i,o)&&(e.flags|=32),bE(t,e),It(t,e,l,n),e.child;case 6:return t===null&&_f(e),null;case 13:return LE(t,e,n);case 4:return Yp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ds(e,null,i,n):It(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:dn(i,r),Lv(t,e,i,r,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,be(Cu,i._currentValue),i._currentValue=l,o!==null)if(En(o.value,l)){if(o.children===r.children&&!Mt.current){e=li(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=ti(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),gf(o.return,n,e),c.lanes|=n;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(U(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),gf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}It(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Is(e,n),r=sn(r),i=i(r),e.flags|=1,It(t,e,i,n),e.child;case 14:return i=e.type,r=dn(i,e.pendingProps),r=dn(i.type,r),Nv(t,e,i,r,n);case 15:return PE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:dn(i,r),Xl(t,e),e.tag=1,Dt(i)?(t=!0,Eu(e)):t=!1,Is(e,n),nE(e,i,r),yf(e,i,r,n),Sf(null,e,i,!0,t,n);case 19:return NE(t,e,n);case 22:return kE(t,e,n)}throw Error(U(156,e.tag))};function GE(t,e){return w0(t,e)}function Mk(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,i){return new Mk(t,e,n,i)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dk(t){if(typeof t=="function")return hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rp)return 11;if(t===Lp)return 14}return 2}function ji(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nu(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")hm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case ls:return wr(n.children,r,o,e);case bp:l=8,r|=8;break;case Wd:return t=en(12,n,e,r|2),t.elementType=Wd,t.lanes=o,t;case Hd:return t=en(13,n,e,r),t.elementType=Hd,t.lanes=o,t;case $d:return t=en(19,n,e,r),t.elementType=$d,t.lanes=o,t;case i0:return Cc(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t0:l=10;break e;case n0:l=9;break e;case Rp:l=11;break e;case Lp:l=14;break e;case Ei:l=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=en(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function wr(t,e,n,i){return t=en(7,t,i,e),t.lanes=n,t}function Cc(t,e,n,i){return t=en(22,t,i,e),t.elementType=i0,t.lanes=n,t.stateNode={isHidden:!1},t}function cd(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function hd(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fk(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,i,r,o,l,c,h){return t=new Fk(t,e,n,c,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=en(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kp(o),t}function zk(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function KE(t){if(!t)return qi;t=t._reactInternals;e:{if(jr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Dt(n))return G0(t,n,e)}return e}function YE(t,e,n,i,r,o,l,c,h){return t=dm(n,i,!0,t,r,o,l,c,h),t.context=KE(null),n=t.current,i=xt(),r=Bi(n),o=ti(i,r),o.callback=e??null,zi(n,o,r),t.current.lanes=r,ja(t,r,i),Ft(t,i),t}function Ic(t,e,n,i){var r=e.current,o=xt(),l=Bi(r);return n=KE(n),e.context===null?e.context=n:e.pendingContext=n,e=ti(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=zi(r,e,l),t!==null&&(yn(t,r,l,o),Yl(t,r,l)),l}function Au(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $v(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fm(t,e){$v(t,e),(t=t.alternate)&&$v(t,e)}function Uk(){return null}var QE=typeof reportError=="function"?reportError:function(t){console.error(t)};function pm(t){this._internalRoot=t}xc.prototype.render=pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ic(t,e,null,null)};xc.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;br(function(){Ic(null,t,null,null)}),e[oi]=null}};function xc(t){this._internalRoot=t}xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=P0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ti.length&&e!==0&&e<Ti[n].priority;n++);Ti.splice(n,0,t),n===0&&b0(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vv(){}function Bk(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Au(l);o.call(f)}}var l=YE(e,i,t,0,null,!1,!1,"",Vv);return t._reactRootContainer=l,t[oi]=l.current,ma(t.nodeType===8?t.parentNode:t),br(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var c=i;i=function(){var f=Au(h);c.call(f)}}var h=dm(t,0,!1,null,null,!1,!1,"",Vv);return t._reactRootContainer=h,t[oi]=h.current,ma(t.nodeType===8?t.parentNode:t),br(function(){Ic(e,h,n,i)}),h}function kc(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var c=r;r=function(){var h=Au(l);c.call(h)}}Ic(e,l,t,r)}else l=Bk(n,e,t,r,i);return Au(l)}I0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(Ap(e,n|1),Ft(e,Ze()),!(ge&6)&&(Us=Ze()+500,Ji()))}break;case 13:br(function(){var i=ai(t,1);if(i!==null){var r=xt();yn(i,t,1,r)}}),fm(t,1)}};Mp=function(t){if(t.tag===13){var e=ai(t,134217728);if(e!==null){var n=xt();yn(e,t,134217728,n)}fm(t,134217728)}};x0=function(t){if(t.tag===13){var e=Bi(t),n=ai(t,e);if(n!==null){var i=xt();yn(n,t,e,i)}fm(t,e)}};P0=function(){return Ee};k0=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};ef=function(t,e,n){switch(e){case"input":if(qd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=vc(i);if(!r)throw Error(U(90));s0(i),qd(i,r)}}}break;case"textarea":a0(t,n);break;case"select":e=n.value,e!=null&&Es(t,!!n.multiple,e,!1)}};p0=lm;m0=br;var jk={usingClientEntryPoint:!1,Events:[Ha,ds,vc,d0,f0,lm]},bo={findFiberByHostInstance:dr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Wk={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v0(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||Uk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{pc=zl.inject(Wk),Fn=zl}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jk;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error(U(200));return zk(t,e,null,n)};Zt.createRoot=function(t,e){if(!mm(t))throw Error(U(299));var n=!1,i="",r=QE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,i,r),t[oi]=e.current,ma(t.nodeType===8?t.parentNode:t),new pm(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=v0(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return br(t)};Zt.hydrate=function(t,e,n){if(!Pc(e))throw Error(U(200));return kc(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!mm(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=QE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=YE(e,null,t,1,n??null,r,!1,o,l),t[oi]=e.current,ma(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new xc(e)};Zt.render=function(t,e,n){if(!Pc(e))throw Error(U(200));return kc(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Pc(t))throw Error(U(40));return t._reactRootContainer?(br(function(){kc(null,null,t,!1,function(){t._reactRootContainer=null,t[oi]=null})}),!0):!1};Zt.unstable_batchedUpdates=lm;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Pc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return kc(t,e,n,!1,i)};Zt.version="18.2.0-next-9e3b772b8-20220608";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(t){console.error(t)}}JE(),Yw.exports=Zt;var Hk=Yw.exports,Zv=Hk;Bd.createRoot=Zv.createRoot,Bd.hydrateRoot=Zv.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ca(){return Ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ca.apply(this,arguments)}var Ni;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ni||(Ni={}));const qv="popstate";function $k(t){t===void 0&&(t={});function e(r,o){let{pathname:l="/",search:c="",hash:h=""}=Wr(r.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Af("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let l=r.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");c=f===-1?h:h.slice(0,f)}return c+"#"+(typeof o=="string"?o:XE(o))}function i(r,o){bc(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Zk(e,n,i,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vk(){return Math.random().toString(36).substr(2,8)}function Gv(t,e){return{usr:t.state,key:t.key,idx:e}}function Af(t,e,n,i){return n===void 0&&(n=null),Ca({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wr(e):e,{state:n,key:e&&e.key||i||Vk()})}function XE(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Wr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function Zk(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,c=Ni.Pop,h=null,f=m();f==null&&(f=0,l.replaceState(Ca({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function _(){c=Ni.Pop;let N=m(),S=N==null?null:N-f;f=N,h&&h({action:c,location:I.location,delta:S})}function v(N,S){c=Ni.Push;let y=Af(I.location,N,S);n&&n(y,N),f=m()+1;let C=Gv(y,f),R=I.createHref(y);try{l.pushState(C,"",R)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(R)}o&&h&&h({action:c,location:I.location,delta:1})}function E(N,S){c=Ni.Replace;let y=Af(I.location,N,S);n&&n(y,N),f=m();let C=Gv(y,f),R=I.createHref(y);l.replaceState(C,"",R),o&&h&&h({action:c,location:I.location,delta:0})}function w(N){let S=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof N=="string"?N:XE(N);return nt(S,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,S)}let I={get action(){return c},get location(){return t(r,l)},listen(N){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(qv,_),h=N,()=>{r.removeEventListener(qv,_),h=null}},createHref(N){return e(r,N)},createURL:w,encodeLocation(N){let S=w(N);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:E,go(N){return l.go(N)}};return I}var Kv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kv||(Kv={}));function qk(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Wr(e):e,r=nS(i.pathname||"/",n);if(r==null)return null;let o=eS(t);Gk(o);let l=null;for(let c=0;l==null&&c<o.length;++c)l=ib(o[c],ob(r));return l}function eS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(nt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=Er([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(nt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),eS(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:tb(f,o.index),routesMeta:m})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,l);else for(let h of tS(o.path))r(o,l,h)}),e}function tS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=tS(i.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),r&&c.push(...l),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function Gk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nb(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Kk=/^:\w+$/,Yk=3,Qk=2,Jk=1,Xk=10,eb=-2,Yv=t=>t==="*";function tb(t,e){let n=t.split("/"),i=n.length;return n.some(Yv)&&(i+=eb),e&&(i+=Qk),n.filter(r=>!Yv(r)).reduce((r,o)=>r+(Kk.test(o)?Yk:o===""?Jk:Xk),i)}function nb(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function ib(t,e){let{routesMeta:n}=t,i={},r="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],h=l===n.length-1,f=r==="/"?e:e.slice(r.length)||"/",m=rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f);if(!m)return null;Object.assign(i,m.params);let _=c.route;o.push({params:i,pathname:Er([r,m.pathname]),pathnameBase:db(Er([r,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(r=Er([r,m.pathnameBase]))}return o}function rb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=sb(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((f,m,_)=>{let{paramName:v,isOptional:E}=m;if(v==="*"){let I=c[_]||"";l=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const w=c[_];return E&&!w?f[v]=void 0:f[v]=ab(w||"",v),f},{}),pathname:o,pathnameBase:l,pattern:t}}function sb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(l,c,h)=>(i.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function ob(t){try{return decodeURI(t)}catch(e){return bc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ab(t,e){try{return decodeURIComponent(t)}catch(n){return bc(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function nS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function lb(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Wr(t):t;return{pathname:n?n.startsWith("/")?n:ub(n,e):e,search:fb(i),hash:pb(r)}}function ub(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function dd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hb(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Wr(t):(r=Ca({},t),nt(!r.pathname||!r.pathname.includes("?"),dd("?","pathname","search",r)),nt(!r.pathname||!r.pathname.includes("#"),dd("#","pathname","hash",r)),nt(!r.search||!r.search.includes("#"),dd("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,c;if(i||l==null)c=n;else{let _=e.length-1;if(l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),_-=1;r.pathname=v.join("/")}c=_>=0?e[_]:"/"}let h=lb(r,c),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),db=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const iS=["post","put","patch","delete"];new Set(iS);const _b=["get",...iS];new Set(_b);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mu.apply(this,arguments)}const _m=k.createContext(null),gb=k.createContext(null),Rc=k.createContext(null),Lc=k.createContext(null),Js=k.createContext({outlet:null,matches:[],isDataRoute:!1}),rS=k.createContext(null);function Nc(){return k.useContext(Lc)!=null}function sS(){return Nc()||nt(!1),k.useContext(Lc).location}function oS(t){k.useContext(Rc).static||k.useLayoutEffect(t)}function Oc(){let{isDataRoute:t}=k.useContext(Js);return t?Rb():vb()}function vb(){Nc()||nt(!1);let t=k.useContext(_m),{basename:e,navigator:n}=k.useContext(Rc),{matches:i}=k.useContext(Js),{pathname:r}=sS(),o=JSON.stringify(cb(i).map(h=>h.pathnameBase)),l=k.useRef(!1);return oS(()=>{l.current=!0}),k.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let m=hb(h,JSON.parse(o),r,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Er([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,o,r,t])}function yb(t,e){return wb(t,e)}function wb(t,e,n){Nc()||nt(!1);let{navigator:i}=k.useContext(Rc),{matches:r}=k.useContext(Js),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=sS(),f;if(e){var m;let I=typeof e=="string"?Wr(e):e;c==="/"||(m=I.pathname)!=null&&m.startsWith(c)||nt(!1),f=I}else f=h;let _=f.pathname||"/",v=c==="/"?_:_.slice(c.length)||"/",E=qk(t,{pathname:v}),w=Ib(E&&E.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:Er([c,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?c:Er([c,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),r,n);return e&&w?k.createElement(Lc.Provider,{value:{location:Mu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ni.Pop}},w):w}function Eb(){let t=bb(),e=mb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:r},n):null,o)}const Sb=k.createElement(Eb,null);class Tb extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?k.createElement(Js.Provider,{value:this.props.routeContext},k.createElement(rS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Cb(t){let{routeContext:e,match:n,children:i}=t,r=k.useContext(_m);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Js.Provider,{value:e},i)}function Ib(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let c=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id]));c>=0||nt(!1),o=o.slice(0,Math.min(o.length,c+1))}return o.reduceRight((c,h,f)=>{let m=h.route.id?l==null?void 0:l[h.route.id]:null,_=null;n&&(_=h.route.errorElement||Sb);let v=e.concat(o.slice(0,f+1)),E=()=>{let w;return m?w=_:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=c,k.createElement(Cb,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(Tb,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var aS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(aS||{}),Du=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Du||{});function xb(t){let e=k.useContext(_m);return e||nt(!1),e}function Pb(t){let e=k.useContext(gb);return e||nt(!1),e}function kb(t){let e=k.useContext(Js);return e||nt(!1),e}function lS(t){let e=kb(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function bb(){var t;let e=k.useContext(rS),n=Pb(Du.UseRouteError),i=lS(Du.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function Rb(){let{router:t}=xb(aS.UseNavigateStable),e=lS(Du.UseNavigateStable),n=k.useRef(!1);return oS(()=>{n.current=!0}),k.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Mu({fromRouteId:e},o)))},[t,e])}function ss(t){nt(!1)}function Lb(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ni.Pop,navigator:o,static:l=!1}=t;Nc()&&nt(!1);let c=e.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:c,navigator:o,static:l}),[c,o,l]);typeof i=="string"&&(i=Wr(i));let{pathname:f="/",search:m="",hash:_="",state:v=null,key:E="default"}=i,w=k.useMemo(()=>{let I=nS(f,c);return I==null?null:{location:{pathname:I,search:m,hash:_,state:v,key:E},navigationType:r}},[c,f,m,_,v,E,r]);return w==null?null:k.createElement(Rc.Provider,{value:h},k.createElement(Lc.Provider,{children:n,value:w}))}function Nb(t){let{children:e,location:n}=t;return yb(Mf(e),n)}new Promise(()=>{});function Mf(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(i,r)=>{if(!k.isValidElement(i))return;let o=[...e,r];if(i.type===k.Fragment){n.push.apply(n,Mf(i.props.children,o));return}i.type!==ss&&nt(!1),!i.props.index||!i.props.children||nt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Mf(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ob="startTransition",Qv=OP[Ob];function Ab(t){let{basename:e,children:n,future:i,window:r}=t,o=k.useRef();o.current==null&&(o.current=$k({window:r,v5Compat:!0}));let l=o.current,[c,h]=k.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=k.useCallback(_=>{f&&Qv?Qv(()=>h(_)):h(_)},[h,f]);return k.useLayoutEffect(()=>l.listen(m),[l,m]),k.createElement(Lb,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:l})}var Jv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jv||(Jv={}));var Xv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xv||(Xv={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(t,e){if(!t)throw Xs(e)},Xs=function(t){return new Error("Firebase Database ("+uS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Mb=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},gm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,_=(o&3)<<4|c>>4;let v=(c&15)<<2|f>>6,E=f&63;h||(E=64,l||(v=64)),i.push(n[m],n[_],n[v],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Mb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const _=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||_==null)throw new Db;const v=o<<2|c>>4;if(i.push(v),f!==64){const E=c<<4&240|f>>2;if(i.push(E),_!==64){const w=f<<6&192|_;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Db extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hS=function(t){const e=cS(t);return gm.encodeByteArray(e,!0)},Fu=function(t){return hS(t).replace(/\./g,"")},zu=function(t){try{return gm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t){return dS(void 0,t)}function dS(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zb(n)||(t[n]=dS(t[n],e[n]));return t}function zb(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=()=>Ub().__FIREBASE_DEFAULTS__,jb=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zu(t[1]);return e&&JSON.parse(e)},Ac=()=>{try{return Bb()||jb()||Wb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fS=t=>{var e,n;return(n=(e=Ac())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pS=t=>{const e=fS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},mS=()=>{var t;return(t=Ac())===null||t===void 0?void 0:t.config},_S=t=>{var e;return(e=Ac())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[Fu(JSON.stringify(n)),Fu(JSON.stringify(l)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function Hb(){var t;const e=(t=Ac())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $b(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wS(){return uS.NODE_ADMIN===!0}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function SS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function Vb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="FirebaseError";class In extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Zb,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hr.prototype.create)}}class Hr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?qb(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new In(r,c,i)}}function qb(t,e){return t.replace(Gb,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Gb=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){return JSON.parse(t)}function lt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=Ia(zu(o[0])||""),n=Ia(zu(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},Kb=function(t){const e=TS(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Yb=function(t){const e=TS(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Df(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uu(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function xa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(ey(o)&&ey(l)){if(!xa(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ey(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Wo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const v=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(v<<1|v>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4],f,m;for(let _=0;_<80;_++){_<40?_<20?(f=c^o&(l^c),m=1518500249):(f=o^l^c,m=1859775393):_<60?(f=o&l|c&(o|l),m=2400959708):(f=o^l^c,m=3395469782);const v=(r<<5|r>>>27)+f+h+m+i[_]&4294967295;h=c,c=l,l=(o<<30|o>>>2)&4294967295,o=r,r=v}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<n;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function Jb(t,e){const n=new Xb(t,e);return n.subscribe.bind(n)}class Xb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");eR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=fd),r.error===void 0&&(r.error=fd),r.complete===void 0&&(r.complete=fd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fd(){}function Mc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,B(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Dc=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=1e3,iR=2,rR=4*60*60*1e3,sR=.5;function ty(t,e=nR,n=iR){const i=e*Math.pow(n,t),r=Math.round(sR*i*(Math.random()-.5)*2);return Math.min(rR,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class an{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Va;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lR(e))try{this.getOrInitializeService({instanceIdentifier:cr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cr){return this.instances.has(e)}getOptions(e=cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=cr){return this.component?this.component.multipleInstances?e:cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aR(t){return t===cr?void 0:t}function lR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const cR={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},hR=Se.INFO,dR={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},fR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=dR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fc{constructor(e){this.name=e,this._logLevel=hR,this._logHandler=fR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const pR=(t,e)=>e.some(n=>t instanceof n);let ny,iy;function mR(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _R(){return iy||(iy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CS=new WeakMap,Ff=new WeakMap,IS=new WeakMap,pd=new WeakMap,ym=new WeakMap;function gR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Wi(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&CS.set(n,t)}).catch(()=>{}),ym.set(e,t),e}function vR(t){if(Ff.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Ff.set(t,e)}let zf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ff.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yR(t){zf=t(zf)}function wR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(md(this),e,...n);return IS.set(i,e.sort?e.sort():[e]),Wi(i)}:_R().includes(t)?function(...e){return t.apply(md(this),e),Wi(CS.get(this))}:function(...e){return Wi(t.apply(md(this),e))}}function ER(t){return typeof t=="function"?wR(t):(t instanceof IDBTransaction&&vR(t),pR(t,mR())?new Proxy(t,zf):t)}function Wi(t){if(t instanceof IDBRequest)return gR(t);if(pd.has(t))return pd.get(t);const e=ER(t);return e!==t&&(pd.set(t,e),ym.set(e,t)),e}const md=t=>ym.get(t);function SR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=Wi(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Wi(l.result),h.oldVersion,h.newVersion,Wi(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const TR=["get","getKey","getAll","getAllKeys","count"],CR=["put","add","delete","clear"],_d=new Map;function ry(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_d.get(e))return _d.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=CR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||TR.includes(n)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&h.done]))[0]};return _d.set(e,o),o}yR(t=>({...t,get:(e,n,i)=>ry(e,n)||t.get(e,n,i),has:(e,n)=>!!ry(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function xR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uf="@firebase/app",sy="0.9.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Fc("@firebase/app"),PR="@firebase/app-compat",kR="@firebase/analytics-compat",bR="@firebase/analytics",RR="@firebase/app-check-compat",LR="@firebase/app-check",NR="@firebase/auth",OR="@firebase/auth-compat",AR="@firebase/database",MR="@firebase/database-compat",DR="@firebase/functions",FR="@firebase/functions-compat",zR="@firebase/installations",UR="@firebase/installations-compat",BR="@firebase/messaging",jR="@firebase/messaging-compat",WR="@firebase/performance",HR="@firebase/performance-compat",$R="@firebase/remote-config",VR="@firebase/remote-config-compat",ZR="@firebase/storage",qR="@firebase/storage-compat",GR="@firebase/firestore",KR="@firebase/firestore-compat",YR="firebase",QR="10.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]",JR={[Uf]:"fire-core",[PR]:"fire-core-compat",[bR]:"fire-analytics",[kR]:"fire-analytics-compat",[LR]:"fire-app-check",[RR]:"fire-app-check-compat",[NR]:"fire-auth",[OR]:"fire-auth-compat",[AR]:"fire-rtdb",[MR]:"fire-rtdb-compat",[DR]:"fire-fn",[FR]:"fire-fn-compat",[zR]:"fire-iid",[UR]:"fire-iid-compat",[BR]:"fire-fcm",[jR]:"fire-fcm-compat",[WR]:"fire-perf",[HR]:"fire-perf-compat",[$R]:"fire-rc",[VR]:"fire-rc-compat",[ZR]:"fire-gcs",[qR]:"fire-gcs-compat",[GR]:"fire-fst",[KR]:"fire-fst-compat","fire-js":"fire-js",[YR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Map,jf=new Map;function XR(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sn(t){const e=t.name;if(jf.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,t);for(const n of Bu.values())XR(n,t);return!0}function Xi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Hi=new Hr("app","Firebase",eL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=QR;function xS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Bf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Hi.create("bad-app-name",{appName:String(r)});if(n||(n=mS()),!n)throw Hi.create("no-options");const o=Bu.get(r);if(o){if(xa(n,o.options)&&xa(i,o.config))return o;throw Hi.create("duplicate-app",{appName:r})}const l=new uR(r);for(const h of jf.values())l.addComponent(h);const c=new tL(n,i,l);return Bu.set(r,c),c}function zc(t=Bf){const e=Bu.get(t);if(!e&&t===Bf&&mS())return xS();if(!e)throw Hi.create("no-app",{appName:t});return e}function zt(t,e,n){var i;let r=(i=JR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(c.join(" "));return}Sn(new an(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL="firebase-heartbeat-database",iL=1,Pa="firebase-heartbeat-store";let gd=null;function PS(){return gd||(gd=SR(nL,iL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pa)}}}).catch(t=>{throw Hi.create("idb-open",{originalErrorMessage:t.message})})),gd}async function rL(t){try{return await(await PS()).transaction(Pa).objectStore(Pa).get(kS(t))}catch(e){if(e instanceof In)Rr.warn(e.message);else{const n=Hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function oy(t,e){try{const i=(await PS()).transaction(Pa,"readwrite");await i.objectStore(Pa).put(e,kS(t)),await i.done}catch(n){if(n instanceof In)Rr.warn(n.message);else{const i=Hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(i.message)}}}function kS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=1024,oL=30*24*60*60*1e3;class aL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uL(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ay();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=oL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ay(),{heartbeatsToSend:i,unsentEntries:r}=lL(this._heartbeatsCache.heartbeats),o=Fu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function ay(){return new Date().toISOString().substring(0,10)}function lL(t,e=sL){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),ly(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ly(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class uL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?SS().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await rL(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return oy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return oy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ly(t){return Fu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t){Sn(new an("platform-logger",e=>new IR(e),"PRIVATE")),Sn(new an("heartbeat",e=>new aL(e),"PRIVATE")),zt(Uf,sy,t),zt(Uf,sy,"esm2017"),zt("fire-js","")}cL("");var hL="firebase",dL="10.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt(hL,dL,"app");const fL=(t,e)=>e.some(n=>t instanceof n);let uy,cy;function pL(){return uy||(uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mL(){return cy||(cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,Wf=new WeakMap,RS=new WeakMap,vd=new WeakMap,wm=new WeakMap;function _L(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n($i(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&bS.set(n,t)}).catch(()=>{}),wm.set(e,t),e}function gL(t){if(Wf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Wf.set(t,e)}let Hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vL(t){Hf=t(Hf)}function yL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(yd(this),e,...n);return RS.set(i,e.sort?e.sort():[e]),$i(i)}:mL().includes(t)?function(...e){return t.apply(yd(this),e),$i(bS.get(this))}:function(...e){return $i(t.apply(yd(this),e))}}function wL(t){return typeof t=="function"?yL(t):(t instanceof IDBTransaction&&gL(t),fL(t,pL())?new Proxy(t,Hf):t)}function $i(t){if(t instanceof IDBRequest)return _L(t);if(vd.has(t))return vd.get(t);const e=wL(t);return e!==t&&(vd.set(t,e),wm.set(e,t)),e}const yd=t=>wm.get(t);function EL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=$i(l);return i&&l.addEventListener("upgradeneeded",h=>{i($i(l.result),h.oldVersion,h.newVersion,$i(l.transaction))}),n&&l.addEventListener("blocked",()=>n()),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",()=>r())}).catch(()=>{}),c}const SL=["get","getKey","getAll","getAllKeys","count"],TL=["put","add","delete","clear"],wd=new Map;function hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wd.get(e))return wd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=TL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||SL.includes(n)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&h.done]))[0]};return wd.set(e,o),o}vL(t=>({...t,get:(e,n,i)=>hy(e,n)||t.get(e,n,i),has:(e,n)=>!!hy(e,n)||t.has(e,n)}));const LS="@firebase/installations",Em="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=1e4,OS=`w:${Em}`,AS="FIS_v2",CL="https://firebaseinstallations.googleapis.com/v1",IL=60*60*1e3,xL="installations",PL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Lr=new Hr(xL,PL,kL);function MS(t){return t instanceof In&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS({projectId:t}){return`${CL}/projects/${t}/installations`}function FS(t){return{token:t.token,requestStatus:2,expiresIn:RL(t.expiresIn),creationTime:Date.now()}}async function zS(t,e){const i=(await e.json()).error;return Lr.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function US({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bL(t,{refreshToken:e}){const n=US(t);return n.append("Authorization",LL(e)),n}async function BS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function RL(t){return Number(t.replace("s","000"))}function LL(t){return`${AS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=DS(t),r=US(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={fid:n,authVersion:AS,appId:t.appId,sdkVersion:OS},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await BS(()=>fetch(i,c));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:FS(f.authToken)}}else throw await zS("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=/^[cdef][\w-]{21}$/,$f="";function ML(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=DL(t);return AL.test(n)?n:$f}catch{return $f}}function DL(t){return OL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Map;function HS(t,e){const n=Uc(t);$S(n,e),FL(n,e)}function $S(t,e){const n=WS.get(t);if(n)for(const i of n)i(e)}function FL(t,e){const n=zL();n&&n.postMessage({key:t,fid:e}),UL()}let mr=null;function zL(){return!mr&&"BroadcastChannel"in self&&(mr=new BroadcastChannel("[Firebase] FID Change"),mr.onmessage=t=>{$S(t.data.key,t.data.fid)}),mr}function UL(){WS.size===0&&mr&&(mr.close(),mr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="firebase-installations-database",jL=1,Nr="firebase-installations-store";let Ed=null;function Sm(){return Ed||(Ed=EL(BL,jL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Nr)}}})),Ed}async function ju(t,e){const n=Uc(t),r=(await Sm()).transaction(Nr,"readwrite"),o=r.objectStore(Nr),l=await o.get(n);return await o.put(e,n),await r.done,(!l||l.fid!==e.fid)&&HS(t,e.fid),e}async function VS(t){const e=Uc(t),i=(await Sm()).transaction(Nr,"readwrite");await i.objectStore(Nr).delete(e),await i.done}async function Bc(t,e){const n=Uc(t),r=(await Sm()).transaction(Nr,"readwrite"),o=r.objectStore(Nr),l=await o.get(n),c=e(l);return c===void 0?await o.delete(n):await o.put(c,n),await r.done,c&&(!l||l.fid!==c.fid)&&HS(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tm(t){let e;const n=await Bc(t.appConfig,i=>{const r=WL(i),o=HL(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===$f?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function WL(t){const e=t||{fid:ML(),registrationStatus:0};return ZS(e)}function HL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Lr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=$L(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:VL(t)}:{installationEntry:e}}async function $L(t,e){try{const n=await NL(t,e);return ju(t.appConfig,n)}catch(n){throw MS(n)&&n.customData.serverCode===409?await VS(t.appConfig):await ju(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function VL(t){let e=await dy(t.appConfig);for(;e.registrationStatus===1;)await jS(100),e=await dy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Tm(t);return i||n}return e}function dy(t){return Bc(t,e=>{if(!e)throw Lr.create("installation-not-found");return ZS(e)})}function ZS(t){return ZL(t)?{fid:t.fid,registrationStatus:0}:t}function ZL(t){return t.registrationStatus===1&&t.registrationTime+NS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL({appConfig:t,heartbeatServiceProvider:e},n){const i=GL(t,n),r=bL(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={installation:{sdkVersion:OS,appId:t.appId}},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await BS(()=>fetch(i,c));if(h.ok){const f=await h.json();return FS(f)}else throw await zS("Generate Auth Token",h)}function GL(t,{fid:e}){return`${DS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cm(t,e=!1){let n;const i=await Bc(t.appConfig,o=>{if(!qS(o))throw Lr.create("not-registered");const l=o.authToken;if(!e&&QL(l))return o;if(l.requestStatus===1)return n=KL(t,e),o;{if(!navigator.onLine)throw Lr.create("app-offline");const c=XL(o);return n=YL(t,c),c}});return n?await n:i.authToken}async function KL(t,e){let n=await fy(t.appConfig);for(;n.authToken.requestStatus===1;)await jS(100),n=await fy(t.appConfig);const i=n.authToken;return i.requestStatus===0?Cm(t,e):i}function fy(t){return Bc(t,e=>{if(!qS(e))throw Lr.create("not-registered");const n=e.authToken;return eN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function YL(t,e){try{const n=await qL(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await ju(t.appConfig,i),n}catch(n){if(MS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await VS(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ju(t.appConfig,i)}throw n}}function qS(t){return t!==void 0&&t.registrationStatus===2}function QL(t){return t.requestStatus===2&&!JL(t)}function JL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+IL}function XL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function eN(t){return t.requestStatus===1&&t.requestTime+NS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t){const e=t,{installationEntry:n,registrationPromise:i}=await Tm(e);return i?i.catch(console.error):Cm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e=!1){const n=t;return await iN(n),(await Cm(n,e)).token}async function iN(t){const{registrationPromise:e}=await Tm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){if(!t||!t.options)throw Sd("App Configuration");if(!t.name)throw Sd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Sd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Sd(t){return Lr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="installations",sN="installations-internal",oN=t=>{const e=t.getProvider("app").getImmediate(),n=rN(e),i=Xi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},aN=t=>{const e=t.getProvider("app").getImmediate(),n=Xi(e,GS).getImmediate();return{getId:()=>tN(n),getToken:r=>nN(n,r)}};function lN(){Sn(new an(GS,oN,"PUBLIC")),Sn(new an(sN,aN,"PRIVATE"))}lN();zt(LS,Em);zt(LS,Em,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="analytics",uN="firebase_id",cN="origin",hN=60*1e3,dN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Im="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut=new Fc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$t=new Hr("analytics","Analytics",fN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){if(!t.startsWith(Im)){const e=$t.create("invalid-gtag-resource",{gtagURL:t});return Ut.warn(e.message),""}return t}function KS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function mN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function _N(t,e){const n=mN("firebase-js-sdk-policy",{createScriptURL:pN}),i=document.createElement("script"),r=`${Im}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function gN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function vN(t,e,n,i,r,o){const l=i[r];try{if(l)await e[l];else{const h=(await KS(n)).find(f=>f.measurementId===r);h&&await e[h.appId]}}catch(c){Ut.error(c)}t("config",r,o)}async function yN(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const c=await KS(n);for(const h of l){const f=c.find(_=>_.measurementId===h),m=f&&e[f.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){Ut.error(o)}}function wN(t,e,n,i){async function r(o,...l){try{if(o==="event"){const[c,h]=l;await yN(t,e,n,c,h)}else if(o==="config"){const[c,h]=l;await vN(t,e,n,i,c,h)}else if(o==="consent"){const[c]=l;t("consent","update",c)}else if(o==="get"){const[c,h,f]=l;t("get",c,h,f)}else if(o==="set"){const[c]=l;t("set",c)}else t(o,...l)}catch(c){Ut.error(c)}}return r}function EN(t,e,n,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=wN(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function SN(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Im)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=30,CN=1e3;class IN{constructor(e={},n=CN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const YS=new IN;function xN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function PN(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:xN(i)},o=dN.replace("{app-id}",n),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let c="";try{const h=await l.json();!((e=h.error)===null||e===void 0)&&e.message&&(c=h.error.message)}catch{}throw $t.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function kN(t,e=YS,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw $t.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw $t.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new LN;return setTimeout(async()=>{c.abort()},n!==void 0?n:hN),QS({appId:i,apiKey:r,measurementId:o},l,c,e)}async function QS(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=YS){var o;const{appId:l,measurementId:c}=t;try{await bN(i,e)}catch(h){if(c)return Ut.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:l,measurementId:c};throw h}try{const h=await PN(t);return r.deleteThrottleMetadata(l),h}catch(h){const f=h;if(!RN(f)){if(r.deleteThrottleMetadata(l),c)return Ut.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:l,measurementId:c};throw h}const m=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?ty(n,r.intervalMillis,TN):ty(n,r.intervalMillis),_={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return r.setThrottleMetadata(l,_),Ut.debug(`Calling attemptFetch again in ${m} millis`),QS(t,_,i,r)}}function bN(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i($t.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function RN(t){if(!(t instanceof In)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class LN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function NN(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,l=Object.assign(Object.assign({},i),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(){if(ES())try{await SS()}catch(t){return Ut.warn($t.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ut.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function AN(t,e,n,i,r,o,l){var c;const h=kN(t);h.then(E=>{n[E.measurementId]=E.appId,t.options.measurementId&&E.measurementId!==t.options.measurementId&&Ut.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Ut.error(E)),e.push(h);const f=ON().then(E=>{if(E)return i.getId()}),[m,_]=await Promise.all([h,f]);SN(o)||_N(o,m.measurementId),r("js",new Date);const v=(c=l==null?void 0:l.config)!==null&&c!==void 0?c:{};return v[cN]="firebase",v.update=!0,_!=null&&(v[uN]=_),r("config",m.measurementId,v),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.app=e}_delete(){return delete ea[this.app.options.appId],Promise.resolve()}}let ea={},py=[];const my={};let Td="dataLayer",DN="gtag",_y,JS,gy=!1;function FN(){const t=[];if(vS()&&t.push("This is a browser extension environment."),Vb()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=$t.create("invalid-analytics-context",{errorInfo:e});Ut.warn(n.message)}}function zN(t,e,n){FN();const i=t.options.appId;if(!i)throw $t.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ut.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $t.create("no-api-key");if(ea[i]!=null)throw $t.create("already-exists",{id:i});if(!gy){gN(Td);const{wrappedGtag:o,gtagCore:l}=EN(ea,py,my,Td,DN);JS=o,_y=l,gy=!0}return ea[i]=AN(t,py,my,e,_y,Td,n),new MN(t)}function UN(t=zc()){t=qe(t);const e=Xi(t,Wu);return e.isInitialized()?e.getImmediate():BN(t)}function BN(t,e={}){const n=Xi(t,Wu);if(n.isInitialized()){const r=n.getImmediate();if(xa(e,n.getOptions()))return r;throw $t.create("already-initialized")}return n.initialize({options:e})}function jN(t,e,n,i){t=qe(t),NN(JS,ea[t.app.options.appId],e,n,i).catch(r=>Ut.error(r))}const vy="@firebase/analytics",yy="0.10.0";function WN(){Sn(new an(Wu,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return zN(i,r,n)},"PUBLIC")),Sn(new an("analytics-internal",t,"PRIVATE")),zt(vy,yy),zt(vy,yy,"esm2017");function t(e){try{const n=e.getProvider(Wu).getImmediate();return{logEvent:(i,r,o)=>jN(n,i,r,o)}}catch(n){throw $t.create("interop-component-reg-failed",{reason:n})}}}WN();const wy="@firebase/database",Ey="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XS="";function HN(t){XS=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),lt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ia(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $N(e)}}catch{}return new VN},_r=eT("localStorage"),Vf=eT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Fc("@firebase/database"),ZN=function(){let t=1;return function(){return t++}}(),tT=function(t){const e=tR(t),n=new Qb;n.update(e);const i=n.digest();return gm.encodeByteArray(i)},Za=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Za.apply(null,i):typeof i=="object"?e+=lt(i):e+=i,e+=" "}return e};let Sr=null,Sy=!0;const qN=function(t,e){B(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ps.logLevel=Se.VERBOSE,Sr=Ps.log.bind(Ps),e&&Vf.set("logging_enabled",!0)):typeof t=="function"?Sr=t:(Sr=null,Vf.remove("logging_enabled"))},pt=function(...t){if(Sy===!0&&(Sy=!1,Sr===null&&Vf.get("logging_enabled")===!0&&qN(!0)),Sr){const e=Za.apply(null,t);Sr(e)}},qa=function(t){return function(...e){pt(t,...e)}},Zf=function(...t){const e="FIREBASE INTERNAL ERROR: "+Za(...t);Ps.error(e)},ui=function(...t){const e=`FIREBASE FATAL ERROR: ${Za(...t)}`;throw Ps.error(e),new Error(e)},Pt=function(...t){const e="FIREBASE WARNING: "+Za(...t);Ps.warn(e)},GN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},KN=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},js="[MIN_NAME]",Or="[MAX_NAME]",Vr=function(t,e){if(t===e)return 0;if(t===js||e===Or)return-1;if(e===js||t===Or)return 1;{const n=Ty(t),i=Ty(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},YN=function(t,e){return t===e?0:t<e?-1:1},Ro=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+lt(e))},Pm=function(t){if(typeof t!="object"||t===null)return lt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=lt(e[i]),n+=":",n+=Pm(t[e[i]]);return n+="}",n},nT=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function gt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const iT=function(t){B(!xm(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,l,c,h;t===0?(o=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=c+i,l=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(o=0,l=Math.round(t/Math.pow(2,1-i-n))));const f=[];for(h=n;h;h-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(r?1:0),f.reverse();const m=f.join("");let _="";for(h=0;h<64;h+=8){let v=parseInt(m.substr(h,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},QN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function XN(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const eO=new RegExp("^-?(0*)\\d{1,10}$"),tO=-2147483648,nO=2147483647,Ty=function(t){if(eO.test(t)){const e=Number(t);if(e>=tO&&e<=nO)return e}return null},to=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Pt("Exception was thrown by user callback.",n),e},Math.floor(0))}},iO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ta=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Pt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(pt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pt(e)}}class ks{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ks.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="5",rT="v",sT="s",oT="r",aT="f",lT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uT="ls",cT="p",qf="ac",hT="websocket",dT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,i,r,o=!1,l="",c=!1,h=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_r.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_r.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function oO(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function pT(t,e,n){B(typeof e=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let i;if(e===hT)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===dT)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);oO(t)&&(n.ns=t.namespace);const r=[];return gt(n,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.counters_={}}incrementCounter(e,n=1){Wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Fb(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd={},Id={};function bm(t){const e=t.toString();return Cd[e]||(Cd[e]=new aO),Cd[e]}function lO(t,e){const n=t.toString();return Id[n]||(Id[n]=e()),Id[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&to(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="start",cO="close",hO="pLPCommand",dO="pRTLPCB",mT="id",_T="pw",gT="ser",fO="cb",pO="seg",mO="ts",_O="d",gO="dframe",vT=1870,yT=30,vO=vT-yT,yO=25e3,wO=3e4;class ys{constructor(e,n,i,r,o,l,c){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qa(e),this.stats_=bm(n),this.urlFn=h=>(this.appCheckToken&&(h[qf]=this.appCheckToken),pT(n,dT,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new uO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wO)),KN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rm((...o)=>{const[l,c,h,f,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Cy)this.id=c,this.password=h;else if(l===cO)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const i={};i[Cy]="t",i[gT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[fO]=this.scriptTagHolder.uniqueCallbackIdentifier),i[rT]=km,this.transportSessionId&&(i[sT]=this.transportSessionId),this.lastSessionId&&(i[uT]=this.lastSessionId),this.applicationId&&(i[cT]=this.applicationId),this.appCheckToken&&(i[qf]=this.appCheckToken),typeof location<"u"&&location.hostname&&lT.test(location.hostname)&&(i[oT]=aT);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ys.forceAllow_=!0}static forceDisallow(){ys.forceDisallow_=!0}static isAvailable(){return ys.forceAllow_?!0:!ys.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!QN()&&!JN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=hS(n),r=nT(i,vO);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[gO]="t",i[mT]=e,i[_T]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=lt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Rm{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ZN(),window[hO+this.uniqueCallbackIdentifier]=e,window[dO+this.uniqueCallbackIdentifier]=n,this.myIFrame=Rm.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){pt("frame writing exception"),c.stack&&pt(c.stack),pt(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[mT]=this.myID,e[_T]=this.myPW,e[gT]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+yT+i.length<=vT;){const l=this.pendingSegs.shift();i=i+"&"+pO+r+"="+l.seg+"&"+mO+r+"="+l.ts+"&"+_O+r+"="+l.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(yO)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{pt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=16384,SO=45e3;let Hu=null;typeof MozWebSocket<"u"?Hu=MozWebSocket:typeof WebSocket<"u"&&(Hu=WebSocket);class _n{constructor(e,n,i,r,o,l,c){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qa(this.connId),this.stats_=bm(n),this.connURL=_n.connectionURL_(n,l,c,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const l={};return l[rT]=km,typeof location<"u"&&location.hostname&&lT.test(location.hostname)&&(l[oT]=aT),n&&(l[sT]=n),i&&(l[uT]=i),r&&(l[qf]=r),o&&(l[cT]=o),pT(e,hT,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_r.set("previous_websocket_failure",!0);try{let i;wS(),this.mySock=new Hu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){_n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Hu!==null&&!_n.forceDisallow_}static previouslyFailed(){return _r.isInMemoryStorage||_r.get("previous_websocket_failure")===!0}markConnectionHealthy(){_r.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Ia(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=nT(n,EO);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(SO))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_n.responsesRequiredToBeHealthy=2;_n.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ys,_n]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=_n&&_n.isAvailable();let i=n&&!_n.previouslyFailed();if(e.webSocketOnly&&(n||Pt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[_n];else{const r=this.transports_=[];for(const o of ka.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);ka.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ka.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=6e4,CO=5e3,IO=10*1024,xO=100*1024,xd="t",Iy="d",PO="s",xy="r",kO="e",Py="o",ky="a",by="n",Ry="p",bO="h";class RO{constructor(e,n,i,r,o,l,c,h,f,m){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qa("c:"+this.id+":"),this.transportManager_=new ka(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ta(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>xO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>IO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xd in e){const n=e[xd];n===ky?this.upgradeIfSecondaryHealthy_():n===xy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Py&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ro("t",e),i=Ro("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ry,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ky,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:by,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ro("t",e),i=Ro("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ro(xd,e);if(Iy in e){const i=e[Iy];if(n===bO){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===by){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===PO?this.onConnectionShutdown_(i):n===xy?this.onReset_(i):n===kO?Zf("Server Error: "+i):n===Py?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),km!==i&&Pt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),ta(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(TO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ta(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ry,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_r.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){B(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends ET{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!vm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $u}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=32,Ny=768;class Te{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function we(){return new Te("")}function ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Gi(t){return t.pieces_.length-t.pieceNum_}function ke(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Te(t.pieces_,e)}function Lm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function LO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ba(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ST(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Te(e,0)}function Ue(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Te)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Te(n,0)}function ce(t){return t.pieceNum_>=t.pieces_.length}function Ot(t,e){const n=ae(t),i=ae(e);if(n===null)return e;if(n===i)return Ot(ke(t),ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function NO(t,e){const n=ba(t,0),i=ba(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=Vr(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function Nm(t,e){if(Gi(t)!==Gi(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function tn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Gi(t)>Gi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class OO{constructor(e,n){this.errorPrefix_=n,this.parts_=ba(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Dc(this.parts_[i]);TT(this)}}function AO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Dc(e),TT(t)}function MO(t){const e=t.parts_.pop();t.byteLength_-=Dc(e),t.parts_.length>0&&(t.byteLength_-=1)}function TT(t){if(t.byteLength_>Ny)throw new Error(t.errorPrefix_+"has a key path longer than "+Ny+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ly)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ly+") or object contains a cycle "+hr(t))}function hr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends ET{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Om}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=1e3,DO=60*5*1e3,Oy=30*1e3,FO=1.3,zO=3e4,UO="server_kill",Ay=3;class ni extends wT{constructor(e,n,i,r,o,l,c,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=h,this.id=ni.nextPersistentConnectionId_++,this.log_=qa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lo,this.maxReconnectDelay_=DO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!wS())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Om.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$u.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(lt(o)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Va,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const h=c.d,f=c.s;ni.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(f,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Wn(e,"w")){const i=Bs(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Pt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Yb(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Oy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Kb(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const l={p:n,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+lt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Zf("Unrecognized action received from server: "+lt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zO&&(this.reconnectDelay_=Lo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*FO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ni.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,i())},f=function(_){B(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)};this.realtime_={close:h,sendRequest:f};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,v]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?pt("getToken() completed but was canceled"):(pt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=v&&v.token,c=new RO(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,E=>{Pt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(UO)},o))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&Pt(_),h())}}}interrupt(e){pt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){pt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Df(this.interruptReasons_)&&(this.reconnectDelay_=Lo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>Pm(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Te(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){pt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ay&&(this.reconnectDelay_=Oy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){pt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ay&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+XS.replace(/\./g,"-")]=1,vm()?e["framework.cordova"]=1:yS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$u.getInstance().currentlyOnline();return Df(this.interruptReasons_)&&e}}ni.nextPersistentConnectionId_=0;ni.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new le(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new le(js,e),r=new le(js,n);return this.compare(i,r)!==0}minPost(){return le.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul;class CT extends jc{static get __EMPTY_NODE(){return Ul}static set __EMPTY_NODE(e){Ul=e}compare(e,n){return Vr(e.name,n.name)}isDefinedOn(e){throw Xs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return le.MIN}maxPost(){return new le(Or,Ul)}makePost(e,n){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new le(e,Ul)}toString(){return".key"}}const bs=new CT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ot{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??ot.RED,this.left=r??At.EMPTY_NODE,this.right=o??At.EMPTY_NODE}copy(e,n,i,r,o){return new ot(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ot.RED=!0;ot.BLACK=!1;class BO{copy(e,n,i,r,o){return this}insert(e,n,i){return new ot(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class At{constructor(e,n=At.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new At(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ot.BLACK,null,null))}remove(e){return new At(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ot.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Bl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Bl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Bl(this.root_,null,this.comparator_,!0,e)}}At.EMPTY_NODE=new BO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){return Vr(t.name,e.name)}function Am(t,e){return Vr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf;function WO(t){Gf=t}const IT=function(t){return typeof t=="number"?"number:"+iT(t):"string:"+t},xT=function(t){if(t.isLeafNode()){const e=t.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wn(e,".sv"),"Priority must be a string or number.")}else B(t===Gf||t.isEmpty(),"priority of unexpected type.");B(t===Gf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let My;class rt{constructor(e,n=rt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xT(this.priorityNode_)}static set __childrenNodeConstructor(e){My=e}static get __childrenNodeConstructor(){return My}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ce(e)?this:ae(e)===".priority"?this.priorityNode_:rt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:rt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=ae(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(B(i!==".priority"||Gi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,rt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ke(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+IT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=iT(this.value_):e+=this.value_,this.lazyHash_=tT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rt.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=rt.VALUE_TYPE_ORDER.indexOf(n),o=rt.VALUE_TYPE_ORDER.indexOf(i);return B(r>=0,"Unknown leaf type: "+n),B(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}rt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PT,kT;function HO(t){PT=t}function $O(t){kT=t}class VO extends jc{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Vr(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return le.MIN}maxPost(){return new le(Or,new rt("[PRIORITY-POST]",kT))}makePost(e,n){const i=PT(e);return new le(n,new rt("[PRIORITY-POST]",i))}toString(){return".priority"}}const Be=new VO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=Math.log(2);class qO{constructor(e){const n=o=>parseInt(Math.log(o)/ZO,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Vu=function(t,e,n,i){t.sort(e);const r=function(h,f){const m=f-h;let _,v;if(m===0)return null;if(m===1)return _=t[h],v=n?n(_):_,new ot(v,_.node,ot.BLACK,null,null);{const E=parseInt(m/2,10)+h,w=r(h,E),I=r(E+1,f);return _=t[E],v=n?n(_):_,new ot(v,_.node,ot.BLACK,w,I)}},o=function(h){let f=null,m=null,_=t.length;const v=function(w,I){const N=_-w,S=_;_-=w;const y=r(N+1,S),C=t[N],R=n?n(C):C;E(new ot(R,C.node,I,null,y))},E=function(w){f?(f.left=w,f=w):(m=w,f=w)};for(let w=0;w<h.count;++w){const I=h.nextBitIsOne(),N=Math.pow(2,h.count-(w+1));I?v(N,ot.BLACK):(v(N,ot.BLACK),v(N,ot.RED))}return m},l=new qO(t.length),c=o(l);return new At(i||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd;const rs={};class Jn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return B(rs&&Be,"ChildrenNode.ts has not been loaded"),Pd=Pd||new Jn({".priority":rs},{".priority":Be}),Pd}get(e){const n=Bs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof At?n:null}hasIndex(e){return Wn(this.indexSet_,e.toString())}addIndex(e,n){B(e!==bs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(le.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let c;r?c=Vu(i,e.getCompare()):c=rs;const h=e.toString(),f=Object.assign({},this.indexSet_);f[h]=e;const m=Object.assign({},this.indexes_);return m[h]=c,new Jn(m,f)}addToIndexes(e,n){const i=Uu(this.indexes_,(r,o)=>{const l=Bs(this.indexSet_,o);if(B(l,"Missing index implementation for "+o),r===rs)if(l.isDefinedOn(e.node)){const c=[],h=n.getIterator(le.Wrap);let f=h.getNext();for(;f;)f.name!==e.name&&c.push(f),f=h.getNext();return c.push(e),Vu(c,l.getCompare())}else return rs;else{const c=n.get(e.name);let h=r;return c&&(h=h.remove(new le(e.name,c))),h.insert(e,e.node)}});return new Jn(i,this.indexSet_)}removeFromIndexes(e,n){const i=Uu(this.indexes_,r=>{if(r===rs)return r;{const o=n.get(e.name);return o?r.remove(new le(e.name,o)):r}});return new Jn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No;class te{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&xT(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return No||(No=new te(new At(Am),null,Jn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||No}updatePriority(e){return this.children_.isEmpty()?this:new te(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?No:n}}getChild(e){const n=ae(e);return n===null?this:this.getImmediateChild(n).getChild(ke(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new le(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?No:this.priorityNode_;return new te(r,l,o)}}updateChild(e,n){const i=ae(e);if(i===null)return n;{B(ae(e)!==".priority"||Gi(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(ke(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(Be,(l,c)=>{n[l]=c.val(e),i++,o&&te.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const c in n)l[c]=n[c];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+IT(this.getPriority().val())+":"),this.forEachChild(Be,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":tT(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new le(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new le(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new le(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,le.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,le.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ga?-1:0}withIndex(e){if(e===bs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new te(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===bs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Be),r=n.getIterator(Be);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===bs?null:this.indexMap_.get(e.toString())}}te.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class GO extends te{constructor(){super(new At(Am),te.EMPTY_NODE,Jn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return te.EMPTY_NODE}isEmpty(){return!1}}const Ga=new GO;Object.defineProperties(le,{MIN:{value:new le(js,te.EMPTY_NODE)},MAX:{value:new le(Or,Ga)}});CT.__EMPTY_NODE=te.EMPTY_NODE;rt.__childrenNodeConstructor=te;WO(Ga);$O(Ga);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=!0;function at(t,e=null){if(t===null)return te.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new rt(n,at(e))}if(!(t instanceof Array)&&KO){const n=[];let i=!1;if(gt(t,(l,c)=>{if(l.substring(0,1)!=="."){const h=at(c);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new le(l,h)))}}),n.length===0)return te.EMPTY_NODE;const o=Vu(n,jO,l=>l.name,Am);if(i){const l=Vu(n,Be.getCompare());return new te(o,at(e),new Jn({".priority":l},{".priority":Be}))}else return new te(o,at(e),Jn.Default)}else{let n=te.EMPTY_NODE;return gt(t,(i,r)=>{if(Wn(t,i)&&i.substring(0,1)!=="."){const o=at(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(at(e))}}HO(at);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO extends jc{constructor(e){super(),this.indexPath_=e,B(!ce(e)&&ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Vr(e.name,n.name):o}makePost(e,n){const i=at(e),r=te.EMPTY_NODE.updateChild(this.indexPath_,i);return new le(n,r)}maxPost(){const e=te.EMPTY_NODE.updateChild(this.indexPath_,Ga);return new le(Or,e)}toString(){return ba(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO extends jc{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Vr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return le.MIN}maxPost(){return le.MAX}makePost(e,n){const i=at(e);return new le(n,i)}toString(){return".value"}}const JO=new QO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){return{type:"value",snapshotNode:t}}function Ws(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ra(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function La(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function XO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.index_=e}updateChild(e,n,i,r,o,l){B(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(r).equals(i.getChild(r))&&c.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange(Ra(n,c)):B(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(Ws(n,i)):l.trackChildChange(La(n,i,c))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Be,(r,o)=>{n.hasChild(r)||i.trackChildChange(Ra(r,o))}),n.isLeafNode()||n.forEachChild(Be,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(La(r,o,l))}else i.trackChildChange(Ws(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?te.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.indexedFilter_=new Mm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Na.getStartPost_(e),this.endPost_=Na.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,l){return this.matches(new le(n,i))||(i=te.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=te.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(te.EMPTY_NODE);const o=this;return n.forEachChild(Be,(l,c)=>{o.matches(new le(l,c))||(r=r.updateImmediateChild(l,te.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Na(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,l){return this.rangedFilter_.matches(new le(n,i))||(i=te.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,l):this.fullLimitUpdateChild_(e,n,i,o,l)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=te.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=te.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))r=r.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(te.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let l=0;for(;o.hasNext();){const c=o.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:r=r.updateImmediateChild(c.name,te.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let l;if(this.reverse_){const _=this.index_.getCompare();l=(v,E)=>_(E,v)}else l=this.index_.getCompare();const c=e;B(c.numChildren()===this.limit_,"");const h=new le(n,i),f=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),m=this.rangedFilter_.matches(h);if(c.hasChild(n)){const _=c.getImmediateChild(n);let v=r.getChildAfterChild(this.index_,f,this.reverse_);for(;v!=null&&(v.name===n||c.hasChild(v.name));)v=r.getChildAfterChild(this.index_,v,this.reverse_);const E=v==null?1:l(v,h);if(m&&!i.isEmpty()&&E>=0)return o!=null&&o.trackChildChange(La(n,i,_)),c.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Ra(n,_));const I=c.updateImmediateChild(n,te.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(o!=null&&o.trackChildChange(Ws(v.name,v.node)),I.updateImmediateChild(v.name,v.node)):I}}else return i.isEmpty()?e:m&&l(f,h)>=0?(o!=null&&(o.trackChildChange(Ra(f.name,f.node)),o.trackChildChange(Ws(n,i))),c.updateImmediateChild(n,i).updateImmediateChild(f.name,te.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Be}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:js}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Or}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Be}copy(){const e=new Dm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tA(t){return t.loadsAllData()?new Mm(t.getIndex()):t.hasLimit()?new eA(t):new Na(t)}function Dy(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Be?n="$priority":t.index_===JO?n="$value":t.index_===bs?n="$key":(B(t.index_ instanceof YO,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=lt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=lt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+lt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=lt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+lt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Fy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Be&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends wT{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=qa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Zu.getListenId_(e,i),c={};this.listens_[l]=c;const h=Dy(e._queryParams);this.restRequest_(o+".json",h,(f,m)=>{let _=m;if(f===404&&(_=null,f=null),f===null&&this.onDataUpdate_(o,_,!1,i),Bs(this.listens_,l)===c){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",r(v,null)}})}unlisten(e,n){const i=Zu.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Dy(e._queryParams),i=e._path.toString(),r=new Va;return this.restRequest_(i+".json",n,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(i,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+eo(n);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let h=null;if(c.status>=200&&c.status<300){try{h=Ia(c.responseText)}catch{Pt("Failed to parse JSON response for "+l+": "+c.responseText)}i(null,h)}else c.status!==401&&c.status!==404&&Pt("Got unsuccessful REST response for "+l+" Status: "+c.status),i(c.status);i=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.rootNode_=te.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(){return{value:null,children:new Map}}function RT(t,e,n){if(ce(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=ae(e);t.children.has(i)||t.children.set(i,qu());const r=t.children.get(i);e=ke(e),RT(r,e,n)}}function Kf(t,e,n){t.value!==null?n(e,t.value):iA(t,(i,r)=>{const o=new Te(e.toString()+"/"+i);Kf(r,o,n)})}function iA(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gt(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=10*1e3,sA=30*1e3,oA=5*60*1e3;class aA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new rA(e);const i=zy+(sA-zy)*Math.random();ta(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;gt(e,(r,o)=>{o>0&&Wn(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),ta(this.reportStats_.bind(this),Math.floor(Math.random()*2*oA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gn||(gn={}));function Fm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Um(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=gn.ACK_USER_WRITE,this.source=Fm()}operationForChild(e){if(ce(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Te(e));return new Gu(we(),n,this.revert)}}else return B(ae(this.path)===e,"operationForChild called for unrelated child."),new Gu(ke(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.source=e,this.path=n,this.type=gn.LISTEN_COMPLETE}operationForChild(e){return ce(this.path)?new Oa(this.source,we()):new Oa(this.source,ke(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=gn.OVERWRITE}operationForChild(e){return ce(this.path)?new Ar(this.source,we(),this.snap.getImmediateChild(e)):new Ar(this.source,ke(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=gn.MERGE}operationForChild(e){if(ce(this.path)){const n=this.children.subtree(new Te(e));return n.isEmpty()?null:n.value?new Ar(this.source,we(),n.value):new Hs(this.source,we(),n)}else return B(ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hs(this.source,ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ce(e))return this.isFullyInitialized()&&!this.filtered_;const n=ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uA(t,e,n,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(XO(l.childName,l.snapshotNode))}),Oo(t,r,"child_removed",e,i,n),Oo(t,r,"child_added",e,i,n),Oo(t,r,"child_moved",o,i,n),Oo(t,r,"child_changed",e,i,n),Oo(t,r,"value",e,i,n),r}function Oo(t,e,n,i,r,o){const l=i.filter(c=>c.type===n);l.sort((c,h)=>hA(t,c,h)),l.forEach(c=>{const h=cA(t,c,o);r.forEach(f=>{f.respondsTo(c.type)&&e.push(f.createEvent(h,t.query_))})})}function cA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function hA(t,e,n){if(e.childName==null||n.childName==null)throw Xs("Should only compare child_ events.");const i=new le(e.childName,e.snapshotNode),r=new le(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e){return{eventCache:t,serverCache:e}}function na(t,e,n,i){return Wc(new Mr(e,n,i),t.serverCache)}function LT(t,e,n,i){return Wc(t.eventCache,new Mr(e,n,i))}function Yf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Dr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd;const dA=()=>(kd||(kd=new At(YN)),kd);class Pe{constructor(e,n=dA()){this.value=e,this.children=n}static fromObject(e){let n=new Pe(null);return gt(e,(i,r)=>{n=n.set(new Te(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:we(),value:this.value};if(ce(e))return null;{const i=ae(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(ke(e),n);return o!=null?{path:Ue(new Te(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ce(e))return this;{const n=ae(e),i=this.children.get(n);return i!==null?i.subtree(ke(e)):new Pe(null)}}set(e,n){if(ce(e))return new Pe(n,this.children);{const i=ae(e),o=(this.children.get(i)||new Pe(null)).set(ke(e),n),l=this.children.insert(i,o);return new Pe(this.value,l)}}remove(e){if(ce(e))return this.children.isEmpty()?new Pe(null):new Pe(null,this.children);{const n=ae(e),i=this.children.get(n);if(i){const r=i.remove(ke(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new Pe(null):new Pe(this.value,o)}else return this}}get(e){if(ce(e))return this.value;{const n=ae(e),i=this.children.get(n);return i?i.get(ke(e)):null}}setTree(e,n){if(ce(e))return n;{const i=ae(e),o=(this.children.get(i)||new Pe(null)).setTree(ke(e),n);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new Pe(this.value,l)}}fold(e){return this.fold_(we(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Ue(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,we(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(ce(e))return null;{const o=ae(e),l=this.children.get(o);return l?l.findOnPath_(ke(e),Ue(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,we(),n)}foreachOnPath_(e,n,i){if(ce(e))return this;{this.value&&i(n,this.value);const r=ae(e),o=this.children.get(r);return o?o.foreachOnPath_(ke(e),Ue(n,r),i):new Pe(null)}}foreach(e){this.foreach_(we(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Ue(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.writeTree_=e}static empty(){return new wn(new Pe(null))}}function ia(t,e,n){if(ce(e))return new wn(new Pe(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=Ot(r,e);return o=o.updateChild(l,n),new wn(t.writeTree_.set(r,o))}else{const r=new Pe(n),o=t.writeTree_.setTree(e,r);return new wn(o)}}}function Qf(t,e,n){let i=t;return gt(n,(r,o)=>{i=ia(i,Ue(e,r),o)}),i}function Uy(t,e){if(ce(e))return wn.empty();{const n=t.writeTree_.setTree(e,new Pe(null));return new wn(n)}}function Jf(t,e){return Zr(t,e)!=null}function Zr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ot(n.path,e)):null}function By(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Be,(i,r)=>{e.push(new le(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new le(i,r.value))}),e}function Vi(t,e){if(ce(e))return t;{const n=Zr(t,e);return n!=null?new wn(new Pe(n)):new wn(t.writeTree_.subtree(e))}}function Xf(t){return t.writeTree_.isEmpty()}function $s(t,e){return NT(we(),t.writeTree_,e)}function NT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(B(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=NT(Ue(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Ue(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e){return DT(e,t)}function fA(t,e,n,i,r){B(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=ia(t.visibleWrites,e,n)),t.lastWriteId=i}function pA(t,e,n,i){B(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Qf(t.visibleWrites,e,n),t.lastWriteId=i}function mA(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function _A(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);B(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const c=t.allWrites[l];c.visible&&(l>=n&&gA(c,i.path)?r=!1:tn(i.path,c.path)&&(o=!0)),l--}if(r){if(o)return vA(t),!0;if(i.snap)t.visibleWrites=Uy(t.visibleWrites,i.path);else{const c=i.children;gt(c,h=>{t.visibleWrites=Uy(t.visibleWrites,Ue(i.path,h))})}return!0}else return!1}function gA(t,e){if(t.snap)return tn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&tn(Ue(t.path,n),e))return!0;return!1}function vA(t){t.visibleWrites=OT(t.allWrites,yA,we()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function yA(t){return t.visible}function OT(t,e,n){let i=wn.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const l=o.path;let c;if(o.snap)tn(n,l)?(c=Ot(n,l),i=ia(i,c,o.snap)):tn(l,n)&&(c=Ot(l,n),i=ia(i,we(),o.snap.getChild(c)));else if(o.children){if(tn(n,l))c=Ot(n,l),i=Qf(i,c,o.children);else if(tn(l,n))if(c=Ot(l,n),ce(c))i=Qf(i,we(),o.children);else{const h=Bs(o.children,ae(c));if(h){const f=h.getChild(ke(c));i=ia(i,we(),f)}}}else throw Xs("WriteRecord should have .snap or .children")}}return i}function AT(t,e,n,i,r){if(!i&&!r){const o=Zr(t.visibleWrites,e);if(o!=null)return o;{const l=Vi(t.visibleWrites,e);if(Xf(l))return n;if(n==null&&!Jf(l,we()))return null;{const c=n||te.EMPTY_NODE;return $s(l,c)}}}else{const o=Vi(t.visibleWrites,e);if(!r&&Xf(o))return n;if(!r&&n==null&&!Jf(o,we()))return null;{const l=function(f){return(f.visible||r)&&(!i||!~i.indexOf(f.writeId))&&(tn(f.path,e)||tn(e,f.path))},c=OT(t.allWrites,l,e),h=n||te.EMPTY_NODE;return $s(c,h)}}}function wA(t,e,n){let i=te.EMPTY_NODE;const r=Zr(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Be,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(n){const o=Vi(t.visibleWrites,e);return n.forEachChild(Be,(l,c)=>{const h=$s(Vi(o,new Te(l)),c);i=i.updateImmediateChild(l,h)}),By(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=Vi(t.visibleWrites,e);return By(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function EA(t,e,n,i,r){B(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Ue(e,n);if(Jf(t.visibleWrites,o))return null;{const l=Vi(t.visibleWrites,o);return Xf(l)?r.getChild(n):$s(l,r.getChild(n))}}function SA(t,e,n,i){const r=Ue(e,n),o=Zr(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const l=Vi(t.visibleWrites,r);return $s(l,i.getNode().getImmediateChild(n))}else return null}function TA(t,e){return Zr(t.visibleWrites,e)}function CA(t,e,n,i,r,o,l){let c;const h=Vi(t.visibleWrites,e),f=Zr(h,we());if(f!=null)c=f;else if(n!=null)c=$s(h,n);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const m=[],_=l.getCompare(),v=o?c.getReverseIteratorFrom(i,l):c.getIteratorFrom(i,l);let E=v.getNext();for(;E&&m.length<r;)_(E,i)!==0&&m.push(E),E=v.getNext();return m}else return[]}function IA(){return{visibleWrites:wn.empty(),allWrites:[],lastWriteId:-1}}function Ku(t,e,n,i){return AT(t.writeTree,t.treePath,e,n,i)}function jm(t,e){return wA(t.writeTree,t.treePath,e)}function jy(t,e,n,i){return EA(t.writeTree,t.treePath,e,n,i)}function Yu(t,e){return TA(t.writeTree,Ue(t.treePath,e))}function xA(t,e,n,i,r,o){return CA(t.writeTree,t.treePath,e,n,i,r,o)}function Wm(t,e,n){return SA(t.writeTree,t.treePath,e,n)}function MT(t,e){return DT(Ue(t.treePath,e),t.writeTree)}function DT(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,La(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Ra(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Ws(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,La(i,e.snapshotNode,r.oldSnap));else throw Xs("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const FT=new kA;class Hm{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Mr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wm(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dr(this.viewCache_),o=xA(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){return{filter:t}}function RA(t,e){B(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function LA(t,e,n,i,r){const o=new PA;let l,c;if(n.type===gn.OVERWRITE){const f=n;f.source.fromUser?l=ep(t,e,f.path,f.snap,i,r,o):(B(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered()&&!ce(f.path),l=Qu(t,e,f.path,f.snap,i,r,c,o))}else if(n.type===gn.MERGE){const f=n;f.source.fromUser?l=OA(t,e,f.path,f.children,i,r,o):(B(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered(),l=tp(t,e,f.path,f.children,i,r,c,o))}else if(n.type===gn.ACK_USER_WRITE){const f=n;f.revert?l=DA(t,e,f.path,i,r,o):l=AA(t,e,f.path,f.affectedTree,i,r,o)}else if(n.type===gn.LISTEN_COMPLETE)l=MA(t,e,n.path,i,o);else throw Xs("Unknown operation type: "+n.type);const h=o.getChanges();return NA(e,l,h),{viewCache:l,changes:h}}function NA(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Yf(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(bT(Yf(e)))}}function zT(t,e,n,i,r,o){const l=e.eventCache;if(Yu(i,n)!=null)return e;{let c,h;if(ce(n))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Dr(e),m=f instanceof te?f:te.EMPTY_NODE,_=jm(i,m);c=t.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const f=Ku(i,Dr(e));c=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=ae(n);if(f===".priority"){B(Gi(n)===1,"Can't have a priority with additional path components");const m=l.getNode();h=e.serverCache.getNode();const _=jy(i,n,m,h);_!=null?c=t.filter.updatePriority(m,_):c=l.getNode()}else{const m=ke(n);let _;if(l.isCompleteForChild(f)){h=e.serverCache.getNode();const v=jy(i,n,l.getNode(),h);v!=null?_=l.getNode().getImmediateChild(f).updateChild(m,v):_=l.getNode().getImmediateChild(f)}else _=Wm(i,f,e.serverCache);_!=null?c=t.filter.updateChild(l.getNode(),f,_,m,r,o):c=l.getNode()}}return na(e,c,l.isFullyInitialized()||ce(n),t.filter.filtersNodes())}}function Qu(t,e,n,i,r,o,l,c){const h=e.serverCache;let f;const m=l?t.filter:t.filter.getIndexedFilter();if(ce(n))f=m.updateFullNode(h.getNode(),i,null);else if(m.filtersNodes()&&!h.isFiltered()){const E=h.getNode().updateChild(n,i);f=m.updateFullNode(h.getNode(),E,null)}else{const E=ae(n);if(!h.isCompleteForPath(n)&&Gi(n)>1)return e;const w=ke(n),N=h.getNode().getImmediateChild(E).updateChild(w,i);E===".priority"?f=m.updatePriority(h.getNode(),N):f=m.updateChild(h.getNode(),E,N,w,FT,null)}const _=LT(e,f,h.isFullyInitialized()||ce(n),m.filtersNodes()),v=new Hm(r,_,o);return zT(t,_,n,r,v,c)}function ep(t,e,n,i,r,o,l){const c=e.eventCache;let h,f;const m=new Hm(r,e,o);if(ce(n))f=t.filter.updateFullNode(e.eventCache.getNode(),i,l),h=na(e,f,!0,t.filter.filtersNodes());else{const _=ae(n);if(_===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),i),h=na(e,f,c.isFullyInitialized(),c.isFiltered());else{const v=ke(n),E=c.getNode().getImmediateChild(_);let w;if(ce(v))w=i;else{const I=m.getCompleteChild(_);I!=null?Lm(v)===".priority"&&I.getChild(ST(v)).isEmpty()?w=I:w=I.updateChild(v,i):w=te.EMPTY_NODE}if(E.equals(w))h=e;else{const I=t.filter.updateChild(c.getNode(),_,w,v,m,l);h=na(e,I,c.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function Wy(t,e){return t.eventCache.isCompleteForChild(e)}function OA(t,e,n,i,r,o,l){let c=e;return i.foreach((h,f)=>{const m=Ue(n,h);Wy(e,ae(m))&&(c=ep(t,c,m,f,r,o,l))}),i.foreach((h,f)=>{const m=Ue(n,h);Wy(e,ae(m))||(c=ep(t,c,m,f,r,o,l))}),c}function Hy(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function tp(t,e,n,i,r,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,f;ce(n)?f=i:f=new Pe(null).setTree(n,i);const m=e.serverCache.getNode();return f.children.inorderTraversal((_,v)=>{if(m.hasChild(_)){const E=e.serverCache.getNode().getImmediateChild(_),w=Hy(t,E,v);h=Qu(t,h,new Te(_),w,r,o,l,c)}}),f.children.inorderTraversal((_,v)=>{const E=!e.serverCache.isCompleteForChild(_)&&v.value===null;if(!m.hasChild(_)&&!E){const w=e.serverCache.getNode().getImmediateChild(_),I=Hy(t,w,v);h=Qu(t,h,new Te(_),I,r,o,l,c)}}),h}function AA(t,e,n,i,r,o,l){if(Yu(r,n)!=null)return e;const c=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(ce(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return Qu(t,e,n,h.getNode().getChild(n),r,o,c,l);if(ce(n)){let f=new Pe(null);return h.getNode().forEachChild(bs,(m,_)=>{f=f.set(new Te(m),_)}),tp(t,e,n,f,r,o,c,l)}else return e}else{let f=new Pe(null);return i.foreach((m,_)=>{const v=Ue(n,m);h.isCompleteForPath(v)&&(f=f.set(m,h.getNode().getChild(v)))}),tp(t,e,n,f,r,o,c,l)}}function MA(t,e,n,i,r){const o=e.serverCache,l=LT(e,o.getNode(),o.isFullyInitialized()||ce(n),o.isFiltered());return zT(t,l,n,i,FT,r)}function DA(t,e,n,i,r,o){let l;if(Yu(i,n)!=null)return e;{const c=new Hm(i,e,r),h=e.eventCache.getNode();let f;if(ce(n)||ae(n)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Ku(i,Dr(e));else{const _=e.serverCache.getNode();B(_ instanceof te,"serverChildren would be complete if leaf node"),m=jm(i,_)}m=m,f=t.filter.updateFullNode(h,m,o)}else{const m=ae(n);let _=Wm(i,m,e.serverCache);_==null&&e.serverCache.isCompleteForChild(m)&&(_=h.getImmediateChild(m)),_!=null?f=t.filter.updateChild(h,m,_,ke(n),c,o):e.eventCache.getNode().hasChild(m)?f=t.filter.updateChild(h,m,te.EMPTY_NODE,ke(n),c,o):f=h,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Ku(i,Dr(e)),l.isLeafNode()&&(f=t.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||Yu(i,we())!=null,na(e,f,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Mm(i.getIndex()),o=tA(i);this.processor_=bA(o);const l=n.serverCache,c=n.eventCache,h=r.updateFullNode(te.EMPTY_NODE,l.getNode(),null),f=o.updateFullNode(te.EMPTY_NODE,c.getNode(),null),m=new Mr(h,l.isFullyInitialized(),r.filtersNodes()),_=new Mr(f,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=Wc(_,m),this.eventGenerator_=new lA(this.query_)}get query(){return this.query_}}function zA(t){return t.viewCache_.serverCache.getNode()}function UA(t,e){const n=Dr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ce(e)&&!n.getImmediateChild(ae(e)).isEmpty())?n.getChild(e):null}function $y(t){return t.eventRegistrations_.length===0}function BA(t,e){t.eventRegistrations_.push(e)}function Vy(t,e,n){const i=[];if(n){B(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const l=t.eventRegistrations_[o];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function Zy(t,e,n,i){e.type===gn.MERGE&&e.source.queryId!==null&&(B(Dr(t.viewCache_),"We should always have a full cache before handling merges"),B(Yf(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=LA(t.processor_,r,e,n,i);return RA(t.processor_,o.viewCache),B(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,UT(t,o.changes,o.viewCache.eventCache.getNode(),null)}function jA(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Be,(o,l)=>{i.push(Ws(o,l))}),n.isFullyInitialized()&&i.push(bT(n.getNode())),UT(t,i,n.getNode(),e)}function UT(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return uA(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju;class WA{constructor(){this.views=new Map}}function HA(t){B(!Ju,"__referenceConstructor has already been defined"),Ju=t}function $A(){return B(Ju,"Reference.ts has not been loaded"),Ju}function VA(t){return t.views.size===0}function $m(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return B(o!=null,"SyncTree gave us an op for an invalid query."),Zy(o,e,n,i)}else{let o=[];for(const l of t.views.values())o=o.concat(Zy(l,e,n,i));return o}}function ZA(t,e,n,i,r){const o=e._queryIdentifier,l=t.views.get(o);if(!l){let c=Ku(n,r?i:null),h=!1;c?h=!0:i instanceof te?(c=jm(n,i),h=!1):(c=te.EMPTY_NODE,h=!1);const f=Wc(new Mr(c,h,!1),new Mr(i,r,!1));return new FA(e,f)}return l}function qA(t,e,n,i,r,o){const l=ZA(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),BA(l,n),jA(l,n)}function GA(t,e,n,i){const r=e._queryIdentifier,o=[];let l=[];const c=Ki(t);if(r==="default")for(const[h,f]of t.views.entries())l=l.concat(Vy(f,n,i)),$y(f)&&(t.views.delete(h),f.query._queryParams.loadsAllData()||o.push(f.query));else{const h=t.views.get(r);h&&(l=l.concat(Vy(h,n,i)),$y(h)&&(t.views.delete(r),h.query._queryParams.loadsAllData()||o.push(h.query)))}return c&&!Ki(t)&&o.push(new($A())(e._repo,e._path)),{removed:o,events:l}}function BT(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Rs(t,e){let n=null;for(const i of t.views.values())n=n||UA(i,e);return n}function jT(t,e){if(e._queryParams.loadsAllData())return Hc(t);{const i=e._queryIdentifier;return t.views.get(i)}}function WT(t,e){return jT(t,e)!=null}function Ki(t){return Hc(t)!=null}function Hc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu;function KA(t){B(!Xu,"__referenceConstructor has already been defined"),Xu=t}function YA(){return B(Xu,"Reference.ts has not been loaded"),Xu}let QA=1;class qy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=IA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function HT(t,e,n,i,r){return fA(t.pendingWriteTree_,e,n,i,r),r?no(t,new Ar(Fm(),e,n)):[]}function JA(t,e,n,i){pA(t.pendingWriteTree_,e,n,i);const r=Pe.fromObject(n);return no(t,new Hs(Fm(),e,r))}function Oi(t,e,n=!1){const i=mA(t.pendingWriteTree_,e);if(_A(t.pendingWriteTree_,e)){let o=new Pe(null);return i.snap!=null?o=o.set(we(),!0):gt(i.children,l=>{o=o.set(new Te(l),!0)}),no(t,new Gu(i.path,o,n))}else return[]}function $c(t,e,n){return no(t,new Ar(zm(),e,n))}function XA(t,e,n){const i=Pe.fromObject(n);return no(t,new Hs(zm(),e,i))}function eM(t,e){return no(t,new Oa(zm(),e))}function tM(t,e,n){const i=Zm(t,n);if(i){const r=qm(i),o=r.path,l=r.queryId,c=Ot(o,e),h=new Oa(Um(l),c);return Gm(t,o,h)}else return[]}function np(t,e,n,i,r=!1){const o=e._path,l=t.syncPointTree_.get(o);let c=[];if(l&&(e._queryIdentifier==="default"||WT(l,e))){const h=GA(l,e,n,i);VA(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const f=h.removed;if(c=h.events,!r){const m=f.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(o,(v,E)=>Ki(E));if(m&&!_){const v=t.syncPointTree_.subtree(o);if(!v.isEmpty()){const E=rM(v);for(let w=0;w<E.length;++w){const I=E[w],N=I.query,S=ZT(t,I);t.listenProvider_.startListening(ra(N),ec(t,N),S.hashFn,S.onComplete)}}}!_&&f.length>0&&!i&&(m?t.listenProvider_.stopListening(ra(e),null):f.forEach(v=>{const E=t.queryToTagMap.get(Vc(v));t.listenProvider_.stopListening(ra(v),E)}))}sM(t,f)}return c}function nM(t,e,n,i){const r=Zm(t,i);if(r!=null){const o=qm(r),l=o.path,c=o.queryId,h=Ot(l,e),f=new Ar(Um(c),h,n);return Gm(t,l,f)}else return[]}function iM(t,e,n,i){const r=Zm(t,i);if(r){const o=qm(r),l=o.path,c=o.queryId,h=Ot(l,e),f=Pe.fromObject(n),m=new Hs(Um(c),h,f);return Gm(t,l,m)}else return[]}function Gy(t,e,n,i=!1){const r=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(r,(v,E)=>{const w=Ot(v,r);o=o||Rs(E,w),l=l||Ki(E)});let c=t.syncPointTree_.get(r);c?(l=l||Ki(c),o=o||Rs(c,we())):(c=new WA,t.syncPointTree_=t.syncPointTree_.set(r,c));let h;o!=null?h=!0:(h=!1,o=te.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((E,w)=>{const I=Rs(w,we());I&&(o=o.updateImmediateChild(E,I))}));const f=WT(c,e);if(!f&&!e._queryParams.loadsAllData()){const v=Vc(e);B(!t.queryToTagMap.has(v),"View does not exist, but we have a tag");const E=oM();t.queryToTagMap.set(v,E),t.tagToQueryMap.set(E,v)}const m=Bm(t.pendingWriteTree_,r);let _=qA(c,e,n,m,o,h);if(!f&&!l&&!i){const v=jT(c,e);_=_.concat(aM(t,e,v))}return _}function Vm(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,c)=>{const h=Ot(l,e),f=Rs(c,h);if(f)return f});return AT(r,e,o,n,!0)}function no(t,e){return $T(e,t.syncPointTree_,null,Bm(t.pendingWriteTree_,we()))}function $T(t,e,n,i){if(ce(t.path))return VT(t,e,n,i);{const r=e.get(we());n==null&&r!=null&&(n=Rs(r,we()));let o=[];const l=ae(t.path),c=t.operationForChild(l),h=e.children.get(l);if(h&&c){const f=n?n.getImmediateChild(l):null,m=MT(i,l);o=o.concat($T(c,h,f,m))}return r&&(o=o.concat($m(r,t,i,n))),o}}function VT(t,e,n,i){const r=e.get(we());n==null&&r!=null&&(n=Rs(r,we()));let o=[];return e.children.inorderTraversal((l,c)=>{const h=n?n.getImmediateChild(l):null,f=MT(i,l),m=t.operationForChild(l);m&&(o=o.concat(VT(m,c,h,f)))}),r&&(o=o.concat($m(r,t,i,n))),o}function ZT(t,e){const n=e.query,i=ec(t,n);return{hashFn:()=>(zA(e)||te.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?tM(t,n._path,i):eM(t,n._path);{const o=XN(r,n);return np(t,n,null,o)}}}}function ec(t,e){const n=Vc(e);return t.queryToTagMap.get(n)}function Vc(t){return t._path.toString()+"$"+t._queryIdentifier}function Zm(t,e){return t.tagToQueryMap.get(e)}function qm(t){const e=t.indexOf("$");return B(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Te(t.substr(0,e))}}function Gm(t,e,n){const i=t.syncPointTree_.get(e);B(i,"Missing sync point for query tag that we're tracking");const r=Bm(t.pendingWriteTree_,e);return $m(i,n,r,null)}function rM(t){return t.fold((e,n,i)=>{if(n&&Ki(n))return[Hc(n)];{let r=[];return n&&(r=BT(n)),gt(i,(o,l)=>{r=r.concat(l)}),r}})}function ra(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(YA())(t._repo,t._path):t}function sM(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Vc(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function oM(){return QA++}function aM(t,e,n){const i=e._path,r=ec(t,e),o=ZT(t,n),l=t.listenProvider_.startListening(ra(e),r,o.hashFn,o.onComplete),c=t.syncPointTree_.subtree(i);if(r)B(!Ki(c.value),"If we're adding a query, it shouldn't be shadowed");else{const h=c.fold((f,m,_)=>{if(!ce(f)&&m&&Ki(m))return[Hc(m).query];{let v=[];return m&&(v=v.concat(BT(m).map(E=>E.query))),gt(_,(E,w)=>{v=v.concat(w)}),v}});for(let f=0;f<h.length;++f){const m=h[f];t.listenProvider_.stopListening(ra(m),ec(t,m))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Km(n)}node(){return this.node_}}class Ym{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ue(this.path_,e);return new Ym(this.syncTree_,n)}node(){return Vm(this.syncTree_,this.path_)}}const lM=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ky=function(t,e,n){if(!t||typeof t!="object")return t;if(B(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return uM(t[".sv"],e,n);if(typeof t[".sv"]=="object")return cM(t[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},uM=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+t)}},cM=function(t,e,n){t.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&B(!1,"Unexpected increment value: "+i);const r=e.node();if(B(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},qT=function(t,e,n,i){return Qm(e,new Ym(n,t),i)},GT=function(t,e,n){return Qm(t,new Km(e),n)};function Qm(t,e,n){const i=t.getPriority().val(),r=Ky(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,c=Ky(l.getValue(),e,n);return c!==l.getValue()||r!==l.getPriority().val()?new rt(c,at(r)):t}else{const l=t;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new rt(r))),l.forEachChild(Be,(c,h)=>{const f=Qm(h,e.getImmediateChild(c),n);f!==h&&(o=o.updateImmediateChild(c,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Xm(t,e){let n=e instanceof Te?e:new Te(e),i=t,r=ae(n);for(;r!==null;){const o=Bs(i.node.children,r)||{children:{},childCount:0};i=new Jm(r,i,o),n=ke(n),r=ae(n)}return i}function io(t){return t.node.value}function KT(t,e){t.node.value=e,ip(t)}function YT(t){return t.node.childCount>0}function hM(t){return io(t)===void 0&&!YT(t)}function Zc(t,e){gt(t.node.children,(n,i)=>{e(new Jm(n,t,i))})}function QT(t,e,n,i){n&&!i&&e(t),Zc(t,r=>{QT(r,e,!0,i)}),n&&i&&e(t)}function dM(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ka(t){return new Te(t.parent===null?t.name:Ka(t.parent)+"/"+t.name)}function ip(t){t.parent!==null&&fM(t.parent,t.name,t)}function fM(t,e,n){const i=hM(n),r=Wn(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,ip(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,ip(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=/[\[\].#$\/\u0000-\u001F\u007F]/,mM=/[\[\].#$\u0000-\u001F\u007F]/,bd=10*1024*1024,e_=function(t){return typeof t=="string"&&t.length!==0&&!pM.test(t)},JT=function(t){return typeof t=="string"&&t.length!==0&&!mM.test(t)},_M=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),JT(t)},gM=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!xm(t)||t&&typeof t=="object"&&Wn(t,".sv")},vM=function(t,e,n,i){i&&e===void 0||qc(Mc(t,"value"),e,n)},qc=function(t,e,n){const i=n instanceof Te?new OO(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+hr(i));if(typeof e=="function")throw new Error(t+"contains a function "+hr(i)+" with contents = "+e.toString());if(xm(e))throw new Error(t+"contains "+e.toString()+" "+hr(i));if(typeof e=="string"&&e.length>bd/3&&Dc(e)>bd)throw new Error(t+"contains a string greater than "+bd+" utf8 bytes "+hr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(gt(e,(l,c)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!e_(l)))throw new Error(t+" contains an invalid key ("+l+") "+hr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);AO(i,l),qc(t,c,i),MO(i)}),r&&o)throw new Error(t+' contains ".value" child '+hr(i)+" in addition to actual children.")}},yM=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=ba(i);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!e_(o[l]))throw new Error(t+"contains an invalid key ("+o[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(NO);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&tn(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},wM=function(t,e,n,i){if(i&&e===void 0)return;const r=Mc(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];gt(e,(l,c)=>{const h=new Te(l);if(qc(r,c,Ue(n,h)),Lm(h)===".priority"&&!gM(c))throw new Error(r+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(h)}),yM(r,o)},XT=function(t,e,n,i){if(!(i&&n===void 0)&&!JT(n))throw new Error(Mc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},EM=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),XT(t,e,n,i)},SM=function(t,e){if(ae(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},TM=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!e_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_M(n))throw new Error(Mc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gc(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!Nm(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function eC(t,e,n){Gc(t,n),tC(t,i=>Nm(i,e))}function Tn(t,e,n){Gc(t,n),tC(t,i=>tn(i,e)||tn(e,i))}function tC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(IM(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function IM(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Sr&&pt("event: "+n.toString()),to(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="repo_interrupt",PM=25;class kM{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qu(),this.transactionQueueTree_=new Jm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bM(t,e,n){if(t.stats_=bm(t.repoInfo_),t.forceRestClient_||iO())t.server_=new Zu(t.repoInfo_,(i,r,o,l)=>{Yy(t,i,r,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Qy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{lt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new ni(t.repoInfo_,e,(i,r,o,l)=>{Yy(t,i,r,o,l)},i=>{Qy(t,i)},i=>{LM(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=lO(t.repoInfo_,()=>new aA(t.stats_,t.server_)),t.infoData_=new nA,t.infoSyncTree_=new qy({startListening:(i,r,o,l)=>{let c=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(c=$c(t.infoSyncTree_,i._path,h),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),t_(t,"connected",!1),t.serverSyncTree_=new qy({startListening:(i,r,o,l)=>(t.server_.listen(i,o,r,(c,h)=>{const f=l(c,h);Tn(t.eventQueue_,i._path,f)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function RM(t){const n=t.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Kc(t){return lM({timestamp:RM(t)})}function Yy(t,e,n,i,r){t.dataUpdateCount++;const o=new Te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(i){const h=Uu(n,f=>at(f));l=iM(t.serverSyncTree_,o,h,r)}else{const h=at(n);l=nM(t.serverSyncTree_,o,h,r)}else if(i){const h=Uu(n,f=>at(f));l=XA(t.serverSyncTree_,o,h)}else{const h=at(n);l=$c(t.serverSyncTree_,o,h)}let c=o;l.length>0&&(c=Vs(t,o)),Tn(t.eventQueue_,c,l)}function Qy(t,e){t_(t,"connected",e),e===!1&&AM(t)}function LM(t,e){gt(e,(n,i)=>{t_(t,n,i)})}function t_(t,e,n){const i=new Te("/.info/"+e),r=at(n);t.infoData_.updateSnapshot(i,r);const o=$c(t.infoSyncTree_,i,r);Tn(t.eventQueue_,i,o)}function n_(t){return t.nextWriteId_++}function NM(t,e,n,i,r){Yc(t,"set",{path:e.toString(),value:n,priority:i});const o=Kc(t),l=at(n,i),c=Vm(t.serverSyncTree_,e),h=GT(l,c,o),f=n_(t),m=HT(t.serverSyncTree_,e,h,f,!0);Gc(t.eventQueue_,m),t.server_.put(e.toString(),l.val(!0),(v,E)=>{const w=v==="ok";w||Pt("set at "+e+" failed: "+v);const I=Oi(t.serverSyncTree_,f,!w);Tn(t.eventQueue_,e,I),rp(t,r,v,E)});const _=r_(t,e);Vs(t,_),Tn(t.eventQueue_,_,[])}function OM(t,e,n,i){Yc(t,"update",{path:e.toString(),value:n});let r=!0;const o=Kc(t),l={};if(gt(n,(c,h)=>{r=!1,l[c]=qT(Ue(e,c),at(h),t.serverSyncTree_,o)}),r)pt("update() called with empty data.  Don't do anything."),rp(t,i,"ok",void 0);else{const c=n_(t),h=JA(t.serverSyncTree_,e,l,c);Gc(t.eventQueue_,h),t.server_.merge(e.toString(),n,(f,m)=>{const _=f==="ok";_||Pt("update at "+e+" failed: "+f);const v=Oi(t.serverSyncTree_,c,!_),E=v.length>0?Vs(t,e):e;Tn(t.eventQueue_,E,v),rp(t,i,f,m)}),gt(n,f=>{const m=r_(t,Ue(e,f));Vs(t,m)}),Tn(t.eventQueue_,e,[])}}function AM(t){Yc(t,"onDisconnectEvents");const e=Kc(t),n=qu();Kf(t.onDisconnect_,we(),(r,o)=>{const l=qT(r,o,t.serverSyncTree_,e);RT(n,r,l)});let i=[];Kf(n,we(),(r,o)=>{i=i.concat($c(t.serverSyncTree_,r,o));const l=r_(t,r);Vs(t,l)}),t.onDisconnect_=qu(),Tn(t.eventQueue_,we(),i)}function MM(t,e,n){let i;ae(e._path)===".info"?i=Gy(t.infoSyncTree_,e,n):i=Gy(t.serverSyncTree_,e,n),eC(t.eventQueue_,e._path,i)}function Jy(t,e,n){let i;ae(e._path)===".info"?i=np(t.infoSyncTree_,e,n):i=np(t.serverSyncTree_,e,n),eC(t.eventQueue_,e._path,i)}function DM(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xM)}function Yc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),pt(n,...e)}function rp(t,e,n,i){e&&to(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function nC(t,e,n){return Vm(t.serverSyncTree_,e,n)||te.EMPTY_NODE}function i_(t,e=t.transactionQueueTree_){if(e||Qc(t,e),io(e)){const n=rC(t,e);B(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&FM(t,Ka(e),n)}else YT(e)&&Zc(e,n=>{i_(t,n)})}function FM(t,e,n){const i=n.map(f=>f.currentWriteId),r=nC(t,e,i);let o=r;const l=r.hash();for(let f=0;f<n.length;f++){const m=n[f];B(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const _=Ot(e,m.path);o=o.updateChild(_,m.currentOutputSnapshotRaw)}const c=o.val(!0),h=e;t.server_.put(h.toString(),c,f=>{Yc(t,"transaction put response",{path:h.toString(),status:f});let m=[];if(f==="ok"){const _=[];for(let v=0;v<n.length;v++)n[v].status=2,m=m.concat(Oi(t.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&_.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();Qc(t,Xm(t.transactionQueueTree_,e)),i_(t,t.transactionQueueTree_),Tn(t.eventQueue_,e,m);for(let v=0;v<_.length;v++)to(_[v])}else{if(f==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Pt("transaction at "+h.toString()+" failed: "+f);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=f}Vs(t,e)}},l)}function Vs(t,e){const n=iC(t,e),i=Ka(n),r=rC(t,n);return zM(t,r,i),i}function zM(t,e,n){if(e.length===0)return;const i=[];let r=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const h=e[c],f=Ot(n,h.path);let m=!1,_;if(B(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)m=!0,_=h.abortReason,r=r.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=PM)m=!0,_="maxretry",r=r.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0));else{const v=nC(t,h.path,l);h.currentInputSnapshot=v;const E=e[c].update(v.val());if(E!==void 0){qc("transaction failed: Data returned ",E,h.path);let w=at(E);typeof E=="object"&&E!=null&&Wn(E,".priority")||(w=w.updatePriority(v.getPriority()));const N=h.currentWriteId,S=Kc(t),y=GT(w,v,S);h.currentOutputSnapshotRaw=w,h.currentOutputSnapshotResolved=y,h.currentWriteId=n_(t),l.splice(l.indexOf(N),1),r=r.concat(HT(t.serverSyncTree_,h.path,y,h.currentWriteId,h.applyLocally)),r=r.concat(Oi(t.serverSyncTree_,N,!0))}else m=!0,_="nodata",r=r.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0))}Tn(t.eventQueue_,n,r),r=[],m&&(e[c].status=2,function(v){setTimeout(v,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(_==="nodata"?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(_),!1,null))))}Qc(t,t.transactionQueueTree_);for(let c=0;c<i.length;c++)to(i[c]);i_(t,t.transactionQueueTree_)}function iC(t,e){let n,i=t.transactionQueueTree_;for(n=ae(e);n!==null&&io(i)===void 0;)i=Xm(i,n),e=ke(e),n=ae(e);return i}function rC(t,e){const n=[];return sC(t,e,n),n.sort((i,r)=>i.order-r.order),n}function sC(t,e,n){const i=io(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Zc(e,r=>{sC(t,r,n)})}function Qc(t,e){const n=io(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,KT(e,n.length>0?n:void 0)}Zc(e,i=>{Qc(t,i)})}function r_(t,e){const n=Ka(iC(t,e)),i=Xm(t.transactionQueueTree_,e);return dM(i,r=>{Rd(t,r)}),Rd(t,i),QT(i,r=>{Rd(t,r)}),n}function Rd(t,e){const n=io(e);if(n){const i=[];let r=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(B(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(B(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(Oi(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?KT(e,void 0):n.length=o+1,Tn(t.eventQueue_,Ka(e),r);for(let l=0;l<i.length;l++)to(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function BM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Pt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Xy=function(t,e){const n=jM(t),i=n.namespace;n.domain==="firebase.com"&&ui(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&ui("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||GN();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new fT(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Te(n.pathString)}},jM=function(t){let e="",n="",i="",r="",o="",l=!0,c="https",h=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(c=t.substring(0,f-1),t=t.substring(f+2));let m=t.indexOf("/");m===-1&&(m=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(m,_)),m<_&&(r=UM(t.substring(m,_)));const v=BM(t.substring(Math.min(t.length,_)));f=e.indexOf(":"),f>=0?(l=c==="https"||c==="wss",h=parseInt(e.substring(f+1),10)):f=e.length;const E=e.slice(0,f);if(E.toLowerCase()==="localhost")n="localhost";else if(E.split(".").length<=2)n=E;else{const w=e.indexOf(".");i=e.substring(0,w).toLowerCase(),n=e.substring(w+1),o=i}"ns"in v&&(o=v.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:l,scheme:c,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+lt(this.snapshot.exportVal())}}class aC{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ce(this._path)?null:Lm(this._path)}get ref(){return new di(this._repo,this._path)}get _queryIdentifier(){const e=Fy(this._queryParams),n=Pm(e);return n==="{}"?"default":n}get _queryObject(){return Fy(this._queryParams)}isEqual(e){if(e=qe(e),!(e instanceof s_))return!1;const n=this._repo===e._repo,i=Nm(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+LO(this._path)}}class di extends s_{constructor(e,n){super(e,n,new Dm,!1)}get parent(){const e=ST(this._path);return e===null?null:new di(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Aa{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Te(e),i=tc(this.ref,e);return new Aa(this._node.getChild(n),i,Be)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Aa(r,tc(this.ref,i),Be)))}hasChild(e){const n=new Te(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function o_(t,e){return t=qe(t),t._checkNotDeleted("ref"),e!==void 0?tc(t._root,e):t._root}function tc(t,e){return t=qe(t),ae(t._path)===null?EM("child","path",e,!1):XT("child","path",e,!1),new di(t._repo,Ue(t._path,e))}function HM(t,e){t=qe(t),SM("set",t._path),vM("set",e,t._path,!1);const n=new Va;return NM(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function lC(t,e){wM("update",e,t._path,!1);const n=new Va;return OM(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class a_{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new oC("value",this,new Aa(e.snapshotNode,new di(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new aC(this,e,n):null}matches(e){return e instanceof a_?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class l_{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new aC(this,e,n):null}createEvent(e,n){B(e.childName!=null,"Child events should have a childName.");const i=tc(new di(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new oC(e.type,this,new Aa(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof l_?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function $M(t,e,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){const h=n,f=(m,_)=>{Jy(t._repo,t,c),h(m,_)};f.userCallback=n.userCallback,f.context=n.context,n=f}const l=new WM(n,o||void 0),c=e==="value"?new a_(l):new l_(e,l);return MM(t._repo,t,c),()=>Jy(t._repo,t,c)}function uC(t,e,n,i){return $M(t,"value",e,n,i)}HA(di);KA(di);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="FIREBASE_DATABASE_EMULATOR_HOST",sp={};let ZM=!1;function qM(t,e,n,i){t.repoInfo_=new fT(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function GM(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||ui("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Xy(o,r),c=l.repoInfo,h,f;typeof process<"u"&&process.env&&(f=process.env[VM]),f?(h=!0,o=`http://${f}?ns=${c.namespace}`,l=Xy(o,r),c=l.repoInfo):h=!l.repoInfo.secure;const m=r&&h?new ks(ks.OWNER):new sO(t.name,t.options,e);TM("Invalid Firebase Database URL",l),ce(l.path)||ui("Database URL must point to the root of a Firebase Database (not including a child path).");const _=YM(c,t,m,new rO(t.name,n));return new QM(_,t)}function KM(t,e){const n=sp[e];(!n||n[t.key]!==t)&&ui(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DM(t),delete n[t.key]}function YM(t,e,n,i){let r=sp[e.name];r||(r={},sp[e.name]=r);let o=r[t.toURLString()];return o&&ui("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new kM(t,ZM,n,i),r[t.toURLString()]=o,o}class QM{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(bM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new di(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(KM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ui("Cannot call "+e+" on a deleted database.")}}function JM(t=zc(),e){const n=Xi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=pS("database");i&&XM(n,...i)}return n}function XM(t,e,n,i={}){t=qe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ui("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ui('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ks(ks.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:gS(i.mockUserToken,t.app.options.projectId);o=new ks(l)}qM(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){HN($r),Sn(new an("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return GM(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),zt(wy,Ey,t),zt(wy,Ey,"esm2017")}ni.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ni.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eD();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firebasestorage.googleapis.com",hC="storageBucket",tD=2*60*1e3,nD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends In{constructor(e,n,i=0){super(Ld(e),`Firebase Storage: ${n} (${Ld(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ld(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(je||(je={}));function Ld(t){return"storage/"+t}function u_(){const t="An unknown error occurred, please check the error payload for server response.";return new We(je.UNKNOWN,t)}function iD(t){return new We(je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function rD(t){return new We(je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(je.UNAUTHENTICATED,t)}function oD(){return new We(je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aD(t){return new We(je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function lD(){return new We(je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uD(){return new We(je.CANCELED,"User canceled the upload/download.")}function cD(t){return new We(je.INVALID_URL,"Invalid URL '"+t+"'.")}function hD(t){return new We(je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dD(){return new We(je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hC+"' property when initializing the app?")}function fD(){return new We(je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pD(){return new We(je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mD(t){return new We(je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function op(t){return new We(je.INVALID_ARGUMENT,t)}function dC(){return new We(je.APP_DELETED,"The Firebase app was deleted.")}function _D(t){return new We(je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sa(t,e){return new We(je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ao(t){throw new We(je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Wt.makeFromUrl(e,n)}catch{return new Wt(e,"")}if(i.path==="")return i;throw hD(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),h={bucket:1,path:3};function f(R){R.path_=decodeURIComponent(R.path)}const m="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${_}/${m}/b/${r}/o${v}`,"i"),w={bucket:1,path:3},I=n===cC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",S=new RegExp(`^https?://${I}/${r}/${N}`,"i"),C=[{regex:c,indices:h,postModify:o},{regex:E,indices:w,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let R=0;R<C.length;R++){const F=C[R],j=F.regex.exec(e);if(j){const H=j[F.indices.bucket];let z=j[F.indices.path];z||(z=""),i=new Wt(H,z),F.postModify(i);break}}if(i==null)throw cD(e);return i}}class gD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function h(){return c===2}let f=!1;function m(...N){f||(f=!0,e.apply(null,N))}function _(N){r=setTimeout(()=>{r=null,t(E,h())},N)}function v(){o&&clearTimeout(o)}function E(N,...S){if(f){v();return}if(N){v(),m.call(null,N,...S);return}if(h()||l){v(),m.call(null,N,...S);return}i<64&&(i*=2);let C;c===1?(c=2,C=0):C=(i+Math.random())*1e3,_(C)}let w=!1;function I(N){w||(w=!0,v(),!f&&(r!==null?(N||(c=2),clearTimeout(r),_(0)):N||(c=1)))}return _(0),o=setTimeout(()=>{l=!0,I(!0)},n),I}function yD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){return t!==void 0}function ED(t){return typeof t=="object"&&!Array.isArray(t)}function c_(t){return typeof t=="string"||t instanceof String}function ew(t){return h_()&&t instanceof Blob}function h_(){return typeof Blob<"u"&&!Hb()}function tw(t,e,n,i){if(i<e)throw op(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw op(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function fC(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Tr||(Tr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n,i,r,o,l,c,h,f,m,_,v=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=_,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,w)=>{this.resolve_=E,this.reject_=w,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new jl(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Tr.NO_ERROR,h=o.getStatus();if(!c||SD(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Tr.ABORT;i(!1,new jl(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new jl(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());wD(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=u_();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(r.canceled){const h=this.appDelete_?dC():uD();l(h)}else{const h=lD();l(h)}};this.canceled_?n(!1,new jl(!1,null,!0)):this.backoffId_=vD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jl{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function CD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ID(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function xD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function kD(t,e,n,i,r,o,l=!0){const c=fC(t.urlParams),h=t.url+c,f=Object.assign({},t.headers);return xD(f,e),CD(f,n),ID(f,o),PD(f,i),new TD(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RD(...t){const e=bD();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(h_())return new Blob(t);throw new We(je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){if(typeof atob>"u")throw mD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Nd{constructor(e,n){this.data=e,this.contentType=n||null}}function OD(t,e){switch(t){case Mn.RAW:return new Nd(pC(e));case Mn.BASE64:case Mn.BASE64URL:return new Nd(mC(t,e));case Mn.DATA_URL:return new Nd(MD(e),DD(e))}throw u_()}function pC(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function AD(t){let e;try{e=decodeURIComponent(t)}catch{throw sa(Mn.DATA_URL,"Malformed data URL.")}return pC(e)}function mC(t,e){switch(t){case Mn.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw sa(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Mn.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw sa(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ND(e)}catch(r){throw r.message.includes("polyfill")?r:sa(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class _C{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw sa(Mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=FD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function MD(t){const e=new _C(t);return e.base64?mC(Mn.BASE64,e.rest):AD(e.rest)}function DD(t){return new _C(t).contentType}function FD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){let i=0,r="";ew(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(ew(this.data_)){const i=this.data_,r=LD(i,e,n);return r===null?null:new Ii(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ii(i,!0)}}static getBlob(...e){if(h_()){const n=e.map(i=>i instanceof Ii?i.data_:i);return new Ii(RD.apply(null,n))}else{const n=e.map(l=>c_(l)?OD(Mn.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new Ii(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){let e;try{e=JSON.parse(t)}catch{return null}return ED(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function UD(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function vC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e){return e}class Ct{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||BD}}let Wl=null;function jD(t){return!c_(t)||t.length<2?t:vC(t)}function yC(){if(Wl)return Wl;const t=[];t.push(new Ct("bucket")),t.push(new Ct("generation")),t.push(new Ct("metageneration")),t.push(new Ct("name","fullPath",!0));function e(o,l){return jD(l)}const n=new Ct("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new Ct("size");return r.xform=i,t.push(r),t.push(new Ct("timeCreated")),t.push(new Ct("updated")),t.push(new Ct("md5Hash",null,!0)),t.push(new Ct("cacheControl",null,!0)),t.push(new Ct("contentDisposition",null,!0)),t.push(new Ct("contentEncoding",null,!0)),t.push(new Ct("contentLanguage",null,!0)),t.push(new Ct("contentType",null,!0)),t.push(new Ct("metadata","customMetadata",!0)),Wl=t,Wl}function WD(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Wt(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function HD(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return WD(i,t),i}function wC(t,e,n){const i=gC(e);return i===null?null:HD(t,i,n)}function $D(t,e,n,i){const r=gC(e);if(r===null||!c_(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,_=t.fullPath,v="/b/"+l(m)+"/o/"+l(_),E=d_(v,n,i),w=fC({alt:"media",token:f});return E+w})[0]}function VD(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class EC{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){if(!t)throw u_()}function ZD(t,e){function n(i,r){const o=wC(t,r,e);return SC(o!==null),o}return n}function qD(t,e){function n(i,r){const o=wC(t,r,e);return SC(o!==null),$D(o,r,t.host,t._protocol)}return n}function TC(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=oD():r=sD():n.getStatus()===402?r=rD(t.bucket):n.getStatus()===403?r=aD(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function GD(t){const e=TC(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=iD(t.path)),o.serverResponse=r.serverResponse,o}return n}function KD(t,e,n){const i=e.fullServerUrl(),r=d_(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new EC(r,o,qD(t,n),l);return c.errorHandler=GD(e),c}function YD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function QD(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=YD(null,e)),i}function JD(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let R=0;R<2;R++)C=C+Math.random().toString().slice(2);return C}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const f=QD(e,i,r),m=VD(f,n),_="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",E=Ii.getBlob(_,i,v);if(E===null)throw fD();const w={name:f.fullPath},I=d_(o,t.host,t._protocol),N="POST",S=t.maxUploadRetryTime,y=new EC(I,N,ZD(t,n),S);return y.urlParams=w,y.headers=l,y.body=E.uploadData(),y.errorHandler=TC(e),y}class XD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Tr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Tr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Tr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Ao("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ao("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ao("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ao("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ao("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e2 extends XD{initXhr(){this.xhr_.responseType="text"}}function CC(){return new e2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){this._service=e,n instanceof Wt?this._location=n:this._location=Wt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fr(e,n)}get root(){const e=new Wt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vC(this._location.path)}get storage(){return this._service}get parent(){const e=zD(this._location.path);if(e===null)return null;const n=new Wt(this._location.bucket,e);return new Fr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _D(e)}}function t2(t,e,n){t._throwIfRoot("uploadBytes");const i=JD(t.storage,t._location,yC(),new Ii(e,!0),n);return t.storage.makeRequestWithTokens(i,CC).then(r=>({metadata:r,ref:t}))}function n2(t){t._throwIfRoot("getDownloadURL");const e=KD(t.storage,t._location,yC());return t.storage.makeRequestWithTokens(e,CC).then(n=>{if(n===null)throw pD();return n})}function i2(t,e){const n=UD(t._location.path,e),i=new Wt(t._location.bucket,n);return new Fr(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){return/^[A-Za-z]+:\/\//.test(t)}function s2(t,e){return new Fr(t,e)}function IC(t,e){if(t instanceof f_){const n=t;if(n._bucket==null)throw dD();const i=new Fr(n,n._bucket);return e!=null?IC(i,e):i}else return e!==void 0?i2(t,e):t}function o2(t,e){if(e&&r2(e)){if(t instanceof f_)return s2(t,e);throw op("To use ref(service, url), the first argument must be a Storage instance.")}else return IC(t,e)}function nw(t,e){const n=e==null?void 0:e[hC];return n==null?null:Wt.makeFromBucketSpec(n,t)}function a2(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:gS(r,t.app.options.projectId))}class f_{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=cC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tD,this._maxUploadRetryTime=nD,this._requests=new Set,r!=null?this._bucket=Wt.makeFromBucketSpec(r,this._host):this._bucket=nw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wt.makeFromBucketSpec(this._url,e):this._bucket=nw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fr(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new gD(dC());{const l=kD(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const iw="@firebase/storage",rw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="storage";function l2(t,e,n){return t=qe(t),t2(t,e,n)}function u2(t){return t=qe(t),n2(t)}function ap(t,e){return t=qe(t),o2(t,e)}function c2(t=zc(),e){t=qe(t);const i=Xi(t,xC).getImmediate({identifier:e}),r=pS("storage");return r&&h2(i,...r),i}function h2(t,e,n,i={}){a2(t,e,n,i)}function d2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new f_(n,i,r,e,$r)}function f2(){Sn(new an(xC,d2,"PUBLIC").setMultipleInstances(!0)),zt(iw,rw,""),zt(iw,rw,"esm2017")}f2();function p_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function PC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p2=PC,kC=new Hr("auth","Firebase",PC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Fc("@firebase/auth");function m2(t,...e){nc.logLevel<=Se.WARN&&nc.warn(`Auth (${$r}): ${t}`,...e)}function iu(t,...e){nc.logLevel<=Se.ERROR&&nc.error(`Auth (${$r}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,...e){throw m_(t,...e)}function Un(t,...e){return m_(t,...e)}function _2(t,e,n){const i=Object.assign(Object.assign({},p2()),{[e]:n});return new Hr("auth","Firebase",i).create(e,{appName:t.name})}function m_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return kC.create(t,...e)}function Q(t,e,...n){if(!t)throw m_(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function ci(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function g2(){return sw()==="http:"||sw()==="https:"}function sw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g2()||vS()||"connection"in navigator)?navigator.onLine:!0}function y2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.shortDelay=e,this.longDelay=n,ci(n>e,"Short delay should be less than long delay!"),this.isMobile=vm()||yS()}get(){return v2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e){ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new Ya(3e4,6e4);function fi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pi(t,e,n,i,r={}){return RC(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=eo(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),bC.fetch()(LC(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function RC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},w2),e);try{const r=new T2(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Hl(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Hl(t,"user-disabled",l);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw _2(t,m,f);Cn(t,m)}}catch(r){if(r instanceof In)throw r;Cn(t,"network-request-failed",{message:String(r)})}}async function Qa(t,e,n,i,r={}){const o=await pi(t,e,n,i,r);return"mfaPendingCredential"in o&&Cn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function LC(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?__(t.config,r):`${t.config.apiScheme}://${r}`}function S2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Un(this.auth,"network-request-failed")),E2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Un(t,e,i);return r.customData._tokenResponse=n,r}function ow(t){return t!==void 0&&t.enterprise!==void 0}class C2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return S2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function I2(t,e){return pi(t,"GET","/v2/recaptchaConfig",fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e){return pi(t,"POST","/v1/accounts:delete",e)}async function P2(t,e){return pi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k2(t,e=!1){const n=qe(t),i=await n.getIdToken(e),r=g_(i);Q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:oa(Od(r.auth_time)),issuedAtTime:oa(Od(r.iat)),expirationTime:oa(Od(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Od(t){return Number(t)*1e3}function g_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const r=zu(n);return r?JSON.parse(r):(iu("Failed to decode base64 JWT payload"),null)}catch(r){return iu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function b2(t){const e=g_(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof In&&R2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function R2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oa(this.lastLoginAt),this.creationTime=oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ma(t,P2(n,{idToken:i}));Q(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?A2(o.providerUserInfo):[],c=O2(t.providerData,l),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?f:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new NC(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,_)}async function N2(t){const e=qe(t);await ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O2(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function A2(t){return t.map(e=>{var{providerId:n}=e,i=p_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,e){const n=await RC(t,{},async()=>{const i=eo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=LC(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",bC.fetch()(l,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D2(t,e){return pi(t,"POST","/v2/accounts:revokeToken",fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Q(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await M2(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new Da;return i&&(Q(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Q(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Q(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=p_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new L2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new NC(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ma(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k2(this,e)}reload(){return N2(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ic(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ma(this,x2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,h,f,m;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,v=(r=n.email)!==null&&r!==void 0?r:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(l=n.photoURL)!==null&&l!==void 0?l:void 0,I=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,S=(f=n.createdAt)!==null&&f!==void 0?f:void 0,y=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:R,isAnonymous:F,providerData:j,stsTokenManager:H}=n;Q(C&&H,e,"internal-error");const z=Da.fromJSON(this.name,H);Q(typeof C=="string",e,"internal-error"),yi(_,e.name),yi(v,e.name),Q(typeof R=="boolean",e,"internal-error"),Q(typeof F=="boolean",e,"internal-error"),yi(E,e.name),yi(w,e.name),yi(I,e.name),yi(N,e.name),yi(S,e.name),yi(y,e.name);const $=new Cr({uid:C,auth:e,email:v,emailVerified:R,displayName:_,isAnonymous:F,photoURL:w,phoneNumber:E,tenantId:I,stsTokenManager:z,createdAt:S,lastLoginAt:y});return j&&Array.isArray(j)&&($.providerData=j.map(V=>Object.assign({},V))),N&&($._redirectEventId=N),$}static async _fromIdTokenResponse(e,n,i=!1){const r=new Da;r.updateFromServerResponse(n);const o=new Cr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ic(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Map;function ei(t){ci(t instanceof Function,"Expected a class definition");let e=aw.get(t);return e?(ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OC.type="NONE";const lw=OC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e,n){return`firebase:${t}:${e}:${n}`}class Ls{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=ru(this.userKey,r.apiKey,o),this.fullPersistenceKey=ru("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ls(ei(lw),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ei(lw);const l=ru(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const m=await f._get(l);if(m){const _=Cr._fromJSON(e,m);f!==o&&(c=_),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ls(o,e,i):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Ls(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zC(e))return"Blackberry";if(UC(e))return"Webos";if(v_(e))return"Safari";if((e.includes("chrome/")||MC(e))&&!e.includes("edge/"))return"Chrome";if(FC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function AC(t=St()){return/firefox\//i.test(t)}function v_(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MC(t=St()){return/crios\//i.test(t)}function DC(t=St()){return/iemobile/i.test(t)}function FC(t=St()){return/android/i.test(t)}function zC(t=St()){return/blackberry/i.test(t)}function UC(t=St()){return/webos/i.test(t)}function Jc(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function F2(t=St()){var e;return Jc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function z2(){return $b()&&document.documentMode===10}function BC(t=St()){return Jc(t)||FC(t)||UC(t)||zC(t)||/windows phone/i.test(t)||DC(t)}function U2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t,e=[]){let n;switch(t){case"Browser":n=uw(St());break;case"Worker":n=`${uw(St())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$r}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e={}){return pi(t,"GET","/v2/passwordPolicy",fi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=6;class H2{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:W2,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cw(this),this.idTokenSubscription=new cw(this),this.beforeStateQueue=new B2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ls.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ic(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?qe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j2(this),n=new H2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await D2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ei(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&m2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qr(t){return qe(t)}class cw{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jb(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function WC(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Un("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",V2().appendChild(i)})}function Z2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const q2="https://www.google.com/recaptcha/enterprise.js?render=",G2="recaptcha-enterprise",K2="NO_RECAPTCHA";class Y2{constructor(e){this.type=G2,this.auth=qr(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{I2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new C2(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function r(o,l,c){const h=window.grecaptcha;ow(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(K2)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&ow(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}WC(q2+c).then(()=>{r(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function hw(t,e,n,i=!1){const r=new Y2(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function up(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await hw(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await hw(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e){const n=Xi(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(xa(o,e??{}))return r;Cn(r,"already-initialized")}return n.initialize({options:e})}function J2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ei);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function X2(t,e,n){const i=qr(t);Q(i._canInitEmulator,i,"emulator-config-failed"),Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),o=HC(e),{host:l,port:c}=eF(e),h=c===null?"":`:${c}`;i.config.emulator={url:`${o}//${l}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||tF()}function HC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eF(t){const e=HC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:dw(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:dw(l)}}}function dw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}async function nF(t,e){return pi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e){return Qa(t,"POST","/v1/accounts:signInWithPassword",fi(t,e))}async function rF(t,e){return pi(t,"POST","/v1/accounts:sendOobCode",fi(t,e))}async function sF(t,e){return rF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(t,e){return Qa(t,"POST","/v1/accounts:signInWithEmailLink",fi(t,e))}async function aF(t,e){return Qa(t,"POST","/v1/accounts:signInWithEmailLink",fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends y_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Fa(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Fa(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,n,"signInWithPassword",iF);case"emailLink":return oF(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,i,"signUpPassword",nF);case"emailLink":return aF(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ns(t,e){return Qa(t,"POST","/v1/accounts:signInWithIdp",fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF="http://localhost";class zr extends y_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=p_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new zr(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Ns(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ns(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ns(e,n)}buildRequest(){const e={requestUri:lF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=eo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cF(t){const e=jo(Wo(t)).link,n=e?jo(Wo(e)).deep_link_id:null,i=jo(Wo(t)).deep_link_id;return(i?jo(Wo(i)).link:null)||i||n||e||t}class w_{constructor(e){var n,i,r,o,l,c;const h=jo(Wo(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,m=(i=h.oobCode)!==null&&i!==void 0?i:null,_=uF((r=h.mode)!==null&&r!==void 0?r:null);Q(f&&m&&_,"argument-error"),this.apiKey=f,this.operation=_,this.code=m,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=cF(e);try{return new w_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.providerId=ro.PROVIDER_ID}static credential(e,n){return Fa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=w_.parseLink(n);return Q(i,"argument-error"),Fa._fromEmailAndCode(e,i.code,i.tenantId)}}ro.PROVIDER_ID="password";ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends $C{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Ja{constructor(){super("facebook.com")}static credential(e){return zr._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Ja{constructor(){super("github.com")}static credential(e){return zr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Ja{constructor(){super("twitter.com")}static credential(e,n){return zr._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return bi.credential(n,i)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e){return Qa(t,"POST","/v1/accounts:signUp",fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Cr._fromIdTokenResponse(e,i,r),l=fw(i);return new Ur({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=fw(i);return new Ur({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function fw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends In{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,rc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new rc(e,n,i,r)}}function VC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rc._fromErrorAndOperation(t,o,e,i):o})}async function dF(t,e,n=!1){const i=await Ma(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ur._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const o=await Ma(t,VC(i,r,e,t),n);Q(o.idToken,i,"internal-error");const l=g_(o.idToken);Q(l,i,"internal-error");const{sub:c}=l;return Q(t.uid===c,i,"user-mismatch"),Ur._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Cn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e,n=!1){const i="signIn",r=await VC(t,i,e),o=await Ur._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function pF(t,e){return ZC(qr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t,e,n){var i;Q(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),Q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t){const e=qr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _F(t,e,n){const i=qr(t),l=await up(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hF).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&qC(t),h}),c=await Ur._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function gF(t,e,n){return pF(qe(t),ro.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qC(t),i})}async function vF(t,e){const n=qe(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&mF(n.auth,r,e);const{email:o}=await sF(n.auth,r);o!==t.email&&await t.reload()}function yF(t,e,n,i){return qe(t).onIdTokenChanged(e,n,i)}function wF(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function EF(t,e,n,i){return qe(t).onAuthStateChanged(e,n,i)}function SF(t){return qe(t).signOut()}const sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(){const t=St();return v_(t)||Jc(t)}const CF=1e3,IF=10;class KC extends GC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=TF()&&U2(),this.fallbackToPolling=BC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(i);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);z2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,IF):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},CF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KC.type="LOCAL";const xF=KC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC extends GC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YC.type="SESSION";const QC=YC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Xc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),h=await PF(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=E_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return window}function bF(t){Bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return typeof Bn().WorkerGlobalScope<"u"&&typeof Bn().importScripts=="function"}async function RF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NF(){return JC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firebaseLocalStorageDb",OF=1,oc="firebaseLocalStorage",eI="fbase_key";class Xa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function eh(t,e){return t.transaction([oc],e?"readwrite":"readonly").objectStore(oc)}function AF(){const t=indexedDB.deleteDatabase(XC);return new Xa(t).toPromise()}function cp(){const t=indexedDB.open(XC,OF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(oc,{keyPath:eI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(oc)?e(i):(i.close(),await AF(),e(await cp()))})})}async function pw(t,e,n){const i=eh(t,!0).put({[eI]:e,value:n});return new Xa(i).toPromise()}async function MF(t,e){const n=eh(t,!1).get(e),i=await new Xa(n).toPromise();return i===void 0?null:i.value}function mw(t,e){const n=eh(t,!0).delete(e);return new Xa(n).toPromise()}const DF=800,FF=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>FF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(NF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RF(),!this.activeServiceWorker)return;this.sender=new kF(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await pw(e,sc,"1"),await mw(e,sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>pw(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>MF(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=eh(r,!1).getAll();return new Xa(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const zF=tI;new Ya(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e){return e?ei(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends y_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ns(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ns(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ns(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BF(t){return ZC(t.auth,new S_(t),t.bypassAuthState)}function jF(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),fF(n,new S_(t),t.bypassAuthState)}async function WF(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),dF(n,new S_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BF;case"linkViaPopup":case"linkViaRedirect":return WF;case"reauthViaPopup":case"reauthViaRedirect":return jF;default:Cn(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=new Ya(2e3,1e4);class ws extends nI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=E_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HF.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="pendingRedirect",su=new Map;class VF extends nI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=su.get(this.auth._key());if(!e){try{const i=await ZF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}su.set(this.auth._key(),e)}return this.bypassAuthState||su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZF(t,e){const n=KF(e),i=GF(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function qF(t,e){su.set(t._key(),e)}function GF(t){return ei(t._redirectPersistence)}function KF(t){return ru($F,t.config.apiKey,t.name)}async function YF(t,e,n=!1){const i=qr(t),r=UF(i,e),l=await new VF(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=10*60*1e3;class JF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!iI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QF&&this.cachedEventUids.clear(),this.cachedEventUids.has(_w(e))}saveEventToCache(e){this.cachedEventUids.add(_w(e)),this.lastProcessedEventTime=Date.now()}}function _w(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(t,e={}){return pi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nz=/^https?/;async function iz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ez(t);for(const n of e)try{if(rz(n))return}catch{}Cn(t,"unauthorized-domain")}function rz(t){const e=lp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!nz.test(n))return!1;if(tz.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=new Ya(3e4,6e4);function gw(){const t=Bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oz(t){return new Promise((e,n)=>{var i,r,o;function l(){gw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gw(),n(Un(t,"network-request-failed"))},timeout:sz.get()})}if(!((r=(i=Bn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Bn().gapi)===null||o===void 0)&&o.load)l();else{const c=Z2("iframefcb");return Bn()[c]=()=>{gapi.load?l():n(Un(t,"network-request-failed"))},WC(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw ou=null,e})}let ou=null;function az(t){return ou=ou||oz(t),ou}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=new Ya(5e3,15e3),uz="__/auth/iframe",cz="emulator/auth/iframe",hz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fz(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?__(e,cz):`https://${t.config.authDomain}/${uz}`,i={apiKey:e.apiKey,appName:t.name,v:$r},r=dz.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${eo(i).slice(1)}`}async function pz(t){const e=await az(t),n=Bn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:fz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hz,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Un(t,"network-request-failed"),c=Bn().setTimeout(()=>{o(l)},lz.get());function h(){Bn().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_z=500,gz=600,vz="_blank",yz="http://localhost";class vw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wz(t,e,n,i=_z,r=gz){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},mz),{width:i.toString(),height:r.toString(),top:o,left:l}),f=St().toLowerCase();n&&(c=MC(f)?vz:n),AC(f)&&(e=e||yz,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[E,w])=>`${v}${E}=${w},`,"");if(F2(f)&&c!=="_self")return Ez(e||"",c),new vw(null);const _=window.open(e||"",c,m);Q(_,t,"popup-blocked");try{_.focus()}catch{}return new vw(_)}function Ez(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz="__/auth/handler",Tz="emulator/auth/handler",Cz=encodeURIComponent("fac");async function yw(t,e,n,i,r,o){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:$r,eventId:r};if(e instanceof $C){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Df(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries(o||{}))l[m]=_}if(e instanceof Ja){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await t._getAppCheckToken(),f=h?`#${Cz}=${encodeURIComponent(h)}`:"";return`${Iz(t)}?${eo(c).slice(1)}${f}`}function Iz({config:t}){return t.emulator?__(t,Tz):`https://${t.authDomain}/${Sz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class xz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QC,this._completeRedirectFn=YF,this._overrideRedirectResult=qF}async _openPopup(e,n,i,r){var o;ci((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await yw(e,n,i,lp(),r);return wz(e,l,E_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await yw(e,n,i,lp(),r);return bF(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ci(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await pz(e),i=new JF(e);return n.register("authEvent",r=>(Q(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ad,{type:Ad},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Ad];l!==void 0&&n(!!l),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BC()||v_()||Jc()}}const Pz=xz;var ww="@firebase/auth",Ew="1.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Rz(t){Sn(new an("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Q(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jC(t)},f=new $2(i,r,o,h);return J2(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Sn(new an("auth-internal",e=>{const n=qr(e.getProvider("auth").getImmediate());return(i=>new kz(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zt(ww,Ew,bz(t)),zt(ww,Ew,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=5*60,Nz=_S("authIdTokenMaxAge")||Lz;let Sw=null;const Oz=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Nz)return;const r=n==null?void 0:n.token;Sw!==r&&(Sw=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Az(t=zc()){const e=Xi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q2(t,{popupRedirectResolver:Pz,persistence:[zF,xF,QC]}),i=_S("authTokenSyncURL");if(i){const o=Oz(i);wF(n,o,()=>o(n.currentUser)),yF(n,l=>o(l))}const r=fS("auth");return r&&X2(n,`http://${r}`),n}Rz("Browser");const Mz={apiKey:"AIzaSyCjm7x_X4VrlT4C93nhfjMmYQcQhqT0ybU",authDomain:"skatespots-56bd6.firebaseapp.com",databaseURL:"https://skatespots-56bd6-default-rtdb.firebaseio.com",projectId:"skatespots-56bd6",storageBucket:"skatespots-56bd6.appspot.com",messagingSenderId:"439071919444",appId:"1:439071919444:web:97b6b6d8a1d619ebddccc1",measurementId:"G-10PTTR6QYZ"},th=xS(Mz);UN(th);const T_=JM(th),hp=c2(th),Zs=Az(th);function nh({authUser:t,setAuthUser:e}){Oc(),k.useEffect(()=>{const i=EF(Zs,r=>{e(r||null)});return()=>{i()}},[t]);const n=()=>{SF(Zs).then(()=>{console.log("Sign out successful."),e(null)}).catch(i=>console.log(i))};return x.jsxs("nav",{className:"nav",children:[x.jsxs("div",{children:[x.jsx("a",{href:"/spot-seeker/",className:"titleSite",children:"Spot Seeker"}),x.jsx("img",{className:"board",src:"https://firebasestorage.googleapis.com/v0/b/skatespots-56bd6.appspot.com/o/images%2Foutput-onlinepngtools.png?alt=media&token=e3691113-45bb-43f7-969b-f8acab958cc2"})]}),x.jsxs("ul",{children:[x.jsx("li",{children:x.jsx("a",{href:"/spot-seeker/#submit",children:x.jsx("button",{className:"navButtons",id:"submitButton",children:"Submit"})})}),x.jsx("li",{children:t!==null?x.jsx("div",{children:x.jsx("button",{className:"navButtons",onClick:n,id:"submitButton",children:"Logout"})}):x.jsxs("ul",{children:[x.jsx("a",{href:"/spot-seeker/#login",children:x.jsx("button",{className:"navButtons",id:"loginButton",children:"Login"})}),x.jsx("a",{href:"/spot-seeker/#register",children:x.jsx("button",{className:"navButtons",id:"regButton",children:"Register"})})]})})]})]})}function Dz(){const[t,e]=k.useState(),[n,i]=k.useState(),r=Oc(),o={url:"https://johnson4500.github.io/spot-seeker/",handleCodeInApp:!0},l=c=>{c.preventDefault(),_F(Zs,t,n).then(h=>{console.log(h),vF(Zs.currentUser,o).then(()=>{console.log("Email verification link sent!")}),r("/")}).catch(h=>{console.log(h)})};return x.jsxs(k.Fragment,{children:[x.jsx(nh,{}),x.jsx("div",{children:x.jsxs("div",{className:"container",children:[x.jsx("br",{}),x.jsx("br",{}),x.jsx("h2",{id:"topText",children:"Register"}),x.jsx("br",{}),x.jsxs("form",{onSubmit:l,children:[x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{children:"Email"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"email",placeholder:"Enter Email",autoComplete:"off",name:"email",onChange:c=>e(c.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{children:"Password"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"password",placeholder:"Enter Password",autoComplete:"off",name:"password",minlength:"6",onChange:c=>i(c.target.value)})]}),x.jsx("br",{}),x.jsx("button",{id:"logButt",type:"submit",className:"buttons",children:"Register"})]}),x.jsx("a",{href:"/spot-seeker/#login",children:x.jsx("button",{id:"regButt",className:"buttons",children:"Already Have an Account"})})]})})]})}function Fz(){const[t,e]=k.useState(),[n,i]=k.useState(),[r,o]=k.useState("inputFields"),l=Oc(),c=h=>{h.preventDefault(),gF(Zs,t,n).then(f=>{f.user,l("/")}).catch(f=>{console.log(f),o("invalid")})};return x.jsxs(k.Fragment,{children:[x.jsx(nh,{}),x.jsx("br",{}),x.jsx("br",{}),x.jsx("br",{}),x.jsx("div",{className:"Login",children:x.jsxs("div",{className:"container",children:[x.jsx("h2",{id:"logintext",children:"Login"}),x.jsx("br",{}),x.jsxs("form",{onSubmit:c,children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{className:"labels",children:"Email"})}),x.jsx("br",{}),x.jsx("input",{className:r,type:"email",placeholder:"Enter Email",autoComplete:"off",name:"email",onChange:h=>e(h.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",children:x.jsx("strong",{className:"labels",children:"Password"})}),x.jsx("br",{}),x.jsx("input",{type:"password",placeholder:"Enter Password",autoComplete:"off",name:"password",className:r,onChange:h=>i(h.target.value)})]}),x.jsx("br",{}),r=="invalid"?x.jsx("div",{children:"Invalid email and/or password!"}):x.jsx("div",{}),x.jsx("button",{id:"logButt",className:"buttons",type:"submit",children:"Login"})]}),x.jsx("a",{href:"/spot-seeker/#register",children:x.jsx("button",{className:"buttons",id:"regButt",children:"Register"})})]})})]})}function zz({markersData:t,setFilteredData:e,searchInput:n,setSearchInput:i}){k.useEffect(()=>{n.length<1&&e(t)},[n]);const r=o=>{event.key==="Enter"&&e(l=>t.filter(c=>c.spotName.toLowerCase().includes(n.toLowerCase())||c.spotName.toLowerCase().includes(n.toLowerCase())))};return x.jsx("input",{className:"input-field",type:"text",id:"fname",name:"fname",placeholder:"Search then press enter...",value:n,onChange:o=>i(o.target.value),onKeyDown:r})}var dp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(gP,function(n){var i="1.9.4";function r(s){var a,u,d,p;for(u=1,d=arguments.length;u<d;u++){p=arguments[u];for(a in p)s[a]=p[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var u=Array.prototype.slice;if(s.bind)return s.bind.apply(s,u.call(arguments,1));var d=u.call(arguments,2);return function(){return s.apply(a,d.length?d.concat(u.call(arguments)):arguments)}}var c=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function f(s,a,u){var d,p,g,T;return T=function(){d=!1,p&&(g.apply(u,p),p=!1)},g=function(){d?p=arguments:(s.apply(u,arguments),setTimeout(T,a),d=!0)},g}function m(s,a,u){var d=a[1],p=a[0],g=d-p;return s===d&&u?s:((s-p)%g+g)%g+p}function _(){return!1}function v(s,a){if(a===!1)return s;var u=Math.pow(10,a===void 0?6:a);return Math.round(s*u)/u}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function w(s){return E(s).split(/\s+/)}function I(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var u in a)s.options[u]=a[u];return s.options}function N(s,a,u){var d=[];for(var p in s)d.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(s[p]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function y(s,a){return s.replace(S,function(u,d){var p=a[d];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(a)),p})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function R(s,a){for(var u=0;u<s.length;u++)if(s[u]===a)return u;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function j(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var H=0;function z(s){var a=+new Date,u=Math.max(0,16-(a-H));return H=a+u,window.setTimeout(s,u)}var $=window.requestAnimationFrame||j("RequestAnimationFrame")||z,V=window.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function W(s,a,u){if(u&&$===z)s.call(a);else return $.call(window,l(s,a))}function se(s){s&&V.call(window,s)}var Ie={__proto__:null,extend:r,create:o,bind:l,get lastId(){return c},stamp:h,throttle:f,wrapNum:m,falseFn:_,formatNum:v,trim:E,splitWords:w,setOptions:I,getParamString:N,template:y,isArray:C,indexOf:R,emptyImageUrl:F,requestFn:$,cancelFn:V,requestAnimFrame:W,cancelAnimFrame:se};function Ce(){}Ce.extend=function(s){var a=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=a.__super__=this.prototype,d=o(u);d.constructor=a,a.prototype=d;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(a[p]=this[p]);return s.statics&&r(a,s.statics),s.includes&&(Je(s.includes),r.apply(null,[d].concat(s.includes))),r(d,s),delete d.statics,delete d.includes,d.options&&(d.options=u.options?o(u.options):{},r(d.options,s.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,T=d._initHooks.length;g<T;g++)d._initHooks[g].call(this)}},a},Ce.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Ce.mergeOptions=function(s){return r(this.prototype.options,s),this},Ce.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),u=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Je(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(s,a,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],a);else{s=w(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],a,u)}return this},off:function(s,a,u){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var d in s)this._off(d,s[d],a);else{s=w(s);for(var p=arguments.length===1,g=0,T=s.length;g<T;g++)p?this._off(s[g]):this._off(s[g],a,u)}return this},_on:function(s,a,u,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,u)===!1){u===this&&(u=void 0);var p={fn:a,ctx:u};d&&(p.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(p)}},_off:function(s,a,u){var d,p,g;if(this._events&&(d=this._events[s],!!d)){if(arguments.length===1){if(this._firingCount)for(p=0,g=d.length;p<g;p++)d[p].fn=_;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var T=this._listens(s,a,u);if(T!==!1){var P=d[T];this._firingCount&&(P.fn=_,this._events[s]=d=d.slice()),d.splice(T,1)}}},fire:function(s,a,u){if(!this.listens(s,u))return this;var d=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var p=this._events[s];if(p){this._firingCount=this._firingCount+1||1;for(var g=0,T=p.length;g<T;g++){var P=p[g],b=P.fn;P.once&&this.off(s,b,P.ctx),b.call(P.ctx||this,d)}this._firingCount--}}return u&&this._propagateEvent(d),this},listens:function(s,a,u,d){typeof s!="string"&&console.warn('"string" type argument expected');var p=a;typeof a!="function"&&(d=!!a,p=void 0,u=void 0);var g=this._events&&this._events[s];if(g&&g.length&&this._listens(s,p,u)!==!1)return!0;if(d){for(var T in this._eventParents)if(this._eventParents[T].listens(s,a,u,d))return!0}return!1},_listens:function(s,a,u){if(!this._events)return!1;var d=this._events[s]||[];if(!a)return!!d.length;u===this&&(u=void 0);for(var p=0,g=d.length;p<g;p++)if(d[p].fn===a&&d[p].ctx===u)return p;return!1},once:function(s,a,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],a,!0);else{s=w(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],a,u,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var He=Ce.extend(Ne);function O(s,a,u){this.x=u?Math.round(s):s,this.y=u?Math.round(a):a}var G=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(s){return this.clone()._add(D(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(D(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new O(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new O(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(s){s=D(s);var a=s.x-this.x,u=s.y-this.y;return Math.sqrt(a*a+u*u)},equals:function(s){return s=D(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=D(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function D(s,a,u){return s instanceof O?s:C(s)?new O(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new O(s.x,s.y):new O(s,a,u)}function J(s,a){if(s)for(var u=a?[s,a]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}J.prototype={extend:function(s){var a,u;if(!s)return this;if(s instanceof O||typeof s[0]=="number"||"x"in s)a=u=D(s);else if(s=fe(s),a=s.min,u=s.max,!a||!u)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=u.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(s){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,u;return typeof s[0]=="number"||s instanceof O?s=D(s):s=fe(s),s instanceof J?(a=s.min,u=s.max):a=u=s,a.x>=this.min.x&&u.x<=this.max.x&&a.y>=this.min.y&&u.y<=this.max.y},intersects:function(s){s=fe(s);var a=this.min,u=this.max,d=s.min,p=s.max,g=p.x>=a.x&&d.x<=u.x,T=p.y>=a.y&&d.y<=u.y;return g&&T},overlaps:function(s){s=fe(s);var a=this.min,u=this.max,d=s.min,p=s.max,g=p.x>a.x&&d.x<u.x,T=p.y>a.y&&d.y<u.y;return g&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,u=this.max,d=Math.abs(a.x-u.x)*s,p=Math.abs(a.y-u.y)*s;return fe(D(a.x-d,a.y-p),D(u.x+d,u.y+p))},equals:function(s){return s?(s=fe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function fe(s,a){return!s||s instanceof J?s:new J(s,a)}function $e(s,a){if(s)for(var u=a?[s,a]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}$e.prototype={extend:function(s){var a=this._southWest,u=this._northEast,d,p;if(s instanceof ue)d=s,p=s;else if(s instanceof $e){if(d=s._southWest,p=s._northEast,!d||!p)return this}else return s?this.extend(ne(s)||ye(s)):this;return!a&&!u?(this._southWest=new ue(d.lat,d.lng),this._northEast=new ue(p.lat,p.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(s){var a=this._southWest,u=this._northEast,d=Math.abs(a.lat-u.lat)*s,p=Math.abs(a.lng-u.lng)*s;return new $e(new ue(a.lat-d,a.lng-p),new ue(u.lat+d,u.lng+p))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ue||"lat"in s?s=ne(s):s=ye(s);var a=this._southWest,u=this._northEast,d,p;return s instanceof $e?(d=s.getSouthWest(),p=s.getNorthEast()):d=p=s,d.lat>=a.lat&&p.lat<=u.lat&&d.lng>=a.lng&&p.lng<=u.lng},intersects:function(s){s=ye(s);var a=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>=a.lat&&d.lat<=u.lat,T=p.lng>=a.lng&&d.lng<=u.lng;return g&&T},overlaps:function(s){s=ye(s);var a=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>a.lat&&d.lat<u.lat,T=p.lng>a.lng&&d.lng<u.lng;return g&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=ye(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(s,a){return s instanceof $e?s:new $e(s,a)}function ue(s,a,u){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,u!==void 0&&(this.alt=+u)}ue.prototype={equals:function(s,a){if(!s)return!1;s=ne(s);var u=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return u<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return xn.distance(this,ne(s))},wrap:function(){return xn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,u=a/Math.cos(Math.PI/180*this.lat);return ye([this.lat-a,this.lng-u],[this.lat+a,this.lng+u])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function ne(s,a,u){return s instanceof ue?s:C(s)&&typeof s[0]!="object"?s.length===3?new ue(s[0],s[1],s[2]):s.length===2?new ue(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ue(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new ue(s,a,u)}var Xe={latLngToPoint:function(s,a){var u=this.projection.project(s),d=this.scale(a);return this.transformation._transform(u,d)},pointToLatLng:function(s,a){var u=this.scale(a),d=this.transformation.untransform(s,u);return this.projection.unproject(d)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,u=this.scale(s),d=this.transformation.transform(a.min,u),p=this.transformation.transform(a.max,u);return new J(d,p)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,u=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,d=s.alt;return new ue(u,a,d)},wrapLatLngBounds:function(s){var a=s.getCenter(),u=this.wrapLatLng(a),d=a.lat-u.lat,p=a.lng-u.lng;if(d===0&&p===0)return s;var g=s.getSouthWest(),T=s.getNorthEast(),P=new ue(g.lat-d,g.lng-p),b=new ue(T.lat-d,T.lng-p);return new $e(P,b)}},xn=r({},Xe,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var u=Math.PI/180,d=s.lat*u,p=a.lat*u,g=Math.sin((a.lat-s.lat)*u/2),T=Math.sin((a.lng-s.lng)*u/2),P=g*g+Math.cos(d)*Math.cos(p)*T*T,b=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));return this.R*b}}),er=6378137,oo={R:er,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,u=this.MAX_LATITUDE,d=Math.max(Math.min(u,s.lat),-u),p=Math.sin(d*a);return new O(this.R*s.lng*a,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(s){var a=180/Math.PI;return new ue((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=er*Math.PI;return new J([-s,-s],[s,s])}()};function he(s,a,u,d){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=u,this._d=d}he.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new O((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function K(s,a,u,d){return new he(s,a,u,d)}var _e=r({},xn,{code:"EPSG:3857",projection:oo,transformation:function(){var s=.5/(Math.PI*oo.R);return K(s,.5,-s,.5)}()}),Gt=r({},_e,{code:"EPSG:900913"});function mi(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function nl(s,a){var u="",d,p,g,T,P,b;for(d=0,g=s.length;d<g;d++){for(P=s[d],p=0,T=P.length;p<T;p++)b=P[p],u+=(p?"L":"M")+b.x+" "+b.y;u+=a?Y.svg?"z":"x":""}return u||"M0 0"}var ao=document.documentElement.style,tr="ActiveXObject"in window,ch=tr&&!document.addEventListener,nr="msLaunchUri"in navigator&&!("documentMode"in document),ln=Pn("webkit"),il=Pn("android"),O_=Pn("android 2")||Pn("android 3"),KI=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),YI=il&&Pn("Google")&&KI<537&&!("AudioNode"in window),hh=!!window.opera,A_=!nr&&Pn("chrome"),M_=Pn("gecko")&&!ln&&!hh&&!tr,QI=!A_&&Pn("safari"),D_=Pn("phantom"),F_="OTransition"in ao,JI=navigator.platform.indexOf("Win")===0,z_=tr&&"transition"in ao,dh="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!O_,U_="MozPerspective"in ao,XI=!window.L_DISABLE_3D&&(z_||dh||U_)&&!F_&&!D_,lo=typeof orientation<"u"||Pn("mobile"),ex=lo&&ln,tx=lo&&dh,B_=!window.PointerEvent&&window.MSPointerEvent,j_=!!(window.PointerEvent||B_),W_="ontouchstart"in window||!!window.TouchEvent,nx=!window.L_NO_TOUCH&&(W_||j_),ix=lo&&hh,rx=lo&&M_,sx=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ox=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",_,a),window.removeEventListener("testPassiveEventSupport",_,a)}catch{}return s}(),ax=function(){return!!document.createElement("canvas").getContext}(),fh=!!(document.createElementNS&&mi("svg").createSVGRect),lx=!!fh&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ux=!fh&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),cx=navigator.platform.indexOf("Mac")===0,hx=navigator.platform.indexOf("Linux")===0;function Pn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Y={ie:tr,ielt9:ch,edge:nr,webkit:ln,android:il,android23:O_,androidStock:YI,opera:hh,chrome:A_,gecko:M_,safari:QI,phantom:D_,opera12:F_,win:JI,ie3d:z_,webkit3d:dh,gecko3d:U_,any3d:XI,mobile:lo,mobileWebkit:ex,mobileWebkit3d:tx,msPointer:B_,pointer:j_,touch:nx,touchNative:W_,mobileOpera:ix,mobileGecko:rx,retina:sx,passiveEvents:ox,canvas:ax,svg:fh,vml:ux,inlineSvg:lx,mac:cx,linux:hx},H_=Y.msPointer?"MSPointerDown":"pointerdown",$_=Y.msPointer?"MSPointerMove":"pointermove",V_=Y.msPointer?"MSPointerUp":"pointerup",Z_=Y.msPointer?"MSPointerCancel":"pointercancel",ph={touchstart:H_,touchmove:$_,touchend:V_,touchcancel:Z_},q_={touchstart:gx,touchmove:rl,touchend:rl,touchcancel:rl},Gr={},G_=!1;function dx(s,a,u){return a==="touchstart"&&_x(),q_[a]?(u=q_[a].bind(this,u),s.addEventListener(ph[a],u,!1),u):(console.warn("wrong event specified:",a),_)}function fx(s,a,u){if(!ph[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(ph[a],u,!1)}function px(s){Gr[s.pointerId]=s}function mx(s){Gr[s.pointerId]&&(Gr[s.pointerId]=s)}function K_(s){delete Gr[s.pointerId]}function _x(){G_||(document.addEventListener(H_,px,!0),document.addEventListener($_,mx,!0),document.addEventListener(V_,K_,!0),document.addEventListener(Z_,K_,!0),G_=!0)}function rl(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var u in Gr)a.touches.push(Gr[u]);a.changedTouches=[a],s(a)}}function gx(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&ct(a),rl(s,a)}function vx(s){var a={},u,d;for(d in s)u=s[d],a[d]=u&&u.bind?u.bind(s):u;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var yx=200;function wx(s,a){s.addEventListener("dblclick",a);var u=0,d;function p(g){if(g.detail!==1){d=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var T=eg(g);if(!(T.some(function(b){return b instanceof HTMLLabelElement&&b.attributes.for})&&!T.some(function(b){return b instanceof HTMLInputElement||b instanceof HTMLSelectElement}))){var P=Date.now();P-u<=yx?(d++,d===2&&a(vx(g))):d=1,u=P}}}return s.addEventListener("click",p),{dblclick:a,simDblclick:p}}function Ex(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var mh=al(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),uo=al(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Y_=uo==="webkitTransition"||uo==="OTransition"?uo+"End":"transitionend";function Q_(s){return typeof s=="string"?document.getElementById(s):s}function co(s,a){var u=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!u||u==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(s,null);u=d?d[a]:null}return u==="auto"?null:u}function ve(s,a,u){var d=document.createElement(s);return d.className=a||"",u&&u.appendChild(d),d}function Ae(s){var a=s.parentNode;a&&a.removeChild(s)}function sl(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Kr(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function Yr(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function _h(s,a){if(s.classList!==void 0)return s.classList.contains(a);var u=ol(s);return u.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(u)}function re(s,a){if(s.classList!==void 0)for(var u=w(a),d=0,p=u.length;d<p;d++)s.classList.add(u[d]);else if(!_h(s,a)){var g=ol(s);gh(s,(g?g+" ":"")+a)}}function Ve(s,a){s.classList!==void 0?s.classList.remove(a):gh(s,E((" "+ol(s)+" ").replace(" "+a+" "," ")))}function gh(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function ol(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Kt(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&Sx(s,a)}function Sx(s,a){var u=!1,d="DXImageTransform.Microsoft.Alpha";try{u=s.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),u?(u.Enabled=a!==100,u.Opacity=a):s.style.filter+=" progid:"+d+"(opacity="+a+")"}function al(s){for(var a=document.documentElement.style,u=0;u<s.length;u++)if(s[u]in a)return s[u];return!1}function ir(s,a,u){var d=a||new O(0,0);s.style[mh]=(Y.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(u?" scale("+u+")":"")}function Ge(s,a){s._leaflet_pos=a,Y.any3d?ir(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function rr(s){return s._leaflet_pos||new O(0,0)}var ho,fo,vh;if("onselectstart"in document)ho=function(){ie(window,"selectstart",ct)},fo=function(){xe(window,"selectstart",ct)};else{var po=al(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ho=function(){if(po){var s=document.documentElement.style;vh=s[po],s[po]="none"}},fo=function(){po&&(document.documentElement.style[po]=vh,vh=void 0)}}function yh(){ie(window,"dragstart",ct)}function wh(){xe(window,"dragstart",ct)}var ll,Eh;function Sh(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ul(),ll=s,Eh=s.style.outlineStyle,s.style.outlineStyle="none",ie(window,"keydown",ul))}function ul(){ll&&(ll.style.outlineStyle=Eh,ll=void 0,Eh=void 0,xe(window,"keydown",ul))}function J_(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Th(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var Tx={__proto__:null,TRANSFORM:mh,TRANSITION:uo,TRANSITION_END:Y_,get:Q_,getStyle:co,create:ve,remove:Ae,empty:sl,toFront:Kr,toBack:Yr,hasClass:_h,addClass:re,removeClass:Ve,setClass:gh,getClass:ol,setOpacity:Kt,testProp:al,setTransform:ir,setPosition:Ge,getPosition:rr,get disableTextSelection(){return ho},get enableTextSelection(){return fo},disableImageDrag:yh,enableImageDrag:wh,preventOutline:Sh,restoreOutline:ul,getSizedParentNode:J_,getScale:Th};function ie(s,a,u,d){if(a&&typeof a=="object")for(var p in a)Ih(s,p,a[p],u);else{a=w(a);for(var g=0,T=a.length;g<T;g++)Ih(s,a[g],u,d)}return this}var kn="_leaflet_events";function xe(s,a,u,d){if(arguments.length===1)X_(s),delete s[kn];else if(a&&typeof a=="object")for(var p in a)xh(s,p,a[p],u);else if(a=w(a),arguments.length===2)X_(s,function(P){return R(a,P)!==-1});else for(var g=0,T=a.length;g<T;g++)xh(s,a[g],u,d);return this}function X_(s,a){for(var u in s[kn]){var d=u.split(/\d/)[0];(!a||a(d))&&xh(s,d,null,null,u)}}var Ch={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ih(s,a,u,d){var p=a+h(u)+(d?"_"+h(d):"");if(s[kn]&&s[kn][p])return this;var g=function(P){return u.call(d||s,P||window.event)},T=g;!Y.touchNative&&Y.pointer&&a.indexOf("touch")===0?g=dx(s,a,g):Y.touch&&a==="dblclick"?g=wx(s,g):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(Ch[a]||a,g,Y.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(g=function(P){P=P||window.event,kh(s,P)&&T(P)},s.addEventListener(Ch[a],g,!1)):s.addEventListener(a,T,!1):s.attachEvent("on"+a,g),s[kn]=s[kn]||{},s[kn][p]=g}function xh(s,a,u,d,p){p=p||a+h(u)+(d?"_"+h(d):"");var g=s[kn]&&s[kn][p];if(!g)return this;!Y.touchNative&&Y.pointer&&a.indexOf("touch")===0?fx(s,a,g):Y.touch&&a==="dblclick"?Ex(s,g):"removeEventListener"in s?s.removeEventListener(Ch[a]||a,g,!1):s.detachEvent("on"+a,g),s[kn][p]=null}function sr(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Ph(s){return Ih(s,"wheel",sr),this}function mo(s){return ie(s,"mousedown touchstart dblclick contextmenu",sr),s._leaflet_disable_click=!0,this}function ct(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function or(s){return ct(s),sr(s),this}function eg(s){if(s.composedPath)return s.composedPath();for(var a=[],u=s.target;u;)a.push(u),u=u.parentNode;return a}function tg(s,a){if(!a)return new O(s.clientX,s.clientY);var u=Th(a),d=u.boundingClientRect;return new O((s.clientX-d.left)/u.x-a.clientLeft,(s.clientY-d.top)/u.y-a.clientTop)}var Cx=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ng(s){return Y.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Cx:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function kh(s,a){var u=a.relatedTarget;if(!u)return!0;try{for(;u&&u!==s;)u=u.parentNode}catch{return!1}return u!==s}var Ix={__proto__:null,on:ie,off:xe,stopPropagation:sr,disableScrollPropagation:Ph,disableClickPropagation:mo,preventDefault:ct,stop:or,getPropagationPath:eg,getMousePosition:tg,getWheelDelta:ng,isExternalTarget:kh,addListener:ie,removeListener:xe},ig=He.extend({run:function(s,a,u,d){this.stop(),this._el=s,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=rr(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=W(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,u=this._duration*1e3;a<u?this._runFrame(this._easeOut(a/u),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var u=this._startPos.add(this._offset.multiplyBy(s));a&&u._round(),Ge(this._el,u),this.fire("step")},_complete:function(){se(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),pe=He.extend({options:{crs:_e,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=I(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ne(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=uo&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ie(this._proxy,Y_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,u){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(ne(s),a,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,u.zoom):this._tryAnimatedPan(s,u.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,u.pan&&u.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,u){var d=this.getZoomScale(a),p=this.getSize().divideBy(2),g=s instanceof O?s:this.latLngToContainerPoint(s),T=g.subtract(p).multiplyBy(1-1/d),P=this.containerPointToLatLng(p.add(T));return this.setView(P,a,{zoom:u})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():ye(s);var u=D(a.paddingTopLeft||a.padding||[0,0]),d=D(a.paddingBottomRight||a.padding||[0,0]),p=this.getBoundsZoom(s,!1,u.add(d));if(p=typeof a.maxZoom=="number"?Math.min(a.maxZoom,p):p,p===1/0)return{center:s.getCenter(),zoom:p};var g=d.subtract(u).divideBy(2),T=this.project(s.getSouthWest(),p),P=this.project(s.getNorthEast(),p),b=this.unproject(T.add(P).divideBy(2).add(g),p);return{center:b,zoom:p}},fitBounds:function(s,a){if(s=ye(s),!s.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(s,a);return this.setView(u.center,u.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=D(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ig,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,u,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,u){if(u=u||{},u.animate===!1||!Y.any3d)return this.setView(s,a,u);this._stop();var d=this.project(this.getCenter()),p=this.project(s),g=this.getSize(),T=this._zoom;s=ne(s),a=a===void 0?T:a;var P=Math.max(g.x,g.y),b=P*this.getZoomScale(T,a),M=p.distanceTo(d)||1,Z=1.42,X=Z*Z;function oe(Ke){var El=Ke?-1:1,fP=Ke?b:P,pP=b*b-P*P+El*X*X*M*M,mP=2*fP*X*M,Uh=pP/mP,Fg=Math.sqrt(Uh*Uh+1)-Uh,_P=Fg<1e-9?-18:Math.log(Fg);return _P}function Tt(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function it(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}function Qt(Ke){return Tt(Ke)/it(Ke)}var Rt=oe(0);function ns(Ke){return P*(it(Rt)/it(Rt+Z*Ke))}function uP(Ke){return P*(it(Rt)*Qt(Rt+Z*Ke)-Tt(Rt))/X}function cP(Ke){return 1-Math.pow(1-Ke,1.5)}var hP=Date.now(),Mg=(oe(1)-Rt)/Z,dP=u.duration?1e3*u.duration:1e3*Mg*.8;function Dg(){var Ke=(Date.now()-hP)/dP,El=cP(Ke)*Mg;Ke<=1?(this._flyToFrame=W(Dg,this),this._move(this.unproject(d.add(p.subtract(d).multiplyBy(uP(El)/M)),T),this.getScaleZoom(P/ns(El),T),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Dg.call(this),this},flyToBounds:function(s,a){var u=this._getBoundsCenterZoom(s,a);return this.flyTo(u.center,u.zoom,a)},setMaxBounds:function(s){return s=ye(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var u=this.getCenter(),d=this._limitCenter(u,this._zoom,ye(s));return u.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var u=D(a.paddingTopLeft||a.padding||[0,0]),d=D(a.paddingBottomRight||a.padding||[0,0]),p=this.project(this.getCenter()),g=this.project(s),T=this.getPixelBounds(),P=fe([T.min.add(u),T.max.subtract(d)]),b=P.getSize();if(!P.contains(g)){this._enforcingBounds=!0;var M=g.subtract(P.getCenter()),Z=P.extend(g).getSize().subtract(b);p.x+=M.x<0?-Z.x:Z.x,p.y+=M.y<0?-Z.y:Z.y,this.panTo(this.unproject(p),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),d=a.divideBy(2).round(),p=u.divideBy(2).round(),g=d.subtract(p);return!g.x&&!g.y?this:(s.animate&&s.pan?this.panBy(g):(s.pan&&this._rawPanBy(g),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,u,s):navigator.geolocation.getCurrentPosition(a,u,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,u=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,u=s.coords.longitude,d=new ue(a,u),p=d.toBounds(s.coords.accuracy*2),g=this._locateOptions;if(g.setView){var T=this.getBoundsZoom(p);this.setView(d,g.maxZoom?Math.min(T,g.maxZoom):T)}var P={latlng:d,bounds:p,timestamp:s.timestamp};for(var b in s.coords)typeof s.coords[b]=="number"&&(P[b]=s.coords[b]);this.fire("locationfound",P)}},addHandler:function(s,a){if(!a)return this;var u=this[s]=new a(this);return this._handlers.push(u),this.options[s]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(se(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ae(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var u="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),d=ve("div",u,a||this._mapPane);return s&&(this._panes[s]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),u=this.unproject(s.getTopRight());return new $e(a,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,u){s=ye(s),u=D(u||[0,0]);var d=this.getZoom()||0,p=this.getMinZoom(),g=this.getMaxZoom(),T=s.getNorthWest(),P=s.getSouthEast(),b=this.getSize().subtract(u),M=fe(this.project(P,d),this.project(T,d)).getSize(),Z=Y.any3d?this.options.zoomSnap:1,X=b.x/M.x,oe=b.y/M.y,Tt=a?Math.max(X,oe):Math.min(X,oe);return d=this.getScaleZoom(Tt,d),Z&&(d=Math.round(d/(Z/100))*(Z/100),d=a?Math.ceil(d/Z)*Z:Math.floor(d/Z)*Z),Math.max(p,Math.min(g,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var u=this._getTopLeftPoint(s,a);return new J(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var u=this.options.crs;return a=a===void 0?this._zoom:a,u.scale(s)/u.scale(a)},getScaleZoom:function(s,a){var u=this.options.crs;a=a===void 0?this._zoom:a;var d=u.zoom(s*u.scale(a));return isNaN(d)?1/0:d},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ne(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(D(s),a)},layerPointToLatLng:function(s){var a=D(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(ne(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ne(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ye(s))},distance:function(s,a){return this.options.crs.distance(ne(s),ne(a))},containerPointToLayerPoint:function(s){return D(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return D(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(D(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ne(s)))},mouseEventToContainerPoint:function(s){return tg(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Q_(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ie(a,"scroll",this._onScroll,this),this._containerId=h(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,re(s,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=co(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ge(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(s.markerPane,"leaflet-zoom-hide"),re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,u){Ge(this._mapPane,new O(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var p=this._zoom!==a;this._moveStart(p,u)._move(s,a)._moveEnd(p),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,u,d){a===void 0&&(a=this._zoom);var p=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),d?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return se(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Ge(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var a=s?xe:ie;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){se(this._resizeRequest),this._resizeRequest=W(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var u=[],d,p=a==="mouseout"||a==="mouseover",g=s.target||s.srcElement,T=!1;g;){if(d=this._targets[h(g)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){T=!0;break}if(d&&d.listens(a,!0)&&(p&&!kh(g,s)||(u.push(d),p))||g===this._container)break;g=g.parentNode}return!u.length&&!T&&!p&&this.listens(a,!0)&&(u=[this]),u},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var u=s.type;u==="mousedown"&&Sh(a),this._fireDOMEvent(s,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,u){if(s.type==="click"){var d=r({},s);d.type="preclick",this._fireDOMEvent(d,d.type,u)}var p=this._findEventTargets(s,a);if(u){for(var g=[],T=0;T<u.length;T++)u[T].listens(a,!0)&&g.push(u[T]);p=g.concat(p)}if(p.length){a==="contextmenu"&&ct(s);var P=p[0],b={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var M=P.getLatLng&&(!P._radius||P._radius<=10);b.containerPoint=M?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(s),b.layerPoint=this.containerPointToLayerPoint(b.containerPoint),b.latlng=M?P.getLatLng():this.layerPointToLatLng(b.layerPoint)}for(T=0;T<p.length;T++)if(p[T].fire(a,b,!0),b.originalEvent._stopped||p[T].options.bubblingMouseEvents===!1&&R(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return rr(this._mapPane)||new O(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var u=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var u=this.getSize()._divideBy(2);return this.project(s,a)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,u){var d=this._getNewPixelOrigin(u,a);return this.project(s,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(s,a,u){var d=this._getNewPixelOrigin(u,a);return fe([this.project(s.getSouthWest(),a)._subtract(d),this.project(s.getNorthWest(),a)._subtract(d),this.project(s.getSouthEast(),a)._subtract(d),this.project(s.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,u){if(!u)return s;var d=this.project(s,a),p=this.getSize().divideBy(2),g=new J(d.subtract(p),d.add(p)),T=this._getBoundsOffset(g,u,a);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?s:this.unproject(d.add(T),a)},_limitOffset:function(s,a){if(!a)return s;var u=this.getPixelBounds(),d=new J(u.min.add(s),u.max.add(s));return s.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(s,a,u){var d=fe(this.project(a.getNorthEast(),u),this.project(a.getSouthWest(),u)),p=d.min.subtract(s.min),g=d.max.subtract(s.max),T=this._rebound(p.x,-g.x),P=this._rebound(p.y,-g.y);return new O(T,P)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),u=this.getMaxZoom(),d=Y.any3d?this.options.zoomSnap:1;return d&&(s=Math.round(s/d)*d),Math.max(a,Math.min(u,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var u=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,a),!0)},_createAnimProxy:function(){var s=this._proxy=ve("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var u=mh,d=this._proxy.style[u];ir(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();ir(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),p=this._getCenterOffset(s)._divideBy(1-1/d);return u.animate!==!0&&!this.getSize().contains(p)?!1:(W(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,u,d){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xx(s,a){return new pe(s,a)}var un=Ce.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),u=this.getPosition(),d=s._controlCorners[u];return re(a,"leaflet-control"),u.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),_o=function(s){return new un(s)};pe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",u=this._controlContainer=ve("div",a+"control-container",this._container);function d(p,g){var T=a+p+" "+a+g;s[p+g]=ve("div",T,u)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ae(this._controlCorners[s]);Ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rg=un.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,u,d){return u<d?-1:d<u?1:0}},initialize:function(s,a,u){I(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in s)this._addLayer(s[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return un.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(h(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=ve("div",s),u=this.options.collapsed;a.setAttribute("aria-haspopup",!0),mo(a),Ph(a);var d=this._section=ve("section",s+"-list");u&&(this._map.on("click",this.collapse,this),ie(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=ve("a",s+"-toggle",a);p.href="#",p.title="Layers",p.setAttribute("role","button"),ie(p,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){ct(g),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=ve("div",s+"-base",d),this._separator=ve("div",s+"-separator",d),this._overlaysList=ve("div",s+"-overlays",d),a.appendChild(d)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&h(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,u){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(d,p){return this.options.sortFunction(d.layer,p.layer,d.name,p.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sl(this._baseLayersList),sl(this._overlaysList),this._layerControlInputs=[];var s,a,u,d,p=0;for(u=0;u<this._layers.length;u++)d=this._layers[u],this._addItem(d),a=a||d.overlay,s=s||!d.overlay,p+=d.overlay?0:1;return this.options.hideSingleBase&&(s=s&&p>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(h(s.target)),u=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;u&&this._map.fire(u,a)},_createRadioElement:function(s,a){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=u,d.firstChild},_addItem:function(s){var a=document.createElement("label"),u=this._map.hasLayer(s.layer),d;s.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=u):d=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(d),d.layerId=h(s.layer),ie(d,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+s.name;var g=document.createElement("span");a.appendChild(g),g.appendChild(d),g.appendChild(p);var T=s.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,u,d=[],p=[];this._handlingClick=!0;for(var g=s.length-1;g>=0;g--)a=s[g],u=this._getLayer(a.layerId).layer,a.checked?d.push(u):a.checked||p.push(u);for(g=0;g<p.length;g++)this._map.hasLayer(p[g])&&this._map.removeLayer(p[g]);for(g=0;g<d.length;g++)this._map.hasLayer(d[g])||this._map.addLayer(d[g]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,u,d=this._map.getZoom(),p=s.length-1;p>=0;p--)a=s[p],u=this._getLayer(a.layerId).layer,a.disabled=u.options.minZoom!==void 0&&d<u.options.minZoom||u.options.maxZoom!==void 0&&d>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ie(s,"click",ct),this.expand();var a=this;setTimeout(function(){xe(s,"click",ct),a._preventClick=!1})}}),Px=function(s,a,u){return new rg(s,a,u)},bh=un.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",u=ve("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",u,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,u,d,p){var g=ve("a",u,d);return g.innerHTML=s,g.href="#",g.title=a,g.setAttribute("role","button"),g.setAttribute("aria-label",a),mo(g),ie(g,"click",or),ie(g,"click",p,this),ie(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";Ve(this._zoomInButton,a),Ve(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(re(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(re(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});pe.mergeOptions({zoomControl:!0}),pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new bh,this.addControl(this.zoomControl))});var kx=function(s){return new bh(s)},sg=un.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",u=ve("div",a),d=this.options;return this._addScales(d,a+"-line",u),s.on(d.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),u},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,u){s.metric&&(this._mScale=ve("div",a,u)),s.imperial&&(this._iScale=ve("div",a,u))},_update:function(){var s=this._map,a=s.getSize().y/2,u=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(u)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),u=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,u,a/s)},_updateImperial:function(s){var a=s*3.2808399,u,d,p;a>5280?(u=a/5280,d=this._getRoundNum(u),this._updateScale(this._iScale,d+" mi",d/u)):(p=this._getRoundNum(a),this._updateScale(this._iScale,p+" ft",p/a))},_updateScale:function(s,a,u){s.style.width=Math.round(this.options.maxWidth*u)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),u=s/a;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,a*u}}),bx=function(s){return new sg(s)},Rx='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Rh=un.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?Rx+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=ve("div","leaflet-control-attribution"),mo(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var u=[];this.options.prefix&&u.push(this.options.prefix),s.length&&u.push(s.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});pe.mergeOptions({attributionControl:!0}),pe.addInitHook(function(){this.options.attributionControl&&new Rh().addTo(this)});var Lx=function(s){return new Rh(s)};un.Layers=rg,un.Zoom=bh,un.Scale=sg,un.Attribution=Rh,_o.layers=Px,_o.zoom=kx,_o.scale=bx,_o.attribution=Lx;var bn=Ce.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bn.addTo=function(s,a){return s.addHandler(a,this),this};var Nx={Events:Ne},og=Y.touch?"touchstart mousedown":"mousedown",_i=He.extend({options:{clickTolerance:3},initialize:function(s,a,u,d){I(this,d),this._element=s,this._dragStartTarget=a||s,this._preventOutline=u},enable:function(){this._enabled||(ie(this._dragStartTarget,og,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_i._dragging===this&&this.finishDrag(!0),xe(this._dragStartTarget,og,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!_h(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){_i._dragging===this&&this.finishDrag();return}if(!(_i._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(_i._dragging=this,this._preventOutline&&Sh(this._element),yh(),ho(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,u=J_(this._element);this._startPoint=new O(a.clientX,a.clientY),this._startPos=rr(this._element),this._parentScale=Th(u);var d=s.type==="mousedown";ie(document,d?"mousemove":"touchmove",this._onMove,this),ie(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,u=new O(a.clientX,a.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ct(s),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Ge(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ve(document.body,"leaflet-dragging"),this._lastTarget&&(Ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),xe(document,"mousemove touchmove",this._onMove,this),xe(document,"mouseup touchend touchcancel",this._onUp,this),wh(),fo();var a=this._moved&&this._moving;this._moving=!1,_i._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function ag(s,a,u){var d,p=[1,4,2,8],g,T,P,b,M,Z,X,oe;for(g=0,Z=s.length;g<Z;g++)s[g]._code=ar(s[g],a);for(P=0;P<4;P++){for(X=p[P],d=[],g=0,Z=s.length,T=Z-1;g<Z;T=g++)b=s[g],M=s[T],b._code&X?M._code&X||(oe=cl(M,b,X,a,u),oe._code=ar(oe,a),d.push(oe)):(M._code&X&&(oe=cl(M,b,X,a,u),oe._code=ar(oe,a),d.push(oe)),d.push(b));s=d}return s}function lg(s,a){var u,d,p,g,T,P,b,M,Z;if(!s||s.length===0)throw new Error("latlngs not passed");Yt(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var X=ne([0,0]),oe=ye(s),Tt=oe.getNorthWest().distanceTo(oe.getSouthWest())*oe.getNorthEast().distanceTo(oe.getNorthWest());Tt<1700&&(X=Lh(s));var it=s.length,Qt=[];for(u=0;u<it;u++){var Rt=ne(s[u]);Qt.push(a.project(ne([Rt.lat-X.lat,Rt.lng-X.lng])))}for(P=b=M=0,u=0,d=it-1;u<it;d=u++)p=Qt[u],g=Qt[d],T=p.y*g.x-g.y*p.x,b+=(p.x+g.x)*T,M+=(p.y+g.y)*T,P+=T*3;P===0?Z=Qt[0]:Z=[b/P,M/P];var ns=a.unproject(D(Z));return ne([ns.lat+X.lat,ns.lng+X.lng])}function Lh(s){for(var a=0,u=0,d=0,p=0;p<s.length;p++){var g=ne(s[p]);a+=g.lat,u+=g.lng,d++}return ne([a/d,u/d])}var Ox={__proto__:null,clipPolygon:ag,polygonCenter:lg,centroid:Lh};function ug(s,a){if(!a||!s.length)return s.slice();var u=a*a;return s=Dx(s,u),s=Mx(s,u),s}function cg(s,a,u){return Math.sqrt(go(s,a,u,!0))}function Ax(s,a,u){return go(s,a,u)}function Mx(s,a){var u=s.length,d=typeof Uint8Array!=void 0+""?Uint8Array:Array,p=new d(u);p[0]=p[u-1]=1,Nh(s,p,a,0,u-1);var g,T=[];for(g=0;g<u;g++)p[g]&&T.push(s[g]);return T}function Nh(s,a,u,d,p){var g=0,T,P,b;for(P=d+1;P<=p-1;P++)b=go(s[P],s[d],s[p],!0),b>g&&(T=P,g=b);g>u&&(a[T]=1,Nh(s,a,u,d,T),Nh(s,a,u,T,p))}function Dx(s,a){for(var u=[s[0]],d=1,p=0,g=s.length;d<g;d++)Fx(s[d],s[p])>a&&(u.push(s[d]),p=d);return p<g-1&&u.push(s[g-1]),u}var hg;function dg(s,a,u,d,p){var g=d?hg:ar(s,u),T=ar(a,u),P,b,M;for(hg=T;;){if(!(g|T))return[s,a];if(g&T)return!1;P=g||T,b=cl(s,a,P,u,p),M=ar(b,u),P===g?(s=b,g=M):(a=b,T=M)}}function cl(s,a,u,d,p){var g=a.x-s.x,T=a.y-s.y,P=d.min,b=d.max,M,Z;return u&8?(M=s.x+g*(b.y-s.y)/T,Z=b.y):u&4?(M=s.x+g*(P.y-s.y)/T,Z=P.y):u&2?(M=b.x,Z=s.y+T*(b.x-s.x)/g):u&1&&(M=P.x,Z=s.y+T*(P.x-s.x)/g),new O(M,Z,p)}function ar(s,a){var u=0;return s.x<a.min.x?u|=1:s.x>a.max.x&&(u|=2),s.y<a.min.y?u|=4:s.y>a.max.y&&(u|=8),u}function Fx(s,a){var u=a.x-s.x,d=a.y-s.y;return u*u+d*d}function go(s,a,u,d){var p=a.x,g=a.y,T=u.x-p,P=u.y-g,b=T*T+P*P,M;return b>0&&(M=((s.x-p)*T+(s.y-g)*P)/b,M>1?(p=u.x,g=u.y):M>0&&(p+=T*M,g+=P*M)),T=s.x-p,P=s.y-g,d?T*T+P*P:new O(p,g)}function Yt(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function fg(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Yt(s)}function pg(s,a){var u,d,p,g,T,P,b,M;if(!s||s.length===0)throw new Error("latlngs not passed");Yt(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Z=ne([0,0]),X=ye(s),oe=X.getNorthWest().distanceTo(X.getSouthWest())*X.getNorthEast().distanceTo(X.getNorthWest());oe<1700&&(Z=Lh(s));var Tt=s.length,it=[];for(u=0;u<Tt;u++){var Qt=ne(s[u]);it.push(a.project(ne([Qt.lat-Z.lat,Qt.lng-Z.lng])))}for(u=0,d=0;u<Tt-1;u++)d+=it[u].distanceTo(it[u+1])/2;if(d===0)M=it[0];else for(u=0,g=0;u<Tt-1;u++)if(T=it[u],P=it[u+1],p=T.distanceTo(P),g+=p,g>d){b=(g-d)/p,M=[P.x-b*(P.x-T.x),P.y-b*(P.y-T.y)];break}var Rt=a.unproject(D(M));return ne([Rt.lat+Z.lat,Rt.lng+Z.lng])}var zx={__proto__:null,simplify:ug,pointToSegmentDistance:cg,closestPointOnSegment:Ax,clipSegment:dg,_getEdgeIntersection:cl,_getBitCode:ar,_sqClosestPointOnSegment:go,isFlat:Yt,_flat:fg,polylineCenter:pg},Oh={project:function(s){return new O(s.lng,s.lat)},unproject:function(s){return new ue(s.y,s.x)},bounds:new J([-180,-90],[180,90])},Ah={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,u=this.R,d=s.lat*a,p=this.R_MINOR/u,g=Math.sqrt(1-p*p),T=g*Math.sin(d),P=Math.tan(Math.PI/4-d/2)/Math.pow((1-T)/(1+T),g/2);return d=-u*Math.log(Math.max(P,1e-10)),new O(s.lng*a*u,d)},unproject:function(s){for(var a=180/Math.PI,u=this.R,d=this.R_MINOR/u,p=Math.sqrt(1-d*d),g=Math.exp(-s.y/u),T=Math.PI/2-2*Math.atan(g),P=0,b=.1,M;P<15&&Math.abs(b)>1e-7;P++)M=p*Math.sin(T),M=Math.pow((1-M)/(1+M),p/2),b=Math.PI/2-2*Math.atan(g*M)-T,T+=b;return new ue(T*a,s.x*a/u)}},Ux={__proto__:null,LonLat:Oh,Mercator:Ah,SphericalMercator:oo},Bx=r({},xn,{code:"EPSG:3395",projection:Ah,transformation:function(){var s=.5/(Math.PI*Ah.R);return K(s,.5,-s,.5)}()}),mg=r({},xn,{code:"EPSG:4326",projection:Oh,transformation:K(1/180,1,-1/180,.5)}),jx=r({},Xe,{projection:Oh,transformation:K(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var u=a.lng-s.lng,d=a.lat-s.lat;return Math.sqrt(u*u+d*d)},infinite:!0});Xe.Earth=xn,Xe.EPSG3395=Bx,Xe.EPSG3857=_e,Xe.EPSG900913=Gt,Xe.EPSG4326=mg,Xe.Simple=jx;var cn=He.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var u=this.getEvents();a.on(u,this),this.once("remove",function(){a.off(u,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});pe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=h(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=h(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,a){for(var u in this._layers)s.call(a,this._layers[u]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var a=0,u=s.length;a<u;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=h(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,u=this._getZoomSpan();for(var d in this._zoomBoundLayers){var p=this._zoomBoundLayers[d].options;s=p.minZoom===void 0?s:Math.min(s,p.minZoom),a=p.maxZoom===void 0?a:Math.max(a,p.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qr=cn.extend({initialize:function(s,a){I(this,a),this._layers={};var u,d;if(s)for(u=0,d=s.length;u<d;u++)this.addLayer(s[u])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),u,d;for(u in this._layers)d=this._layers[u],d[s]&&d[s].apply(d,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var u in this._layers)s.call(a,this._layers[u]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),Wx=function(s,a){return new Qr(s,a)},$n=Qr.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Qr.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Qr.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new $e;for(var a in this._layers){var u=this._layers[a];s.extend(u.getBounds?u.getBounds():u.getLatLng())}return s}}),Hx=function(s,a){return new $n(s,a)},Jr=Ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var u=this._getIconUrl(s);if(!u){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(u,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(s,a){var u=this.options,d=u[a+"Size"];typeof d=="number"&&(d=[d,d]);var p=D(d),g=D(a==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(u.className||""),g&&(s.style.marginLeft=-g.x+"px",s.style.marginTop=-g.y+"px"),p&&(s.style.width=p.x+"px",s.style.height=p.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return Y.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function $x(s){return new Jr(s)}var vo=Jr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof vo.imagePath!="string"&&(vo.imagePath=this._detectIconPath()),(this.options.imagePath||vo.imagePath)+Jr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(u,d,p){var g=d.exec(u);return g&&g[p]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=ve("div","leaflet-default-icon-path",document.body),a=co(s,"background-image")||co(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),_g=bn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new _i(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,u=a._map,d=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,g=rr(a._icon),T=u.getPixelBounds(),P=u.getPixelOrigin(),b=fe(T.min._subtract(P).add(p),T.max._subtract(P).subtract(p));if(!b.contains(g)){var M=D((Math.max(b.max.x,g.x)-b.max.x)/(T.max.x-b.max.x)-(Math.min(b.min.x,g.x)-b.min.x)/(T.min.x-b.min.x),(Math.max(b.max.y,g.y)-b.max.y)/(T.max.y-b.max.y)-(Math.min(b.min.y,g.y)-b.min.y)/(T.min.y-b.min.y)).multiplyBy(d);u.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),Ge(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=W(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(se(this._panRequest),this._panRequest=W(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,u=a._shadow,d=rr(a._icon),p=a._map.layerPointToLatLng(d);u&&Ge(u,d),a._latlng=p,s.latlng=p,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){se(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),hl=cn.extend({options:{icon:new vo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){I(this,a),this._latlng=ne(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=ne(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=s.icon.createIcon(this._icon),d=!1;u!==this._icon&&(this._icon&&this._removeIcon(),d=!0,s.title&&(u.title=s.title),u.tagName==="IMG"&&(u.alt=s.alt||"")),re(u,a),s.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ie(u,"focus",this._panOnFocus,this);var p=s.icon.createShadow(this._shadow),g=!1;p!==this._shadow&&(this._removeShadow(),g=!0),p&&(re(p,a),p.alt=""),this._shadow=p,s.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&g&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xe(this._icon,"focus",this._panOnFocus,this),Ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ae(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Ge(this._icon,s),this._shadow&&Ge(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_g)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _g(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Kt(this._icon,s),this._shadow&&Kt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,u=a.iconSize?D(a.iconSize):D(0,0),d=a.iconAnchor?D(a.iconAnchor):D(0,0);s.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:u.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Vx(s,a){return new hl(s,a)}var gi=cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),dl=gi.extend({options:{fill:!0,radius:10},initialize:function(s,a){I(this,a),this._latlng=ne(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=ne(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return gi.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,u=this._clickTolerance(),d=[s+u,a+u];this._pxBounds=new J(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Zx(s,a){return new dl(s,a)}var Mh=dl.extend({initialize:function(s,a,u){if(typeof a=="number"&&(a=r({},u,{radius:a})),I(this,a),this._latlng=ne(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new $e(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:gi.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,u=this._map,d=u.options.crs;if(d.distance===xn.distance){var p=Math.PI/180,g=this._mRadius/xn.R/p,T=u.project([a+g,s]),P=u.project([a-g,s]),b=T.add(P).divideBy(2),M=u.unproject(b).lat,Z=Math.acos((Math.cos(g*p)-Math.sin(a*p)*Math.sin(M*p))/(Math.cos(a*p)*Math.cos(M*p)))/p;(isNaN(Z)||Z===0)&&(Z=g/Math.cos(Math.PI/180*a)),this._point=b.subtract(u.getPixelOrigin()),this._radius=isNaN(Z)?0:b.x-u.project([M,s-Z]).x,this._radiusY=b.y-T.y}else{var X=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(X).x}this._updateBounds()}});function qx(s,a,u){return new Mh(s,a,u)}var Vn=gi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){I(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,u=null,d=go,p,g,T=0,P=this._parts.length;T<P;T++)for(var b=this._parts[T],M=1,Z=b.length;M<Z;M++){p=b[M-1],g=b[M];var X=d(s,p,g,!0);X<a&&(a=X,u=d(s,p,g))}return u&&(u.distance=Math.sqrt(a)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pg(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=ne(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new $e,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Yt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],u=Yt(s),d=0,p=s.length;d<p;d++)u?(a[d]=ne(s[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(s[d]);return a},_project:function(){var s=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new O(s,s);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,u){var d=s[0]instanceof ue,p=s.length,g,T;if(d){for(T=[],g=0;g<p;g++)T[g]=this._map.latLngToLayerPoint(s[g]),u.extend(T[g]);a.push(T)}else for(g=0;g<p;g++)this._projectLatlngs(s[g],a,u)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,u,d,p,g,T,P,b;for(u=0,p=0,g=this._rings.length;u<g;u++)for(b=this._rings[u],d=0,T=b.length;d<T-1;d++)P=dg(b[d],b[d+1],s,d,!0),P&&(a[p]=a[p]||[],a[p].push(P[0]),(P[1]!==b[d+1]||d===T-2)&&(a[p].push(P[1]),p++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,u=0,d=s.length;u<d;u++)s[u]=ug(s[u],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var u,d,p,g,T,P,b=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(u=0,g=this._parts.length;u<g;u++)for(P=this._parts[u],d=0,T=P.length,p=T-1;d<T;p=d++)if(!(!a&&d===0)&&cg(s,P[p],P[d])<=b)return!0;return!1}});function Gx(s,a){return new Vn(s,a)}Vn._flat=fg;var Xr=Vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lg(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Vn.prototype._convertLatLngs.call(this,s),u=a.length;return u>=2&&a[0]instanceof ue&&a[0].equals(a[u-1])&&a.pop(),a},_setLatLngs:function(s){Vn.prototype._setLatLngs.call(this,s),Yt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Yt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,u=new O(a,a);if(s=new J(s.min.subtract(u),s.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,p=this._rings.length,g;d<p;d++)g=ag(this._rings[d],s,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,u,d,p,g,T,P,b,M;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,b=this._parts.length;g<b;g++)for(u=this._parts[g],T=0,M=u.length,P=M-1;T<M;P=T++)d=u[T],p=u[P],d.y>s.y!=p.y>s.y&&s.x<(p.x-d.x)*(s.y-d.y)/(p.y-d.y)+d.x&&(a=!a);return a||Vn.prototype._containsPoint.call(this,s,!0)}});function Kx(s,a){return new Xr(s,a)}var Zn=$n.extend({initialize:function(s,a){I(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=C(s)?s:s.features,u,d,p;if(a){for(u=0,d=a.length;u<d;u++)p=a[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var g=this.options;if(g.filter&&!g.filter(s))return this;var T=fl(s,g);return T?(T.feature=_l(s),T.defaultOptions=T.options,this.resetStyle(T),g.onEachFeature&&g.onEachFeature(s,T),this.addLayer(T)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function fl(s,a){var u=s.type==="Feature"?s.geometry:s,d=u?u.coordinates:null,p=[],g=a&&a.pointToLayer,T=a&&a.coordsToLatLng||Dh,P,b,M,Z;if(!d&&!u)return null;switch(u.type){case"Point":return P=T(d),gg(g,s,P,a);case"MultiPoint":for(M=0,Z=d.length;M<Z;M++)P=T(d[M]),p.push(gg(g,s,P,a));return new $n(p);case"LineString":case"MultiLineString":return b=pl(d,u.type==="LineString"?0:1,T),new Vn(b,a);case"Polygon":case"MultiPolygon":return b=pl(d,u.type==="Polygon"?1:2,T),new Xr(b,a);case"GeometryCollection":for(M=0,Z=u.geometries.length;M<Z;M++){var X=fl({geometry:u.geometries[M],type:"Feature",properties:s.properties},a);X&&p.push(X)}return new $n(p);case"FeatureCollection":for(M=0,Z=u.features.length;M<Z;M++){var oe=fl(u.features[M],a);oe&&p.push(oe)}return new $n(p);default:throw new Error("Invalid GeoJSON object.")}}function gg(s,a,u,d){return s?s(a,u):new hl(u,d&&d.markersInheritOptions&&d)}function Dh(s){return new ue(s[1],s[0],s[2])}function pl(s,a,u){for(var d=[],p=0,g=s.length,T;p<g;p++)T=a?pl(s[p],a-1,u):(u||Dh)(s[p]),d.push(T);return d}function Fh(s,a){return s=ne(s),s.alt!==void 0?[v(s.lng,a),v(s.lat,a),v(s.alt,a)]:[v(s.lng,a),v(s.lat,a)]}function ml(s,a,u,d){for(var p=[],g=0,T=s.length;g<T;g++)p.push(a?ml(s[g],Yt(s[g])?0:a-1,u,d):Fh(s[g],d));return!a&&u&&p.length>0&&p.push(p[0].slice()),p}function es(s,a){return s.feature?r({},s.feature,{geometry:a}):_l(a)}function _l(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var zh={toGeoJSON:function(s){return es(this,{type:"Point",coordinates:Fh(this.getLatLng(),s)})}};hl.include(zh),Mh.include(zh),dl.include(zh),Vn.include({toGeoJSON:function(s){var a=!Yt(this._latlngs),u=ml(this._latlngs,a?1:0,!1,s);return es(this,{type:(a?"Multi":"")+"LineString",coordinates:u})}}),Xr.include({toGeoJSON:function(s){var a=!Yt(this._latlngs),u=a&&!Yt(this._latlngs[0]),d=ml(this._latlngs,u?2:a?1:0,!0,s);return a||(d=[d]),es(this,{type:(u?"Multi":"")+"Polygon",coordinates:d})}}),Qr.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(u){a.push(u.toGeoJSON(s).geometry.coordinates)}),es(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var u=a==="GeometryCollection",d=[];return this.eachLayer(function(p){if(p.toGeoJSON){var g=p.toGeoJSON(s);if(u)d.push(g.geometry);else{var T=_l(g);T.type==="FeatureCollection"?d.push.apply(d,T.features):d.push(T)}}}),u?es(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function vg(s,a){return new Zn(s,a)}var Yx=vg,gl=cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,u){this._url=s,this._bounds=ye(a),I(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Kr(this._image),this},bringToBack:function(){return this._map&&Yr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ye(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:ve("img");if(re(a,"leaflet-image-layer"),this._zoomAnimated&&re(a,"leaflet-zoom-animated"),this.options.className&&re(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ir(this._image,u,a)},_reset:function(){var s=this._image,a=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=a.getSize();Ge(s,a.min),s.style.width=u.x+"px",s.style.height=u.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Qx=function(s,a,u){return new gl(s,a,u)},yg=gl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:ve("video");if(re(a,"leaflet-image-layer"),this._zoomAnimated&&re(a,"leaflet-zoom-animated"),this.options.className&&re(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onloadeddata=l(this.fire,this,"load"),s){for(var u=a.getElementsByTagName("source"),d=[],p=0;p<u.length;p++)d.push(u[p].src);this._url=u.length>0?d:[a.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var T=ve("source");T.src=this._url[g],a.appendChild(T)}}});function Jx(s,a,u){return new yg(s,a,u)}var wg=gl.extend({_initImage:function(){var s=this._image=this._url;re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=_,s.onmousemove=_}});function Xx(s,a,u){return new wg(s,a,u)}var Rn=cn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof ue||C(s))?(this._latlng=ne(s),I(this,a)):(I(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(Ae,void 0,this._container),200)):Ae(this._container),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ne(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kr(this._container),this},bringToBack:function(){return this._map&&Yr(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof $n){a=null;var u=this._source._layers;for(var d in u)if(u[d]._map){a=u[d];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=D(this.options.offset),u=this._getAnchor();this._zoomAnimated?Ge(this._container,s.add(u)):a=a.add(s).add(u);var d=this._containerBottom=-a.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});pe.include({_initOverlay:function(s,a,u,d){var p=a;return p instanceof s||(p=new s(d).setContent(a)),u&&p.setLatLng(u),p}}),cn.include({_initOverlay:function(s,a,u,d){var p=u;return p instanceof s?(I(p,d),p._source=this):(p=a&&!d?a:new s(d,this),p.setContent(u)),p}});var vl=Rn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Rn.prototype.openOn.call(this,s)},onAdd:function(s){Rn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gi||this._source.on("preclick",sr))},onRemove:function(s){Rn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gi||this._source.off("preclick",sr))},getEvents:function(){var s=Rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=ve("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=ve("div",s+"-content-wrapper",a);if(this._contentNode=ve("div",s+"-content",u),mo(a),Ph(this._contentNode),ie(a,"contextmenu",sr),this._tipContainer=ve("div",s+"-tip-container",a),this._tip=ve("div",s+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=ve("a",s+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',ie(d,"click",function(p){ct(p),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var u=s.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),a.width=u+1+"px",a.whiteSpace="",a.height="";var d=s.offsetHeight,p=this.options.maxHeight,g="leaflet-popup-scrolled";p&&d>p?(a.height=p+"px",re(s,g)):Ve(s,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),u=this._getAnchor();Ge(this._container,a.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(co(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+a,d=this._containerWidth,p=new O(this._containerLeft,-u-this._containerBottom);p._add(rr(this._container));var g=s.layerPointToContainerPoint(p),T=D(this.options.autoPanPadding),P=D(this.options.autoPanPaddingTopLeft||T),b=D(this.options.autoPanPaddingBottomRight||T),M=s.getSize(),Z=0,X=0;g.x+d+b.x>M.x&&(Z=g.x+d-M.x+b.x),g.x-Z-P.x<0&&(Z=g.x-P.x),g.y+u+b.y>M.y&&(X=g.y+u-M.y+b.y),g.y-X-P.y<0&&(X=g.y-P.y),(Z||X)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Z,X]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),eP=function(s,a){return new vl(s,a)};pe.mergeOptions({closePopupOnClick:!0}),pe.include({openPopup:function(s,a,u){return this._initOverlay(vl,s,a,u).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),cn.include({bindPopup:function(s,a){return this._popup=this._initOverlay(vl,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof $n||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){or(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof gi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var yl=Rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Rn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Rn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Rn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ve("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,u,d=this._map,p=this._container,g=d.latLngToContainerPoint(d.getCenter()),T=d.layerPointToContainerPoint(s),P=this.options.direction,b=p.offsetWidth,M=p.offsetHeight,Z=D(this.options.offset),X=this._getAnchor();P==="top"?(a=b/2,u=M):P==="bottom"?(a=b/2,u=0):P==="center"?(a=b/2,u=M/2):P==="right"?(a=0,u=M/2):P==="left"?(a=b,u=M/2):T.x<g.x?(P="right",a=0,u=M/2):(P="left",a=b+(Z.x+X.x)*2,u=M/2),s=s.subtract(D(a,u,!0)).add(Z).add(X),Ve(p,"leaflet-tooltip-right"),Ve(p,"leaflet-tooltip-left"),Ve(p,"leaflet-tooltip-top"),Ve(p,"leaflet-tooltip-bottom"),re(p,"leaflet-tooltip-"+P),Ge(p,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Kt(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),tP=function(s,a){return new yl(s,a)};pe.include({openTooltip:function(s,a,u){return this._initOverlay(yl,s,a,u).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),cn.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yl,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[a](u),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof $n||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(ie(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ie(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,u,d;this._tooltip.options.sticky&&s.originalEvent&&(u=this._map.mouseEventToContainerPoint(s.originalEvent),d=this._map.containerPointToLayerPoint(u),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var Eg=Jr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),u=this.options;if(u.html instanceof Element?(sl(a),a.appendChild(u.html)):a.innerHTML=u.html!==!1?u.html:"",u.bgPos){var d=D(u.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function nP(s){return new Eg(s)}Jr.Default=vo;var yo=cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ae(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof O?s:new O(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,u=-s(-1/0,1/0),d=0,p=a.length,g;d<p;d++)g=a[d].style.zIndex,a[d]!==this._container&&g&&(u=s(u,+g));isFinite(u)&&(this.options.zIndex=u+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){Kt(this._container,this.options.opacity);var s=+new Date,a=!1,u=!1;for(var d in this._tiles){var p=this._tiles[d];if(!(!p.current||!p.loaded)){var g=Math.min(1,(s-p.loaded)/200);Kt(p.el,g),g<1?a=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),a&&(se(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=ve("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===s?(this._levels[u].el.style.zIndex=a-Math.abs(s-u),this._onUpdateLevel(u)):(Ae(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var d=this._levels[s],p=this._map;return d||(d=this._levels[s]={},d.el=ve("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=p.project(p.unproject(p.getPixelOrigin()),s).round(),d.zoom=s,this._setZoomTransform(d,p.getCenter(),p.getZoom()),_(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var s,a,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ae(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,u,d){var p=Math.floor(s/2),g=Math.floor(a/2),T=u-1,P=new O(+p,+g);P.z=+T;var b=this._tileCoordsToKey(P),M=this._tiles[b];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),T>d?this._retainParent(p,g,T,d):!1)},_retainChildren:function(s,a,u,d){for(var p=2*s;p<2*s+2;p++)for(var g=2*a;g<2*a+2;g++){var T=new O(p,g);T.z=u+1;var P=this._tileCoordsToKey(T),b=this._tiles[P];if(b&&b.active){b.retain=!0;continue}else b&&b.loaded&&(b.retain=!0);u+1<d&&this._retainChildren(p,g,u+1,d)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,u,d){var p=Math.round(a);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var g=this.options.updateWhenZooming&&p!==this._tileZoom;(!d||g)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(s),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var u in this._levels)this._setZoomTransform(this._levels[u],s,a)},_setZoomTransform:function(s,a,u){var d=this._map.getZoomScale(u,s.zoom),p=s.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,u)).round();Y.any3d?ir(s.el,p,d):Ge(s.el,p)},_resetGrid:function(){var s=this._map,a=s.options.crs,u=this._tileSize=this.getTileSize(),d=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],d).x/u.x),Math.ceil(s.project([0,a.wrapLng[1]],d).x/u.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],d).y/u.x),Math.ceil(s.project([a.wrapLat[1],0],d).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,u=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(u,this._tileZoom),p=a.project(s,this._tileZoom).floor(),g=a.getSize().divideBy(d*2);return new J(p.subtract(g),p.add(g))},_update:function(s){var a=this._map;if(a){var u=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(s),p=this._pxBoundsToTileRange(d),g=p.getCenter(),T=[],P=this.options.keepBuffer,b=new J(p.getBottomLeft().subtract([P,-P]),p.getTopRight().add([P,-P]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var Z=this._tiles[M].coords;(Z.z!==this._tileZoom||!b.contains(new O(Z.x,Z.y)))&&(this._tiles[M].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(s,u);return}for(var X=p.min.y;X<=p.max.y;X++)for(var oe=p.min.x;oe<=p.max.x;oe++){var Tt=new O(oe,X);if(Tt.z=this._tileZoom,!!this._isValidTile(Tt)){var it=this._tiles[this._tileCoordsToKey(Tt)];it?it.current=!0:T.push(Tt)}}if(T.sort(function(Rt,ns){return Rt.distanceTo(g)-ns.distanceTo(g)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qt=document.createDocumentFragment();for(oe=0;oe<T.length;oe++)this._addTile(T[oe],Qt);this._level.el.appendChild(Qt)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var u=this._globalTileRange;if(!a.wrapLng&&(s.x<u.min.x||s.x>u.max.x)||!a.wrapLat&&(s.y<u.min.y||s.y>u.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(s);return ye(this.options.bounds).overlaps(d)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,u=this.getTileSize(),d=s.scaleBy(u),p=d.add(u),g=a.unproject(d,s.z),T=a.unproject(p,s.z);return[g,T]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),u=new $e(a[0],a[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),u=new O(+a[0],+a[1]);return u.z=+a[2],u},_removeTile:function(s){var a=this._tiles[s];a&&(Ae(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){re(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=_,s.onmousemove=_,Y.ielt9&&this.options.opacity<1&&Kt(s,this.options.opacity)},_addTile:function(s,a){var u=this._getTilePos(s),d=this._tileCoordsToKey(s),p=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(p),this.createTile.length<2&&W(l(this._tileReady,this,s,null,p)),Ge(p,u),this._tiles[d]={el:p,coords:s,current:!0},a.appendChild(p),this.fire("tileloadstart",{tile:p,coords:s})},_tileReady:function(s,a,u){a&&this.fire("tileerror",{error:a,tile:u,coords:s});var d=this._tileCoordsToKey(s);u=this._tiles[d],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Kt(u.el,0),se(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),a||(re(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?W(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new O(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new J(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function iP(s){return new yo(s)}var ts=yo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=I(this,a),a.detectRetina&&Y.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var u=document.createElement("img");return ie(u,"load",l(this._tileOnLoad,this,a,u)),ie(u,"error",l(this._tileOnError,this,a,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(s),u},getTileUrl:function(s){var a={r:Y.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=u),a["-y"]=u}return y(this._url,r(a,this.options))},_tileOnLoad:function(s,a){Y.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,u){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),s(u,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,u=this.options.zoomReverse,d=this.options.zoomOffset;return u&&(s=a-s),s+d},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=_,a.onerror=_,!a.complete)){a.src=F;var u=this._tiles[s].coords;Ae(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:u})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",F),yo.prototype._removeTile.call(this,s)},_tileReady:function(s,a,u){if(!(!this._map||u&&u.getAttribute("src")===F))return yo.prototype._tileReady.call(this,s,a,u)}});function Sg(s,a){return new ts(s,a)}var Tg=ts.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var u=r({},this.defaultWmsParams);for(var d in a)d in this.options||(u[d]=a[d]);a=I(this,a);var p=a.detectRetina&&Y.retina?2:1,g=this.getTileSize();u.width=g.x*p,u.height=g.y*p,this.wmsParams=u},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,ts.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),u=this._crs,d=fe(u.project(a[0]),u.project(a[1])),p=d.min,g=d.max,T=(this._wmsVersion>=1.3&&this._crs===mg?[p.y,p.x,g.y,g.x]:[p.x,p.y,g.x,g.y]).join(","),P=ts.prototype.getTileUrl.call(this,s);return P+N(this.wmsParams,P,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function rP(s,a){return new Tg(s,a)}ts.WMS=Tg,Sg.wms=rP;var qn=cn.extend({options:{padding:.1},initialize:function(s){I(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var u=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,a),g=d.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(s,a));Y.any3d?ir(this._container,g,u):Ge(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),u=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new J(u,u.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Cg=qn.extend({options:{tolerance:0},getEvents:function(){var s=qn.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ie(s,"mousemove",this._onMouseMove,this),ie(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ie(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){se(this._redrawRequest),delete this._ctx,Ae(this._container),xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qn.prototype._update.call(this);var s=this._bounds,a=this._container,u=s.getSize(),d=Y.retina?2:1;Ge(a,s.min),a.width=d*u.x,a.height=d*u.y,a.style.width=u.x+"px",a.style.height=u.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){qn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,u=a.next,d=a.prev;u?u.prev=d:this._drawLast=d,d?d.next=u:this._drawFirst=u,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),u=[],d,p;for(p=0;p<a.length;p++){if(d=Number(a[p]),isNaN(d))return;u.push(d)}s.options._dashArray=u}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||W(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var u=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)s=d.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var u,d,p,g,T=s._parts,P=T.length,b=this._ctx;if(P){for(b.beginPath(),u=0;u<P;u++){for(d=0,p=T[u].length;d<p;d++)g=T[u][d],b[d?"lineTo":"moveTo"](g.x,g.y);a&&b.closePath()}this._fillStroke(b,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,u=this._ctx,d=Math.max(Math.round(s._radius),1),p=(Math.max(Math.round(s._radiusY),1)||d)/d;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(a.x,a.y/p,d,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,s)}},_fillStroke:function(s,a){var u=a.options;u.fill&&(s.globalAlpha=u.fillOpacity,s.fillStyle=u.fillColor||u.color,s.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=u.opacity,s.lineWidth=u.weight,s.strokeStyle=u.color,s.lineCap=u.lineCap,s.lineJoin=u.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(u))&&(d=u);this._fireEvent(d?[d]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(d=u);d!==this._hoveredLayer&&(this._handleMouseOut(s),d&&(re(this._container,"leaflet-interactive"),this._fireEvent([d],s,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,u){this._map._fireDOMEvent(a,u||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var u=a.next,d=a.prev;if(u)u.prev=d;else return;d?d.next=u:u&&(this._drawFirst=u),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var u=a.next,d=a.prev;if(d)d.next=u;else return;u?u.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function Ig(s){return Y.canvas?new Cg(s):null}var wo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sP={_initContainer:function(){this._container=ve("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qn.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=wo("shape");re(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=wo("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Ae(a),s.removeInteractiveTarget(a),delete this._layers[h(s)]},_updateStyle:function(s){var a=s._stroke,u=s._fill,d=s.options,p=s._container;p.stroked=!!d.stroke,p.filled=!!d.fill,d.stroke?(a||(a=s._stroke=wo("stroke")),p.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=C(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(p.removeChild(a),s._stroke=null),d.fill?(u||(u=s._fill=wo("fill")),p.appendChild(u),u.color=d.fillColor||d.color,u.opacity=d.fillOpacity):u&&(p.removeChild(u),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),u=Math.round(s._radius),d=Math.round(s._radiusY||u);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+u+","+d+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){Kr(s._container)},_bringToBack:function(s){Yr(s._container)}},wl=Y.vml?wo:mi,Eo=qn.extend({_initContainer:function(){this._container=wl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ae(this._container),xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qn.prototype._update.call(this);var s=this._bounds,a=s.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,u.setAttribute("width",a.x),u.setAttribute("height",a.y)),Ge(u,s.min),u.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=wl("path");s.options.className&&re(a,s.options.className),s.options.interactive&&re(a,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ae(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,u=s.options;a&&(u.stroke?(a.setAttribute("stroke",u.color),a.setAttribute("stroke-opacity",u.opacity),a.setAttribute("stroke-width",u.weight),a.setAttribute("stroke-linecap",u.lineCap),a.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?a.setAttribute("stroke-dasharray",u.dashArray):a.removeAttribute("stroke-dasharray"),u.dashOffset?a.setAttribute("stroke-dashoffset",u.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),u.fill?(a.setAttribute("fill",u.fillColor||u.color),a.setAttribute("fill-opacity",u.fillOpacity),a.setAttribute("fill-rule",u.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,nl(s._parts,a))},_updateCircle:function(s){var a=s._point,u=Math.max(Math.round(s._radius),1),d=Math.max(Math.round(s._radiusY),1)||u,p="a"+u+","+d+" 0 1,0 ",g=s._empty()?"M0 0":"M"+(a.x-u)+","+a.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(s,g)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){Kr(s._path)},_bringToBack:function(s){Yr(s._path)}});Y.vml&&Eo.include(sP);function xg(s){return Y.svg||Y.vml?new Eo(s):null}pe.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&Ig(s)||xg(s)}});var Pg=Xr.extend({initialize:function(s,a){Xr.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ye(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function oP(s,a){return new Pg(s,a)}Eo.create=wl,Eo.pointsToPath=nl,Zn.geometryToLayer=fl,Zn.coordsToLatLng=Dh,Zn.coordsToLatLngs=pl,Zn.latLngToCoords=Fh,Zn.latLngsToCoords=ml,Zn.getFeature=es,Zn.asFeature=_l,pe.mergeOptions({boxZoom:!0});var kg=bn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ho(),yh(),this._startPoint=this._map.mouseEventToContainerPoint(s),ie(document,{contextmenu:or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=ve("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new J(this._point,this._startPoint),u=a.getSize();Ge(this._box,a.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Ae(this._box),Ve(this._container,"leaflet-crosshair")),fo(),wh(),xe(document,{contextmenu:or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new $e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});pe.addInitHook("addHandler","boxZoom",kg),pe.mergeOptions({doubleClickZoom:!0});var bg=bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,u=a.getZoom(),d=a.options.zoomDelta,p=s.originalEvent.shiftKey?u-d:u+d;a.options.doubleClickZoom==="center"?a.setZoom(p):a.setZoomAround(s.containerPoint,p)}});pe.addInitHook("addHandler","doubleClickZoom",bg),pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Rg=bn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new _i(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ve(this._map._container,"leaflet-grab"),Ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=ye(this._map.options.maxBounds);this._offsetLimit=fe(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),u=this._initialWorldOffset,d=this._draggable._newPos.x,p=(d-a+u)%s+a-u,g=(d+a+u)%s-a-u,T=Math.abs(p+u)<Math.abs(g+u)?p:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(s){var a=this._map,u=a.options,d=!u.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),d)a.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,T=u.easeLinearity,P=p.multiplyBy(T/g),b=P.distanceTo([0,0]),M=Math.min(u.inertiaMaxSpeed,b),Z=P.multiplyBy(M/b),X=M/(u.inertiaDeceleration*T),oe=Z.multiplyBy(-X/2).round();!oe.x&&!oe.y?a.fire("moveend"):(oe=a._limitOffset(oe,a.options.maxBounds),W(function(){a.panBy(oe,{duration:X,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});pe.addInitHook("addHandler","dragging",Rg),pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Lg=bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ie(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,u=s.scrollTop||a.scrollTop,d=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},u=this.keyCodes,d,p;for(d=0,p=u.left.length;d<p;d++)a[u.left[d]]=[-1*s,0];for(d=0,p=u.right.length;d<p;d++)a[u.right[d]]=[s,0];for(d=0,p=u.down.length;d<p;d++)a[u.down[d]]=[0,s];for(d=0,p=u.up.length;d<p;d++)a[u.up[d]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},u=this.keyCodes,d,p;for(d=0,p=u.zoomIn.length;d<p;d++)a[u.zoomIn[d]]=s;for(d=0,p=u.zoomOut.length;d<p;d++)a[u.zoomOut[d]]=-s},_addHooks:function(){ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,u=this._map,d;if(a in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(d=this._panKeys[a],s.shiftKey&&(d=D(d).multiplyBy(3)),u.options.maxBounds&&(d=u._limitOffset(D(d),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(d)));u.panTo(p)}else u.panBy(d)}else if(a in this._zoomKeys)u.setZoom(u.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;or(s)}}});pe.addInitHook("addHandler","keyboard",Lg),pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ng=bn.extend({addHooks:function(){ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=ng(s),u=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var d=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),d),or(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),u=this._map.options.zoomSnap||0;s._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,g=u?Math.ceil(p/u)*u:p,T=s._limitZoom(a+(this._delta>0?g:-g))-a;this._delta=0,this._startTime=null,T&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+T):s.setZoomAround(this._lastMousePos,a+T))}});pe.addInitHook("addHandler","scrollWheelZoom",Ng);var aP=600;pe.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var Og=bn.extend({addHooks:function(){ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new O(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ie(document,"touchend",ct),ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),aP),ie(document,"touchend touchcancel contextmenu",this._cancel,this),ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){xe(document,"touchend",ct),xe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),xe(document,"touchend touchcancel contextmenu",this._cancel,this),xe(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new O(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var u=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});u._simulated=!0,a.target.dispatchEvent(u)}});pe.addInitHook("addHandler","tapHold",Og),pe.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var Ag=bn.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var u=a.mouseEventToContainerPoint(s.touches[0]),d=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(u.add(d)._divideBy(2))),this._startDist=u.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ie(document,"touchmove",this._onTouchMove,this),ie(document,"touchend touchcancel",this._onTouchEnd,this),ct(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,u=a.mouseEventToContainerPoint(s.touches[0]),d=a.mouseEventToContainerPoint(s.touches[1]),p=u.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(p,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&p<1||this._zoom>a.getMaxZoom()&&p>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var g=u._add(d)._divideBy(2)._subtract(this._centerPoint);if(p===1&&g.x===0&&g.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),se(this._animRequest);var T=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=W(T,this,!0),ct(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,se(this._animRequest),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});pe.addInitHook("addHandler","touchZoom",Ag),pe.BoxZoom=kg,pe.DoubleClickZoom=bg,pe.Drag=Rg,pe.Keyboard=Lg,pe.ScrollWheelZoom=Ng,pe.TapHold=Og,pe.TouchZoom=Ag,n.Bounds=J,n.Browser=Y,n.CRS=Xe,n.Canvas=Cg,n.Circle=Mh,n.CircleMarker=dl,n.Class=Ce,n.Control=un,n.DivIcon=Eg,n.DivOverlay=Rn,n.DomEvent=Ix,n.DomUtil=Tx,n.Draggable=_i,n.Evented=He,n.FeatureGroup=$n,n.GeoJSON=Zn,n.GridLayer=yo,n.Handler=bn,n.Icon=Jr,n.ImageOverlay=gl,n.LatLng=ue,n.LatLngBounds=$e,n.Layer=cn,n.LayerGroup=Qr,n.LineUtil=zx,n.Map=pe,n.Marker=hl,n.Mixin=Nx,n.Path=gi,n.Point=O,n.PolyUtil=Ox,n.Polygon=Xr,n.Polyline=Vn,n.Popup=vl,n.PosAnimation=ig,n.Projection=Ux,n.Rectangle=Pg,n.Renderer=qn,n.SVG=Eo,n.SVGOverlay=wg,n.TileLayer=ts,n.Tooltip=yl,n.Transformation=he,n.Util=Ie,n.VideoOverlay=yg,n.bind=l,n.bounds=fe,n.canvas=Ig,n.circle=qx,n.circleMarker=Zx,n.control=_o,n.divIcon=nP,n.extend=r,n.featureGroup=Hx,n.geoJSON=vg,n.geoJson=Yx,n.gridLayer=iP,n.icon=$x,n.imageOverlay=Qx,n.latLng=ne,n.latLngBounds=ye,n.layerGroup=Wx,n.map=xx,n.marker=Vx,n.point=D,n.polygon=Kx,n.polyline=Gx,n.popup=eP,n.rectangle=oP,n.setOptions=I,n.stamp=h,n.svg=xg,n.svgOverlay=Xx,n.tileLayer=Sg,n.tooltip=tP,n.transformation=K,n.version=i,n.videoOverlay=Jx;var lP=window.L;n.noConflict=function(){return window.L=lP,this},window.L=n})})(dp,dp.exports);var ft=dp.exports;const Uz=Uw(ft),C_=zw({__proto__:null,default:Uz},[ft]);function Bz({markersData:t,getSpotContent:e,filteredData:n,setFilteredData:i}){const[r,o]=k.useState("");return x.jsxs("div",{className:"spotContainer",children:[x.jsx("strong",{id:"text1",children:"View Skate Spots!"}),x.jsx(zz,{markersData:t,setFilteredData:i,searchInput:r,setSearchInput:o}),x.jsx("div",{className:"blocker",children:n.length>0?x.jsx(x.Fragment,{children:n.map((l,c)=>x.jsx("a",{href:"#",children:x.jsxs("div",{id:c,className:"element-container",onClick:e,children:[x.jsx("img",{src:l.uploadedImgURLs[0],className:"image"}),x.jsxs("div",{className:"overlay",children:[x.jsx("div",{className:"element-text",children:n[c].spotName}),x.jsx("div",{className:"element-textAddress",children:n[c].spotAddress})]})]})}))}):x.jsxs("div",{style:{textAlign:"center"},children:[x.jsx("strong",{style:{position:"relative",fontSize:"20px"},children:"No spots found!"}),x.jsx("br",{}),x.jsx("strong",{children:":(("})]})})]})}var rI=function(){if(typeof Map<"u")return Map;function t(e,n){var i=-1;return e.some(function(r,o){return r[0]===n?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var i=t(this.__entries__,n),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(n,i){var r=t(this.__entries__,n);~r?this.__entries__[r][1]=i:this.__entries__.push([n,i])},e.prototype.delete=function(n){var i=this.__entries__,r=t(i,n);~r&&i.splice(r,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var r=0,o=this.__entries__;r<o.length;r++){var l=o[r];n.call(i,l[1],l[0])}},e}()}(),fp=typeof window<"u"&&typeof document<"u"&&window.document===document,ac=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),jz=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ac):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Wz=2;function Hz(t,e){var n=!1,i=!1,r=0;function o(){n&&(n=!1,t()),i&&c()}function l(){jz(o)}function c(){var h=Date.now();if(n){if(h-r<Wz)return;i=!0}else n=!0,i=!1,setTimeout(l,e);r=h}return c}var $z=20,Vz=["top","right","bottom","left","width","height","size","weight"],Zz=typeof MutationObserver<"u",qz=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Hz(this.refresh.bind(this),$z)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,i=n.indexOf(e);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!fp||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Zz?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!fp||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,i=n===void 0?"":n,r=Vz.some(function(o){return!!~i.indexOf(o)});r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),sI=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},qs=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||ac},oI=ih(0,0,0,0);function lc(t){return parseFloat(t)||0}function Tw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(i,r){var o=t["border-"+r+"-width"];return i+lc(o)},0)}function Gz(t){for(var e=["top","right","bottom","left"],n={},i=0,r=e;i<r.length;i++){var o=r[i],l=t["padding-"+o];n[o]=lc(l)}return n}function Kz(t){var e=t.getBBox();return ih(0,0,e.width,e.height)}function Yz(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return oI;var i=qs(t).getComputedStyle(t),r=Gz(i),o=r.left+r.right,l=r.top+r.bottom,c=lc(i.width),h=lc(i.height);if(i.boxSizing==="border-box"&&(Math.round(c+o)!==e&&(c-=Tw(i,"left","right")+o),Math.round(h+l)!==n&&(h-=Tw(i,"top","bottom")+l)),!Jz(t)){var f=Math.round(c+o)-e,m=Math.round(h+l)-n;Math.abs(f)!==1&&(c-=f),Math.abs(m)!==1&&(h-=m)}return ih(r.left,r.top,c,h)}var Qz=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof qs(t).SVGGraphicsElement}:function(t){return t instanceof qs(t).SVGElement&&typeof t.getBBox=="function"}}();function Jz(t){return t===qs(t).document.documentElement}function Xz(t){return fp?Qz(t)?Kz(t):Yz(t):oI}function eU(t){var e=t.x,n=t.y,i=t.width,r=t.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return sI(l,{x:e,y:n,width:i,height:r,top:n,right:e+i,bottom:r+n,left:e}),l}function ih(t,e,n,i){return{x:t,y:e,width:n,height:i}}var tU=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ih(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=Xz(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),nU=function(){function t(e,n){var i=eU(n);sI(this,{target:e,contentRect:i})}return t}(),iU=function(){function t(e,n,i){if(this.activeObservations_=[],this.observations_=new rI,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof qs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new tU(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof qs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new nU(i.target,i.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),aI=typeof WeakMap<"u"?new WeakMap:new rI,lI=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=qz.getInstance(),i=new iU(e,n,this);aI.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){lI.prototype[t]=function(){var e;return(e=aI.get(this))[t].apply(e,arguments)}});var uI=function(){return typeof ac.ResizeObserver<"u"?ac.ResizeObserver:lI}(),pn={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-pn.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?pn.Bounce.In(t*2)*.5:pn.Bounce.Out(t*2-1)*.5+.5}}},Ho;typeof self>"u"&&typeof process<"u"&&process.hrtime?Ho=function(){var t=process.hrtime();return t[0]*1e3+t[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?Ho=self.performance.now.bind(self.performance):Date.now!==void 0?Ho=Date.now:Ho=function(){return new Date().getTime()};var os=Ho,I_=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},t.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},t.prototype.update=function(e,n){e===void 0&&(e=os()),n===void 0&&(n=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var o=this._tweens[i[r]],l=!n;o&&o.update(e,l)===!1&&!n&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),$o={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=$o.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=$o.Utils.Bernstein,l=0;l<=i;l++)n+=r(1-e,i-l)*r(e,l)*t[l]*o(i,l);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=$o.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=$o.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=(n-t)*.5,l=(i-e)*.5,c=r*r,h=r*c;return(2*e-2*n+o+l)*h+(-3*e+3*n-2*o-l)*c+o*r+e}}},rU=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),cI=new I_,hI=function(){function t(e,n){n===void 0&&(n=cI),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=pn.Linear.None,this._interpolationFunction=$o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=rU.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(e,n){return this._valuesEnd=Object.create(e),n!==void 0&&(this._duration=n),this},t.prototype.duration=function(e){return this._duration=e,this},t.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e!==void 0?typeof e=="string"?os()+parseFloat(e):e:os(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(e,n,i,r){for(var o in i){var l=e[o],c=Array.isArray(l),h=c?"array":typeof l,f=!c&&Array.isArray(i[o]);if(!(h==="undefined"||h==="function")){if(f){var m=i[o];if(m.length===0)continue;m=m.map(this._handleRelativeValue.bind(this,l)),i[o]=[l].concat(m)}if((h==="object"||c)&&l&&!f){n[o]=c?[]:{};for(var _ in l)n[o][_]=l[_];r[o]=c?[]:{},this._setupProperties(l,n[o],i[o],r[o])}else typeof n[o]>"u"&&(n[o]=l),c||(n[o]*=1),f?r[o]=i[o].slice().reverse():r[o]=n[o]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(e){return e===void 0&&(e=os()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},t.prototype.resume=function(e){return e===void 0&&(e=os()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},t.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return this._group=e,this},t.prototype.delay=function(e){return this._delayTime=e,this},t.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return this._yoyo=e,this},t.prototype.easing=function(e){return this._easingFunction=e,this},t.prototype.interpolation=function(e){return this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,n){if(e===void 0&&(e=os()),n===void 0&&(n=!0),this._isPaused)return!0;var i,r,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;n&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=this._duration===0||r>1?1:r;var l=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,l),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),r===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var c=0,h=this._chainedTweens.length;c<h;c++)this._chainedTweens[c].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,n,i,r){for(var o in i)if(n[o]!==void 0){var l=n[o]||0,c=i[o],h=Array.isArray(e[o]),f=Array.isArray(c),m=!h&&f;m?e[o]=this._interpolationFunction(c,r):typeof c=="object"&&c?this._updateProperties(e[o],l,c,r):(c=this._handleRelativeValue(l,c),typeof c=="number"&&(e[o]=l+(c-l)*r))}},t.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},t.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},t}(),jn=cI;jn.getAll.bind(jn);jn.removeAll.bind(jn);jn.add.bind(jn);jn.remove.bind(jn);jn.update.bind(jn);function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},za.apply(this,arguments)}var dI=function(e,n){return n&&n<ee.Children.count(e)?n:0},sU=function(e,n){if(typeof window<"u"&&Array.isArray(n))return n.find(function(i){return i.breakpoint<=e})},Cw={linear:pn.Linear.None,ease:pn.Quadratic.InOut,"ease-in":pn.Quadratic.In,"ease-out":pn.Quadratic.Out,cubic:pn.Cubic.InOut,"cubic-in":pn.Cubic.In,"cubic-out":pn.Cubic.Out},fI=function(e){return e?Cw[e]:Cw.linear},pI=function(e,n,i){var r=e.prevArrow,o=e.infinite,l=n<=0&&!o,c={"data-type":"prev","aria-label":"Previous Slide",disabled:l,onClick:i};if(r)return ee.cloneElement(r,za({className:(r.props.className||"")+" nav "+(l?"disabled":"")},c));var h="nav default-nav "+(l?"disabled":"");return ee.createElement("button",Object.assign({type:"button",className:h},c),ee.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},ee.createElement("path",{d:"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"})))},mI=function(e,n,i){var r=e.nextArrow,o=e.infinite,l=e.children,c=1;"slidesToScroll"in e&&(c=e.slidesToScroll||1);var h=n>=ee.Children.count(l)-c&&!o,f={"data-type":"next","aria-label":"Next Slide",disabled:h,onClick:i};if(r)return ee.cloneElement(r,za({className:(r.props.className||"")+" nav "+(h?"disabled":"")},f));var m="nav default-nav "+(h?"disabled":"");return ee.createElement("button",Object.assign({type:"button",className:m},f),ee.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},ee.createElement("path",{d:"M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"})))},oU=function(e,n,i){return ee.createElement("li",{key:n},ee.createElement("button",Object.assign({type:"button",className:"each-slideshow-indicator "+(e?"active":"")},i)))},aU=function(e,n,i,r){return ee.cloneElement(r,za({className:r.props.className+" "+(e?"active":""),key:n},i))},_I=function(e,n,i,r){var o=e.children,l=e.indicators,c=1;r?c=r==null?void 0:r.settings.slidesToScroll:"slidesToScroll"in e&&(c=e.slidesToScroll||1);var h=Math.ceil(ee.Children.count(o)/c);return ee.createElement("ul",{className:"indicators"},Array.from({length:h},function(f,m){var _={"data-key":m,"aria-label":"Go to slide "+(m+1),onClick:i},v=Math.floor((n+c-1)/c)===m;return typeof l=="function"?aU(v,m,_,l(m)):oU(v,m,_)}))},rh={duration:5e3,transitionDuration:1e3,defaultIndex:0,infinite:!0,autoplay:!0,indicators:!1,arrows:!0,pauseOnHover:!0,easing:"linear",canSwipe:!0,cssClass:"",responsive:[]},x_=ee.forwardRef(function(t,e){var n=k.useState(dI(t.children,t.defaultIndex)),i=n[0],r=n[1],o=k.useRef(null),l=k.useRef(null),c=k.useRef(new I_),h=k.useRef(),f=k.useRef(),m=k.useMemo(function(){return ee.Children.count(t.children)},[t.children]),_=k.useCallback(function(){if(l.current&&o.current){var z=o.current.clientWidth,$=z*m;l.current.style.width=$+"px";for(var V=0;V<l.current.children.length;V++){var W=l.current.children[V];W&&(W.style.width=z+"px",W.style.left=V*-z+"px",W.style.display="block")}}},[o,l,m]),v=k.useCallback(function(){o.current&&(f.current=new uI(function(z){z&&_()}),f.current.observe(o.current))},[o,_]),E=k.useCallback(function(){var z=t.autoplay,$=t.children,V=t.duration,W=t.infinite;z&&ee.Children.count($)>1&&(W||i<ee.Children.count($)-1)&&(h.current=setTimeout(S,V))},[t,i]);k.useEffect(function(){return v(),function(){c.current.removeAll(),clearTimeout(h.current),w()}},[v,c]),k.useEffect(function(){clearTimeout(h.current),E()},[i,t.autoplay,E]),k.useEffect(function(){_()},[m,_]),k.useImperativeHandle(e,function(){return{goNext:function(){S()},goBack:function(){y()},goTo:function($,V){V!=null&&V.skipTransition?r($):j($)}}});var w=function(){f.current&&o.current&&f.current.unobserve(o.current)},I=function(){t.pauseOnHover&&clearTimeout(h.current)},N=function(){var $=t.pauseOnHover,V=t.autoplay,W=t.duration;$&&V&&(h.current=setTimeout(function(){return S()},W))},S=function(){var $=t.children,V=t.infinite;!V&&i===ee.Children.count($)-1||F((i+1)%ee.Children.count($))},y=function(){var $=t.children,V=t.infinite;!V&&i===0||F(i===0?ee.Children.count($)-1:i-1)},C=function($){var V=$.currentTarget;V.dataset.type==="prev"?y():S()},R=function z(){requestAnimationFrame(z),c.current.update()},F=function($){var V=c.current.getAll();if(!V.length){var W;(W=l.current)!=null&&W.children[$]||($=0),clearTimeout(h.current);var se={opacity:0,scale:1};R();var Ie=new hI(se,c.current).to({opacity:1,scale:t.scale},t.transitionDuration).onUpdate(function(Ce){l.current&&(l.current.children[$].style.opacity=Ce.opacity,l.current.children[i].style.opacity=1-Ce.opacity,l.current.children[i].style.transform="scale("+Ce.scale+")")});Ie.easing(fI(t.easing)),Ie.onStart(function(){typeof t.onStartChange=="function"&&t.onStartChange(i,$)}),Ie.onComplete(function(){l.current&&(r($),l.current.children[i].style.transform="scale(1)"),typeof t.onChange=="function"&&t.onChange(i,$)}),Ie.start()}},j=function($){$!==i&&F($)},H=function($){var V=$.currentTarget;V.dataset.key&&parseInt(V.dataset.key)!==i&&j(parseInt(V.dataset.key))};return ee.createElement("div",{dir:"ltr","aria-roledescription":"carousel"},ee.createElement("div",{className:"react-slideshow-container "+(t.cssClass||""),onMouseEnter:I,onMouseOver:I,onMouseLeave:N},t.arrows&&pI(t,i,C),ee.createElement("div",{className:"react-slideshow-fadezoom-wrapper "+t.cssClass,ref:o},ee.createElement("div",{className:"react-slideshow-fadezoom-images-wrap",ref:l},(ee.Children.map(t.children,function(z){return z})||[]).map(function(z,$){return ee.createElement("div",{style:{opacity:$===i?"1":"0",zIndex:$===i?"1":"0"},"data-index":$,key:$,"aria-roledescription":"slide","aria-hidden":$===i?"false":"true"},z)}))),t.arrows&&mI(t,i,C)),t.indicators&&_I(t,i,H))});x_.defaultProps=rh;var lU=ee.forwardRef(function(t,e){return ee.createElement(x_,Object.assign({},t,{scale:1,ref:e}))});lU.defaultProps=rh;var uU=ee.forwardRef(function(t,e){return ee.createElement(x_,Object.assign({},t,{ref:e}))});uU.defaultProps=rh;var gI=ee.forwardRef(function(t,e){var n=k.useState(dI(t.children,t.defaultIndex)),i=n[0],r=n[1],o=k.useState(0),l=o[0],c=o[1],h=k.useRef(null),f=k.useRef(null),m=k.useRef(new I_),_=k.useMemo(function(){return sU(l,t.responsive)},[l,t.responsive]),v=k.useMemo(function(){return _?_.settings.slidesToScroll:t.slidesToScroll||1},[_,t.slidesToScroll]),E=k.useMemo(function(){return _?_.settings.slidesToShow:t.slidesToShow||1},[_,t.slidesToShow]),w=k.useMemo(function(){return ee.Children.count(t.children)},[t.children]),I=k.useMemo(function(){return l/E},[l,E]),N=k.useRef(),S=k.useRef(),y,C=!1,R=0,F=t.vertical?"translateY":"translateX",j=t.vertical?"clientY":"clientX",H=t.vertical?"pageY":"pageX",z=k.useCallback(function(){if(f.current){var he=l*f.current.children.length,K=t.vertical?"height":"width";f.current.style[K]=he+"px",t.vertical&&h.current&&(h.current.style[K]=l+"px");for(var _e=0;_e<f.current.children.length;_e++){var Gt=f.current.children[_e];Gt&&(t.vertical||(Gt.style[K]=I+"px"),Gt.style.display="block")}}},[l,I]),$=k.useCallback(function(){h.current&&(S.current=new uI(function(he){he&&$e()}),S.current.observe(h.current))},[h]),V=k.useCallback(function(){var he=t.autoplay,K=t.infinite,_e=t.duration;he&&(K||i<w-1)&&(N.current=setTimeout(Ce,_e))},[t,w,i]);k.useEffect(function(){z()},[l,z]),k.useEffect(function(){return $(),function(){m.current.removeAll(),clearTimeout(N.current),W()}},[h,$,m]),k.useEffect(function(){clearTimeout(N.current),V()},[i,l,t.autoplay,V]),k.useImperativeHandle(e,function(){return{goNext:function(){Ce()},goBack:function(){Je()},goTo:function(K,_e){_e!=null&&_e.skipTransition?r(K):He(K)}}});var W=function(){S&&h.current&&S.current.unobserve(h.current)},se=function(){t.pauseOnHover&&clearTimeout(N.current)},Ie=function(K){if(t.canSwipe&&C){var _e;if(window.TouchEvent&&K.nativeEvent instanceof TouchEvent?_e=K.nativeEvent.touches[0][H]:_e=K.nativeEvent[j],_e&&y){var Gt=I*(i+er()),mi=_e-y;if(!t.infinite&&i===w-v&&mi<0||!t.infinite&&i===0&&mi>0)return;R=mi,Gt-=R,f.current.style.transform=F+"(-"+Gt+"px)"}}},Ce=function(){if(!(!t.infinite&&i===w-v)){var K=O(i+v);Xe(K)}},Je=function(){if(!(!t.infinite&&i===0)){var K=i-v;K%v&&(K=Math.ceil(K/v)*v),Xe(K)}},Ne=function(K){var _e=K.currentTarget;if(_e.dataset.key){var Gt=parseInt(_e.dataset.key);He(Gt*v)}},He=function(K){Xe(O(K))},O=function(K){return K<w&&K+v>w&&(w-v)%v?w-v:K},G=function(){C?ue():t.pauseOnHover&&t.autoplay&&(N.current=setTimeout(Ce,t.duration))},D=function(K){var _e=K.currentTarget.dataset;_e.type==="next"?Ce():Je()},J=function(){return ee.Children.toArray(t.children).slice(-E).map(function(K,_e){return ee.createElement("div",{"data-index":_e-E,"aria-roledescription":"slide","aria-hidden":"true",key:_e-E},K)})},fe=function(){if(!(!t.infinite&&E===v))return ee.Children.toArray(t.children).slice(0,E).map(function(K,_e){return ee.createElement("div",{"data-index":w+_e,"aria-roledescription":"slide","aria-hidden":"true",key:w+_e},K)})},$e=function(){var K=t.vertical?"clientHeight":"clientWidth";t.vertical?f.current&&c(f.current.children[0][K]):h.current&&c(h.current[K])},ye=function(K){t.canSwipe&&(window.TouchEvent&&K.nativeEvent instanceof TouchEvent?y=K.nativeEvent.touches[0][H]:y=K.nativeEvent[j],clearTimeout(N.current),C=!0)},ue=function(){t.canSwipe&&(C=!1,Math.abs(R)/l>.2?R<0?Ce():Je():Math.abs(R)>0&&Xe(i,300))},ne=function he(){requestAnimationFrame(he),m.current.update()},Xe=function(K,_e){var Gt=_e||t.transitionDuration,mi=i,nl=m.current.getAll();if(h.current){var ao=t.vertical?"clientHeight":"clientWidth",tr=h.current[ao]/E;if(!nl.length){clearTimeout(N.current);var ch={margin:-tr*(mi+er())+R},nr=new hI(ch,m.current).to({margin:-tr*(K+er())},Gt).onUpdate(function(il){f.current&&(f.current.style.transform=F+"("+il.margin+"px)")});nr.easing(fI(t.easing)),ne();var ln=K;ln<0?ln=w-v:ln>=w&&(ln=0),nr.onStart(function(){typeof t.onStartChange=="function"&&t.onStartChange(i,ln)}),nr.onComplete(function(){R=0,typeof t.onChange=="function"&&t.onChange(i,ln),r(ln)}),nr.start()}}},xn=function(K){return K<i+E&&K>=i},er=function(){return t.infinite?E:0},oo={transform:F+"(-"+(i+er())*I+"px)"};return ee.createElement("div",{dir:"ltr","aria-roledescription":"carousel"},ee.createElement("div",{className:"react-slideshow-container",onMouseEnter:se,onMouseOver:se,onMouseLeave:G,onMouseDown:ye,onMouseUp:ue,onMouseMove:Ie,onTouchStart:ye,onTouchEnd:ue,onTouchCancel:ue,onTouchMove:Ie},t.arrows&&pI(t,i,D),ee.createElement("div",{className:"react-slideshow-wrapper slide "+(t.cssClass||""),ref:h},ee.createElement("div",{className:"images-wrap "+(t.vertical?"vertical":"horizontal"),style:oo,ref:f},t.infinite&&J(),(ee.Children.map(t.children,function(he){return he})||[]).map(function(he,K){var _e=xn(K);return ee.createElement("div",{"data-index":K,key:K,className:_e?"active":"","aria-roledescription":"slide","aria-hidden":_e?"false":"true"},he)}),fe())),t.arrows&&mI(t,i,D)),!!t.indicators&&_I(t,i,Ne,_))});gI.defaultProps=rh;let $l;const cU=new Uint8Array(16);function hU(){if(!$l&&($l=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $l(cU)}const ht=[];for(let t=0;t<256;++t)ht.push((t+256).toString(16).slice(1));function dU(t,e=0){return ht[t[e+0]]+ht[t[e+1]]+ht[t[e+2]]+ht[t[e+3]]+"-"+ht[t[e+4]]+ht[t[e+5]]+"-"+ht[t[e+6]]+ht[t[e+7]]+"-"+ht[t[e+8]]+ht[t[e+9]]+"-"+ht[t[e+10]]+ht[t[e+11]]+ht[t[e+12]]+ht[t[e+13]]+ht[t[e+14]]+ht[t[e+15]]}const fU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Iw={randomUUID:fU};function vI(t,e,n){if(Iw.randomUUID&&!e&&!t)return Iw.randomUUID();t=t||{};const i=t.random||(t.rng||hU)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return dU(i)}function pU({properties:t,spotID:e,filteredData:n,spotClick:i,showMap:r,authUser:o}){const[l,c]=k.useState(""),[h,f]=k.useState({}),m=k.useMemo(()=>o_(T_,"spots/"+n[e].spotName+"/comments"),[n,e]),_=E=>{const w=E.target;w.style.height="25px",w.style.height=`${w.scrollHeight}px`,c(E.target.value)},v=()=>{if(o!==null){const E=new Date,w=E.getFullYear(),I=E.getMonth()+1,N=E.getDate(),S=E.getHours(),y=E.getMinutes(),C=`${w}-${I<10?"0":""}${I}-${N<10?"0":""}${N} ${S<10?"0":""}${S}:${y<10?"0":""}${y}`;l.length>1&&lC(m,{[vI()]:l+C}).then(()=>{c(""),console.log("Comment added.")})}else window.alert("Please sign in to comment!")};return k.useEffect(()=>{const E=uC(m,w=>{const I=[];w.forEach(S=>{I.push(S.val())});const N=I.slice().sort((S,y)=>{const C=S.slice(S.length-16,S.length),R=y.slice(y.length-16,y.length),F=new Date(C),j=new Date(R);return F-j});f(N)});return()=>E()},[m]),x.jsx(x.Fragment,{children:x.jsxs("div",{className:"spotInfoContainer",children:[x.jsx("div",{className:"imageContainer",children:x.jsx("div",{className:"spotImage",children:x.jsx(gI,{...t,children:n[e].uploadedImgURLs.map((E,w)=>x.jsx("div",{children:x.jsx("img",{draggable:"false",className:"spotImage",src:E})},w+"spotImage"))})})}),x.jsx("div",{style:{marginTop:"10px"},children:x.jsxs("strong",{id:"spotTitleText",children:["Spot Name: ",n[e].spotName]})}),x.jsxs("p",{id:"spotAddress",children:["Address: ",n[e].spotAddress]}),x.jsx("div",{className:"spotDescription",children:x.jsx("p",{id:"spotDescriptionText",children:n[e].spotDescription})}),x.jsx("button",{id:"backButton",onClick:()=>{i(),r()},children:" Back"}),x.jsx("div",{children:x.jsx("strong",{style:{fontSize:"25px"},children:"Comments"})}),x.jsxs("div",{className:"textAreaContainer",children:[x.jsx("textarea",{className:"textArea",placeholder:"Enter your comment here...",name:"comment",value:l,onChange:_}),x.jsx("div",{style:{height:"40px",width:"40px",marginBottom:"10px",float:"right",display:"flex",alignItems:"center",justifyContent:"center"},className:"sendIcon",role:"button",tabIndex:"0",onClick:v,children:x.jsx("img",{id:"sendImg",src:"https://cdn.iconscout.com/icon/free/png-256/free-send-forward-arrow-right-direction-import-30559.png",style:{height:"20px",width:"20px",left:"10px",color:"blue"}})})]}),x.jsx("div",{className:"commentsContainer",children:h.length>0?h.map(E=>x.jsxs("div",{className:"comments",children:[x.jsx("div",{style:{height:"30px"},children:x.jsx("p",{style:{marginBottom:"0"},children:E.substring(E.length-16,E.length)})}),x.jsx("strong",{children:E.substring(0,E.length-16)})]})):null})]})})}function mU(t,e){const n=k.useRef(e);k.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const _U=1;function gU(t){return Object.freeze({__version:_U,map:t})}function vU(t,e){return Object.freeze({...t,...e})}const yI=k.createContext(null),wI=yI.Provider;function EI(){const t=k.useContext(yI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function yU(t){function e(n,i){const{instance:r,context:o}=t(n).current;return k.useImperativeHandle(i,()=>r),n.children==null?null:ee.createElement(wI,{value:o},n.children)}return k.forwardRef(e)}function wU(t){function e(n,i){const{instance:r}=t(n).current;return k.useImperativeHandle(i,()=>r),null}return k.forwardRef(e)}function EU(t,e){const n=k.useRef();k.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function SI(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function TI(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function CI(t,e){return e==null?function(i,r){const o=k.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=k.useRef();o.current||(o.current=t(i,r));const l=k.useRef(i),{instance:c}=o.current;return k.useEffect(function(){l.current!==i&&(e(c,i,l.current),l.current=i)},[c,i,r]),o}}function SU(t,e){k.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function II(t){return function(n){const i=EI(),r=t(SI(n,i),i);return mU(i.map,n.attribution),EU(r.current,n.eventHandlers),SU(r.current,i),r}}function TU(t,e){const n=CI(t,e),i=II(n);return yU(i)}function CU(t,e){const n=CI(t,e),i=II(n);return wU(i)}function IU(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function xU(){return EI().map}function pp(){return pp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pp.apply(this,arguments)}function PU({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:c,whenReady:h,zoom:f,...m},_){const[v]=k.useState({className:r,id:o,style:c}),[E,w]=k.useState(null);k.useImperativeHandle(_,()=>(E==null?void 0:E.map)??null,[E]);const I=k.useCallback(S=>{if(S!==null&&E===null){const y=new ft.Map(S,m);n!=null&&f!=null?y.setView(n,f):t!=null&&y.fitBounds(t,e),h!=null&&y.whenReady(h),w(gU(y))}},[]);k.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const N=E?ee.createElement(wI,{value:E},i):l??null;return ee.createElement("div",pp({},v,{ref:I}),N)}const kU=k.forwardRef(PU),bU=TU(function({position:e,...n},i){const r=new ft.Marker(e,n);return TI(r,vU(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),RU=CU(function({url:e,...n},i){const r=new ft.TileLayer(e,SI(n,i));return TI(r,i)},function(e,n,i){IU(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});function LU(){const t=[],[e,n]=k.useState({latitude:43.747474670410156,longitude:-79.49417877197266}),[i,r]=k.useState(0),[o,l]=k.useState(!1),[c,h]=k.useState(),[f,m]=k.useState(null);ap(hp,"images/");const _=o_(T_,"spots/"),[v,E]=k.useState(0),[w,I]=k.useState(!1);k.useState("");const[N,S]=k.useState();let y=()=>{window.innerWidth<700?I(!0):I(!1)};k.useEffect(()=>{window.addEventListener("resize",y),y()},[]);function C(){document.getElementById("mapcontainuh").style.display="block"}k.useEffect(()=>{uC(_,W=>{W.forEach(se=>{t.push(se.val())}),h(t),S(t)})},[]);function R(W){l(!0),r(W.currentTarget.id),n({latitude:N[W.currentTarget.id].lat,longitude:N[W.currentTarget.id].long})}function F(W){l(!0),r(W),n({latitude:N[W].lat,longitude:N[W].long})}function j(){l(!1),E(0)}const H=new ft.Icon({iconUrl:"https://cdn2.iconfinder.com/data/icons/activity-5/50/1F6F9-skateboard-512.png",iconSize:[64,64]});function z(){const W=xU();return o?W.flyTo([e.latitude,e.longitude],18,{animate:!0,duration:2}):W.flyTo([e.latitude,e.longitude],10,{animate:!0,duration:2}),null}const $={width:"3vw",height:"3vw",background:"none",border:"0px"},V={canSwipe:!0,transitionDuration:100,prevArrow:x.jsx("button",{className:"button",style:{...$},children:"<"}),nextArrow:x.jsx("button",{className:"button",style:{...$},children:">"})};return x.jsxs(k.Fragment,{children:[x.jsx(nh,{authUser:f,setAuthUser:m}),x.jsxs("div",{className:"bigContainer",children:[c?x.jsxs(kU,{id:"mapcontainuh",center:[e.latitude,e.longitude],zoom:12,scrollWheelZoom:!1,children:[x.jsx(RU,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.jsx(z,{}),N?x.jsx("div",{children:N.map((W,se)=>x.jsx(x.Fragment,{children:x.jsx(bU,{id:se,position:[W.lat,W.long],icon:H,eventHandlers:{click:Ie=>{F(Ie.target.options.id)}}})}))}):x.jsx(x.Fragment,{})]}):null,o?x.jsx("div",{className:"spotWindow",children:c?x.jsx(pU,{properties:V,spotID:i,markersData:c,spotClick:j,showMap:C,filteredData:N,authUser:f}):x.jsx(x.Fragment,{})}):x.jsx(x.Fragment,{children:c?x.jsx(Bz,{markersData:c,getSpotContent:R,filteredData:N,setFilteredData:S}):null})]})]})}const NU=()=>x.jsx("div",{});function xI(t,e){return function(){return t.apply(e,arguments)}}const{toString:OU}=Object.prototype,{getPrototypeOf:P_}=Object,sh=(t=>e=>{const n=OU.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Hn=t=>(t=t.toLowerCase(),e=>sh(e)===t),oh=t=>e=>typeof e===t,{isArray:so}=Array,Ua=oh("undefined");function AU(t){return t!==null&&!Ua(t)&&t.constructor!==null&&!Ua(t.constructor)&&rn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const PI=Hn("ArrayBuffer");function MU(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&PI(t.buffer),e}const DU=oh("string"),rn=oh("function"),kI=oh("number"),ah=t=>t!==null&&typeof t=="object",FU=t=>t===!0||t===!1,au=t=>{if(sh(t)!=="object")return!1;const e=P_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},zU=Hn("Date"),UU=Hn("File"),BU=Hn("Blob"),jU=Hn("FileList"),WU=t=>ah(t)&&rn(t.pipe),HU=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||rn(t.append)&&((e=sh(t))==="formdata"||e==="object"&&rn(t.toString)&&t.toString()==="[object FormData]"))},$U=Hn("URLSearchParams"),VU=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function el(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),so(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let c;for(i=0;i<l;i++)c=o[i],e.call(null,t[c],c,t)}}function bI(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const RI=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),LI=t=>!Ua(t)&&t!==RI;function mp(){const{caseless:t}=LI(this)&&this||{},e={},n=(i,r)=>{const o=t&&bI(e,r)||r;au(e[o])&&au(i)?e[o]=mp(e[o],i):au(i)?e[o]=mp({},i):so(i)?e[o]=i.slice():e[o]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&el(arguments[i],n);return e}const ZU=(t,e,n,{allOwnKeys:i}={})=>(el(e,(r,o)=>{n&&rn(r)?t[o]=xI(r,n):t[o]=r},{allOwnKeys:i}),t),qU=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),GU=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},KU=(t,e,n,i)=>{let r,o,l;const c={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)l=r[o],(!i||i(l,t,e))&&!c[l]&&(e[l]=t[l],c[l]=!0);t=n!==!1&&P_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},YU=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},QU=t=>{if(!t)return null;if(so(t))return t;let e=t.length;if(!kI(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},JU=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&P_(Uint8Array)),XU=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},eB=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},tB=Hn("HTMLFormElement"),nB=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),xw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),iB=Hn("RegExp"),NI=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};el(n,(r,o)=>{let l;(l=e(r,o,t))!==!1&&(i[o]=l||r)}),Object.defineProperties(t,i)},rB=t=>{NI(t,(e,n)=>{if(rn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(rn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},sB=(t,e)=>{const n={},i=r=>{r.forEach(o=>{n[o]=!0})};return so(t)?i(t):i(String(t).split(e)),n},oB=()=>{},aB=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Md="abcdefghijklmnopqrstuvwxyz",Pw="0123456789",OI={DIGIT:Pw,ALPHA:Md,ALPHA_DIGIT:Md+Md.toUpperCase()+Pw},lB=(t=16,e=OI.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function uB(t){return!!(t&&rn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const cB=t=>{const e=new Array(10),n=(i,r)=>{if(ah(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const o=so(i)?[]:{};return el(i,(l,c)=>{const h=n(l,r+1);!Ua(h)&&(o[c]=h)}),e[r]=void 0,o}}return i};return n(t,0)},hB=Hn("AsyncFunction"),dB=t=>t&&(ah(t)||rn(t))&&rn(t.then)&&rn(t.catch),A={isArray:so,isArrayBuffer:PI,isBuffer:AU,isFormData:HU,isArrayBufferView:MU,isString:DU,isNumber:kI,isBoolean:FU,isObject:ah,isPlainObject:au,isUndefined:Ua,isDate:zU,isFile:UU,isBlob:BU,isRegExp:iB,isFunction:rn,isStream:WU,isURLSearchParams:$U,isTypedArray:JU,isFileList:jU,forEach:el,merge:mp,extend:ZU,trim:VU,stripBOM:qU,inherits:GU,toFlatObject:KU,kindOf:sh,kindOfTest:Hn,endsWith:YU,toArray:QU,forEachEntry:XU,matchAll:eB,isHTMLForm:tB,hasOwnProperty:xw,hasOwnProp:xw,reduceDescriptors:NI,freezeMethods:rB,toObjectSet:sB,toCamelCase:nB,noop:oB,toFiniteNumber:aB,findKey:bI,global:RI,isContextDefined:LI,ALPHABET:OI,generateString:lB,isSpecCompliantForm:uB,toJSONObject:cB,isAsyncFn:hB,isThenable:dB};function me(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}A.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const AI=me.prototype,MI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{MI[t]={value:t}});Object.defineProperties(me,MI);Object.defineProperty(AI,"isAxiosError",{value:!0});me.from=(t,e,n,i,r,o)=>{const l=Object.create(AI);return A.toFlatObject(t,l,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),me.call(l,t.message,e,n,i,r),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};const fB=null;function _p(t){return A.isPlainObject(t)||A.isArray(t)}function DI(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function kw(t,e,n){return t?t.concat(e).map(function(r,o){return r=DI(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function pB(t){return A.isArray(t)&&!t.some(_p)}const mB=A.toFlatObject(A,{},null,function(e){return/^is[A-Z]/.test(e)});function lh(t,e,n){if(!A.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,N){return!A.isUndefined(N[I])});const i=n.metaTokens,r=n.visitor||m,o=n.dots,l=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(e);if(!A.isFunction(r))throw new TypeError("visitor must be a function");function f(w){if(w===null)return"";if(A.isDate(w))return w.toISOString();if(!h&&A.isBlob(w))throw new me("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(w)||A.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function m(w,I,N){let S=w;if(w&&!N&&typeof w=="object"){if(A.endsWith(I,"{}"))I=i?I:I.slice(0,-2),w=JSON.stringify(w);else if(A.isArray(w)&&pB(w)||(A.isFileList(w)||A.endsWith(I,"[]"))&&(S=A.toArray(w)))return I=DI(I),S.forEach(function(C,R){!(A.isUndefined(C)||C===null)&&e.append(l===!0?kw([I],R,o):l===null?I:I+"[]",f(C))}),!1}return _p(w)?!0:(e.append(kw(N,I,o),f(w)),!1)}const _=[],v=Object.assign(mB,{defaultVisitor:m,convertValue:f,isVisitable:_p});function E(w,I){if(!A.isUndefined(w)){if(_.indexOf(w)!==-1)throw Error("Circular reference detected in "+I.join("."));_.push(w),A.forEach(w,function(S,y){(!(A.isUndefined(S)||S===null)&&r.call(e,S,A.isString(y)?y.trim():y,I,v))===!0&&E(S,I?I.concat(y):[y])}),_.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return E(t),e}function bw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function k_(t,e){this._pairs=[],t&&lh(t,this,e)}const FI=k_.prototype;FI.append=function(e,n){this._pairs.push([e,n])};FI.toString=function(e){const n=e?function(i){return e.call(this,i,bw)}:bw;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function _B(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zI(t,e,n){if(!e)return t;const i=n&&n.encode||_B,r=n&&n.serialize;let o;if(r?o=r(e,n):o=A.isURLSearchParams(e)?e.toString():new k_(e,n).toString(i),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class gB{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){A.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Rw=gB,UI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vB=typeof URLSearchParams<"u"?URLSearchParams:k_,yB=typeof FormData<"u"?FormData:null,wB=typeof Blob<"u"?Blob:null,EB={isBrowser:!0,classes:{URLSearchParams:vB,FormData:yB,Blob:wB},protocols:["http","https","file","blob","url","data"]},BI=typeof window<"u"&&typeof document<"u",SB=(t=>BI&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),TB=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),CB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:BI,hasStandardBrowserEnv:SB,hasStandardBrowserWebWorkerEnv:TB},Symbol.toStringTag,{value:"Module"})),Dn={...CB,...EB};function IB(t,e){return lh(t,new Dn.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,o){return Dn.isNode&&A.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function xB(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function PB(t){const e={},n=Object.keys(t);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],e[o]=t[o];return e}function jI(t){function e(n,i,r,o){let l=n[o++];const c=Number.isFinite(+l),h=o>=n.length;return l=!l&&A.isArray(r)?r.length:l,h?(A.hasOwnProp(r,l)?r[l]=[r[l],i]:r[l]=i,!c):((!r[l]||!A.isObject(r[l]))&&(r[l]=[]),e(n,i,r[l],o)&&A.isArray(r[l])&&(r[l]=PB(r[l])),!c)}if(A.isFormData(t)&&A.isFunction(t.entries)){const n={};return A.forEachEntry(t,(i,r)=>{e(xB(i),r,n,0)}),n}return null}function kB(t,e,n){if(A.isString(t))try{return(e||JSON.parse)(t),A.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const b_={transitional:UI,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,o=A.isObject(e);if(o&&A.isHTMLForm(e)&&(e=new FormData(e)),A.isFormData(e))return r&&r?JSON.stringify(jI(e)):e;if(A.isArrayBuffer(e)||A.isBuffer(e)||A.isStream(e)||A.isFile(e)||A.isBlob(e))return e;if(A.isArrayBufferView(e))return e.buffer;if(A.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return IB(e,this.formSerializer).toString();if((c=A.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return lh(c?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),kB(e)):e}],transformResponse:[function(e){const n=this.transitional||b_.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&A.isString(e)&&(i&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(c){if(l)throw c.name==="SyntaxError"?me.from(c,me.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dn.classes.FormData,Blob:Dn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{b_.headers[t]={}});const R_=b_,bB=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RB=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),i=l.substring(r+1).trim(),!(!n||e[n]&&bB[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Lw=Symbol("internals");function Mo(t){return t&&String(t).trim().toLowerCase()}function lu(t){return t===!1||t==null?t:A.isArray(t)?t.map(lu):String(t)}function LB(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const NB=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Dd(t,e,n,i,r){if(A.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!A.isString(e)){if(A.isString(i))return e.indexOf(i)!==-1;if(A.isRegExp(i))return i.test(e)}}function OB(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function AB(t,e){const n=A.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,o,l){return this[i].call(this,e,r,o,l)},configurable:!0})})}class uh{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function o(c,h,f){const m=Mo(h);if(!m)throw new Error("header name must be a non-empty string");const _=A.findKey(r,m);(!_||r[_]===void 0||f===!0||f===void 0&&r[_]!==!1)&&(r[_||h]=lu(c))}const l=(c,h)=>A.forEach(c,(f,m)=>o(f,m,h));return A.isPlainObject(e)||e instanceof this.constructor?l(e,n):A.isString(e)&&(e=e.trim())&&!NB(e)?l(RB(e),n):e!=null&&o(n,e,i),this}get(e,n){if(e=Mo(e),e){const i=A.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return LB(r);if(A.isFunction(n))return n.call(this,r,i);if(A.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Mo(e),e){const i=A.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Dd(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function o(l){if(l=Mo(l),l){const c=A.findKey(i,l);c&&(!n||Dd(i,i[c],c,n))&&(delete i[c],r=!0)}}return A.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const o=n[i];(!e||Dd(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,i={};return A.forEach(this,(r,o)=>{const l=A.findKey(i,o);if(l){n[l]=lu(r),delete n[o];return}const c=e?OB(o):String(o).trim();c!==o&&delete n[o],n[c]=lu(r),i[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return A.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&A.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[Lw]=this[Lw]={accessors:{}}).accessors,r=this.prototype;function o(l){const c=Mo(l);i[c]||(AB(r,l),i[c]=!0)}return A.isArray(e)?e.forEach(o):o(e),this}}uh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(uh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});A.freezeMethods(uh);const ii=uh;function Fd(t,e){const n=this||R_,i=e||n,r=ii.from(i.headers);let o=i.data;return A.forEach(t,function(c){o=c.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function WI(t){return!!(t&&t.__CANCEL__)}function tl(t,e,n){me.call(this,t??"canceled",me.ERR_CANCELED,e,n),this.name="CanceledError"}A.inherits(tl,me,{__CANCEL__:!0});function MB(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new me("Request failed with status code "+n.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const DB=Dn.hasStandardBrowserEnv?function(){return{write:function(n,i,r,o,l,c){const h=[];h.push(n+"="+encodeURIComponent(i)),A.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),A.isString(o)&&h.push("path="+o),A.isString(l)&&h.push("domain="+l),c===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function FB(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function zB(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function HI(t,e){return t&&!FB(e)?zB(t,e):e}const UB=Dn.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(o){let l=o;return e&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(l){const c=A.isString(l)?r(l):l;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}();function BB(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function jB(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,o=0,l;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),m=i[o];l||(l=f),n[r]=h,i[r]=f;let _=o,v=0;for(;_!==r;)v+=n[_++],_=_%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),f-l<e)return;const E=m&&f-m;return E?Math.round(v*1e3/E):void 0}}function Nw(t,e){let n=0;const i=jB(50,250);return r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,c=o-n,h=i(c),f=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:h||void 0,estimated:h&&l&&f?(l-o)/h:void 0,event:r};m[e?"download":"upload"]=!0,t(m)}}const WB=typeof XMLHttpRequest<"u",HB=WB&&function(t){return new Promise(function(n,i){let r=t.data;const o=ii.from(t.headers).normalize(),l=t.responseType;let c;function h(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let f;if(A.isFormData(r)){if(Dn.hasStandardBrowserEnv||Dn.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((f=o.getContentType())!==!1){const[w,...I]=f?f.split(";").map(N=>N.trim()).filter(Boolean):[];o.setContentType([w||"multipart/form-data",...I].join("; "))}}let m=new XMLHttpRequest;if(t.auth){const w=t.auth.username||"",I=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(w+":"+I))}const _=HI(t.baseURL,t.url);m.open(t.method.toUpperCase(),zI(_,t.params,t.paramsSerializer),!0),m.timeout=t.timeout;function v(){if(!m)return;const w=ii.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:t,request:m};MB(function(y){n(y),h()},function(y){i(y),h()},N),m=null}if("onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(v)},m.onabort=function(){m&&(i(new me("Request aborted",me.ECONNABORTED,t,m)),m=null)},m.onerror=function(){i(new me("Network Error",me.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let I=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const N=t.transitional||UI;t.timeoutErrorMessage&&(I=t.timeoutErrorMessage),i(new me(I,N.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,t,m)),m=null},Dn.hasStandardBrowserEnv){const w=UB(_)&&t.xsrfCookieName&&DB.read(t.xsrfCookieName);w&&o.set(t.xsrfHeaderName,w)}r===void 0&&o.setContentType(null),"setRequestHeader"in m&&A.forEach(o.toJSON(),function(I,N){m.setRequestHeader(N,I)}),A.isUndefined(t.withCredentials)||(m.withCredentials=!!t.withCredentials),l&&l!=="json"&&(m.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&m.addEventListener("progress",Nw(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",Nw(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=w=>{m&&(i(!w||w.type?new tl(null,t,m):w),m.abort(),m=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const E=BB(_);if(E&&Dn.protocols.indexOf(E)===-1){i(new me("Unsupported protocol "+E+":",me.ERR_BAD_REQUEST,t));return}m.send(r||null)})},gp={http:fB,xhr:HB};A.forEach(gp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ow=t=>`- ${t}`,$B=t=>A.isFunction(t)||t===null||t===!1,$I={getAdapter:t=>{t=A.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let o=0;o<e;o++){n=t[o];let l;if(i=n,!$B(n)&&(i=gp[(l=String(n)).toLowerCase()],i===void 0))throw new me(`Unknown adapter '${l}'`);if(i)break;r[l||"#"+o]=i}if(!i){const o=Object.entries(r).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(Ow).join(`
`):" "+Ow(o[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:gp};function zd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tl(null,t)}function Aw(t){return zd(t),t.headers=ii.from(t.headers),t.data=Fd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$I.getAdapter(t.adapter||R_.adapter)(t).then(function(i){return zd(t),i.data=Fd.call(t,t.transformResponse,i),i.headers=ii.from(i.headers),i},function(i){return WI(i)||(zd(t),i&&i.response&&(i.response.data=Fd.call(t,t.transformResponse,i.response),i.response.headers=ii.from(i.response.headers))),Promise.reject(i)})}const Mw=t=>t instanceof ii?t.toJSON():t;function Gs(t,e){e=e||{};const n={};function i(f,m,_){return A.isPlainObject(f)&&A.isPlainObject(m)?A.merge.call({caseless:_},f,m):A.isPlainObject(m)?A.merge({},m):A.isArray(m)?m.slice():m}function r(f,m,_){if(A.isUndefined(m)){if(!A.isUndefined(f))return i(void 0,f,_)}else return i(f,m,_)}function o(f,m){if(!A.isUndefined(m))return i(void 0,m)}function l(f,m){if(A.isUndefined(m)){if(!A.isUndefined(f))return i(void 0,f)}else return i(void 0,m)}function c(f,m,_){if(_ in e)return i(f,m);if(_ in t)return i(void 0,f)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(f,m)=>r(Mw(f),Mw(m),!0)};return A.forEach(Object.keys(Object.assign({},t,e)),function(m){const _=h[m]||r,v=_(t[m],e[m],m);A.isUndefined(v)&&_!==c||(n[m]=v)}),n}const VI="1.6.1",L_={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{L_[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Dw={};L_.transitional=function(e,n,i){function r(o,l){return"[Axios v"+VI+"] Transitional option '"+o+"'"+l+(i?". "+i:"")}return(o,l,c)=>{if(e===!1)throw new me(r(l," has been removed"+(n?" in "+n:"")),me.ERR_DEPRECATED);return n&&!Dw[l]&&(Dw[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,l,c):!0}};function VB(t,e,n){if(typeof t!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const o=i[r],l=e[o];if(l){const c=t[o],h=c===void 0||l(c,o,t);if(h!==!0)throw new me("option "+o+" must be "+h,me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new me("Unknown option "+o,me.ERR_BAD_OPTION)}}const vp={assertOptions:VB,validators:L_},wi=vp.validators;class uc{constructor(e){this.defaults=e,this.interceptors={request:new Rw,response:new Rw}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Gs(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:o}=n;i!==void 0&&vp.assertOptions(i,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1),r!=null&&(A.isFunction(r)?n.paramsSerializer={serialize:r}:vp.assertOptions(r,{encode:wi.function,serialize:wi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=o&&A.merge(o.common,o[n.method]);o&&A.forEach(["delete","get","head","post","put","patch","common"],w=>{delete o[w]}),n.headers=ii.concat(l,o);const c=[];let h=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(h=h&&I.synchronous,c.unshift(I.fulfilled,I.rejected))});const f=[];this.interceptors.response.forEach(function(I){f.push(I.fulfilled,I.rejected)});let m,_=0,v;if(!h){const w=[Aw.bind(this),void 0];for(w.unshift.apply(w,c),w.push.apply(w,f),v=w.length,m=Promise.resolve(n);_<v;)m=m.then(w[_++],w[_++]);return m}v=c.length;let E=n;for(_=0;_<v;){const w=c[_++],I=c[_++];try{E=w(E)}catch(N){I.call(this,N);break}}try{m=Aw.call(this,E)}catch(w){return Promise.reject(w)}for(_=0,v=f.length;_<v;)m=m.then(f[_++],f[_++]);return m}getUri(e){e=Gs(this.defaults,e);const n=HI(e.baseURL,e.url);return zI(n,e.params,e.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(e){uc.prototype[e]=function(n,i){return this.request(Gs(i||{},{method:e,url:n,data:(i||{}).data}))}});A.forEach(["post","put","patch"],function(e){function n(i){return function(o,l,c){return this.request(Gs(c||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}uc.prototype[e]=n(),uc.prototype[e+"Form"]=n(!0)});const uu=uc;class N_{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(r=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](r);i._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(c=>{i.subscribe(c),o=c}).then(r);return l.cancel=function(){i.unsubscribe(o)},l},e(function(o,l,c){i.reason||(i.reason=new tl(o,l,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new N_(function(r){e=r}),cancel:e}}}const ZB=N_;function qB(t){return function(n){return t.apply(null,n)}}function GB(t){return A.isObject(t)&&t.isAxiosError===!0}const yp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yp).forEach(([t,e])=>{yp[e]=t});const KB=yp;function ZI(t){const e=new uu(t),n=xI(uu.prototype.request,e);return A.extend(n,uu.prototype,e,{allOwnKeys:!0}),A.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return ZI(Gs(t,r))},n}const Qe=ZI(R_);Qe.Axios=uu;Qe.CanceledError=tl;Qe.CancelToken=ZB;Qe.isCancel=WI;Qe.VERSION=VI;Qe.toFormData=lh;Qe.AxiosError=me;Qe.Cancel=Qe.CanceledError;Qe.all=function(e){return Promise.all(e)};Qe.spread=qB;Qe.isAxiosError=GB;Qe.mergeConfig=Gs;Qe.AxiosHeaders=ii;Qe.formToJSON=t=>jI(A.isHTMLForm(t)?new FormData(t):t);Qe.getAdapter=$I.getAdapter;Qe.HttpStatusCode=KB;Qe.default=Qe;const YB=Qe;function gr(){return gr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gr.apply(this,arguments)}function QB(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,cc(t,e)}function cc(t,e){return cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cc(t,e)}function JB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wp(t,e,n){return wp=JB()?Reflect.construct.bind():function(i,r,o){var l=[null];l.push.apply(l,r);var c=new(Function.bind.apply(i,l));return o&&cc(c,o.prototype),c},wp.apply(null,arguments)}function ri(t,e,n,i){e===void 0&&(e=""),i===void 0&&(i={});var r=document.createElement(t);return e&&(r.className=e),Object.keys(i).forEach(function(o){if(typeof i[o]=="function"){var l=o.indexOf("on")===0?o.substr(2).toLowerCase():o;r.addEventListener(l,i[o])}else o==="html"?r.innerHTML=i[o]:o==="text"?r.innerText=i[o]:r.setAttribute(o,i[o])}),n&&n.appendChild(r),r}function Do(t){t.preventDefault(),t.stopPropagation()}var cu=function(){return[].slice.call(arguments).filter(Boolean).join(" ").trim()};function vr(t,e){t&&t.classList&&(Array.isArray(e)?e:[e]).forEach(function(n){t.classList.contains(n)||t.classList.add(n)})}function An(t,e){t&&t.classList&&(Array.isArray(e)?e:[e]).forEach(function(n){t.classList.contains(n)&&t.classList.remove(n)})}var hc,dc=13,Ep=40,qI=38,XB=[dc,27,Ep,qI,37,39],ej=function(){function t(n){var i=this,r=n.handleSubmit,o=n.searchLabel,l=n.classNames,c=l===void 0?{}:l;this.container=void 0,this.form=void 0,this.input=void 0,this.handleSubmit=void 0,this.hasError=!1,this.container=ri("div",cu("geosearch",c.container)),this.form=ri("form",["",c.form].join(" "),this.container,{autocomplete:"none",onClick:Do,onDblClick:Do,touchStart:Do,touchEnd:Do}),this.input=ri("input",["glass",c.input].join(" "),this.form,{type:"text",placeholder:o||"search",onInput:this.onInput,onKeyUp:function(h){return i.onKeyUp(h)},onKeyPress:function(h){return i.onKeyPress(h)},onFocus:this.onFocus,onBlur:this.onBlur,onClick:function(){i.input.focus(),i.input.dispatchEvent(new Event("focus"))}}),this.handleSubmit=r}var e=t.prototype;return e.onFocus=function(){vr(this.form,"active")},e.onBlur=function(){An(this.form,"active")},e.onSubmit=function(n){try{var i=this;return Do(n),An(r=i.container,"error"),vr(r,"pending"),Promise.resolve(i.handleSubmit({query:i.input.value})).then(function(){An(i.container,"pending")})}catch(o){return Promise.reject(o)}var r},e.onInput=function(){this.hasError&&(An(this.container,"error"),this.hasError=!1)},e.onKeyUp=function(n){n.keyCode===27&&(An(this.container,["pending","active"]),this.input.value="",document.body.focus(),document.body.blur())},e.onKeyPress=function(n){n.keyCode===dc&&this.onSubmit(n)},e.setQuery=function(n){this.input.value=n},t}(),tj=function(){function t(n){var i=this,r=n.handleClick,o=n.classNames,l=o===void 0?{}:o,c=n.notFoundMessage;this.handleClick=void 0,this.selected=-1,this.results=[],this.container=void 0,this.resultItem=void 0,this.notFoundMessage=void 0,this.onClick=function(h){if(typeof i.handleClick=="function"){var f=h.target;if(f&&i.container.contains(f)&&f.hasAttribute("data-key")){var m=Number(f.getAttribute("data-key"));i.handleClick({result:i.results[m]})}}},this.handleClick=r,this.notFoundMessage=c?ri("div",cu(l.notfound),void 0,{html:c}):void 0,this.container=ri("div",cu("results",l.resultlist)),this.container.addEventListener("click",this.onClick,!0),this.resultItem=ri("div",cu(l.item))}var e=t.prototype;return e.render=function(n,i){var r=this;n===void 0&&(n=[]),this.clear(),n.forEach(function(o,l){var c=r.resultItem.cloneNode(!0);c.setAttribute("data-key",""+l),c.innerHTML=i({result:o}),r.container.appendChild(c)}),n.length>0?(vr(this.container.parentElement,"open"),vr(this.container,"active")):this.notFoundMessage&&(this.container.appendChild(this.notFoundMessage),vr(this.container.parentElement,"open")),this.results=n},e.select=function(n){return Array.from(this.container.children).forEach(function(i,r){return r===n?vr(i,"active"):An(i,"active")}),this.selected=n,this.results[n]},e.count=function(){return this.results?this.results.length:0},e.clear=function(){for(this.selected=-1;this.container.lastChild;)this.container.removeChild(this.container.lastChild);An(this.container.parentElement,"open"),An(this.container,"active")},t}(),Ud={position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(t){return""+t.result.label},resultFormat:function(t){return""+t.result.label},marker:{icon:C_&&ft.Icon?new ft.Icon.Default:void 0,draggable:!1},maxMarkers:1,maxSuggestions:5,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",clearSearchLabel:"Clear search",notFoundMessage:"",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:"",resultlist:"",item:"",notfound:"leaflet-bar-notfound"},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1,updateMap:!0},GI="Leaflet must be loaded before instantiating the GeoSearch control",nj={options:gr({},Ud),classNames:gr({},Ud.classNames),initialize:function(t){var e,n,i,r,o=this;if(!C_)throw new Error(GI);if(!t.provider)throw new Error("Provider is missing from options");this.options=gr({},Ud,t),this.classNames=gr({},this.classNames,t.classNames),this.markers=new ft.FeatureGroup,this.classNames.container+=" leaflet-geosearch-"+this.options.style,this.searchElement=new ej({searchLabel:this.options.searchLabel,classNames:{container:this.classNames.container,form:this.classNames.form,input:this.classNames.input},handleSubmit:function(l){return o.onSubmit(l)}}),this.button=ri("a",this.classNames.button,this.searchElement.container,{title:this.options.searchLabel,href:"#",onClick:function(l){return o.onClick(l)}}),ft.DomEvent.disableClickPropagation(this.button),this.resetButton=ri("button",this.classNames.resetButton,this.searchElement.form,{text:"","aria-label":this.options.clearSearchLabel,onClick:function(){o.searchElement.input.value===""?o.close():o.clearResults(null,!0)}}),ft.DomEvent.disableClickPropagation(this.resetButton),this.options.autoComplete&&(this.resultList=new tj({handleClick:function(l){var c=l.result;o.searchElement.input.value=c.label,o.onSubmit({query:c.label,data:c})},classNames:{resultlist:this.classNames.resultlist,item:this.classNames.item,notfound:this.classNames.notfound},notFoundMessage:this.options.notFoundMessage}),this.searchElement.form.appendChild(this.resultList.container),this.searchElement.input.addEventListener("keyup",(e=function(l){return o.autoSearch(l)},(n=this.options.autoCompleteDelay)===void 0&&(n=250),i===void 0&&(i=!1),function(){var l=[].slice.call(arguments);r&&clearTimeout(r),r=setTimeout(function(){r=null,i||e.apply(void 0,l)},n),i&&!r&&e.apply(void 0,l)}),!0),this.searchElement.input.addEventListener("keydown",function(l){return o.selectResult(l)},!0),this.searchElement.input.addEventListener("keydown",function(l){return o.clearResults(l,!0)},!0)),this.searchElement.form.addEventListener("click",function(l){l.preventDefault()},!1)},onAdd:function(t){var e=this.options,n=e.showMarker,i=e.style;if(this.map=t,n&&this.markers.addTo(t),i==="bar"){var r=t.getContainer().querySelector(".leaflet-control-container");this.container=ri("div","leaflet-control-geosearch leaflet-geosearch-bar"),this.container.appendChild(this.searchElement.form),r.appendChild(this.container)}return ft.DomEvent.disableClickPropagation(this.searchElement.form),this.searchElement.container},onRemove:function(){var t;return(t=this.container)==null||t.remove(),this},open:function(){var t=this.searchElement,e=t.input;vr(t.container,"active"),e.focus()},close:function(){An(this.searchElement.container,"active"),this.clearResults()},onClick:function(t){t.preventDefault(),t.stopPropagation(),this.searchElement.container.classList.contains("active")?this.close():this.open()},selectResult:function(t){if([dc,Ep,qI].indexOf(t.keyCode)!==-1)if(t.preventDefault(),t.keyCode!==dc){var e=this.resultList.count()-1;if(!(e<0)){var n=this.resultList.selected,i=t.keyCode===Ep?n+1:n-1,r=this.resultList.select(i<0?e:i>e?0:i);this.searchElement.input.value=r.label}}else{var o=this.resultList.select(this.resultList.selected);this.onSubmit({query:this.searchElement.input.value,data:o})}},clearResults:function(t,e){if(e===void 0&&(e=!1),!t||t.keyCode===27){var n=this.options,i=n.autoComplete;!e&&n.keepResult||(this.searchElement.input.value="",this.markers.clearLayers()),i&&this.resultList.clear()}},autoSearch:function(t){try{var e=this;if(XB.indexOf(t.keyCode)>-1)return Promise.resolve();var n=t.target.value,i=e.options.provider,r=function(){if(n.length)return Promise.resolve(i.search({query:n})).then(function(o){o=o.slice(0,e.options.maxSuggestions),e.resultList.render(o,e.options.resultFormat)});e.resultList.clear()}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},onSubmit:function(t){try{var e=this;return e.resultList.clear(),Promise.resolve(e.options.provider.search(t)).then(function(n){n&&n.length>0&&e.showResult(n[0],t)})}catch(n){return Promise.reject(n)}},showResult:function(t,e){var n=this.options,i=n.autoClose,r=n.updateMap,o=this.markers.getLayers();o.length>=this.options.maxMarkers&&this.markers.removeLayer(o[0]);var l=this.addMarker(t,e);r&&this.centerMap(t),this.map.fireEvent("geosearch/showlocation",{location:t,marker:l}),i&&this.closeResults()},closeResults:function(){var t=this.searchElement.container;t.classList.contains("active")&&An(t,"active"),this.clearResults()},addMarker:function(t,e){var n=this,i=this.options,r=i.marker,o=i.showPopup,l=i.popupFormat,c=new ft.Marker([t.y,t.x],r),h=t.label;return typeof l=="function"&&(h=l({query:e,result:t})),c.bindPopup(h),this.markers.addLayer(c),o&&c.openPopup(),r.draggable&&c.on("dragend",function(f){n.map.fireEvent("geosearch/marker/dragend",{location:c.getLatLng(),event:f})}),c},centerMap:function(t){var e=this.options,n=e.retainZoomLevel,i=e.animateZoom,r=t.bounds?new ft.LatLngBounds(t.bounds):new ft.LatLng(t.y,t.x).toBounds(10),o=r.isValid()?r:this.markers.getBounds();!n&&r.isValid()&&!t.bounds||n||!r.isValid()?this.map.setView(o.getCenter(),this.getZoom(),{animate:i}):this.map.fitBounds(o,{animate:i})},getZoom:function(){var t=this.options,e=t.zoomLevel;return t.retainZoomLevel?this.map.getZoom():e}};function ij(){if(!C_)throw new Error(GI);var t=ft.Control.extend(nj);return wp(t,[].slice.call(arguments))}(function(t){t[t.SEARCH=0]="SEARCH",t[t.REVERSE=1]="REVERSE"})(hc||(hc={}));var Fw,rj=function(){function t(n){n===void 0&&(n={}),this.options=void 0,this.options=n}var e=t.prototype;return e.getParamString=function(n){n===void 0&&(n={});var i=gr({},this.options.params,n);return Object.keys(i).map(function(r){return encodeURIComponent(r)+"="+encodeURIComponent(i[r])}).join("&")},e.getUrl=function(n,i){return n+"?"+this.getParamString(i)},e.search=function(n){try{var i=this,r=i.endpoint({query:n.query,type:hc.SEARCH});return Promise.resolve(fetch(r)).then(function(o){return Promise.resolve(o.json()).then(function(l){return i.parse({data:l})})})}catch(o){return Promise.reject(o)}},t}();(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Fw||(Fw={}));var sj=function(t){function e(i){var r;i===void 0&&(i={}),(r=t.call(this,i)||this).searchUrl=void 0,r.reverseUrl=void 0;var o="https://nominatim.openstreetmap.org";return r.searchUrl=i.searchUrl||o+"/search",r.reverseUrl=i.reverseUrl||o+"/reverse",r}QB(e,t);var n=e.prototype;return n.endpoint=function(i){var r=i.query,o=i.type,l=typeof r=="string"?{q:r}:r;return l.format="json",this.getUrl(o===hc.REVERSE?this.reverseUrl:this.searchUrl,l)},n.parse=function(i){return(Array.isArray(i.data)?i.data:[i.data]).map(function(r){return{x:Number(r.lon),y:Number(r.lat),label:r.display_name,bounds:[[parseFloat(r.boundingbox[0]),parseFloat(r.boundingbox[2])],[parseFloat(r.boundingbox[1]),parseFloat(r.boundingbox[3])]],raw:r}})},e}(rj);function oj(){const[t,e]=k.useState(1),n=Oc(),[i,r]=k.useState(),[o,l]=k.useState(),[c,h]=k.useState(),[f,m]=k.useState(),[_,v]=k.useState([]),[E,w]=k.useState(),[I,N]=k.useState(!1),[S,y]=k.useState(!1);k.useState();const[C,R]=k.useState(null),F=o_(T_,"spots/"+i);k.useEffect(()=>{Zs.onAuthStateChanged(W=>{W&&W.emailVerified?(N(!0),y(!0),V()):W&&!W.emailVerified?(N(!0),y(!1)):(N(!1),y(!1))})},[]);const j=()=>{e(t+1),document.getElementById("map2").style.height="0px"},H=()=>{e(t-1),document.getElementById("map2").style.height="50vh"},z=W=>{W.preventDefault();var se=["test"];function Ie(){const Ce=[];for(let Je=0;Je<C.length;Je++){const Ne=ap(hp,`images/${C[Je].name+vI()}`),He=l2(Ne,C[Je]).then(O=>u2(ap(hp,O.metadata.fullPath))).then(O=>{se[Je]=O});Ce.push(He)}Promise.all(Ce).then(()=>{lC(F,{uploadedImgURLs:se})}).catch(Je=>{console.error("Error uploading images:",Je)})}HM(F,{spotName:i,spotDescription:E,spotDescription:E,lat:o,long:c,spotAddress:f,uploadedImgURLs:[""]}).then(()=>{console.log("Spot added."),n("/")}),Ie()};function $(W){let se=[];for(let Ie=0;Ie<W.length;Ie++)se[Ie]=URL.createObjectURL(W[Ie]);v(se)}function V(){const W=L.map("map2").setView([43.747474670410156,-79.49417877197266],10);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:" OpenStreetMap"}).addTo(W);const se=new ft.Icon({iconUrl:"https://cdn2.iconfinder.com/data/icons/activity-5/50/1F6F9-skateboard-512.png",iconSize:[64,64]}),Ie=new ij({provider:new sj,style:"bar",showMarker:!1,marker:{icon:se,draggable:!1}});W.addControl(Ie);var Ce={clickable:!0,icon:se},Je=L.marker(new L.LatLng(0,0),Ce);Je.addTo(W),W.on("click",function(He){var O=He.latlng,G=O.lat,D=O.lng,J=new L.LatLng(G,D);Je.setLatLng(J),l(G),h(D),Ne(G,D)});function Ne(He,O){YB.get("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+He+"&lon="+O).then(G=>{console.log(G.data);let D=G.data.address;m((D.house_number?D.house_number+" ":"")+D.road+", "+D.city+", "+D.state+" "+D.postcode+", "+D.country)}).catch(G=>{console.log(G)})}W.on("geosearch/showlocation",function(He){var O=He.location.y,G=He.location.x;l(O),h(G);var D=new L.LatLng(O,G);Je.setLatLng(D),Ne(O,G)})}return x.jsxs(k.Fragment,{children:[x.jsx(nh,{}),I==!0?x.jsx("div",{children:S==!0?x.jsx("div",{}):x.jsx("p",{className:"verText",children:"Please verify your email!"})}):x.jsx("p",{className:"verText",children:"Please login to submit!"}),x.jsxs("div",{className:"map-container",children:[S==!0&&t==1?x.jsxs("div",{children:[x.jsx("h2",{id:"topText",children:"Add Your Own Skatespot!"}),x.jsx("p",{id:"text2",children:"Enter an address using the search bar, then drop a pin at the approximate location."})]}):x.jsx("div",{}),x.jsx("div",{id:"map2"}),S==!0&&t==1?x.jsxs("div",{children:[x.jsx("br",{}),x.jsxs("div",{children:[o!=null?x.jsx("div",{children:x.jsxs("p",{className:"fade-in selectText",children:["Your coordinates are ",o,", ",c]})}):x.jsx("div",{}),f!=null?x.jsxs("p",{className:"fade-in selectText",children:["The address of this location is ",f]}):x.jsx("div",{}),f!=null&&o!=null?x.jsx("div",{className:"fade-in",children:x.jsx("button",{id:"logButt",onClick:j,className:"buttons",children:"Next!"})}):x.jsx("div",{})]})]}):x.jsx("div",{})]}),t==2?x.jsx("div",{className:"bigahcontainer",children:x.jsx("div",{children:x.jsxs("div",{className:"container",children:[x.jsx("br",{}),x.jsxs("form",{onSubmit:z,children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"name",children:x.jsx("strong",{children:"Name"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"text",placeholder:"Enter Spot Name",autoComplete:"off",id:"name",accept:".png, .jpg, .jpeg, .webp, .mp4",onChange:W=>r(W.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"files",children:x.jsx("strong",{children:"Upload Images"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"file",placeholder:"Upload Images",autoComplete:"off",id:"image",multiple:!0,onChange:W=>{R(W.target.files),$(W.target.files)}}),_.length>0?x.jsx("div",{className:"filePreviewContainer",children:_.map((W,se)=>x.jsx("img",{id:"fileImage",src:_[se]},se))}):x.jsx("div",{})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"spotDescription",children:x.jsx("strong",{children:"Description"})}),x.jsx("br",{}),x.jsx("input",{className:"inputFields",type:"text",placeholder:"Enter a Description",autoComplete:"off",id:"spotDescription",onChange:W=>w(W.target.value)})]}),x.jsx("br",{}),x.jsx("button",{id:"logButt",type:"submit",className:"buttons",children:"Submit!"}),x.jsx("br",{}),x.jsx("button",{id:"backButt",onClick:H,className:"buttons",children:"Back"})]})]})})}):x.jsx("div",{})]})}function aj(){return x.jsx(Ab,{children:x.jsxs(Nb,{children:[x.jsx(ss,{exact:!0,path:"/",element:x.jsx(LU,{})}),x.jsx(ss,{exact:!0,path:"/register",element:x.jsx(Dz,{})}),x.jsx(ss,{exact:!0,path:"/login",element:x.jsx(Fz,{})}),x.jsx(ss,{exact:!0,path:"/test",element:x.jsx(NU,{})}),x.jsx(ss,{exact:!0,path:"/submit",element:x.jsx(oj,{})})]})})}Bd.createRoot(document.getElementById("root")).render(x.jsx(aj,{}));
